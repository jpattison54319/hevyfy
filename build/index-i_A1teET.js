import{i as st,g as at,a as nt,s as ot,G as rt,b as it,c as lt,d as ct,r as o,j as e,C as ke,T as S,B as te,P as Ie,S as De,e as Te,f as Le,I as le,h as W,D as ce,O as de,U as Be,k as dt,A as _t,l as ut,R as qe,m as ze,n as ht,o as xt,F as pt,p as _e,H as U,q as mt,L as gt,t as ft,X as yt,u as Ae,Y as jt,v as vt,w as St,x as pe,y as bt,z as Ct,M as wt,Z as kt,E as Nt,J as It,K as Tt,N as Lt,Q as Bt,V as Me,W as Pe,_ as At,$ as Fe,a0 as Y,a1 as $e,a2 as We,a3 as He,a4 as Mt,a5 as Pt,a6 as Ft,a7 as Rt,a8 as Ot,a9 as L,aa as E,ab as Et,ac as Dt,ad as Q,ae as Z,af as $,ag as qt,ah as zt,ai as $t,aj as Wt,ak as Ht,al as Gt,am as Ut,an as Vt,ao as Kt,ap as Re,aq as Xt,ar as Yt,as as me,at as ge,au as fe,av as Qt,aw as Ge,ax as Ue,ay as Ve,az as Ke,aA as Jt,aB as Zt,aC as es,aD as ts,aE as ye,aF as ss,aG as as,aH as ns,aI as os,aJ as rs,aK as is,aL as ls,aM as cs,aN as oe,aO as ds,aP as _s,aQ as re,aR as us,aS as hs,aT as xs}from"./vendor-Dcb-VGLc.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const ps={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Xe=st(ps);at(Xe);const ue=nt(Xe);ot(ue,it).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const ms=new rt;function gs(){lt(ue).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const D=ct.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),Ye=o.createContext(void 0),fs=({children:t})=>{const[a,r]=o.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),n=s=>{r(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(Ye.Provider,{value:{userData:a,setUserData:n},children:t})},H=()=>{const t=o.useContext(Ye);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=t,n=o.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:n}},ys=()=>{const{userData:t,setUserData:a}=H(),r=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[n,s]=o.useState(""),[i,p]=o.useState(null),[l,g]=o.useState(!1),[c,y]=o.useState(null),[f,B]=o.useState(null),[b,T]=o.useState(!1),P=async()=>{var d,v;if(n.trim()){g(!0),y(null),p(null);try{const{data:u}=await D.post("/chatnutrition",{message:n}),j=new Date().toISOString(),k=Intl.DateTimeFormat().resolvedOptions().timeZone,h={...u,description:n,userId:t==null?void 0:t.uid,fullTimeStamp:j,userTimeZone:k};console.log(h),B(h),T(!0)}catch(u){const j=u,k=(d=j.response)==null?void 0:d.data;((v=j.response)==null?void 0:v.status)===400?y((k==null?void 0:k.suggestion)||"Please describe a specific food item or meal"):y("Failed to get nutrition info. Try again.")}finally{g(!1)}}},O=async()=>{if(f){g(!0),y(null);try{const d=await D.post("/meal/addMeal",f),{mealAffects:v,updatedUser:u}=d.data;a(u);const j=[];v.currency&&j.push(`ðŸ¦´ This meal cost ${v.currency} bone${v.currency>1?"s":""}!`),v.armorIncrease&&j.push(`ðŸ›¡ï¸ +${v.armorIncrease.toFixed(1)} Armor from protein`),v.defenseIncrease&&j.push(`ðŸ§± +${v.defenseIncrease.toFixed(1)} Defense from fiber`),v.speedIncrease&&j.push(`ðŸ’¨ +${v.speedIncrease.toFixed(1)} Speed from hydration`),v.intelligenceIncrease&&j.push(`ðŸ§  +${v.intelligenceIncrease} Intelligence from fruits & vegetables`),j.length===0&&j.push("Seems like this meal didnt contain any sustenance!"),p(j.join(`
`))}catch{y("Failed to confirm meal. Try again.")}finally{g(!1),B(null),T(!1),s("")}}},C=()=>{B(null),T(!1),p(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:n,onChange:d=>s(d.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),b?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[r==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(f.calories/100)," ",r]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:O,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:l?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:l?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:C,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:l?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:P,disabled:l||!n.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:l||!n.trim()?"#332200":"#1a1100",color:l||!n.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l||!n.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:l||!n.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:l?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),c&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",c]})}),i&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:i})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},F=({symbol:t,label:a="",className:r="",style:n={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...n},children:t}),js={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},vs=({petType:t,selectedRpe:a,onChange:r})=>{const n=js[t],s=i=>{r(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:n.map(i=>e.jsxs(ke,{onClick:()=>s(i.rpe),style:{cursor:"pointer",border:a===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(F,{size:32,symbol:i.emoji}),e.jsx(S,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(S,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},Ss=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(F,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,Qe=o.createContext(void 0),Ne=()=>{const t=o.useContext(Qe);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let bs=0;const Cs=({children:t})=>{const[a,r]=o.useState([]),[n,s]=o.useState(null);o.useEffect(()=>{!n&&a.length>0&&(s(a[0]),r(l=>l.slice(1)))},[a,n]),o.useEffect(()=>{if(!n)return;const l=n.duration??3e3,g=setTimeout(()=>{s(null)},l);return()=>clearTimeout(g)},[n]);const i=o.useCallback(l=>{const g=++bs;r(c=>[...c,{id:g,...l}])},[]),p=o.useCallback(()=>{s(null)},[]);return e.jsxs(Qe.Provider,{value:{addToast:i,removeToast:p},children:[t,n&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:n.content},n.id)})]})},ws="_levelUpContainer_vq3kq_1",ks="_levelUpPulse_vq3kq_1",Ns="_shimmer_vq3kq_1",Is="_emoji_vq3kq_32",Ts="_bounce_vq3kq_1",Ls="_levelText_vq3kq_41",Bs="_levelNumber_vq3kq_54",As="_celebration_vq3kq_67",Ms="_fadeInUp_vq3kq_1",se={levelUpContainer:ws,levelUpPulse:ks,shimmer:Ns,emoji:Is,bounce:Ts,levelText:Ls,levelNumber:Bs,celebration:As,fadeInUp:Ms},Je=o.createContext(void 0),Ps=({children:t})=>{const[a,r]=o.useState(null),[n,s]=o.useState(void 0),i=({content:l,style:g})=>{r(l),s(g)},p=()=>{r(null),s(void 0)};return e.jsxs(Je.Provider,{value:{showSplash:i,hideSplash:p},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...n},onClick:p,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(te,{onClick:p,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Fs=()=>{const t=o.useContext(Je);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},Rs={1:.5,2:1,3:1.5,4:2.2},Os=({setDrawerView:t})=>{const{userData:a,setUserData:r}=H(),{addToast:n}=Ne(),{showSplash:s}=Fs(),[i,p]=o.useState(!1),[l,g]=o.useState("WEIGHTS"),[c,y]=o.useState("DURATION"),[f,B]=o.useState(""),[b,T]=o.useState(""),[P,O]=o.useState(""),[C,d]=o.useState(null),[v,u]=o.useState(""),j=["WEIGHTS","CARDIO","MOBILITY","SPORT"],k=["DURATION","DISTANCE"],[h,x]=o.useState(!1),I=Array.from({length:12},(w,V)=>V),A=Array.from({length:60},(w,V)=>V),[N,M]=o.useState({strength:0,agility:0,pet:0});console.log(b),console.log(C);function z(){const w=(Number(b)||0)*60+(Number(P)||0);console.log("totalDuration ",w);const V=Rs[C??2];let G=0;w>0?G=Math.round(w*10*V):Number(f)>0&&(G=Math.round(Number(f)*125*V)),console.log("totalXp ",G);let ae=0,ne=0;switch(l){case"WEIGHTS":ae=Math.round(G/100);break;case"CARDIO":ne=Math.round(G/100);break;case"MOBILITY":case"SPORT":const et=G/2/100,tt=G/2/100;ae=Math.round(et),ne=Math.round(tt);break}return console.log("final ",{strength:ae,agility:ne,pet:G}),{strength:ae,agility:ne,pet:G}}const K=j.includes(l)&&k.includes(c)&&(f!==""||b!==""||P!=="")&&C!==null;function X(){B(""),T(""),O(""),d(null),u(""),g("WEIGHTS"),y("DURATION")}const xe=async()=>{const w=z();if(M(w),!a||!a.uid){alert("User not loaded properly.");return}const V=c==="DURATION"?(Number(b)||0)*60+(Number(P)||0):0;try{const{data:G}=await D.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:l,cardioMode:c,duration:V,distance:c==="DISTANCE"&&Number(f)||0,rpe:C,notes:v,workoutXp:w});r(G.updatedUser),X(),n({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(F,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.pet," PET XP"]}),w.strength>0&&w.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]}):w.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{G.levelUp&&s({content:e.jsxs("div",{className:se.levelUpContainer,children:[e.jsx("div",{className:se.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:se.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:se.levelNumber,children:["LEVEL ",G.updatedUser.pet.level]}),e.jsx("div",{className:se.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(G){console.error(G),alert("There was an error logging your workout.")}};return i?e.jsx(Ie,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(De,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Ie,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(Ss,{open:h,onClose:()=>x(!1)}),e.jsx(S,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(Te,{value:l??"",onChange:w=>g(w.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:j.map(w=>e.jsx(Le,{value:w,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:w},w))}),l==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(Te,{value:c??"",onChange:w=>{y(w.currentTarget.value),B(""),T(""),O("")},style:{marginBottom:16},children:k.map(w=>e.jsx(Le,{value:w,appearance:w==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:w},w))})]}),c==="DISTANCE"&&l==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(le,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:f,onChange:w=>B(w.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(W,{direction:"row",gap:2,children:[e.jsx(ce,{value:b+" hr(s)",onSelectionChange:(w,V)=>T(V[0]??""),placeholder:"Hours",children:I.map(w=>e.jsxs(de,{value:String(w),children:[w," hr"]},w))}),e.jsx(ce,{value:P+" min(s)",onSelectionChange:(w,V)=>O(V[0]??""),placeholder:"Minutes",children:A.map(w=>e.jsxs(de,{value:String(w),children:[w<10?`0${w}`:w," min"]},w))})]})]}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(vs,{selectedRpe:C,onChange:w=>d(w),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:v,onChange:w=>u(w.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(te,{onClick:xe,disabled:!K,style:{opacity:K?1:.4,cursor:K?"pointer":"not-allowed",color:K?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:K?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Es="_backdrop_1mk9a_9",Ds="_drawer_1mk9a_17",qs="_drawer__header_1mk9a_34",zs="_drawer__headerContent_1mk9a_41",$s="_drawer__headerIcon_1mk9a_46",Ws="_drawer__title_1mk9a_49",Hs="_drawer__closeButton_1mk9a_55",Gs="_drawer__content_1mk9a_67",Us="_mealCard_1mk9a_73",Vs="_mealCard__header_1mk9a_85",Ks="_mealCard__info_1mk9a_91",Xs="_mealCard__title_1mk9a_94",Ys="_mealCard__timestamp_1mk9a_100",Qs="_mealCard__calories_1mk9a_105",Js="_mealCard__caloriesValue_1mk9a_108",Zs="_mealCard__caloriesLabel_1mk9a_115",ea="_mealCard__macros_1mk9a_119",ta="_mealCard__additionalStats_1mk9a_125",sa="_mealCard__statBoosts_1mk9a_131",aa="_mealCard__statBoostsTitle_1mk9a_135",na="_mealCard__statBoostsGrid_1mk9a_141",oa="_mealCard__currency_1mk9a_146",ra="_mealCard__currencyText_1mk9a_150",ia="_macroItem_1mk9a_156",la="_macroItem__value_1mk9a_162",ca="_macroItem__label_1mk9a_168",da="_additionalStat_1mk9a_182",_a="_additionalStat__icon_1mk9a_190",ua="_additionalStat__content_1mk9a_193",ha="_additionalStat__value_1mk9a_196",xa="_additionalStat__label_1mk9a_203",pa="_statBoost_1mk9a_212",ma="_statBoost__icon_1mk9a_221",ga="_statBoost__label_1mk9a_236",fa="_statBoost__value_1mk9a_239",ya="_loadingState_1mk9a_244",ja="_loadingState__content_1mk9a_248",va="_pulse_1mk9a_1",Sa="_loadingState__text_1mk9a_251",ba="_loadingState__subtext_1mk9a_255",Ca="_loadingMore_1mk9a_260",wa="_loadingMore__content_1mk9a_264",ka="_loadingMore__text_1mk9a_267",Na="_loadingMore__subtext_1mk9a_271",Ia="_emptyState_1mk9a_276",Ta="_emptyState__icon_1mk9a_280",La="_emptyState__text_1mk9a_284",Ba="_emptyState__subtext_1mk9a_288",Aa="_endOfList_1mk9a_293",Ma="_endOfList__text_1mk9a_298",Pa="_endOfList__subtext_1mk9a_303",Fa="_mealsList_1mk9a_308",Ra="_demoApp_1mk9a_314",Oa="_demoApp__container_1mk9a_319",Ea="_demoApp__title_1mk9a_323",Da="_demoApp__button_1mk9a_330",m={backdrop:Es,drawer:Ds,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:qs,drawer__headerContent:zs,drawer__headerIcon:$s,drawer__title:Ws,drawer__closeButton:Hs,drawer__content:Gs,mealCard:Us,mealCard__header:Vs,mealCard__info:Ks,mealCard__title:Xs,mealCard__timestamp:Ys,mealCard__calories:Qs,mealCard__caloriesValue:Js,mealCard__caloriesLabel:Zs,mealCard__macros:ea,mealCard__additionalStats:ta,mealCard__statBoosts:sa,mealCard__statBoostsTitle:aa,mealCard__statBoostsGrid:na,mealCard__currency:oa,mealCard__currencyText:ra,macroItem:ia,macroItem__value:la,macroItem__label:ca,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:da,additionalStat__icon:_a,additionalStat__content:ua,additionalStat__value:ha,additionalStat__label:xa,statBoost:pa,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:ma,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:ga,statBoost__value:fa,loadingState:ya,loadingState__content:ja,pulse:va,loadingState__text:Sa,loadingState__subtext:ba,loadingMore:Ca,loadingMore__content:wa,loadingMore__text:ka,loadingMore__subtext:Na,emptyState:Ia,emptyState__icon:Ta,emptyState__text:La,emptyState__subtext:Ba,endOfList:Aa,endOfList__text:Ma,endOfList__subtext:Pa,mealsList:Fa,demoApp:Ra,demoApp__container:Oa,demoApp__title:Ea,demoApp__button:Da},qa=()=>{const{userData:t}=H(),[a,r]=o.useState([]),[n,s]=o.useState(!1),[i,p]=o.useState(!1),[l,g]=o.useState(!0),[c,y]=o.useState(0),f=o.useRef(null),B=10,b=async(C=c,d=!1)=>{d?s(!0):p(!0);try{const u=(await D.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${B}&offset=${C}`)).data,j=u.meals||[];r(d?j:x=>[...x,...j]);const k=u.total||0,h=C+j.length;g(h<k),y(C+j.length)}catch(v){console.error("Error fetching meals:",v)}s(!1),p(!1)};o.useEffect(()=>{b(0,!0)},[]),o.useEffect(()=>{const C=()=>{const v=document.querySelector(".saltDrawer");if(!v)return;const{scrollTop:u,scrollHeight:j,clientHeight:k}=v;j-u<=k+100&&l&&!i&&b(c,!1)},d=document.querySelector(".saltDrawer");return d&&d.addEventListener("scroll",C),()=>{d&&d.removeEventListener("scroll",C)}},[c,l,i]);const T=C=>new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=({icon:C,label:d,value:v,color:u})=>e.jsxs("div",{className:`${m.statBoost} ${m[`statBoost--${u}`]}`,children:[e.jsx(C,{size:12,className:m.statBoost__icon}),e.jsx("span",{className:m.statBoost__label,children:d}),e.jsxs("span",{className:m.statBoost__value,children:["+",v]})]}),O=({meal:C})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:m.mealCard,children:[e.jsxs("div",{className:m.mealCard__header,children:[e.jsxs("div",{className:m.mealCard__info,children:[e.jsx("h3",{className:m.mealCard__title,children:C.description}),e.jsx("p",{className:m.mealCard__timestamp,children:T(C.timestamp)})]}),e.jsxs("div",{className:m.mealCard__calories,children:[e.jsx("div",{className:m.mealCard__caloriesValue,children:C.calories}),e.jsx("div",{className:m.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:m.mealCard__macros,children:[e.jsxs("div",{className:`${m.macroItem} ${m["macroItem--protein"]}`,children:[e.jsxs("div",{className:m.macroItem__value,children:[C.protein,"g"]}),e.jsx("div",{className:m.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${m.macroItem} ${m["macroItem--carbs"]}`,children:[e.jsxs("div",{className:m.macroItem__value,children:[C.carbs,"g"]}),e.jsx("div",{className:m.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${m.macroItem} ${m["macroItem--fat"]}`,children:[e.jsxs("div",{className:m.macroItem__value,children:[C.fat,"g"]}),e.jsx("div",{className:m.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:m.mealCard__additionalStats,children:[e.jsxs("div",{className:m.additionalStat,children:[e.jsx(dt,{size:16,className:m.additionalStat__icon}),e.jsxs("div",{className:m.additionalStat__content,children:[e.jsxs("div",{className:m.additionalStat__value,children:[C.fluid_intake_ml,"ml"]}),e.jsx("div",{className:m.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:m.additionalStat,children:[e.jsx(_t,{size:16,className:m.additionalStat__icon}),e.jsxs("div",{className:m.additionalStat__content,children:[e.jsx("div",{className:m.additionalStat__value,children:C.servings_of_fruits_vegetables}),e.jsx("div",{className:m.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:m.mealCard__statBoosts,children:[e.jsx("div",{className:m.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:m.mealCard__statBoostsGrid,children:[C.mealAffects.armorIncrease>0&&e.jsx(P,{icon:ut,label:"ARM",value:C.mealAffects.armorIncrease,color:"blue"}),C.mealAffects.speedIncrease>0&&e.jsx(P,{icon:qe,label:"SPD",value:C.mealAffects.speedIncrease,color:"yellow"}),C.mealAffects.intelligenceIncrease>0&&e.jsx(P,{icon:ze,label:"INT",value:C.mealAffects.intelligenceIncrease,color:"pink"}),C.mealAffects.defenseIncrease>0&&e.jsx(P,{icon:ht,label:"DEF",value:C.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:m.mealCard__currency,children:e.jsxs("span",{className:m.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(xt,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(pt,{size:15,style:{verticalAlign:"middle"}})})," "+C.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m.drawer__header,children:e.jsxs("div",{className:m.drawer__headerContent,children:[e.jsx(Be,{className:m.drawer__headerIcon,size:32}),e.jsx("h2",{className:m.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:f,children:n?e.jsx("div",{className:m.loadingState,children:e.jsxs("div",{className:m.loadingState__content,children:[e.jsx("div",{className:m.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:m.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:m.emptyState,children:[e.jsx(Be,{className:m.emptyState__icon,size:48}),e.jsx("div",{className:m.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:m.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:m.mealsList,children:[a.map((C,d)=>e.jsx(O,{meal:C},`${C.id}-${d}`)),i&&e.jsx("div",{className:m.loadingMore,children:e.jsxs("div",{className:m.loadingMore__content,children:[e.jsx("div",{className:m.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:m.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!l&&a.length>0&&e.jsxs("div",{className:m.endOfList,children:[e.jsx("div",{className:m.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:m.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},za="_container_1chaz_4",$a="_heading_1chaz_10",Wa="_rangeButtons_1chaz_16",Ha="_button_1chaz_23",Ga="_activeButton_1chaz_37",Ua="_checkmarkPath_1chaz_53",ee={container:za,heading:$a,rangeButtons:Wa,button:Ha,activeButton:Ga,checkmarkPath:Ua,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Va=({onWeightChange:t})=>{var l,g;const{userData:a}=H(),r=()=>{var y,f;const c=(y=a==null?void 0:a.bodyStats)==null?void 0:y.weightLogs;if(Array.isArray(c)&&c.length>0){const B=[...c].sort((b,T)=>new Date(b.date).getTime()-new Date(T.date).getTime());return B[B.length-1].weight}return((f=a==null?void 0:a.bodyStats)==null?void 0:f.weight)??150},[n,s]=o.useState(r());o.useEffect(()=>{s(r())},[(l=a==null?void 0:a.bodyStats)==null?void 0:l.weightLogs,(g=a==null?void 0:a.bodyStats)==null?void 0:g.weight]);const i=c=>{const y=parseFloat((n+c).toFixed(1));y>=0&&s(y)},p=()=>{t(n)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(_e,{id:"current-weight",type:"number",step:.1,value:n,onChange:c=>{const y=parseFloat(c.target.value);!isNaN(y)&&y>=0?s(y):c.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(U,{onClick:()=>i(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(U,{onClick:()=>i(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(U,{onClick:p,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Ka={week:7,month:30,threeMonths:90,all:1/0},Xa=t=>t<=7?0:t<=30?4:t<=90?15:30,Ya=()=>{const[t,a]=o.useState(!1),{userData:r}=H(),[n,s]=o.useState("week"),[i,p]=o.useState([]),[l,g]=o.useState(!0);o.useEffect(()=>{(t||l)&&D.get(`/weightLogs/${r==null?void 0:r.uid}`).then(b=>{p(b.data.weightLogs)}).catch(b=>{console.log(b)}),g(!1)},[t]);const c=[...i].sort((b,T)=>new Date(b.date).getTime()-new Date(T.date).getTime()).map(b=>({date:typeof b.date=="string"?b.date.slice(0,10):b.date instanceof Date?b.date.toISOString().slice(0,10):"",weight:b.weight})),y=n==="all"?c:c.slice(-Ka[n]),f=Xa(y.length),B=async b=>{if(!r)return;const T={date:new Date().toISOString(),weight:b,userId:r.uid};try{const{data:P}=await D.post("weightLogs/addWeightLog",T);a(!0),setTimeout(()=>a(!1),1500)}catch(P){console.error(P)}};return e.jsxs("div",{className:ee.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:ee.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:ee.heading,children:"Log Your Weight"}),e.jsx("div",{className:ee.rangeButtons,children:["week","month","threeMonths","all"].map(b=>e.jsx(U,{className:n===b?ee.activeButton:ee.button,onClick:()=>s(b),children:b==="week"?"1W":b==="month"?"1M":b==="threeMonths"?"3M":"ALL"},b))}),e.jsx(mt,{width:"100%",height:300,children:e.jsxs(gt,{data:y,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(ft,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(yt,{dataKey:"date",tickFormatter:b=>{const T=new Date(b);return isNaN(T.getTime())?"":Ae(T,"MM/dd")},stroke:"#ff9900",interval:f,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(jt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(vt,{labelFormatter:b=>Ae(new Date(b),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(St,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Va,{onWeightChange:B})})]})},Qa="_drawer__header_1hvqx_2",Ja="_drawer__headerContent_1hvqx_24",Za="_drawer__headerIcon_1hvqx_32",en="_drawer__title_1hvqx_46",tn="_drawer__content_1hvqx_56",sn="_loadingState_1hvqx_77",an="_emptyState_1hvqx_78",nn="_loadingState__content_1hvqx_90",on="_emptyState__content_1hvqx_91",rn="_loadingState__spinner_1hvqx_98",ln="_loadingState__text_1hvqx_115",cn="_emptyState__text_1hvqx_116",dn="_loadingState__subtext_1hvqx_125",_n="_emptyState__subtext_1hvqx_126",un="_emptyState__icon_1hvqx_135",hn="_workoutsList_1hvqx_143",xn="_workoutCard_1hvqx_150",pn="_workoutCard__border_1hvqx_186",mn="_workoutCard__header_1hvqx_197",gn="_workoutCard__info_1hvqx_206",fn="_workoutCard__title_1hvqx_210",yn="_workoutCard__timestamp_1hvqx_217",jn="_workoutCard__timestampIcon_1hvqx_229",vn="_workoutCard__xp_1hvqx_233",Sn="_workoutCard__xpValue_1hvqx_244",bn="_workoutCard__xpLabel_1hvqx_251",Cn="_workoutCard__stats_1hvqx_256",wn="_statItem_1hvqx_263",kn="_statItem__value_1hvqx_304",Nn="_statItem__label_1hvqx_311",In="_workoutCard__sectionTitle_1hvqx_317",Tn="_workoutCard__manualStats_1hvqx_333",Ln="_workoutCard__manualGrid_1hvqx_337",Bn="_manualStat_1hvqx_343",An="_manualStat__icon_1hvqx_354",Mn="_manualStat__content_1hvqx_359",Pn="_manualStat__value_1hvqx_365",Fn="_manualStat__label_1hvqx_373",Rn="_workoutCard__exercises_1hvqx_379",On="_workoutCard__exercisesList_1hvqx_383",En="_exerciseItem_1hvqx_389",Dn="_exerciseItem__name_1hvqx_407",qn="_exerciseItem__sets_1hvqx_414",zn="_exerciseItem__set_1hvqx_414",$n="_exerciseItem__notes_1hvqx_430",Wn="_workoutCard__statBoosts_1hvqx_439",Hn="_workoutCard__statBoostsGrid_1hvqx_449",Gn="_statBoost_1hvqx_455",Un="_statBoost__icon_1hvqx_496",Vn="_statBoost__label_1hvqx_500",Kn="_statBoost__value_1hvqx_504",Xn="_workoutCard__notes_1hvqx_509",Yn="_workoutCard__notesText_1hvqx_514",Qn="_loadingMore_1hvqx_524",Jn="_endOfList_1hvqx_525",Zn="_loadingMore__content_1hvqx_539",eo="_loadingMore__spinner_1hvqx_545",to="_loadingMore__text_1hvqx_553",so="_loadingMore__subtext_1hvqx_561",ao="_endOfList__content_1hvqx_575",no="_endOfList__text_1hvqx_581",oo="_endOfList__subtext_1hvqx_589",_={drawer__header:Qa,drawer__headerContent:Ja,drawer__headerIcon:Za,"pulse-glow":"_pulse-glow_1hvqx_1",drawer__title:en,drawer__content:tn,loadingState:sn,emptyState:an,loadingState__content:nn,emptyState__content:on,loadingState__spinner:rn,"pixel-spin":"_pixel-spin_1hvqx_1",loadingState__text:ln,emptyState__text:cn,loadingState__subtext:dn,emptyState__subtext:_n,emptyState__icon:un,workoutsList:hn,workoutCard:xn,"scan-line":"_scan-line_1hvqx_1",workoutCard__border:pn,workoutCard__header:mn,workoutCard__info:gn,workoutCard__title:fn,workoutCard__timestamp:yn,workoutCard__timestampIcon:jn,workoutCard__xp:vn,workoutCard__xpValue:Sn,workoutCard__xpLabel:bn,workoutCard__stats:Cn,statItem:wn,"statItem--type":"_statItem--type_1hvqx_286","statItem--logtype":"_statItem--logtype_1hvqx_292","statItem--rpe":"_statItem--rpe_1hvqx_298",statItem__value:kn,statItem__label:Nn,workoutCard__sectionTitle:In,workoutCard__manualStats:Tn,workoutCard__manualGrid:Ln,manualStat:Bn,manualStat__icon:An,manualStat__content:Mn,manualStat__value:Pn,manualStat__label:Fn,workoutCard__exercises:Rn,workoutCard__exercisesList:On,exerciseItem:En,exerciseItem__name:Dn,exerciseItem__sets:qn,exerciseItem__set:zn,exerciseItem__notes:$n,workoutCard__statBoosts:Wn,workoutCard__statBoostsGrid:Hn,statBoost:Gn,"statBoost--red":"_statBoost--red_1hvqx_478","statBoost--yellow":"_statBoost--yellow_1hvqx_484","statBoost--pink":"_statBoost--pink_1hvqx_490",statBoost__icon:Un,statBoost__label:Vn,statBoost__value:Kn,workoutCard__notes:Xn,workoutCard__notesText:Yn,loadingMore:Qn,endOfList:Jn,loadingMore__content:Zn,loadingMore__spinner:eo,loadingMore__text:to,loadingMore__subtext:so,endOfList__content:ao,endOfList__text:no,endOfList__subtext:oo},ro=()=>{const{userData:t}=H(),[a,r]=o.useState([]),[n,s]=o.useState(!1),[i,p]=o.useState(!1),[l,g]=o.useState(!0),[c,y]=o.useState(0),f=o.useRef(null),B=10,b=async(d=c,v=!1)=>{v?s(!0):p(!0);try{const j=(await D.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${B}&offset=${d}`)).data,k=j.workouts||[];r(v?k:I=>[...I,...k]);const h=j.total||0,x=d+k.length;g(x<h),y(d+k.length)}catch(u){console.error("Error fetching workouts:",u)}s(!1),p(!1)};o.useEffect(()=>{b(0,!0)},[]),o.useEffect(()=>{const d=()=>{const u=document.querySelector(".saltDrawer");if(!u)return;const{scrollTop:j,scrollHeight:k,clientHeight:h}=u;k-j<=h+100&&l&&!i&&b(c,!1)},v=document.querySelector(".saltDrawer");return v&&v.addEventListener("scroll",d),()=>{v&&v.removeEventListener("scroll",d)}},[c,l,i]);const T=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=d=>{const v=Math.floor(d/60),u=d%60;return v>0?`${v}h ${u}m`:`${u}m`},O=({icon:d,label:v,value:u,color:j})=>e.jsxs("div",{className:`${_.statBoost} ${_[`statBoost--${j}`]}`,children:[e.jsx(d,{size:17,className:_.statBoost__icon}),e.jsx("span",{className:_.statBoost__label,children:v}),e.jsxs("span",{className:_.statBoost__value,children:["+",u]})]}),C=({workout:d})=>{var k;const v=d.logType==="manual",u=d.logType==="routine",j=d.workoutXp.pet;return e.jsxs("div",{className:_.workoutCard,children:[e.jsx("div",{className:_.workoutCard__border}),e.jsxs("div",{className:_.workoutCard__header,children:[e.jsxs("div",{className:_.workoutCard__info,children:[e.jsx("h3",{className:_.workoutCard__title,children:u?`${d.routineDay} ROUTINE`:`${(k=d==null?void 0:d.workoutType)==null?void 0:k.toUpperCase()} SESSION`}),e.jsxs("p",{className:_.workoutCard__timestamp,children:[e.jsx(bt,{size:12,className:_.workoutCard__timestampIcon}),T(d.timestamp)]})]}),e.jsxs("div",{className:_.workoutCard__xp,children:[e.jsx("div",{className:_.workoutCard__xpValue,children:j}),e.jsx("div",{className:_.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:_.workoutCard__stats,children:d.rpe&&e.jsxs("div",{className:`${_.statItem} ${_["statItem--rpe"]}`,children:[e.jsxs("div",{className:_.statItem__value,children:[d.rpe,"/4"]}),e.jsx("div",{className:_.statItem__label,children:"RPE"})]})}),v&&e.jsx("div",{className:_.workoutCard__manualStats,children:e.jsxs("div",{className:_.workoutCard__manualGrid,children:[d.duration&&e.jsxs("div",{className:_.manualStat,children:[e.jsx(Ct,{size:25,className:_.manualStat__icon}),e.jsxs("div",{className:_.manualStat__content,children:[e.jsx("div",{className:_.manualStat__value,children:P(d.duration)}),e.jsx("div",{className:_.manualStat__label,children:"DURATION"})]})]}),d.distance!=0&&e.jsxs("div",{className:_.manualStat,children:[e.jsx(wt,{size:16,className:_.manualStat__icon}),e.jsxs("div",{className:_.manualStat__content,children:[e.jsxs("div",{className:_.manualStat__value,children:[d.distance," KM"]}),e.jsx("div",{className:_.manualStat__label,children:"DISTANCE"})]})]})]})}),u&&d.performedExercises&&d.performedExercises.length>0&&e.jsxs("div",{className:_.workoutCard__exercises,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(pe,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:_.workoutCard__exercisesList,children:d.performedExercises.map((h,x)=>e.jsxs("div",{className:_.exerciseItem,children:[e.jsx("div",{className:_.exerciseItem__name,children:h.name.toUpperCase()}),e.jsx("div",{className:_.exerciseItem__sets,children:h.sets.map((I,A)=>e.jsxs("span",{className:_.exerciseItem__set,children:[I.weight,"KG Ã— ",I.reps]},A))}),h.notes&&e.jsxs("div",{className:_.exerciseItem__notes,children:['"',h.notes,'"']})]},x))})]}),e.jsxs("div",{className:_.workoutCard__statBoosts,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(kt,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:_.workoutCard__statBoostsGrid,children:[d.workoutXp.strength>0&&e.jsx(O,{icon:Nt,label:"STR",value:d.workoutXp.strength,color:"red"}),d.workoutXp.agility>0&&e.jsx(O,{icon:qe,label:"AGI",value:d.workoutXp.agility,color:"yellow"})]})]}),d.notes&&e.jsxs("div",{className:_.workoutCard__notes,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(ze,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:_.workoutCard__notesText,children:['"',d.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.drawer__header,children:e.jsxs("div",{className:_.drawer__headerContent,children:[e.jsx(pe,{className:_.drawer__headerIcon,size:32}),e.jsx("h2",{className:_.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:_.drawer__content,ref:f,children:n?e.jsx("div",{className:_.loadingState,children:e.jsxs("div",{className:_.loadingState__content,children:[e.jsx("div",{className:_.loadingState__spinner}),e.jsx("div",{className:_.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:_.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:_.emptyState,children:e.jsxs("div",{className:_.emptyState__content,children:[e.jsx(pe,{className:_.emptyState__icon,size:48}),e.jsx("div",{className:_.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:_.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:_.workoutsList,children:[a.map((d,v)=>e.jsx(C,{workout:d},`${d._id}-${v}`)),i&&e.jsx("div",{className:_.loadingMore,children:e.jsxs("div",{className:_.loadingMore__content,children:[e.jsx("div",{className:_.loadingMore__spinner}),e.jsx("div",{className:_.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:_.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!l&&a.length>0&&e.jsx("div",{className:_.endOfList,children:e.jsxs("div",{className:_.endOfList__content,children:[e.jsx("div",{className:_.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:_.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})},io="_container_1f2in_2",lo="_heading_1f2in_9",co="_optionButton_1f2in_14",_o="_integrationSection_1f2in_28",uo="_label_1f2in_47",ho="_input_1f2in_53",xo="_saveButton_1f2in_63",J={container:io,heading:lo,optionButton:co,integrationSection:_o,label:uo,input:ho,saveButton:xo};function po(){const[t,a]=o.useState(!1),[r,n]=o.useState(""),{userData:s}=H(),{addToast:i}=Ne();function p(){console.log("saving key"),D.post("/users/hevy/saveKey",{hevyKey:r,uid:s==null?void 0:s.uid}).then(l=>{console.log(l)}).catch(l=>{console.error(l)})}return e.jsxs("div",{className:J.container,children:[e.jsx("h2",{className:J.heading,children:"User Settings"}),e.jsx(U,{className:J.optionButton,onClick:()=>a(l=>!l),children:"Hevy Integration"}),t&&e.jsxs("div",{className:J.integrationSection,children:[e.jsx("h3",{children:"Connect to Hevy"}),e.jsx("p",{style:{color:"red"},children:"Prerequestie: Must be a Hevy Pro member!"}),e.jsx("p",{children:"Integrate your Hevy account to automatically sync workouts logged there into this app to help your pet evolve!"}),e.jsx("p",{children:"To get your API key, go to the Hevy.com, log in, click 'settings', click 'Developer', generate and copy your API key. Paste below!"}),e.jsx("label",{className:J.label,htmlFor:"hevyKey",children:"Hevy API Key"}),e.jsx(_e,{id:"hevyKey",type:"text",className:J.input,placeholder:"Enter your API key",value:r,onChange:l=>n(l.target.value)}),e.jsx(U,{className:J.saveButton,onClick:()=>p(),children:"Integrate with Hevy!"})]})]})}o.forwardRef(function({onClick:a,to:r,...n},s){const i=It(r),p=Tt(r);return e.jsx(Lt,{...n,href:i,onClick:l=>{a==null||a(l),l.defaultPrevented||p(l)},ref:s})});const mo=["Pet","Skills","Quests","Routines"],go=({selectedIndex:t,setSelectedIndex:a})=>{const[r,n]=o.useState("none"),{pathname:s}=Bt();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Me,{children:[e.jsx(Pe,{children:e.jsx(U,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(At,{"aria-hidden":!0})})}),e.jsxs(Fe,{children:[e.jsx(Y,{onClick:()=>n("logWeight"),children:"Log Weight"}),e.jsx(Y,{onClick:()=>n("logFood"),children:"Log Food"}),e.jsx(Y,{onClick:()=>n("logWorkout"),children:"Log Workout"})]})]})}),e.jsx($e,{selectedIndex:t,onChange:a,children:e.jsx(We,{className:"tab-nav",children:mo.map((i,p)=>e.jsx(He,{className:({selected:l})=>`tab-button ${l?"tab-selected":""}`,children:i},i))})}),e.jsx("div",{children:e.jsx(Mt,{placement:"top",content:"User Settings",children:e.jsxs(Me,{children:[e.jsx(Pe,{children:e.jsx(U,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Pt,{"aria-hidden":!0})})}),e.jsxs(Fe,{children:[e.jsx(Y,{onClick:()=>n("mealHist"),children:"View Meals"}),e.jsx(Y,{onClick:()=>n("workoutHist"),children:"View Workouts"}),e.jsx(Y,{onClick:()=>n("settings"),children:"Settings"}),e.jsx(Y,{onClick:gs,children:"Logout"})]})]})})}),e.jsxs(Ft,{open:r!=="none",onOpenChange:()=>n("none"),position:"bottom",children:[e.jsx(Rt,{onClick:()=>n("none")}),r==="logFood"&&e.jsx(ys,{}),r==="logWorkout"&&e.jsx(Os,{setDrawerView:n}),r==="mealHist"&&e.jsx(qa,{}),r==="workoutHist"&&e.jsx(ro,{}),r==="logWeight"&&e.jsx(Ya,{}),r==="settings"&&e.jsx(po,{})]})]})},fo="_myBackground_1pm88_1",yo="_loginScreen_1pm88_13",jo="_overlay_1pm88_29",vo="_loginContainer_1pm88_39",So="_googleButton_1pm88_49",je={myBackground:fo,loginScreen:yo,overlay:jo,loginContainer:vo,googleButton:So};function bo(){const{setUserData:t}=H(),[a,r]=o.useState(!1),n=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const i=await(await Ot(ue,ms)).user.getIdToken(),{data:p}=await D.post("/auth/google",{token:i}),g=(await D.get(`/users/${p.uid}`)).data;t(g),console.log("User saved or retrieved from DB:",p)}catch(s){console.error(s)}r(!0)};return e.jsx("div",{className:je.loginScreen,children:e.jsx("div",{className:je.loginContainer,children:a?e.jsx(De,{size:"large","aria-label":"loading",role:"status"}):e.jsx(te,{className:je.googleButton,onClick:n,children:"Embark with Google"})})})}const Co=()=>{const{userData:t,setUserData:a}=H();if(!t)return e.jsx(S,{children:"Loading..."});const[r,n]=o.useState(0),[s,i]=o.useState(t),[p,l]=o.useState(1),[g,c]=o.useState(1.2),[y,f]=o.useState(0),[B,b]=o.useState(Math.floor(s.bodyStats.height/12)),[T,P]=o.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(S,{children:"Loading..."});o.useEffect(()=>{const h=B*12+T;console.log("total inches : ",h),i(x=>({...x,bodyStats:{...x.bodyStats,height:h}}))},[B,T]);const O=h=>{const{weight:x,height:I,age:A,sex:N}=h;return N==="male"?10*(x/2.205)+6.25*(I*2.54)-5*A+5:10*(x/2.205)+6.25*(I*2.54)-5*A-161},C=h=>{const x=g+y;return h*x},d=async h=>{h.preventDefault();const x=s.bodyStats.weight,I={userId:t.uid,date:new Date,weight:x},A=O(s.bodyStats),N=C(A),M=s.goal.goalType==="weight_loss"?N-p*3500/7:s.goal.goalType==="muscle_gain"?N+300:N,z=Math.round(M/100),K={...s,bodyStats:{...s.bodyStats,bmr:A,tdee:N,weight:x},goal:{...s.goal,dailyCalorieGoal:M,dailyCurrencyTotal:z,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",K);try{const{data:X}=await D.post("/users/update",{...K});a(X)}catch(X){console.error("Error updating user data:",X)}try{await D.post("/weightLogs/addWeightLog",I)}catch(X){console.error(X)}},v=(h,x,I)=>{const{name:A,value:N}=h.target;i({...s,[x]:{...s[x],[I||A]:N}})},u=(h,x,I)=>{i({...s,[h]:{...s[h],[x]:I}})},j=()=>{if(r===0){const{weight:h,height:x,age:I,sex:A}=s.bodyStats;return h>0&&x>0&&I>0&&["male","female"].includes(A)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(r===2){const{name:h,currentPet:x}=s.pet;return h.trim()!==""&&["puppy","kitten","bird"].includes(x)}return!0},k=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(L,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(E,{grow:1,children:e.jsxs(W,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(E,{children:e.jsx(S,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(E,{children:e.jsx(Et,{children:k.map((h,x)=>e.jsx(Dt,{label:h,stage:r===x?"active":x<r?"completed":"pending"},x))})}),e.jsxs("form",{onSubmit:d,children:[r===0&&e.jsxs(W,{align:"stretch",gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Body Stats"}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Weight (lbs)"}),e.jsx(le,{value:s.bodyStats.weight===0?"":s.bodyStats.weight,onChange:h=>v(h,"bodyStats","weight")})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(ce,{value:B.toString()+" ft",onSelectionChange:(h,x)=>b(Number(x)),children:[2,3,4,5,6,7,8,9].map(h=>e.jsxs(de,{value:h.toString(),children:[h," ft"]},h))}),e.jsx(ce,{value:T.toString()+" in",onSelectionChange:(h,x)=>P(Number(x)),children:Array.from({length:12},(h,x)=>e.jsxs(de,{value:x.toString(),children:[x," in"]},x))})]})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Sex"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(L,{direction:"column",align:"center",gap:1,children:[e.jsx(F,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(S,{children:"Male"})]})})}),e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(L,{direction:"column",align:"center",gap:1,children:[e.jsx(F,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(S,{children:"Female"})]})})})]})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Age (years)"}),e.jsx(le,{value:s.bodyStats.age===0?"":s.bodyStats.age,onChange:h=>v(h,"bodyStats","age")})]})]}),r===1&&e.jsxs(W,{gap:2,children:[e.jsx(S,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(E,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"ðŸ”¥",size:24}),e.jsx(S,{children:"Weight Loss"})]})})})}),e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(E,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(S,{children:"Muscle Gain"})]})})})}),e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(E,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"ðŸ› ï¸",size:24}),e.jsx(S,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(Q,{children:[e.jsx(S,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(qt,{max:2,min:.5,step:.25,value:p,onChange:(h,x)=>l(x),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(W,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(L,{direction:"column",gap:1,children:[e.jsx($,{onClick:()=>c(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ’»",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx($,{onClick:()=>c(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx($,{onClick:()=>c(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx($,{onClick:()=>c(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(W,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(L,{direction:"column",gap:1,children:[e.jsx($,{onClick:()=>f(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx($,{onClick:()=>f(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx($,{onClick:()=>f(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx($,{onClick:()=>f(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx($,{onClick:()=>f(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"ðŸ’ª",size:30}),e.jsxs(W,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Extremely Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(W,{gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Pet Name"}),e.jsx(le,{value:s.pet.name,onChange:h=>v(h,"pet","name")})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:"Pet Type"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(E,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"ðŸ¶",size:24}),e.jsx(S,{children:"Dog"})]})})})}),e.jsx(E,{grow:1,children:e.jsx($,{onClick:()=>u("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(E,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"ðŸ±",size:24}),e.jsx(S,{children:"Cat"})]})})})})]})]})]}),e.jsx(E,{style:{paddingTop:"20px"},children:e.jsxs(L,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(te,{sentiment:"neutral",appearance:"solid",onClick:()=>n(r-1),children:"Previous"}),r<k.length-1&&e.jsx(te,{sentiment:"accented",appearance:"solid",disabled:!j(),onClick:()=>n(r+1),children:"Next"}),r===k.length-1&&e.jsx(te,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!j(),onClick:d,children:"Start Your Adventure!"})]})})]})]})})})},wo="_homePage_santw_1",ko="_homePageTitle_santw_6",No="_statusSection_santw_24",Io="_levelText_santw_29",To="_xpBarWrapper_santw_35",Lo="_xpBarFill_santw_44",Bo="_pixelBorder_santw_50",Oe={homePage:wo,homePageTitle:ko,"card-links":"_card-links_santw_10","card-image":"_card-image_santw_19",statusSection:No,levelText:Io,xpBarWrapper:To,xpBarFill:Lo,pixelBorder:Bo},Ao="_xpBarWrapper_sqxxw_1",Mo="_xpBarFill_sqxxw_12",Po="_pixelGlow_sqxxw_1",Fo="_xpText_sqxxw_33",Ro="_levelText_sqxxw_59",ie={xpBarWrapper:Ao,xpBarFill:Mo,pixelGlow:Po,xpText:Fo,levelText:Ro};function Oo(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function ve(t,a){const r=Oo(a);return{progress:Math.min(Math.max(t/r*100,0),100),xpNeeded:r}}const Eo=({currentXp:t,level:a})=>{const[r,n]=o.useState(()=>ve(t,a).progress),s=o.useRef(t),{xpNeeded:i}=ve(t,a);return o.useEffect(()=>{const p=ve(t,a).progress,l=s.current;t>l,n(p),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(S,{className:ie.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:ie.xpBarWrapper,children:[e.jsx("div",{className:ie.xpBarFill,style:{width:`${r}%`}}),e.jsxs(S,{className:ie.xpText,styleAs:"label",children:[" ",t," / ",i]})]})]})},Do=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:n?0:1}})},qo=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:n?0:1}})},zo=({count:t,consumedCurrency:a,userArchetype:r})=>{const n=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[n," / ",t," ",r==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,i)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(Do,{consumed:a[i]??!1}):e.jsx(qo,{consumed:a[i]??!1})},i))})]})},Ee=()=>{var y,f;const{userData:t}=H(),[a,r]=o.useState(0),[n,s]=o.useState([]),i=o.useRef(null),p={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"},l=((y=t==null?void 0:t.pet)==null?void 0:y.currentPet)??"puppy",g=o.useMemo(()=>p[l],[l]),c=o.useMemo(()=>l==="kitten",[l]);return o.useEffect(()=>{var d,v,u;const B=Intl.DateTimeFormat().resolvedOptions().timeZone,b=new Date().toLocaleDateString("sv-SE",{timeZone:B}),T=((d=t==null?void 0:t.goal)==null?void 0:d.dailyCurrencyTotal)??0,P=((u=(v=t==null?void 0:t.goal)==null?void 0:v.dailyCurrencyUsed)==null?void 0:u[b])??0,O=T-P;r(O);const C=Array(T).fill(!1).map((j,k)=>k>=O);s(C)},[t]),console.log("Model Path:",g),console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(L,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(E,{align:"center",style:{flexShrink:0},children:e.jsx(S,{styleAs:"h1",className:Oe.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(E,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(zo,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((f=t==null?void 0:t.goal)==null?void 0:f.dailyCurrencyTotal)??0,consumedCurrency:n})}),e.jsx(E,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:e.jsxs(zt,{resize:{polyfill:ResizeObserver},camera:{position:[2,0,4],fov:100},gl:B=>{const b=new Wt({canvas:B,alpha:!0});return b.setClearColor("#87ceeb",1),b},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(Wo,{modelPath:g,isKitten:c}),e.jsx($t,{ref:i,maxPolarAngle:Math.PI/1.5,minDistance:3,maxDistance:10})]})})}),e.jsx(E,{className:Oe.statusSection,style:{flexShrink:0},children:e.jsx(Eo,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},$o=({modelRef:t})=>{const{camera:a,controls:r}=Vt();return o.useEffect(()=>{if(!t.current)return;const n=new Kt().setFromObject(t.current),s=n.getSize(new Re),i=n.getCenter(new Re);if("fov"in a){const p=a,l=p.fov*Math.PI/180,c=Math.max(s.x,s.y,s.z)/(2*Math.tan(l/2)),y=Math.max(c*2,5);p.position.set(i.x+y*.6,i.y+y*.6,i.z+y*.6),p.lookAt(i);const f=r;f!=null&&f.target&&typeof f.update=="function"&&(f.target.copy(i),f.update())}},[t,a,r]),null};function Wo({modelPath:t,isKitten:a}){const[r,n,s,i]=Ht(["/assets/grass/AmbientOcclusion.jpg","/assets/grass/Color.jpg","/assets/grass/NormalGL.jpg","/assets/grass/Roughness.jpg"]);console.log(a);const p=Gt(t),l=o.useMemo(()=>p.scene.clone(),[p.scene]),g=o.useRef(null);return e.jsxs(o.Suspense,{fallback:null,children:[e.jsx("primitive",{ref:g,object:l,scale:.8,position:[0,-3.5,0],rotation:a?[0,Math.PI,0]:[0,0,0]}),e.jsx($o,{modelRef:g}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-3.5,0],receiveShadow:!0,children:[e.jsx("planeGeometry",{args:[100,100]}),e.jsx("meshStandardMaterial",{map:n,normalMap:s,roughnessMap:i,aoMap:r,side:Ut})]})]})}const Ho=({content:t})=>{const[a,r]=o.useState(null),n=p=>{r(p.currentTarget)},s=()=>{r(null)},i=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:n,style:{cursor:"pointer",marginLeft:4},children:e.jsx(F,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(Xt,{open:i,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Go=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],Uo=()=>{const{userData:t}=H();if(!t)return null;const{pet:a}=t;return e.jsxs(L,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(L,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(F,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(S,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Go.map(r=>e.jsx(ke,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(L,{justify:"space-between",align:"center",children:[e.jsxs(L,{align:"center",gap:1,children:[e.jsx(F,{symbol:r.emoji,size:20}),e.jsx(S,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(Ho,{content:r.description})]}),e.jsxs(S,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},Se=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],be=({name:t,description:a,progress:r})=>e.jsxs(ke,{style:{width:"100%"},children:[e.jsx(S,{styleAs:"h4",children:t}),e.jsx(S,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Qt,{value:r}),e.jsxs(S,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),Vo=()=>{const t=Se.filter(n=>n.status==="inProgress"),a=Se.filter(n=>n.status==="notStarted"),r=Se.filter(n=>n.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(S,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Yt,{children:[e.jsxs(me,{value:"",children:[e.jsx(ge,{children:"In Progress"}),e.jsx(fe,{children:e.jsx(L,{direction:"column",gap:2,children:t.map(n=>e.jsx(be,{...n},n.name))})})]}),e.jsxs(me,{value:"",children:[e.jsx(ge,{children:"Not Started"}),e.jsx(fe,{children:e.jsx(L,{direction:"column",gap:2,children:a.map(n=>e.jsx(be,{...n},n.name))})})]}),e.jsxs(me,{value:"",children:[e.jsx(ge,{children:"Completed"}),e.jsx(fe,{children:e.jsx(L,{direction:"column",gap:2,children:r.map(n=>e.jsx(be,{...n},n.name))})})]})]})]})},Ko="_container_132oe_1",Xo="_tabList_132oe_11",Yo="_tabButton_132oe_18",Qo="_routineCreatedText_132oe_34",Jo="_active_132oe_39",Zo="_borderGlow_132oe_1",er="_form_132oe_55",tr="_heroSection_132oe_105",sr="_heroList_132oe_112",ar="_hero_132oe_105",nr="_selected_132oe_143",or="_disclosureButton_132oe_156",rr="_chevron_132oe_174",ir="_rotate_132oe_179",lr="_equipmentSection_132oe_183",cr="_equipmentList_132oe_191",dr="_equipment_132oe_183",q={container:Ko,tabList:Xo,tabButton:Yo,routineCreatedText:Qo,active:Jo,borderGlow:Zo,form:er,heroSection:tr,heroList:sr,hero:ar,selected:nr,disclosureButton:or,chevron:rr,rotate:ir,equipmentSection:lr,equipmentList:cr,equipment:dr},_r="_puppySpinner_qnb89_1",ur="_loadingText_qnb89_9",hr="_puppy_qnb89_1",xr="_run_qnb89_1",pr="_treadmillBelt_qnb89_19",Ce={puppySpinner:_r,loadingText:ur,puppy:hr,run:xr,treadmillBelt:pr,"belt-move":"_belt-move_qnb89_1"};function he({scale:t=1}){const a=150*t;return e.jsxs("div",{className:Ce.puppySpinner,style:{width:`${a}px`,height:`${a}px`},children:[e.jsx("div",{className:Ce.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:Ce.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const mr=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],gr=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function fr(){const{userData:t}=H(),[a,r]=o.useState("Max Muscle"),[n,s]=o.useState(""),[i,p]=o.useState("beginner"),[l,g]=o.useState(3),[c,y]=o.useState([]),[f,B]=o.useState(""),[b,T]=o.useState(""),[P,O]=o.useState(""),[C,d]=o.useState(""),[v,u]=o.useState(15),[j,k]=o.useState(!1),[h,x]=o.useState(!1),{addToast:I}=Ne(),A=N=>{N.preventDefault(),k(!0);const M={goal:a,sport:a==="Sport Specific"?n:null,experience:i,days:l,equipment:c.join(", "),include:f,exclude:b,considerations:P,sessionDurationMinutes:v,petCoach:C,userId:t==null?void 0:t.uid};D.post("/workout/routine/createRoutine",M,{timeout:5e4}).then(z=>{console.log("Routine Created:",z.data),x(!0),setTimeout(()=>{x(!1)},3e3)}).catch(z=>{console.error(z)}).finally(()=>k(!1))};return h?e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:"0 12px",display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:22,textAlign:"center",padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(F,{size:32,symbol:"âšâ–ˆâ•â•â–ˆâš"}),e.jsx("div",{className:q.routineCreatedText,children:"Routine Created!"}),e.jsx("div",{className:q.routineCreatedText,children:'Check it out in "My Routines"!'})]})}):j?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(he,{scale:2})}):e.jsxs("form",{className:q.form,onSubmit:A,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:a,onChange:N=>r(N.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),a==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:n,onChange:N=>s(N.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:i,onChange:N=>p(N.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:l,onChange:N=>g(Number(N.target.value)),children:[...Array(7)].map((N,M)=>e.jsxs("option",{value:M+1,children:[M+1," ",M===0?"day":"days"]},M+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:v,onChange:N=>u(Number(N.target.value)),children:[...Array(12)].map((N,M)=>{const z=(M+1)*15,K=Math.floor(z/60),X=z%60,xe=K>0?`${K}h${X>0?` ${X}m`:""}`:`${X} minutes`;return e.jsx("option",{value:z,children:xe},z)})})]}),e.jsxs("div",{className:q.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:q.equipmentList,children:gr.map(N=>e.jsx(U,{type:"button",onClick:()=>y(M=>M.includes(N)?M.filter(z=>z!==N):[...M,N]),className:`${q.equipment} ${c.includes(N)?q.selected:""}`,children:N},N))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:f,onChange:N=>B(N.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:b,onChange:N=>T(N.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:P,onChange:N=>O(N.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(Ge,{children:({open:N})=>e.jsxs("div",{className:q.heroSection,children:[e.jsxs(Ue,{className:q.disclosureButton,children:["Let one of our XPets train you!",e.jsx(Ve,{className:`${q.chevron} ${N?q.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(Ke,{className:q.heroList,children:mr.map(M=>e.jsx(U,{type:"button",onClick:()=>d(M.name),className:`${q.hero} ${C===M.name?q.selected:""}`,style:{borderColor:typeof M.color=="string"&&M.color.includes("linear")?void 0:M.color,borderImage:M.color.includes("linear")?M.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:M.name},M.name))})]})}),e.jsx(U,{type:"submit",children:"Generate Routine"})]})}function Ze({routine:t,setRoutines:a,menuOptions:r,onStartWorkout:n}){const{userData:s}=H();if(!t||t.length===0)return null;const i=g=>{console.log("Delete",g),D.delete(`/routines/delete/${g}`).then(()=>{a(c=>c==null?void 0:c.filter(y=>y._id!==g))}).catch(c=>{console.error("Failed to delete routine: ",c)})},p=g=>{D.post(`/routines/share/${g._id}`).then(()=>{console.log("Routine shared to community.")}).catch(c=>{console.error("Failed to share routine: ",c)})},l=g=>{D.post(`/routines/copy/${g._id}`,{userId:s==null?void 0:s.uid}).then(c=>{console.log("Copied routine:",c.data.routine),a==null||a(y=>[...y||[],c.data.routine])}).catch(c=>{console.error("Failed to copy routine:",c)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((g,c)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(Ge,{children:({open:y})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(Ue,{className:"accordion-trigger",children:[e.jsx(Ve,{size:32,className:`chevron ${y?"open":""}`}),e.jsx("span",{className:"routine-title",children:g.routineName})]}),e.jsxs(Jt,{as:"div",className:"menu-wrapper",children:[e.jsx(Zt,{className:"menu-button",onClick:f=>f.stopPropagation(),children:e.jsx(es,{size:20})}),e.jsxs(ts,{className:"menu-dropdown",children:[r.includes("Share")&&e.jsx(ye,{children:e.jsx(U,{onClick:()=>p(g),className:"menu-item",children:"Share"})}),r.includes("Delete")&&e.jsx(ye,{children:e.jsx(U,{onClick:()=>i(g._id),className:"menu-item",children:"Delete"})}),r.includes("Copy")&&e.jsx(ye,{children:e.jsx(U,{onClick:()=>l(g),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(Ke,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:g.weeklySchedule.map((f,B)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:f.dayName}),e.jsx("div",{className:"day-exercises",children:f.exercises.map(b=>b.exercise).join(", ")}),f.exercises.length>0&&e.jsx(U,{className:"start-button",onClick:()=>n!==void 0?n(f):void 0,children:"START WORKOUT"})]},f.dayName+B))})})]})})},g.routineName+c))})}const yr="_fullScreenWrapper_117p9_2",jr="_timer_117p9_18",vr="_deckContainer_117p9_28",Sr="_card_117p9_39",br="_exerciseTitle_117p9_56",Cr="_repRange_117p9_64",wr="_setGrid_117p9_72",kr="_setRow_117p9_80",Nr="_setLabel_117p9_85",Ir="_inputLabel_117p9_93",Tr="_checkboxLabel_117p9_94",Lr="_compactInput_117p9_99",Br="_setHeaderRow_117p9_124",Ar="_finishButton_117p9_151",Mr="_setCheckbox_117p9_170",Pr="_checked_117p9_192",Fr="_cardSuitTop_117p9_197",Rr="_cardSuitBottom_117p9_198",R={fullScreenWrapper:yr,timer:jr,deckContainer:vr,card:Sr,exerciseTitle:br,repRange:Cr,setGrid:wr,setRow:kr,setLabel:Nr,inputLabel:Ir,checkboxLabel:Tr,compactInput:Lr,setHeaderRow:Br,finishButton:Ar,setCheckbox:Mr,checked:Pr,cardSuitTop:Fr,cardSuitBottom:Rr},Or=({startTime:t})=>{const[a,r]=o.useState(0);o.useEffect(()=>{const s=setInterval(()=>{r(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(s)},[t]);const n=s=>{const i=Math.floor(s/60),p=s%60;return`${String(i).padStart(2,"0")}:${String(p).padStart(2,"0")}`};return e.jsx("div",{style:{fontSize:"1.5rem"},children:n(a)})},Er=({exercises:t,onFinish:a})=>{const[r]=o.useState(Date.now()),[n,s]=o.useState(t.map((u,j)=>({...u,cardId:`${u.exercise}-${j}`}))),[i,p]=o.useState(0),[l,g]=o.useState(0),[c,y]=o.useState(null),[f,B]=o.useState(.4),b=(u,j)=>{const h=Math.abs(u)/1e3,x=Math.abs(j)/300;return Math.max(.2,Math.min(.6,.4-h*.15+x*.1))},T=(u,j)=>{const k=O()[0];if(k){const h=b(u,j);B(h),y(k.cardId),setTimeout(()=>{s(x=>{const[I,...A]=x;return[...A,I]}),g(x=>x+1),y(null)},h*1e3)}},P=(u,j,k,h)=>{s(x=>x.map(A=>{if(A.cardId===u){const N=A.sets.map((M,z)=>z===j?{...M,[k]:h}:M);return{...A,sets:N}}return A}))},O=()=>{const u=n.length;if(u===0)return[];const j=l%u,k=[];for(let h=0;h<3;h++){const x=(j+h)%u;n[x]&&k.push({...n[x],displayIndex:h,originalIndex:x})}return k},C=[e.jsx(os,{size:32,color:"#ff4d4d"}),e.jsx(rs,{size:32,color:"#ff4d4d"}),e.jsx(is,{size:32,color:"#ff4d4d"}),e.jsx(ls,{size:32,color:"#ff4d4d"})],v=(()=>{const u=Math.floor(Math.random()*C.length);return C[u]})();return e.jsxs("div",{className:R.fullScreenWrapper,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",fontSize:"19px",gap:"16px",alignItems:"center"},children:[e.jsx("div",{children:t[0].dayName}),e.jsx("div",{className:R.timer,children:e.jsx(Or,{startTime:r})})]}),e.jsx("div",{className:R.deckContainer,children:e.jsx(ss,{initial:!1,children:O().map((u,j)=>{const k=j===0,h=u.cardId===c;return e.jsxs(as.div,{className:R.card,initial:{x:0,y:j*20,zIndex:100-j},animate:{x:0,scale:1-j*.02,y:j*20,zIndex:100-j},exit:{y:-400,opacity:0,zIndex:100-j,transition:{duration:f,ease:"easeOut"}},transition:{duration:.3},drag:k&&!h?"y":!1,dragElastic:.2,whileTap:{scale:.98},dragConstraints:{top:-400,bottom:0},onDragEnd:(x,I)=>{I.offset.y<-100&&!h&&T(I.velocity.y,I.offset.y)},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("span",{className:R.cardSuitTop,children:v})}),e.jsx("div",{className:R.exerciseTitle,children:u.exercise}),e.jsxs("div",{className:R.repRange,children:["Target: ",u.repRange," reps"]})]}),e.jsxs("div",{className:R.setGrid,children:[e.jsxs("div",{className:R.setHeaderRow,children:[e.jsx("span",{className:R.setLabel,children:"Set"}),e.jsx("span",{className:R.inputLabel,children:"Weight"}),e.jsx("span",{className:R.inputLabel,children:"Reps"}),e.jsx("span",{className:R.checkboxLabel,children:"âœ”"})]}),u.sets.map((x,I)=>e.jsxs("div",{className:R.setRow,children:[e.jsx("span",{className:R.setLabel,children:I+1}),e.jsx(_e,{type:"number",value:x.weight===0?"":x.weight,placeholder:"Weight",className:R.compactInput,onChange:A=>P(u.cardId,I,"weight",Number(A.target.value))}),e.jsx(_e,{type:"number",value:x.reps===0?"":x.reps,placeholder:"Reps",className:R.compactInput,onChange:A=>P(u.cardId,I,"reps",Number(A.target.value))}),e.jsx(ns,{checked:x.completed??!1,onChange:A=>{P(u.cardId,I,"completed",A)},className:({checked:A})=>`${R.setCheckbox} ${A?R.checked:""}`,children:e.jsx("span",{"aria-hidden":"true",children:x.completed?"âœ”":""})})]},I)),e.jsx("span",{className:R.cardSuitBottom,children:v})]})]},`${u.cardId}-cycle-${l}-${j}`)})})}),e.jsx("button",{className:R.finishButton,onClick:()=>a({duration:i,exercises:n}),children:"Finish Workout"})]})};function Dr(){const[t,a]=o.useState(),[r,n]=o.useState(!0),{userData:s}=H(),[i,p]=o.useState(null),l=c=>{const y=c.exercises.map(f=>({dayName:c.dayName,exercise:f.exercise,repRange:f.repRange,sets:Array(Number(f.sets)).fill({weight:0,reps:0})}));p(y)},g=c=>{console.log("Workout complete:",c),p(null)};return o.useEffect(()=>{D.get(`/routines?uid=${s==null?void 0:s.uid}`).then(c=>{a(c.data.routines)}).catch(c=>{console.error(c)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(he,{scale:2})}):e.jsxs("div",{style:{display:"flex",width:"100%"},children:[i&&e.jsx(Er,{exercises:i,onFinish:g}),e.jsx(Ze,{routine:t,setRoutines:a,menuOptions:["Share","Delete"],onStartWorkout:l})]})}function qr(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(he,{scale:2})})}function zr(){const[t,a]=o.useState(),[r,n]=o.useState(!0);return H(),o.useEffect(()=>{D.get("/routines?communityRoutine=true").then(s=>{a(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(he,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Ze,{routine:t,setRoutines:a,menuOptions:["Copy"]})})}function $r(){return e.jsx("div",{className:q.container,children:e.jsxs($e,{children:[e.jsx(We,{className:q.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(He,{className:({selected:a})=>`${q.tabButton} ${a?q.active:""}`,children:t},t))}),e.jsxs(cs,{children:[e.jsx(oe,{children:e.jsx(Dr,{})}),e.jsx(oe,{children:e.jsx(fr,{})}),e.jsx(oe,{children:e.jsx(qr,{})}),e.jsx(oe,{children:e.jsx(zr,{})})]})]})})}const Wr="_prompt_1kskd_1",Hr="_fadeInUp_1kskd_1",Gr="_text_1kskd_21",Ur="_shareIcon_1kskd_26",Vr="_dismiss_1kskd_31",we={prompt:Wr,fadeInUp:Hr,text:Gr,shareIcon:Ur,dismiss:Vr},Kr=()=>/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),Xr=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;function Yr(){const[t,a]=o.useState(!1);o.useEffect(()=>{const n=localStorage.getItem("pwaPromptSeen");Kr()&&!Xr()&&!n&&a(!0)},[]);const r=()=>{a(!1),localStorage.setItem("pwaPromptSeen","true")};return t?e.jsxs("div",{className:we.prompt,children:[e.jsxs("div",{className:we.text,children:[e.jsx("strong",{children:"XPets is best when used as an app!"}),e.jsx("br",{}),e.jsx("strong",{children:"Install XPets: HealthQuest"}),e.jsx("br",{}),"On Safari, tap the â€œShareâ€ button (square with arrow â†‘) then â€œAdd to Home Screenâ€ to install the app."]}),e.jsx("button",{className:we.dismiss,onClick:r,children:"âœ•"})]}):null}const Qr=["Pet","Skills","Quests","Routines"];function Jr(){const[t,a]=o.useState(null),[r,n]=o.useState(!0),{userData:s,setUserData:i}=H(),[p,l]=o.useState(0),g=c=>{switch(Qr[c]){case"Pet":return e.jsx(Ee,{});case"Skills":return e.jsx(Uo,{});case"Quests":return e.jsx(Vo,{});case"Routines":return e.jsx($r,{});default:return e.jsx(Ee,{})}};return o.useEffect(()=>{const c=ds.throttle(()=>{console.log("Fetching user object..."),D.get(`/users/${s==null?void 0:s.uid}`).then(f=>{i(f.data),console.log("User data synced:",f.data)}).catch(f=>{console.error("Failed to fetch user:",f)})},1e4),y=()=>{console.log("User came back!"),c()};return s&&window.addEventListener("focus",y),()=>{s&&(window.removeEventListener("focus",y),c.cancel())}},[]),o.useEffect(()=>{const c=_s(ue,y=>{console.log("Auth state changed:",y),console.log("User Data in App useEffect:",s),a(y),n(!1);const f=localStorage.getItem("userData");f&&i(JSON.parse(f))});return()=>c()},[]),console.log("App render - Loading:",r,"User:",t,"UserData:",s),r?e.jsx(re,{mode:"dark",children:e.jsx("div",{children:"Loading in app.tsx..."})}):!t||!s?e.jsx(re,{mode:"dark",children:e.jsx(bo,{})}):s.bodyStats.weight===0?e.jsx(re,{mode:"dark",children:e.jsx(Co,{})}):e.jsxs(re,{mode:"dark",children:[e.jsx(Yr,{}),e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"env(safe-area-inset-top) env(safe-area-inset-right) 0 env(safe-area-inset-left)"}}),e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",minHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",height:"calc(100dvh - 76px - env(safe-area-inset-bottom))",display:"flex",flexDirection:"column",paddingBottom:"14px",overflow:"hidden"},children:g(p)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,minHeight:"76px"},children:e.jsx(go,{selectedIndex:p,setSelectedIndex:l})})]})]})}us.createRoot(document.getElementById("root")).render(e.jsx(hs.StrictMode,{children:e.jsx(xs,{children:e.jsx(fs,{children:e.jsx(Cs,{children:e.jsx(Ps,{children:e.jsx(Jr,{})})})})})}));
