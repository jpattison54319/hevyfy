function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{i as st,g as at,a as nt,s as ot,G as rt,b as it,c as lt,d as ct,r,j as e,C as Ce,T as S,B as ee,P as ke,S as Oe,e as Ne,f as Ie,I as ie,h as $,D as le,O as ce,U as Te,k as dt,A as ut,l as _t,R as De,m as qe,n as ht,o as xt,F as pt,p as we,H,q as mt,L as gt,t as ft,X as jt,u as Le,Y as yt,v as vt,w as St,x as he,y as bt,z as wt,M as Ct,Z as kt,E as Nt,J as It,K as Tt,N as Lt,Q as Bt,V as Be,W as Ae,_ as At,$ as Me,a0 as Q,a1 as ze,a2 as We,a3 as $e,a4 as Mt,a5 as Pt,a6 as Ft,a7 as Et,a8 as Rt,a9 as L,aa as O,ab as Ot,ac as Dt,ad as K,ae as J,af as W,ag as qt,ah as zt,ai as Wt,aj as $t,ak as Ut,al as Gt,am as Ht,an as Vt,ao as Xt,ap as Pe,aq as Yt,ar as Kt,as as xe,at as pe,au as me,av as Qt,aw as Ue,ax as Ge,ay as He,az as Ve,aA as Jt,aB as Zt,aC as es,aD as ts,aE as ge,aF as ss,aG as as,aH as ns,aI as os,aJ as rs,aK as is,aL as ls,aM as cs,aN as ne,aO as ds,aP as us,aQ as oe,aR as _s,aS as hs,aT as xs}from"./vendor-Dcb-VGLc.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const ps={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Xe=st(ps);at(Xe);const de=nt(Xe);ot(de,it).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const ms=new rt;function gs(){lt(de).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const q=ct.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),Ye=r.createContext(void 0),fs=({children:t})=>{const[a,o]=r.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),n=s=>{o(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(Ye.Provider,{value:{userData:a,setUserData:n},children:t})},G=()=>{const t=r.useContext(Ye);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:o}=t,n=r.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:o,dailyCurrency:n}},js=()=>{const{userData:t,setUserData:a}=G(),o=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[n,s]=r.useState(""),[i,d]=r.useState(null),[l,h]=r.useState(!1),[c,f]=r.useState(null),[u,B]=r.useState(null),[b,T]=r.useState(!1),P=async()=>{var _,v;if(n.trim()){h(!0),f(null),d(null);try{const{data:p}=await q.post("/chatnutrition",{message:n}),y=new Date().toISOString(),k=Intl.DateTimeFormat().resolvedOptions().timeZone,m={...p,description:n,userId:t==null?void 0:t.uid,fullTimeStamp:y,userTimeZone:k};console.log(m),B(m),T(!0)}catch(p){const y=p,k=(_=y.response)==null?void 0:_.data;((v=y.response)==null?void 0:v.status)===400?f((k==null?void 0:k.suggestion)||"Please describe a specific food item or meal"):f("Failed to get nutrition info. Try again.")}finally{h(!1)}}},R=async()=>{if(u){h(!0),f(null);try{const _=await q.post("/meal/addMeal",u),{mealAffects:v,updatedUser:p}=_.data;a(p);const y=[];v.currency&&y.push(`🦴 This meal cost ${v.currency} bone${v.currency>1?"s":""}!`),v.armorIncrease&&y.push(`🛡️ +${v.armorIncrease.toFixed(1)} Armor from protein`),v.defenseIncrease&&y.push(`🧱 +${v.defenseIncrease.toFixed(1)} Defense from fiber`),v.speedIncrease&&y.push(`💨 +${v.speedIncrease.toFixed(1)} Speed from hydration`),v.intelligenceIncrease&&y.push(`🧠 +${v.intelligenceIncrease} Intelligence from fruits & vegetables`),y.length===0&&y.push("Seems like this meal didnt contain any sustenance!"),d(y.join(`
`))}catch{f("Failed to confirm meal. Try again.")}finally{h(!1),B(null),T(!1),s("")}}},w=()=>{B(null),T(!1),d(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"🍎 FOOD LOGGER v2.0 🍎"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:n,onChange:_=>s(_.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),b?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[o==="bones"?"🦴":"🐟"," COST: ",Math.round(u.calories/100)," ",o]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:R,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:l?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:l?"PROCESSING...":"✓ CONFIRM"}),e.jsx("button",{onClick:w,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:l?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"✗ CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:P,disabled:l||!n.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:l||!n.trim()?"#332200":"#1a1100",color:l||!n.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l||!n.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:l||!n.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:l?"⚡ ANALYZING...":"🚀 ANALYZE FOOD"})}),c&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["⚠️ ERROR: ",c]})}),i&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:i})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINE™"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},F=({symbol:t,label:a="",className:o="",style:n={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:o,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...n},children:t}),ys={puppy:[{rpe:1,emoji:"🐾",text:"Sniffed around the park"},{rpe:2,emoji:"🐕",text:"Chased tail"},{rpe:3,emoji:"🐺",text:"Chased squirrel"},{rpe:4,emoji:"🔥🐺",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"💤",text:"Big stretch under a tree"},{rpe:2,emoji:"🐱",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"🐯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"🔥🐯",text:"Celestial lion battle in the astral jungle"}]},vs=({petType:t,selectedRpe:a,onChange:o})=>{const n=ys[t],s=i=>{o(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:n.map(i=>e.jsxs(Ce,{onClick:()=>s(i.rpe),style:{cursor:"pointer",border:a===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(F,{size:32,symbol:i.emoji}),e.jsx(S,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(S,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},Ss=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(F,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained ⚡ | Pet stronger 🐾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"✖"})]}):null,Ke=r.createContext(void 0),Qe=()=>{const t=r.useContext(Ke);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let bs=0;const ws=({children:t})=>{const[a,o]=r.useState([]),[n,s]=r.useState(null);r.useEffect(()=>{!n&&a.length>0&&(s(a[0]),o(l=>l.slice(1)))},[a,n]),r.useEffect(()=>{if(!n)return;const l=n.duration??3e3,h=setTimeout(()=>{s(null)},l);return()=>clearTimeout(h)},[n]);const i=r.useCallback(l=>{const h=++bs;o(c=>[...c,{id:h,...l}])},[]),d=r.useCallback(()=>{s(null)},[]);return e.jsxs(Ke.Provider,{value:{addToast:i,removeToast:d},children:[t,n&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:n.content},n.id)})]})},Cs="_levelUpContainer_vq3kq_1",ks="_levelUpPulse_vq3kq_1",Ns="_shimmer_vq3kq_1",Is="_emoji_vq3kq_32",Ts="_bounce_vq3kq_1",Ls="_levelText_vq3kq_41",Bs="_levelNumber_vq3kq_54",As="_celebration_vq3kq_67",Ms="_fadeInUp_vq3kq_1",te={levelUpContainer:Cs,levelUpPulse:ks,shimmer:Ns,emoji:Is,bounce:Ts,levelText:Ls,levelNumber:Bs,celebration:As,fadeInUp:Ms},Je=r.createContext(void 0),Ps=({children:t})=>{const[a,o]=r.useState(null),[n,s]=r.useState(void 0),i=({content:l,style:h})=>{o(l),s(h)},d=()=>{o(null),s(void 0)};return e.jsxs(Je.Provider,{value:{showSplash:i,hideSplash:d},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...n},onClick:d,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(ee,{onClick:d,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Fs=()=>{const t=r.useContext(Je);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},Es={1:.5,2:1,3:1.5,4:2.2},Rs=({setDrawerView:t})=>{const{userData:a,setUserData:o}=G(),{addToast:n}=Qe(),{showSplash:s}=Fs(),[i,d]=r.useState(!1),[l,h]=r.useState("WEIGHTS"),[c,f]=r.useState("DURATION"),[u,B]=r.useState(""),[b,T]=r.useState(""),[P,R]=r.useState(""),[w,_]=r.useState(null),[v,p]=r.useState(""),y=["WEIGHTS","CARDIO","MOBILITY","SPORT"],k=["DURATION","DISTANCE"],[m,g]=r.useState(!1),I=Array.from({length:12},(C,V)=>V),A=Array.from({length:60},(C,V)=>V),[N,M]=r.useState({strength:0,agility:0,pet:0});console.log(b),console.log(w);function z(){const C=(Number(b)||0)*60+(Number(P)||0);console.log("totalDuration ",C);const V=Es[w??2];let U=0;C>0?U=Math.round(C*10*V):Number(u)>0&&(U=Math.round(Number(u)*125*V)),console.log("totalXp ",U);let se=0,ae=0;switch(l){case"WEIGHTS":se=Math.round(U/100);break;case"CARDIO":ae=Math.round(U/100);break;case"MOBILITY":case"SPORT":const et=U/2/100,tt=U/2/100;se=Math.round(et),ae=Math.round(tt);break}return console.log("final ",{strength:se,agility:ae,pet:U}),{strength:se,agility:ae,pet:U}}const X=y.includes(l)&&k.includes(c)&&(u!==""||b!==""||P!=="")&&w!==null;function Y(){B(""),T(""),R(""),_(null),p(""),h("WEIGHTS"),f("DURATION")}const _e=async()=>{const C=z();if(M(C),!a||!a.uid){alert("User not loaded properly.");return}const V=c==="DURATION"?(Number(b)||0)*60+(Number(P)||0):0;try{const{data:U}=await q.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:l,cardioMode:c,duration:V,distance:c==="DISTANCE"&&Number(u)||0,rpe:w,notes:v,workoutXp:C});o(U.updatedUser),Y(),n({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(F,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",C.pet," PET XP"]}),C.strength>0&&C.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",C.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",C.agility," AGILITY"]})]}):C.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",C.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",C.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{U.levelUp&&s({content:e.jsxs("div",{className:te.levelUpContainer,children:[e.jsx("div",{className:te.emoji,children:"🎉✨🎊✨🎉"}),e.jsx("div",{className:te.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:te.levelNumber,children:["LEVEL ",U.updatedUser.pet.level]}),e.jsx("div",{className:te.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(U){console.error(U),alert("There was an error logging your workout.")}};return i?e.jsx(ke,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(Oe,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(ke,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(Ss,{open:m,onClose:()=>g(!1)}),e.jsx(S,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(Ne,{value:l??"",onChange:C=>h(C.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:y.map(C=>e.jsx(Ie,{value:C,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:C},C))}),l==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(Ne,{value:c??"",onChange:C=>{f(C.currentTarget.value),B(""),T(""),R("")},style:{marginBottom:16},children:k.map(C=>e.jsx(Ie,{value:C,appearance:C==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:C},C))})]}),c==="DISTANCE"&&l==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(ie,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:u,onChange:C=>B(C.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs($,{direction:"row",gap:2,children:[e.jsx(le,{value:b+" hr(s)",onSelectionChange:(C,V)=>T(V[0]??""),placeholder:"Hours",children:I.map(C=>e.jsxs(ce,{value:String(C),children:[C," hr"]},C))}),e.jsx(le,{value:P+" min(s)",onSelectionChange:(C,V)=>R(V[0]??""),placeholder:"Minutes",children:A.map(C=>e.jsxs(ce,{value:String(C),children:[C<10?`0${C}`:C," min"]},C))})]})]}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(vs,{selectedRpe:w,onChange:C=>_(C),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:v,onChange:C=>p(C.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(ee,{onClick:_e,disabled:!X,style:{opacity:X?1:.4,cursor:X?"pointer":"not-allowed",color:X?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:X?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Os="_backdrop_1mk9a_9",Ds="_drawer_1mk9a_17",qs="_drawer__header_1mk9a_34",zs="_drawer__headerContent_1mk9a_41",Ws="_drawer__headerIcon_1mk9a_46",$s="_drawer__title_1mk9a_49",Us="_drawer__closeButton_1mk9a_55",Gs="_drawer__content_1mk9a_67",Hs="_mealCard_1mk9a_73",Vs="_mealCard__header_1mk9a_85",Xs="_mealCard__info_1mk9a_91",Ys="_mealCard__title_1mk9a_94",Ks="_mealCard__timestamp_1mk9a_100",Qs="_mealCard__calories_1mk9a_105",Js="_mealCard__caloriesValue_1mk9a_108",Zs="_mealCard__caloriesLabel_1mk9a_115",ea="_mealCard__macros_1mk9a_119",ta="_mealCard__additionalStats_1mk9a_125",sa="_mealCard__statBoosts_1mk9a_131",aa="_mealCard__statBoostsTitle_1mk9a_135",na="_mealCard__statBoostsGrid_1mk9a_141",oa="_mealCard__currency_1mk9a_146",ra="_mealCard__currencyText_1mk9a_150",ia="_macroItem_1mk9a_156",la="_macroItem__value_1mk9a_162",ca="_macroItem__label_1mk9a_168",da="_additionalStat_1mk9a_182",ua="_additionalStat__icon_1mk9a_190",_a="_additionalStat__content_1mk9a_193",ha="_additionalStat__value_1mk9a_196",xa="_additionalStat__label_1mk9a_203",pa="_statBoost_1mk9a_212",ma="_statBoost__icon_1mk9a_221",ga="_statBoost__label_1mk9a_236",fa="_statBoost__value_1mk9a_239",ja="_loadingState_1mk9a_244",ya="_loadingState__content_1mk9a_248",va="_pulse_1mk9a_1",Sa="_loadingState__text_1mk9a_251",ba="_loadingState__subtext_1mk9a_255",wa="_loadingMore_1mk9a_260",Ca="_loadingMore__content_1mk9a_264",ka="_loadingMore__text_1mk9a_267",Na="_loadingMore__subtext_1mk9a_271",Ia="_emptyState_1mk9a_276",Ta="_emptyState__icon_1mk9a_280",La="_emptyState__text_1mk9a_284",Ba="_emptyState__subtext_1mk9a_288",Aa="_endOfList_1mk9a_293",Ma="_endOfList__text_1mk9a_298",Pa="_endOfList__subtext_1mk9a_303",Fa="_mealsList_1mk9a_308",Ea="_demoApp_1mk9a_314",Ra="_demoApp__container_1mk9a_319",Oa="_demoApp__title_1mk9a_323",Da="_demoApp__button_1mk9a_330",j={backdrop:Os,drawer:Ds,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:qs,drawer__headerContent:zs,drawer__headerIcon:Ws,drawer__title:$s,drawer__closeButton:Us,drawer__content:Gs,mealCard:Hs,mealCard__header:Vs,mealCard__info:Xs,mealCard__title:Ys,mealCard__timestamp:Ks,mealCard__calories:Qs,mealCard__caloriesValue:Js,mealCard__caloriesLabel:Zs,mealCard__macros:ea,mealCard__additionalStats:ta,mealCard__statBoosts:sa,mealCard__statBoostsTitle:aa,mealCard__statBoostsGrid:na,mealCard__currency:oa,mealCard__currencyText:ra,macroItem:ia,macroItem__value:la,macroItem__label:ca,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:da,additionalStat__icon:ua,additionalStat__content:_a,additionalStat__value:ha,additionalStat__label:xa,statBoost:pa,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:ma,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:ga,statBoost__value:fa,loadingState:ja,loadingState__content:ya,pulse:va,loadingState__text:Sa,loadingState__subtext:ba,loadingMore:wa,loadingMore__content:Ca,loadingMore__text:ka,loadingMore__subtext:Na,emptyState:Ia,emptyState__icon:Ta,emptyState__text:La,emptyState__subtext:Ba,endOfList:Aa,endOfList__text:Ma,endOfList__subtext:Pa,mealsList:Fa,demoApp:Ea,demoApp__container:Ra,demoApp__title:Oa,demoApp__button:Da},qa=()=>{const{userData:t}=G(),[a,o]=r.useState([]),[n,s]=r.useState(!1),[i,d]=r.useState(!1),[l,h]=r.useState(!0),[c,f]=r.useState(0),u=r.useRef(null),B=10,b=async(w=c,_=!1)=>{_?s(!0):d(!0);try{const p=(await q.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${B}&offset=${w}`)).data,y=p.meals||[];o(_?y:g=>[...g,...y]);const k=p.total||0,m=w+y.length;h(m<k),f(w+y.length)}catch(v){console.error("Error fetching meals:",v)}s(!1),d(!1)};r.useEffect(()=>{b(0,!0)},[]),r.useEffect(()=>{const w=()=>{const v=document.querySelector(".saltDrawer");if(!v)return;const{scrollTop:p,scrollHeight:y,clientHeight:k}=v;y-p<=k+100&&l&&!i&&b(c,!1)},_=document.querySelector(".saltDrawer");return _&&_.addEventListener("scroll",w),()=>{_&&_.removeEventListener("scroll",w)}},[c,l,i]);const T=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=({icon:w,label:_,value:v,color:p})=>e.jsxs("div",{className:`${j.statBoost} ${j[`statBoost--${p}`]}`,children:[e.jsx(w,{size:12,className:j.statBoost__icon}),e.jsx("span",{className:j.statBoost__label,children:_}),e.jsxs("span",{className:j.statBoost__value,children:["+",v]})]}),R=({meal:w})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:j.mealCard,children:[e.jsxs("div",{className:j.mealCard__header,children:[e.jsxs("div",{className:j.mealCard__info,children:[e.jsx("h3",{className:j.mealCard__title,children:w.description}),e.jsx("p",{className:j.mealCard__timestamp,children:T(w.timestamp)})]}),e.jsxs("div",{className:j.mealCard__calories,children:[e.jsx("div",{className:j.mealCard__caloriesValue,children:w.calories}),e.jsx("div",{className:j.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:j.mealCard__macros,children:[e.jsxs("div",{className:`${j.macroItem} ${j["macroItem--protein"]}`,children:[e.jsxs("div",{className:j.macroItem__value,children:[w.protein,"g"]}),e.jsx("div",{className:j.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${j.macroItem} ${j["macroItem--carbs"]}`,children:[e.jsxs("div",{className:j.macroItem__value,children:[w.carbs,"g"]}),e.jsx("div",{className:j.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${j.macroItem} ${j["macroItem--fat"]}`,children:[e.jsxs("div",{className:j.macroItem__value,children:[w.fat,"g"]}),e.jsx("div",{className:j.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:j.mealCard__additionalStats,children:[e.jsxs("div",{className:j.additionalStat,children:[e.jsx(dt,{size:16,className:j.additionalStat__icon}),e.jsxs("div",{className:j.additionalStat__content,children:[e.jsxs("div",{className:j.additionalStat__value,children:[w.fluid_intake_ml,"ml"]}),e.jsx("div",{className:j.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:j.additionalStat,children:[e.jsx(ut,{size:16,className:j.additionalStat__icon}),e.jsxs("div",{className:j.additionalStat__content,children:[e.jsx("div",{className:j.additionalStat__value,children:w.servings_of_fruits_vegetables}),e.jsx("div",{className:j.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:j.mealCard__statBoosts,children:[e.jsx("div",{className:j.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:j.mealCard__statBoostsGrid,children:[w.mealAffects.armorIncrease>0&&e.jsx(P,{icon:_t,label:"ARM",value:w.mealAffects.armorIncrease,color:"blue"}),w.mealAffects.speedIncrease>0&&e.jsx(P,{icon:De,label:"SPD",value:w.mealAffects.speedIncrease,color:"yellow"}),w.mealAffects.intelligenceIncrease>0&&e.jsx(P,{icon:qe,label:"INT",value:w.mealAffects.intelligenceIncrease,color:"pink"}),w.mealAffects.defenseIncrease>0&&e.jsx(P,{icon:ht,label:"DEF",value:w.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:j.mealCard__currency,children:e.jsxs("span",{className:j.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(xt,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(pt,{size:15,style:{verticalAlign:"middle"}})})," "+w.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:j.drawer__header,children:e.jsxs("div",{className:j.drawer__headerContent,children:[e.jsx(Te,{className:j.drawer__headerIcon,size:32}),e.jsx("h2",{className:j.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:u,children:n?e.jsx("div",{className:j.loadingState,children:e.jsxs("div",{className:j.loadingState__content,children:[e.jsx("div",{className:j.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:j.loadingState__subtext,children:"📖 Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:j.emptyState,children:[e.jsx(Te,{className:j.emptyState__icon,size:48}),e.jsx("div",{className:j.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:j.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:j.mealsList,children:[a.map((w,_)=>e.jsx(R,{meal:w},`${w.id}-${_}`)),i&&e.jsx("div",{className:j.loadingMore,children:e.jsxs("div",{className:j.loadingMore__content,children:[e.jsx("div",{className:j.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:j.loadingMore__subtext,children:"⚡ Fetching next batch"})]})}),!l&&a.length>0&&e.jsxs("div",{className:j.endOfList,children:[e.jsx("div",{className:j.endOfList__text,children:"🎯 You've reached the end of your meal log!"}),e.jsxs("div",{className:j.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},za="_container_1chaz_4",Wa="_heading_1chaz_10",$a="_rangeButtons_1chaz_16",Ua="_button_1chaz_23",Ga="_activeButton_1chaz_37",Ha="_checkmarkPath_1chaz_53",Z={container:za,heading:Wa,rangeButtons:$a,button:Ua,activeButton:Ga,checkmarkPath:Ha,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Va=({onWeightChange:t})=>{var l,h;const{userData:a}=G(),o=()=>{var f,u;const c=(f=a==null?void 0:a.bodyStats)==null?void 0:f.weightLogs;if(Array.isArray(c)&&c.length>0){const B=[...c].sort((b,T)=>new Date(b.date).getTime()-new Date(T.date).getTime());return B[B.length-1].weight}return((u=a==null?void 0:a.bodyStats)==null?void 0:u.weight)??150},[n,s]=r.useState(o());r.useEffect(()=>{s(o())},[(l=a==null?void 0:a.bodyStats)==null?void 0:l.weightLogs,(h=a==null?void 0:a.bodyStats)==null?void 0:h.weight]);const i=c=>{const f=parseFloat((n+c).toFixed(1));f>=0&&s(f)},d=()=>{t(n)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(we,{id:"current-weight",type:"number",step:.1,value:n,onChange:c=>{const f=parseFloat(c.target.value);!isNaN(f)&&f>=0?s(f):c.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(H,{onClick:()=>i(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"▲"}),e.jsx(H,{onClick:()=>i(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"▼"})]}),e.jsx(H,{onClick:d,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Xa={week:7,month:30,threeMonths:90,all:1/0},Ya=t=>t<=7?0:t<=30?4:t<=90?15:30,Ka=()=>{const[t,a]=r.useState(!1),{userData:o}=G(),[n,s]=r.useState("week"),[i,d]=r.useState([]),[l,h]=r.useState(!0);r.useEffect(()=>{(t||l)&&q.get(`/weightLogs/${o==null?void 0:o.uid}`).then(b=>{d(b.data.weightLogs)}).catch(b=>{console.log(b)}),h(!1)},[t]);const c=[...i].sort((b,T)=>new Date(b.date).getTime()-new Date(T.date).getTime()).map(b=>({date:typeof b.date=="string"?b.date.slice(0,10):b.date instanceof Date?b.date.toISOString().slice(0,10):"",weight:b.weight})),f=n==="all"?c:c.slice(-Xa[n]),u=Ya(f.length),B=async b=>{if(!o)return;const T={date:new Date().toISOString(),weight:b,userId:o.uid};try{const{data:P}=await q.post("weightLogs/addWeightLog",T);a(!0),setTimeout(()=>a(!1),1500)}catch(P){console.error(P)}};return e.jsxs("div",{className:Z.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:Z.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:Z.heading,children:"Log Your Weight"}),e.jsx("div",{className:Z.rangeButtons,children:["week","month","threeMonths","all"].map(b=>e.jsx(H,{className:n===b?Z.activeButton:Z.button,onClick:()=>s(b),children:b==="week"?"1W":b==="month"?"1M":b==="threeMonths"?"3M":"ALL"},b))}),e.jsx(mt,{width:"100%",height:300,children:e.jsxs(gt,{data:f,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(ft,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(jt,{dataKey:"date",tickFormatter:b=>{const T=new Date(b);return isNaN(T.getTime())?"":Le(T,"MM/dd")},stroke:"#ff9900",interval:u,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(yt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(vt,{labelFormatter:b=>Le(new Date(b),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(St,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Va,{onWeightChange:B})})]})},Qa="_drawer__header_1hvqx_2",Ja="_drawer__headerContent_1hvqx_24",Za="_drawer__headerIcon_1hvqx_32",en="_drawer__title_1hvqx_46",tn="_drawer__content_1hvqx_56",sn="_loadingState_1hvqx_77",an="_emptyState_1hvqx_78",nn="_loadingState__content_1hvqx_90",on="_emptyState__content_1hvqx_91",rn="_loadingState__spinner_1hvqx_98",ln="_loadingState__text_1hvqx_115",cn="_emptyState__text_1hvqx_116",dn="_loadingState__subtext_1hvqx_125",un="_emptyState__subtext_1hvqx_126",_n="_emptyState__icon_1hvqx_135",hn="_workoutsList_1hvqx_143",xn="_workoutCard_1hvqx_150",pn="_workoutCard__border_1hvqx_186",mn="_workoutCard__header_1hvqx_197",gn="_workoutCard__info_1hvqx_206",fn="_workoutCard__title_1hvqx_210",jn="_workoutCard__timestamp_1hvqx_217",yn="_workoutCard__timestampIcon_1hvqx_229",vn="_workoutCard__xp_1hvqx_233",Sn="_workoutCard__xpValue_1hvqx_244",bn="_workoutCard__xpLabel_1hvqx_251",wn="_workoutCard__stats_1hvqx_256",Cn="_statItem_1hvqx_263",kn="_statItem__value_1hvqx_304",Nn="_statItem__label_1hvqx_311",In="_workoutCard__sectionTitle_1hvqx_317",Tn="_workoutCard__manualStats_1hvqx_333",Ln="_workoutCard__manualGrid_1hvqx_337",Bn="_manualStat_1hvqx_343",An="_manualStat__icon_1hvqx_354",Mn="_manualStat__content_1hvqx_359",Pn="_manualStat__value_1hvqx_365",Fn="_manualStat__label_1hvqx_373",En="_workoutCard__exercises_1hvqx_379",Rn="_workoutCard__exercisesList_1hvqx_383",On="_exerciseItem_1hvqx_389",Dn="_exerciseItem__name_1hvqx_407",qn="_exerciseItem__sets_1hvqx_414",zn="_exerciseItem__set_1hvqx_414",Wn="_exerciseItem__notes_1hvqx_430",$n="_workoutCard__statBoosts_1hvqx_439",Un="_workoutCard__statBoostsGrid_1hvqx_449",Gn="_statBoost_1hvqx_455",Hn="_statBoost__icon_1hvqx_496",Vn="_statBoost__label_1hvqx_500",Xn="_statBoost__value_1hvqx_504",Yn="_workoutCard__notes_1hvqx_509",Kn="_workoutCard__notesText_1hvqx_514",Qn="_loadingMore_1hvqx_524",Jn="_endOfList_1hvqx_525",Zn="_loadingMore__content_1hvqx_539",eo="_loadingMore__spinner_1hvqx_545",to="_loadingMore__text_1hvqx_553",so="_loadingMore__subtext_1hvqx_561",ao="_endOfList__content_1hvqx_575",no="_endOfList__text_1hvqx_581",oo="_endOfList__subtext_1hvqx_589",x={drawer__header:Qa,drawer__headerContent:Ja,drawer__headerIcon:Za,"pulse-glow":"_pulse-glow_1hvqx_1",drawer__title:en,drawer__content:tn,loadingState:sn,emptyState:an,loadingState__content:nn,emptyState__content:on,loadingState__spinner:rn,"pixel-spin":"_pixel-spin_1hvqx_1",loadingState__text:ln,emptyState__text:cn,loadingState__subtext:dn,emptyState__subtext:un,emptyState__icon:_n,workoutsList:hn,workoutCard:xn,"scan-line":"_scan-line_1hvqx_1",workoutCard__border:pn,workoutCard__header:mn,workoutCard__info:gn,workoutCard__title:fn,workoutCard__timestamp:jn,workoutCard__timestampIcon:yn,workoutCard__xp:vn,workoutCard__xpValue:Sn,workoutCard__xpLabel:bn,workoutCard__stats:wn,statItem:Cn,"statItem--type":"_statItem--type_1hvqx_286","statItem--logtype":"_statItem--logtype_1hvqx_292","statItem--rpe":"_statItem--rpe_1hvqx_298",statItem__value:kn,statItem__label:Nn,workoutCard__sectionTitle:In,workoutCard__manualStats:Tn,workoutCard__manualGrid:Ln,manualStat:Bn,manualStat__icon:An,manualStat__content:Mn,manualStat__value:Pn,manualStat__label:Fn,workoutCard__exercises:En,workoutCard__exercisesList:Rn,exerciseItem:On,exerciseItem__name:Dn,exerciseItem__sets:qn,exerciseItem__set:zn,exerciseItem__notes:Wn,workoutCard__statBoosts:$n,workoutCard__statBoostsGrid:Un,statBoost:Gn,"statBoost--red":"_statBoost--red_1hvqx_478","statBoost--yellow":"_statBoost--yellow_1hvqx_484","statBoost--pink":"_statBoost--pink_1hvqx_490",statBoost__icon:Hn,statBoost__label:Vn,statBoost__value:Xn,workoutCard__notes:Yn,workoutCard__notesText:Kn,loadingMore:Qn,endOfList:Jn,loadingMore__content:Zn,loadingMore__spinner:eo,loadingMore__text:to,loadingMore__subtext:so,endOfList__content:ao,endOfList__text:no,endOfList__subtext:oo},ro=()=>{const{userData:t}=G(),[a,o]=r.useState([]),[n,s]=r.useState(!1),[i,d]=r.useState(!1),[l,h]=r.useState(!0),[c,f]=r.useState(0),u=r.useRef(null),B=10,b=async(_=c,v=!1)=>{v?s(!0):d(!0);try{const y=(await q.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${B}&offset=${_}`)).data,k=y.workouts||[];o(v?k:I=>[...I,...k]);const m=y.total||0,g=_+k.length;h(g<m),f(_+k.length)}catch(p){console.error("Error fetching workouts:",p)}s(!1),d(!1)};r.useEffect(()=>{b(0,!0)},[]),r.useEffect(()=>{const _=()=>{const p=document.querySelector(".saltDrawer");if(!p)return;const{scrollTop:y,scrollHeight:k,clientHeight:m}=p;k-y<=m+100&&l&&!i&&b(c,!1)},v=document.querySelector(".saltDrawer");return v&&v.addEventListener("scroll",_),()=>{v&&v.removeEventListener("scroll",_)}},[c,l,i]);const T=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=_=>{const v=Math.floor(_/60),p=_%60;return v>0?`${v}h ${p}m`:`${p}m`},R=({icon:_,label:v,value:p,color:y})=>e.jsxs("div",{className:`${x.statBoost} ${x[`statBoost--${y}`]}`,children:[e.jsx(_,{size:17,className:x.statBoost__icon}),e.jsx("span",{className:x.statBoost__label,children:v}),e.jsxs("span",{className:x.statBoost__value,children:["+",p]})]}),w=({workout:_})=>{var k;const v=_.logType==="manual",p=_.logType==="routine",y=_.workoutXp.pet;return e.jsxs("div",{className:x.workoutCard,children:[e.jsx("div",{className:x.workoutCard__border}),e.jsxs("div",{className:x.workoutCard__header,children:[e.jsxs("div",{className:x.workoutCard__info,children:[e.jsx("h3",{className:x.workoutCard__title,children:p?`${_.routineDay} ROUTINE`:`${(k=_==null?void 0:_.workoutType)==null?void 0:k.toUpperCase()} SESSION`}),e.jsxs("p",{className:x.workoutCard__timestamp,children:[e.jsx(bt,{size:12,className:x.workoutCard__timestampIcon}),T(_.timestamp)]})]}),e.jsxs("div",{className:x.workoutCard__xp,children:[e.jsx("div",{className:x.workoutCard__xpValue,children:y}),e.jsx("div",{className:x.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:x.workoutCard__stats,children:_.rpe&&e.jsxs("div",{className:`${x.statItem} ${x["statItem--rpe"]}`,children:[e.jsxs("div",{className:x.statItem__value,children:[_.rpe,"/4"]}),e.jsx("div",{className:x.statItem__label,children:"RPE"})]})}),v&&e.jsx("div",{className:x.workoutCard__manualStats,children:e.jsxs("div",{className:x.workoutCard__manualGrid,children:[_.duration&&e.jsxs("div",{className:x.manualStat,children:[e.jsx(wt,{size:25,className:x.manualStat__icon}),e.jsxs("div",{className:x.manualStat__content,children:[e.jsx("div",{className:x.manualStat__value,children:P(_.duration)}),e.jsx("div",{className:x.manualStat__label,children:"DURATION"})]})]}),_.distance!=0&&e.jsxs("div",{className:x.manualStat,children:[e.jsx(Ct,{size:16,className:x.manualStat__icon}),e.jsxs("div",{className:x.manualStat__content,children:[e.jsxs("div",{className:x.manualStat__value,children:[_.distance," KM"]}),e.jsx("div",{className:x.manualStat__label,children:"DISTANCE"})]})]})]})}),p&&_.performedExercises&&_.performedExercises.length>0&&e.jsxs("div",{className:x.workoutCard__exercises,children:[e.jsxs("div",{className:x.workoutCard__sectionTitle,children:[e.jsx(he,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:x.workoutCard__exercisesList,children:_.performedExercises.map((m,g)=>e.jsxs("div",{className:x.exerciseItem,children:[e.jsx("div",{className:x.exerciseItem__name,children:m.name.toUpperCase()}),e.jsx("div",{className:x.exerciseItem__sets,children:m.sets.map((I,A)=>e.jsxs("span",{className:x.exerciseItem__set,children:[I.weight,"KG × ",I.reps]},A))}),m.notes&&e.jsxs("div",{className:x.exerciseItem__notes,children:['"',m.notes,'"']})]},g))})]}),e.jsxs("div",{className:x.workoutCard__statBoosts,children:[e.jsxs("div",{className:x.workoutCard__sectionTitle,children:[e.jsx(kt,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:x.workoutCard__statBoostsGrid,children:[_.workoutXp.strength>0&&e.jsx(R,{icon:Nt,label:"STR",value:_.workoutXp.strength,color:"red"}),_.workoutXp.agility>0&&e.jsx(R,{icon:De,label:"AGI",value:_.workoutXp.agility,color:"yellow"})]})]}),_.notes&&e.jsxs("div",{className:x.workoutCard__notes,children:[e.jsxs("div",{className:x.workoutCard__sectionTitle,children:[e.jsx(qe,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:x.workoutCard__notesText,children:['"',_.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x.drawer__header,children:e.jsxs("div",{className:x.drawer__headerContent,children:[e.jsx(he,{className:x.drawer__headerIcon,size:32}),e.jsx("h2",{className:x.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:x.drawer__content,ref:u,children:n?e.jsx("div",{className:x.loadingState,children:e.jsxs("div",{className:x.loadingState__content,children:[e.jsx("div",{className:x.loadingState__spinner}),e.jsx("div",{className:x.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:x.loadingState__subtext,children:"💪 FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:x.emptyState,children:e.jsxs("div",{className:x.emptyState__content,children:[e.jsx(he,{className:x.emptyState__icon,size:48}),e.jsx("div",{className:x.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:x.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:x.workoutsList,children:[a.map((_,v)=>e.jsx(w,{workout:_},`${_._id}-${v}`)),i&&e.jsx("div",{className:x.loadingMore,children:e.jsxs("div",{className:x.loadingMore__content,children:[e.jsx("div",{className:x.loadingMore__spinner}),e.jsx("div",{className:x.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:x.loadingMore__subtext,children:"⚡ FETCHING NEXT BATCH"})]})}),!l&&a.length>0&&e.jsx("div",{className:x.endOfList,children:e.jsxs("div",{className:x.endOfList__content,children:[e.jsx("div",{className:x.endOfList__text,children:"🎯 END OF WORKOUT LOG"}),e.jsxs("div",{className:x.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})};r.forwardRef(function({onClick:a,to:o,...n},s){const i=It(o),d=Tt(o);return e.jsx(Lt,{...n,href:i,onClick:l=>{a==null||a(l),l.defaultPrevented||d(l)},ref:s})});const io=["Pet","Skills","Quests","Routines"],lo=({selectedIndex:t,setSelectedIndex:a})=>{const[o,n]=r.useState("none"),{pathname:s}=Bt();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Be,{children:[e.jsx(Ae,{children:e.jsx(H,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(At,{"aria-hidden":!0})})}),e.jsxs(Me,{children:[e.jsx(Q,{onClick:()=>n("logWeight"),children:"Log Weight"}),e.jsx(Q,{onClick:()=>n("logFood"),children:"Log Food"}),e.jsx(Q,{onClick:()=>n("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(ze,{selectedIndex:t,onChange:a,children:e.jsx(We,{className:"tab-nav",children:io.map((i,d)=>e.jsx($e,{className:({selected:l})=>`tab-button ${l?"tab-selected":""}`,children:i},i))})}),e.jsx("div",{children:e.jsx(Mt,{placement:"top",content:"User Settings",children:e.jsxs(Be,{children:[e.jsx(Ae,{children:e.jsx(H,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Pt,{"aria-hidden":!0})})}),e.jsxs(Me,{children:[e.jsx(Q,{onClick:()=>n("mealHist"),children:"View Meals"}),e.jsx(Q,{onClick:()=>n("workoutHist"),children:"View Workouts"}),e.jsx(Q,{onClick:gs,children:"Logout"})]})]})})}),e.jsxs(Ft,{open:o!=="none",onOpenChange:()=>n("none"),position:"bottom",children:[e.jsx(Et,{onClick:()=>n("none")}),o==="logFood"&&e.jsx(js,{}),o==="logWorkout"&&e.jsx(Rs,{setDrawerView:n}),o==="mealHist"&&e.jsx(qa,{}),o==="workoutHist"&&e.jsx(ro,{}),o==="logWeight"&&e.jsx(Ka,{})]})]})},co="_myBackground_1pm88_1",uo="_loginScreen_1pm88_13",_o="_overlay_1pm88_29",ho="_loginContainer_1pm88_39",xo="_googleButton_1pm88_49",fe={myBackground:co,loginScreen:uo,overlay:_o,loginContainer:ho,googleButton:xo};function po(){const{setUserData:t}=G(),[a,o]=r.useState(!1),n=async()=>{o(!0),console.log("Attempting to log in with Google...");try{const i=await(await Rt(de,ms)).user.getIdToken(),{data:d}=await q.post("/auth/google",{token:i}),h=(await q.get(`/users/${d.uid}`)).data;t(h),console.log("User saved or retrieved from DB:",d)}catch(s){console.error(s)}o(!0)};return e.jsx("div",{className:fe.loginScreen,children:e.jsx("div",{className:fe.loginContainer,children:a?e.jsx(Oe,{size:"large","aria-label":"loading",role:"status"}):e.jsx(ee,{className:fe.googleButton,onClick:n,children:"Embark with Google"})})})}const mo=()=>{const{userData:t,setUserData:a}=G();if(!t)return e.jsx(S,{children:"Loading..."});const[o,n]=r.useState(0),[s,i]=r.useState(t),[d,l]=r.useState(1),[h,c]=r.useState(1.2),[f,u]=r.useState(0),[B,b]=r.useState(Math.floor(s.bodyStats.height/12)),[T,P]=r.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(S,{children:"Loading..."});r.useEffect(()=>{const m=B*12+T;console.log("total inches : ",m),i(g=>({...g,bodyStats:{...g.bodyStats,height:m}}))},[B,T]);const R=m=>{const{weight:g,height:I,age:A,sex:N}=m;return N==="male"?10*(g/2.205)+6.25*(I*2.54)-5*A+5:10*(g/2.205)+6.25*(I*2.54)-5*A-161},w=m=>{const g=h+f;return m*g},_=async m=>{m.preventDefault();const g=s.bodyStats.weight,I={userId:t.uid,date:new Date,weight:g},A=R(s.bodyStats),N=w(A),M=s.goal.goalType==="weight_loss"?N-d*3500/7:s.goal.goalType==="muscle_gain"?N+300:N,z=Math.round(M/100),X={...s,bodyStats:{...s.bodyStats,bmr:A,tdee:N,weight:g},goal:{...s.goal,dailyCalorieGoal:M,dailyCurrencyTotal:z,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",X);try{const{data:Y}=await q.post("/users/update",{...X});a(Y)}catch(Y){console.error("Error updating user data:",Y)}try{await q.post("/weightLogs/addWeightLog",I)}catch(Y){console.error(Y)}},v=(m,g,I)=>{const{name:A,value:N}=m.target;i({...s,[g]:{...s[g],[I||A]:N}})},p=(m,g,I)=>{i({...s,[m]:{...s[m],[g]:I}})},y=()=>{if(o===0){const{weight:m,height:g,age:I,sex:A}=s.bodyStats;return m>0&&g>0&&I>0&&["male","female"].includes(A)}if(o===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(o===2){const{name:m,currentPet:g}=s.pet;return m.trim()!==""&&["puppy","kitten","bird"].includes(g)}return!0},k=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(L,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(O,{grow:1,children:e.jsxs($,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(O,{children:e.jsx(S,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(O,{children:e.jsx(Ot,{children:k.map((m,g)=>e.jsx(Dt,{label:m,stage:o===g?"active":g<o?"completed":"pending"},g))})}),e.jsxs("form",{onSubmit:_,children:[o===0&&e.jsxs($,{align:"stretch",gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Body Stats"}),e.jsxs(K,{children:[e.jsx(J,{children:"Weight (lbs)"}),e.jsx(ie,{value:s.bodyStats.weight===0?"":s.bodyStats.weight,onChange:m=>v(m,"bodyStats","weight")})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(le,{value:B.toString()+" ft",onSelectionChange:(m,g)=>b(Number(g)),children:[2,3,4,5,6,7,8,9].map(m=>e.jsxs(ce,{value:m.toString(),children:[m," ft"]},m))}),e.jsx(le,{value:T.toString()+" in",onSelectionChange:(m,g)=>P(Number(g)),children:Array.from({length:12},(m,g)=>e.jsxs(ce,{value:g.toString(),children:[g," in"]},g))})]})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Sex"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(L,{direction:"column",align:"center",gap:1,children:[e.jsx(F,{symbol:"🙎🏻‍♂️",size:32}),e.jsx(S,{children:"Male"})]})})}),e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(L,{direction:"column",align:"center",gap:1,children:[e.jsx(F,{symbol:"🙎🏻‍♀️",size:32}),e.jsx(S,{children:"Female"})]})})})]})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Age (years)"}),e.jsx(ie,{value:s.bodyStats.age===0?"":s.bodyStats.age,onChange:m=>v(m,"bodyStats","age")})]})]}),o===1&&e.jsxs($,{gap:2,children:[e.jsx(S,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"🔥",size:24}),e.jsx(S,{children:"Weight Loss"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:s.bodyStats.sex==="male"?"🏋️‍♂️":"🏋🏽‍♀️",size:24}),e.jsx(S,{children:"Muscle Gain"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"🛠️",size:24}),e.jsx(S,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(K,{children:[e.jsx(S,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(qt,{max:2,min:.5,step:.25,value:d,onChange:(m,g)=>l(g),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs($,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(L,{direction:"column",gap:1,children:[e.jsx(W,{onClick:()=>c(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"💻",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(W,{onClick:()=>c(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"👩‍🏫",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(W,{onClick:()=>c(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"👩‍⚕️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(W,{onClick:()=>c(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"👷‍♂️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs($,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(L,{direction:"column",gap:1,children:[e.jsx(W,{onClick:()=>u(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:f===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"🛋️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(W,{onClick:()=>u(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:f===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"🚶‍♀️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(W,{onClick:()=>u(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:f===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"🏃‍♂️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(W,{onClick:()=>u(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:f===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"🏋️‍♀️",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(W,{onClick:()=>u(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:f===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(L,{direction:"row",align:"center",gap:2,children:[e.jsx(F,{symbol:"💪",size:30}),e.jsxs($,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Extremely Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),o===2&&e.jsxs($,{gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(K,{children:[e.jsx(J,{children:"Pet Name"}),e.jsx(ie,{value:s.pet.name,onChange:m=>v(m,"pet","name")})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Pet Type"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"🐶",size:24}),e.jsx(S,{children:"Dog"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(W,{onClick:()=>p("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(L,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(F,{symbol:"🐱",size:24}),e.jsx(S,{children:"Cat"})]})})})})]})]})]}),e.jsx(O,{style:{paddingTop:"20px"},children:e.jsxs(L,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[o>0&&e.jsx(ee,{sentiment:"neutral",appearance:"solid",onClick:()=>n(o-1),children:"Previous"}),o<k.length-1&&e.jsx(ee,{sentiment:"accented",appearance:"solid",disabled:!y(),onClick:()=>n(o+1),children:"Next"}),o===k.length-1&&e.jsx(ee,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!y(),onClick:_,children:"Start Your Adventure!"})]})})]})]})})})},go="_homePage_santw_1",fo="_homePageTitle_santw_6",jo="_statusSection_santw_24",yo="_levelText_santw_29",vo="_xpBarWrapper_santw_35",So="_xpBarFill_santw_44",bo="_pixelBorder_santw_50",Fe={homePage:go,homePageTitle:fo,"card-links":"_card-links_santw_10","card-image":"_card-image_santw_19",statusSection:jo,levelText:yo,xpBarWrapper:vo,xpBarFill:So,pixelBorder:bo},wo="_xpBarWrapper_sqxxw_1",Co="_xpBarFill_sqxxw_12",ko="_pixelGlow_sqxxw_1",No="_xpText_sqxxw_33",Io="_levelText_sqxxw_59",re={xpBarWrapper:wo,xpBarFill:Co,pixelGlow:ko,xpText:No,levelText:Io};function To(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function je(t,a){const o=To(a);return{progress:Math.min(Math.max(t/o*100,0),100),xpNeeded:o}}const Lo=({currentXp:t,level:a})=>{const[o,n]=r.useState(()=>je(t,a).progress),s=r.useRef(t),{xpNeeded:i}=je(t,a);return r.useEffect(()=>{const d=je(t,a).progress,l=s.current;t>l,n(d),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(S,{className:re.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:re.xpBarWrapper,children:[e.jsx("div",{className:re.xpBarFill,style:{width:`${o}%`}}),e.jsxs(S,{className:re.xpText,styleAs:"label",children:[" ",t," / ",i]})]})]})},Bo=({consumed:t=!1,size:a=48,className:o})=>{const[n,s]=r.useState(!1);return r.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:n?0:1}})},Ao=({consumed:t=!1,size:a=48,className:o})=>{const[n,s]=r.useState(!1);return r.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:n?0:1}})},Mo=({count:t,consumedCurrency:a,userArchetype:o})=>{const n=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[n," / ",t," ",o==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,i)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:o==="puppy"?e.jsx(Bo,{consumed:a[i]??!1}):e.jsx(Ao,{consumed:a[i]??!1})},i))})]})},Ee=()=>{var f,u;const{userData:t}=G(),[a,o]=r.useState(0),[n,s]=r.useState([]),i=r.useRef(null),d={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"},l=((f=t==null?void 0:t.pet)==null?void 0:f.currentPet)??"puppy",h=r.useMemo(()=>d[l],[l]),c=r.useMemo(()=>l==="kitten",[l]);return r.useEffect(()=>{var _,v,p;const B=Intl.DateTimeFormat().resolvedOptions().timeZone,b=new Date().toLocaleDateString("sv-SE",{timeZone:B}),T=((_=t==null?void 0:t.goal)==null?void 0:_.dailyCurrencyTotal)??0,P=((p=(v=t==null?void 0:t.goal)==null?void 0:v.dailyCurrencyUsed)==null?void 0:p[b])??0,R=T-P;o(R);const w=Array(T).fill(!1).map((y,k)=>k>=R);s(w)},[t]),console.log("Model Path:",h),console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(L,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(O,{align:"center",style:{flexShrink:0},children:e.jsx(S,{styleAs:"h1",className:Fe.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(O,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(Mo,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((u=t==null?void 0:t.goal)==null?void 0:u.dailyCurrencyTotal)??0,consumedCurrency:n})}),e.jsx(O,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:e.jsxs(zt,{resize:{polyfill:ResizeObserver},camera:{position:[2,0,4],fov:100},gl:B=>{const b=new $t({canvas:B,alpha:!0});return b.setClearColor("#87ceeb",1),b},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(Fo,{modelPath:h,isKitten:c}),e.jsx(Wt,{ref:i,maxPolarAngle:Math.PI/1.5,minDistance:3,maxDistance:10})]})})}),e.jsx(O,{className:Fe.statusSection,style:{flexShrink:0},children:e.jsx(Lo,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},Po=({modelRef:t})=>{const{camera:a,controls:o}=Vt();return r.useEffect(()=>{if(!t.current)return;const n=new Xt().setFromObject(t.current),s=n.getSize(new Pe),i=n.getCenter(new Pe);if("fov"in a){const d=a,l=d.fov*Math.PI/180,c=Math.max(s.x,s.y,s.z)/(2*Math.tan(l/2)),f=Math.max(c*2,5);d.position.set(i.x+f*.6,i.y+f*.6,i.z+f*.6),d.lookAt(i);const u=o;u!=null&&u.target&&typeof u.update=="function"&&(u.target.copy(i),u.update())}},[t,a,o]),null};function Fo({modelPath:t,isKitten:a}){const[o,n,s,i]=Ut(["/assets/grass/AmbientOcclusion.jpg","/assets/grass/Color.jpg","/assets/grass/NormalGL.jpg","/assets/grass/Roughness.jpg"]);console.log(a);const d=Gt(t),l=r.useMemo(()=>d.scene.clone(),[d.scene]),h=r.useRef(null);return e.jsxs(r.Suspense,{fallback:null,children:[e.jsx("primitive",{ref:h,object:l,scale:.8,position:[0,-3.5,0],rotation:a?[0,Math.PI,0]:[0,0,0]}),e.jsx(Po,{modelRef:h}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-3.5,0],receiveShadow:!0,children:[e.jsx("planeGeometry",{args:[100,100]}),e.jsx("meshStandardMaterial",{map:n,normalMap:s,roughnessMap:i,aoMap:o,side:Ht})]})]})}const Eo=({content:t})=>{const[a,o]=r.useState(null),n=d=>{o(d.currentTarget)},s=()=>{o(null)},i=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:n,style:{cursor:"pointer",marginLeft:4},children:e.jsx(F,{symbol:"ℹ️",label:"info",size:14})}),e.jsx(Yt,{open:i,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Ro=[{label:"Strength",key:"strength",emoji:"💪",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"🛡️",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"🤸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"🧠",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"🪖",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"💨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"🤗",description:"Calorie goal adherence"}],Oo=()=>{const{userData:t}=G();if(!t)return null;const{pet:a}=t;return e.jsxs(L,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(L,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(F,{style:{alignItems:"center"},symbol:"🎮",size:30}),e.jsx(S,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Ro.map(o=>e.jsx(Ce,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(L,{justify:"space-between",align:"center",children:[e.jsxs(L,{align:"center",gap:1,children:[e.jsx(F,{symbol:o.emoji,size:20}),e.jsx(S,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:o.label}),e.jsx(Eo,{content:o.description})]}),e.jsxs(S,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[o.key]]})]})},o.key))]})},ye=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],ve=({name:t,description:a,progress:o})=>e.jsxs(Ce,{style:{width:"100%"},children:[e.jsx(S,{styleAs:"h4",children:t}),e.jsx(S,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Qt,{value:o}),e.jsxs(S,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[o,"% complete"]})]}),Do=()=>{const t=ye.filter(n=>n.status==="inProgress"),a=ye.filter(n=>n.status==="notStarted"),o=ye.filter(n=>n.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(S,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Kt,{children:[e.jsxs(xe,{value:"",children:[e.jsx(pe,{children:"In Progress"}),e.jsx(me,{children:e.jsx(L,{direction:"column",gap:2,children:t.map(n=>e.jsx(ve,{...n},n.name))})})]}),e.jsxs(xe,{value:"",children:[e.jsx(pe,{children:"Not Started"}),e.jsx(me,{children:e.jsx(L,{direction:"column",gap:2,children:a.map(n=>e.jsx(ve,{...n},n.name))})})]}),e.jsxs(xe,{value:"",children:[e.jsx(pe,{children:"Completed"}),e.jsx(me,{children:e.jsx(L,{direction:"column",gap:2,children:o.map(n=>e.jsx(ve,{...n},n.name))})})]})]})]})},qo="_container_132oe_1",zo="_tabList_132oe_11",Wo="_tabButton_132oe_18",$o="_routineCreatedText_132oe_34",Uo="_active_132oe_39",Go="_borderGlow_132oe_1",Ho="_form_132oe_55",Vo="_heroSection_132oe_105",Xo="_heroList_132oe_112",Yo="_hero_132oe_105",Ko="_selected_132oe_143",Qo="_disclosureButton_132oe_156",Jo="_chevron_132oe_174",Zo="_rotate_132oe_179",er="_equipmentSection_132oe_183",tr="_equipmentList_132oe_191",sr="_equipment_132oe_183",D={container:qo,tabList:zo,tabButton:Wo,routineCreatedText:$o,active:Uo,borderGlow:Go,form:Ho,heroSection:Vo,heroList:Xo,hero:Yo,selected:Ko,disclosureButton:Qo,chevron:Jo,rotate:Zo,equipmentSection:er,equipmentList:tr,equipment:sr},ar="_puppySpinner_qnb89_1",nr="_loadingText_qnb89_9",or="_puppy_qnb89_1",rr="_run_qnb89_1",ir="_treadmillBelt_qnb89_19",Se={puppySpinner:ar,loadingText:nr,puppy:or,run:rr,treadmillBelt:ir,"belt-move":"_belt-move_qnb89_1"};function ue({scale:t=1}){const a=150*t;return e.jsxs("div",{className:Se.puppySpinner,style:{width:`${a}px`,height:`${a}px`},children:[e.jsx("div",{className:Se.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:Se.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const lr=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],cr=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function dr(){const{userData:t}=G(),[a,o]=r.useState("Max Muscle"),[n,s]=r.useState(""),[i,d]=r.useState("beginner"),[l,h]=r.useState(3),[c,f]=r.useState([]),[u,B]=r.useState(""),[b,T]=r.useState(""),[P,R]=r.useState(""),[w,_]=r.useState(""),[v,p]=r.useState(15),[y,k]=r.useState(!1),[m,g]=r.useState(!1),{addToast:I}=Qe(),A=N=>{N.preventDefault(),k(!0);const M={goal:a,sport:a==="Sport Specific"?n:null,experience:i,days:l,equipment:c.join(", "),include:u,exclude:b,considerations:P,sessionDurationMinutes:v,petCoach:w,userId:t==null?void 0:t.uid};q.post("/workout/routine/createRoutine",M,{timeout:5e4}).then(z=>{console.log("Routine Created:",z.data),g(!0),setTimeout(()=>{g(!1)},3e3)}).catch(z=>{console.error(z)}).finally(()=>k(!1))};return m?e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:"0 12px",display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:22,textAlign:"center",padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(F,{size:32,symbol:"❚█══█❚"}),e.jsx("div",{className:D.routineCreatedText,children:"Routine Created!"}),e.jsx("div",{className:D.routineCreatedText,children:'Check it out in "My Routines"!'})]})}):y?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ue,{scale:2})}):e.jsxs("form",{className:D.form,onSubmit:A,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:a,onChange:N=>o(N.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),a==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:n,onChange:N=>s(N.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:i,onChange:N=>d(N.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:l,onChange:N=>h(Number(N.target.value)),children:[...Array(7)].map((N,M)=>e.jsxs("option",{value:M+1,children:[M+1," ",M===0?"day":"days"]},M+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:v,onChange:N=>p(Number(N.target.value)),children:[...Array(12)].map((N,M)=>{const z=(M+1)*15,X=Math.floor(z/60),Y=z%60,_e=X>0?`${X}h${Y>0?` ${Y}m`:""}`:`${Y} minutes`;return e.jsx("option",{value:z,children:_e},z)})})]}),e.jsxs("div",{className:D.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:D.equipmentList,children:cr.map(N=>e.jsx(H,{type:"button",onClick:()=>f(M=>M.includes(N)?M.filter(z=>z!==N):[...M,N]),className:`${D.equipment} ${c.includes(N)?D.selected:""}`,children:N},N))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:u,onChange:N=>B(N.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:b,onChange:N=>T(N.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:P,onChange:N=>R(N.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(Ue,{children:({open:N})=>e.jsxs("div",{className:D.heroSection,children:[e.jsxs(Ge,{className:D.disclosureButton,children:["Let one of our XPets train you!",e.jsx(He,{className:`${D.chevron} ${N?D.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(Ve,{className:D.heroList,children:lr.map(M=>e.jsx(H,{type:"button",onClick:()=>_(M.name),className:`${D.hero} ${w===M.name?D.selected:""}`,style:{borderColor:typeof M.color=="string"&&M.color.includes("linear")?void 0:M.color,borderImage:M.color.includes("linear")?M.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:M.name},M.name))})]})}),e.jsx(H,{type:"submit",children:"Generate Routine"})]})}function Ze({routine:t,setRoutines:a,menuOptions:o,onStartWorkout:n}){const{userData:s}=G();if(!t||t.length===0)return null;const i=h=>{console.log("Delete",h),q.delete(`/routines/delete/${h}`).then(()=>{a(c=>c==null?void 0:c.filter(f=>f._id!==h))}).catch(c=>{console.error("Failed to delete routine: ",c)})},d=h=>{q.post(`/routines/share/${h._id}`).then(()=>{console.log("Routine shared to community.")}).catch(c=>{console.error("Failed to share routine: ",c)})},l=h=>{q.post(`/routines/copy/${h._id}`,{userId:s==null?void 0:s.uid}).then(c=>{console.log("Copied routine:",c.data.routine),a==null||a(f=>[...f||[],c.data.routine])}).catch(c=>{console.error("Failed to copy routine:",c)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((h,c)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(Ue,{children:({open:f})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(Ge,{className:"accordion-trigger",children:[e.jsx(He,{size:32,className:`chevron ${f?"open":""}`}),e.jsx("span",{className:"routine-title",children:h.routineName})]}),e.jsxs(Jt,{as:"div",className:"menu-wrapper",children:[e.jsx(Zt,{className:"menu-button",onClick:u=>u.stopPropagation(),children:e.jsx(es,{size:20})}),e.jsxs(ts,{className:"menu-dropdown",children:[o.includes("Share")&&e.jsx(ge,{children:e.jsx(H,{onClick:()=>d(h),className:"menu-item",children:"Share"})}),o.includes("Delete")&&e.jsx(ge,{children:e.jsx(H,{onClick:()=>i(h._id),className:"menu-item",children:"Delete"})}),o.includes("Copy")&&e.jsx(ge,{children:e.jsx(H,{onClick:()=>l(h),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(Ve,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:h.weeklySchedule.map((u,B)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:u.dayName}),e.jsx("div",{className:"day-exercises",children:u.exercises.map(b=>b.exercise).join(", ")}),u.exercises.length>0&&e.jsx(H,{className:"start-button",onClick:()=>n!==void 0?n(u):void 0,children:"START WORKOUT"})]},u.dayName+B))})})]})})},h.routineName+c))})}const ur="_fullScreenWrapper_117p9_2",_r="_timer_117p9_18",hr="_deckContainer_117p9_28",xr="_card_117p9_39",pr="_exerciseTitle_117p9_56",mr="_repRange_117p9_64",gr="_setGrid_117p9_72",fr="_setRow_117p9_80",jr="_setLabel_117p9_85",yr="_inputLabel_117p9_93",vr="_checkboxLabel_117p9_94",Sr="_compactInput_117p9_99",br="_setHeaderRow_117p9_124",wr="_finishButton_117p9_151",Cr="_setCheckbox_117p9_170",kr="_checked_117p9_192",Nr="_cardSuitTop_117p9_197",Ir="_cardSuitBottom_117p9_198",E={fullScreenWrapper:ur,timer:_r,deckContainer:hr,card:xr,exerciseTitle:pr,repRange:mr,setGrid:gr,setRow:fr,setLabel:jr,inputLabel:yr,checkboxLabel:vr,compactInput:Sr,setHeaderRow:br,finishButton:wr,setCheckbox:Cr,checked:kr,cardSuitTop:Nr,cardSuitBottom:Ir},Tr=({startTime:t})=>{const[a,o]=r.useState(0);r.useEffect(()=>{const s=setInterval(()=>{o(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(s)},[t]);const n=s=>{const i=Math.floor(s/60),d=s%60;return`${String(i).padStart(2,"0")}:${String(d).padStart(2,"0")}`};return e.jsx("div",{style:{fontSize:"1.5rem"},children:n(a)})},Lr=({exercises:t,onFinish:a})=>{const[o]=r.useState(Date.now()),[n,s]=r.useState(t.map((p,y)=>({...p,cardId:`${p.exercise}-${y}`}))),[i,d]=r.useState(0),[l,h]=r.useState(0),[c,f]=r.useState(null),[u,B]=r.useState(.4),b=(p,y)=>{const m=Math.abs(p)/1e3,g=Math.abs(y)/300;return Math.max(.2,Math.min(.6,.4-m*.15+g*.1))},T=(p,y)=>{const k=R()[0];if(k){const m=b(p,y);B(m),f(k.cardId),setTimeout(()=>{s(g=>{const[I,...A]=g;return[...A,I]}),h(g=>g+1),f(null)},m*1e3)}},P=(p,y,k,m)=>{s(g=>g.map(A=>{if(A.cardId===p){const N=A.sets.map((M,z)=>z===y?{...M,[k]:m}:M);return{...A,sets:N}}return A}))},R=()=>{const p=n.length;if(p===0)return[];const y=l%p,k=[];for(let m=0;m<3;m++){const g=(y+m)%p;n[g]&&k.push({...n[g],displayIndex:m,originalIndex:g})}return k},w=[e.jsx(os,{size:32,color:"#ff4d4d"}),e.jsx(rs,{size:32,color:"#ff4d4d"}),e.jsx(is,{size:32,color:"#ff4d4d"}),e.jsx(ls,{size:32,color:"#ff4d4d"})],v=(()=>{const p=Math.floor(Math.random()*w.length);return w[p]})();return e.jsxs("div",{className:E.fullScreenWrapper,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",fontSize:"19px",gap:"16px",alignItems:"center"},children:[e.jsx("div",{children:t[0].dayName}),e.jsx("div",{className:E.timer,children:e.jsx(Tr,{startTime:o})})]}),e.jsx("div",{className:E.deckContainer,children:e.jsx(ss,{initial:!1,children:R().map((p,y)=>{const k=y===0,m=p.cardId===c;return e.jsxs(as.div,{className:E.card,initial:{x:0,y:y*20,zIndex:100-y},animate:{x:0,scale:1-y*.02,y:y*20,zIndex:100-y},exit:{y:-400,opacity:0,zIndex:100-y,transition:{duration:u,ease:"easeOut"}},transition:{duration:.3},drag:k&&!m?"y":!1,dragElastic:.2,whileTap:{scale:.98},dragConstraints:{top:-400,bottom:0},onDragEnd:(g,I)=>{I.offset.y<-100&&!m&&T(I.velocity.y,I.offset.y)},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("span",{className:E.cardSuitTop,children:v})}),e.jsx("div",{className:E.exerciseTitle,children:p.exercise}),e.jsxs("div",{className:E.repRange,children:["Target: ",p.repRange," reps"]})]}),e.jsxs("div",{className:E.setGrid,children:[e.jsxs("div",{className:E.setHeaderRow,children:[e.jsx("span",{className:E.setLabel,children:"Set"}),e.jsx("span",{className:E.inputLabel,children:"Weight"}),e.jsx("span",{className:E.inputLabel,children:"Reps"}),e.jsx("span",{className:E.checkboxLabel,children:"✔"})]}),p.sets.map((g,I)=>e.jsxs("div",{className:E.setRow,children:[e.jsx("span",{className:E.setLabel,children:I+1}),e.jsx(we,{type:"number",value:g.weight===0?"":g.weight,placeholder:"Weight",className:E.compactInput,onChange:A=>P(p.cardId,I,"weight",Number(A.target.value))}),e.jsx(we,{type:"number",value:g.reps===0?"":g.reps,placeholder:"Reps",className:E.compactInput,onChange:A=>P(p.cardId,I,"reps",Number(A.target.value))}),e.jsx(ns,{checked:g.completed??!1,onChange:A=>{P(p.cardId,I,"completed",A)},className:({checked:A})=>`${E.setCheckbox} ${A?E.checked:""}`,children:e.jsx("span",{"aria-hidden":"true",children:g.completed?"✔":""})})]},I)),e.jsx("span",{className:E.cardSuitBottom,children:v})]})]},`${p.cardId}-cycle-${l}-${y}`)})})}),e.jsx("button",{className:E.finishButton,onClick:()=>a({duration:i,exercises:n}),children:"Finish Workout"})]})};function Br(){const[t,a]=r.useState(),[o,n]=r.useState(!0),{userData:s}=G(),[i,d]=r.useState(null),l=c=>{const f=c.exercises.map(u=>({dayName:c.dayName,exercise:u.exercise,repRange:u.repRange,sets:Array(Number(u.sets)).fill({weight:0,reps:0})}));d(f)},h=c=>{console.log("Workout complete:",c),d(null)};return r.useEffect(()=>{q.get(`/routines?uid=${s==null?void 0:s.uid}`).then(c=>{a(c.data.routines)}).catch(c=>{console.error(c)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):o?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ue,{scale:2})}):e.jsxs("div",{style:{display:"flex",width:"100%"},children:[i&&e.jsx(Lr,{exercises:i,onFinish:h}),e.jsx(Ze,{routine:t,setRoutines:a,menuOptions:["Share","Delete"],onStartWorkout:l})]})}function Ar(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ue,{scale:2})})}function Mr(){const[t,a]=r.useState(),[o,n]=r.useState(!0);return G(),r.useEffect(()=>{q.get("/routines?communityRoutine=true").then(s=>{a(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):o?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ue,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Ze,{routine:t,setRoutines:a,menuOptions:["Copy"]})})}function Pr(){return e.jsx("div",{className:D.container,children:e.jsxs(ze,{children:[e.jsx(We,{className:D.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx($e,{className:({selected:a})=>`${D.tabButton} ${a?D.active:""}`,children:t},t))}),e.jsxs(cs,{children:[e.jsx(ne,{children:e.jsx(Br,{})}),e.jsx(ne,{children:e.jsx(dr,{})}),e.jsx(ne,{children:e.jsx(Ar,{})}),e.jsx(ne,{children:e.jsx(Mr,{})})]})]})})}const Fr="_prompt_1kskd_1",Er="_fadeInUp_1kskd_1",Rr="_text_1kskd_21",Or="_shareIcon_1kskd_26",Dr="_dismiss_1kskd_31",be={prompt:Fr,fadeInUp:Er,text:Rr,shareIcon:Or,dismiss:Dr},qr=()=>/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),zr=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;function Wr(){const[t,a]=r.useState(!1);r.useEffect(()=>{const n=localStorage.getItem("pwaPromptSeen");qr()&&!zr()&&!n&&a(!0)},[]);const o=()=>{a(!1),localStorage.setItem("pwaPromptSeen","true")};return t?e.jsxs("div",{className:be.prompt,children:[e.jsxs("div",{className:be.text,children:[e.jsx("strong",{children:"XPets is best when used as an app!"}),e.jsx("br",{}),e.jsx("strong",{children:"Install XPets: HealthQuest"}),e.jsx("br",{}),"On Safari, tap the “Share” button (square with arrow ↑) then “Add to Home Screen” to install the app."]}),e.jsx("button",{className:be.dismiss,onClick:o,children:"✕"})]}):null}const $r=["Pet","Skills","Quests","Routines"];function Ur(){const[t,a]=r.useState(null),[o,n]=r.useState(!0),{userData:s,setUserData:i}=G(),[d,l]=r.useState(0),h=c=>{switch($r[c]){case"Pet":return e.jsx(Ee,{});case"Skills":return e.jsx(Oo,{});case"Quests":return e.jsx(Do,{});case"Routines":return e.jsx(Pr,{});default:return e.jsx(Ee,{})}};return r.useEffect(()=>{const c=ds.throttle(()=>{console.log("Fetching user object..."),q.get(`/users/${s==null?void 0:s.uid}`).then(u=>{i(u.data),console.log("User data synced:",u.data)}).catch(u=>{console.error("Failed to fetch user:",u)})},1e4),f=()=>{console.log("User came back!"),c()};return s&&window.addEventListener("focus",f),()=>{s&&(window.removeEventListener("focus",f),c.cancel())}},[]),r.useEffect(()=>{const c=us(de,f=>{console.log("Auth state changed:",f),console.log("User Data in App useEffect:",s),a(f),n(!1);const u=localStorage.getItem("userData");u&&i(JSON.parse(u))});return()=>c()},[]),console.log("App render - Loading:",o,"User:",t,"UserData:",s),o?e.jsx(oe,{mode:"dark",children:e.jsx("div",{children:"Loading in app.tsx..."})}):!t||!s?e.jsx(oe,{mode:"dark",children:e.jsx(po,{})}):s.bodyStats.weight===0?e.jsx(oe,{mode:"dark",children:e.jsx(mo,{})}):e.jsxs(oe,{mode:"dark",children:[e.jsx(Wr,{}),e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"env(safe-area-inset-top) env(safe-area-inset-right) 0 env(safe-area-inset-left)"}}),e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",minHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",height:"calc(100dvh - 76px - env(safe-area-inset-bottom))",display:"flex",flexDirection:"column",paddingBottom:"14px",overflow:"hidden"},children:h(d)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,minHeight:"76px"},children:e.jsx(lo,{selectedIndex:d,setSelectedIndex:l})})]})]})}const Gr="modulepreload",Hr=function(t){return"/"+t},Re={},Vr=function(a,o,n){let s=Promise.resolve();return o&&o.length>0&&(document.getElementsByTagName("link"),s=Promise.all(o.map(i=>{if(i=Hr(i),i in Re)return;Re[i]=!0;const d=i.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Gr,d||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),d)return new Promise((c,f)=>{h.addEventListener("load",c),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))),s.then(()=>a()).catch(i=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i})};function Xr(t={}){const{immediate:a=!1,onNeedRefresh:o,onOfflineReady:n,onRegistered:s,onRegisteredSW:i,onRegisterError:d}=t;let l,h;const c=async(u=!0)=>{await h};async function f(){if("serviceWorker"in navigator){if(l=await Vr(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([])).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{d==null||d(u)}),!l)return;l.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),l.addEventListener("installed",u=>{u.isUpdate||n==null||n()}),l.register({immediate:a}).then(u=>{i?i("/sw.js",u):s==null||s(u)}).catch(u=>{d==null||d(u)})}}return h=f(),c}Xr({immediate:!0});_s.createRoot(document.getElementById("root")).render(e.jsx(hs.StrictMode,{children:e.jsx(xs,{children:e.jsx(fs,{children:e.jsx(ws,{children:e.jsx(Ps,{children:e.jsx(Ur,{})})})})})}));
