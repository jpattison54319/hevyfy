import{i as et,g as tt,a as st,s as at,G as nt,b as ot,c as rt,d as it,r as o,j as e,C as be,T as C,B as ee,P as Ce,S as Re,e as we,f as ke,I as re,h as q,D as ie,O as le,U as Ne,k as lt,A as ct,l as dt,R as Pe,m as Oe,n as _t,o as ut,F as xt,p as Se,H as G,q as ht,L as pt,t as mt,X as gt,u as Ie,Y as ft,v as jt,w as yt,x as _e,y as vt,z as St,M as bt,Z as Ct,E as wt,J as kt,K as Nt,N as It,Q as Tt,V as Te,W as Le,_ as Lt,$ as Be,a0 as Q,a1 as Ee,a2 as De,a3 as ze,a4 as Bt,a5 as At,a6 as Mt,a7 as Ft,a8 as Rt,a9 as T,aa as P,ab as Pt,ac as Ot,ad as K,ae as J,af as z,ag as Et,ah as Dt,ai as zt,aj as qt,ak as Wt,al as $t,am as Gt,an as Ut,ao as Ht,ap as Ae,aq as Vt,ar as Xt,as as ue,at as xe,au as he,av as Yt,aw as qe,ax as We,ay as $e,az as Ge,aA as Kt,aB as Qt,aC as Jt,aD as Zt,aE as pe,aF as es,aG as ts,aH as ss,aI as as,aJ as ns,aK as os,aL as rs,aM as is,aN as ne,aO as ls,aP as cs,aQ as me,aR as ds,aS as _s,aT as us}from"./vendor-Dcb-VGLc.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const xs={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Ue=et(xs);tt(Ue);const ce=st(Ue);at(ce,ot).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const hs=new nt;function ps(){rt(ce).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const E=it.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),He=o.createContext(void 0),ms=({children:t})=>{const[a,r]=o.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),n=s=>{r(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(He.Provider,{value:{userData:a,setUserData:n},children:t})},$=()=>{const t=o.useContext(He);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=t,n=o.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:n}},gs=()=>{const{userData:t,setUserData:a}=$(),r=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[n,s]=o.useState(""),[i,m]=o.useState(null),[c,g]=o.useState(!1),[l,v]=o.useState(null),[j,L]=o.useState(null),[S,B]=o.useState(!1),A=async()=>{var d,b;if(n.trim()){g(!0),v(null),m(null);try{const{data:u}=await E.post("/chatnutrition",{message:n}),y={...u,description:n,userId:t==null?void 0:t.uid};console.log(y),L(y),B(!0)}catch(u){const y=u,I=(d=y.response)==null?void 0:d.data;((b=y.response)==null?void 0:b.status)===400?v((I==null?void 0:I.suggestion)||"Please describe a specific food item or meal"):v("Failed to get nutrition info. Try again.")}finally{g(!1)}}},O=async()=>{if(j){g(!0),v(null);try{const d=await E.post("/meal/addMeal",j),{mealAffects:b,updatedUser:u}=d.data;a(u);const y=[];b.currency&&y.push(`ðŸ¦´ This meal cost ${b.currency} bone${b.currency>1?"s":""}!`),b.armorIncrease&&y.push(`ðŸ›¡ï¸ +${b.armorIncrease.toFixed(1)} Armor from protein`),b.defenseIncrease&&y.push(`ðŸ§± +${b.defenseIncrease.toFixed(1)} Defense from fiber`),b.speedIncrease&&y.push(`ðŸ’¨ +${b.speedIncrease.toFixed(1)} Speed from hydration`),b.intelligenceIncrease&&y.push(`ðŸ§  +${b.intelligenceIncrease} Intelligence from fruits & vegetables`),y.length===0&&y.push("Seems like this meal didnt contain any sustenance!"),m(y.join(`
`))}catch{v("Failed to confirm meal. Try again.")}finally{g(!1),L(null),B(!1),s("")}}},w=()=>{L(null),B(!1),m(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:n,onChange:d=>s(d.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),S?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[r==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(j.calories/100)," ",r]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:O,disabled:c,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:c?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:c?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:w,disabled:c,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:c?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:A,disabled:c||!n.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:c||!n.trim()?"#332200":"#1a1100",color:c||!n.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c||!n.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:c||!n.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:c?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),l&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",l]})}),i&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:i})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},M=({symbol:t,label:a="",className:r="",style:n={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...n},children:t}),fs={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},js=({petType:t,selectedRpe:a,onChange:r})=>{const n=fs[t],s=i=>{r(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:n.map(i=>e.jsxs(be,{onClick:()=>s(i.rpe),style:{cursor:"pointer",border:a===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(M,{size:32,symbol:i.emoji}),e.jsx(C,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(C,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},ys=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(M,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,Ve=o.createContext(void 0),Xe=()=>{const t=o.useContext(Ve);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let vs=0;const Ss=({children:t})=>{const[a,r]=o.useState([]),[n,s]=o.useState(null);o.useEffect(()=>{!n&&a.length>0&&(s(a[0]),r(c=>c.slice(1)))},[a,n]),o.useEffect(()=>{if(!n)return;const c=n.duration??3e3,g=setTimeout(()=>{s(null)},c);return()=>clearTimeout(g)},[n]);const i=o.useCallback(c=>{const g=++vs;r(l=>[...l,{id:g,...c}])},[]),m=o.useCallback(()=>{s(null)},[]);return e.jsxs(Ve.Provider,{value:{addToast:i,removeToast:m},children:[t,n&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:n.content},n.id)})]})},bs="_levelUpContainer_vq3kq_1",Cs="_levelUpPulse_vq3kq_1",ws="_shimmer_vq3kq_1",ks="_emoji_vq3kq_32",Ns="_bounce_vq3kq_1",Is="_levelText_vq3kq_41",Ts="_levelNumber_vq3kq_54",Ls="_celebration_vq3kq_67",Bs="_fadeInUp_vq3kq_1",te={levelUpContainer:bs,levelUpPulse:Cs,shimmer:ws,emoji:ks,bounce:Ns,levelText:Is,levelNumber:Ts,celebration:Ls,fadeInUp:Bs},Ye=o.createContext(void 0),As=({children:t})=>{const[a,r]=o.useState(null),[n,s]=o.useState(void 0),i=({content:c,style:g})=>{r(c),s(g)},m=()=>{r(null),s(void 0)};return e.jsxs(Ye.Provider,{value:{showSplash:i,hideSplash:m},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...n},onClick:m,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(ee,{onClick:m,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Ms=()=>{const t=o.useContext(Ye);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},Fs={1:.5,2:1,3:1.5,4:2.2},Rs=({setDrawerView:t})=>{const{userData:a,setUserData:r}=$(),{addToast:n}=Xe(),{showSplash:s}=Ms(),[i,m]=o.useState(!1),[c,g]=o.useState("WEIGHTS"),[l,v]=o.useState("DURATION"),[j,L]=o.useState(""),[S,B]=o.useState(""),[A,O]=o.useState(""),[w,d]=o.useState(null),[b,u]=o.useState(""),y=["WEIGHTS","CARDIO","MOBILITY","SPORT"],I=["DURATION","DISTANCE"],[x,h]=o.useState(!1),f=Array.from({length:12},(N,U)=>U),k=Array.from({length:60},(N,U)=>U),[F,H]=o.useState({strength:0,agility:0,pet:0});console.log(S),console.log(w);function X(){const N=(Number(S)||0)*60+(Number(A)||0);console.log("totalDuration ",N);const U=Fs[w??2];let W=0;N>0?W=Math.round(N*10*U):Number(j)>0&&(W=Math.round(Number(j)*125*U)),console.log("totalXp ",W);let se=0,ae=0;switch(c){case"WEIGHTS":se=Math.round(W/100);break;case"CARDIO":ae=Math.round(W/100);break;case"MOBILITY":case"SPORT":const Je=W/2/100,Ze=W/2/100;se=Math.round(Je),ae=Math.round(Ze);break}return console.log("final ",{strength:se,agility:ae,pet:W}),{strength:se,agility:ae,pet:W}}const V=y.includes(c)&&I.includes(l)&&(j!==""||S!==""||A!=="")&&w!==null;function Y(){L(""),B(""),O(""),d(null),u(""),g("WEIGHTS"),v("DURATION")}const Qe=async()=>{const N=X();if(H(N),!a||!a.uid){alert("User not loaded properly.");return}const U=l==="DURATION"?(Number(S)||0)*60+(Number(A)||0):0;try{const{data:W}=await E.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:c,cardioMode:l,duration:U,distance:l==="DISTANCE"&&Number(j)||0,rpe:w,notes:b,workoutXp:N});r(W.updatedUser),Y(),n({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",N.pet," PET XP"]}),N.strength>0&&N.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",N.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",N.agility," AGILITY"]})]}):N.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",N.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",N.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{W.levelUp&&s({content:e.jsxs("div",{className:te.levelUpContainer,children:[e.jsx("div",{className:te.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:te.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:te.levelNumber,children:["LEVEL ",W.updatedUser.pet.level]}),e.jsx("div",{className:te.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(W){console.error(W),alert("There was an error logging your workout.")}};return i?e.jsx(Ce,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(Re,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Ce,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(ys,{open:x,onClose:()=>h(!1)}),e.jsx(C,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(C,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(we,{value:c??"",onChange:N=>g(N.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:y.map(N=>e.jsx(ke,{value:N,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:N},N))}),c==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(we,{value:l??"",onChange:N=>{v(N.currentTarget.value),L(""),B(""),O("")},style:{marginBottom:16},children:I.map(N=>e.jsx(ke,{value:N,appearance:N==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:N},N))})]}),l==="DISTANCE"&&c==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(C,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(re,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:j,onChange:N=>L(N.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(C,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(q,{direction:"row",gap:2,children:[e.jsx(ie,{value:S+" hr(s)",onSelectionChange:(N,U)=>B(U[0]??""),placeholder:"Hours",children:f.map(N=>e.jsxs(le,{value:String(N),children:[N," hr"]},N))}),e.jsx(ie,{value:A+" min(s)",onSelectionChange:(N,U)=>O(U[0]??""),placeholder:"Minutes",children:k.map(N=>e.jsxs(le,{value:String(N),children:[N<10?`0${N}`:N," min"]},N))})]})]}),e.jsx(C,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(js,{selectedRpe:w,onChange:N=>d(N),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(C,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:b,onChange:N=>u(N.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(ee,{onClick:Qe,disabled:!V,style:{opacity:V?1:.4,cursor:V?"pointer":"not-allowed",color:V?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:V?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Ps="_backdrop_1mk9a_9",Os="_drawer_1mk9a_17",Es="_drawer__header_1mk9a_34",Ds="_drawer__headerContent_1mk9a_41",zs="_drawer__headerIcon_1mk9a_46",qs="_drawer__title_1mk9a_49",Ws="_drawer__closeButton_1mk9a_55",$s="_drawer__content_1mk9a_67",Gs="_mealCard_1mk9a_73",Us="_mealCard__header_1mk9a_85",Hs="_mealCard__info_1mk9a_91",Vs="_mealCard__title_1mk9a_94",Xs="_mealCard__timestamp_1mk9a_100",Ys="_mealCard__calories_1mk9a_105",Ks="_mealCard__caloriesValue_1mk9a_108",Qs="_mealCard__caloriesLabel_1mk9a_115",Js="_mealCard__macros_1mk9a_119",Zs="_mealCard__additionalStats_1mk9a_125",ea="_mealCard__statBoosts_1mk9a_131",ta="_mealCard__statBoostsTitle_1mk9a_135",sa="_mealCard__statBoostsGrid_1mk9a_141",aa="_mealCard__currency_1mk9a_146",na="_mealCard__currencyText_1mk9a_150",oa="_macroItem_1mk9a_156",ra="_macroItem__value_1mk9a_162",ia="_macroItem__label_1mk9a_168",la="_additionalStat_1mk9a_182",ca="_additionalStat__icon_1mk9a_190",da="_additionalStat__content_1mk9a_193",_a="_additionalStat__value_1mk9a_196",ua="_additionalStat__label_1mk9a_203",xa="_statBoost_1mk9a_212",ha="_statBoost__icon_1mk9a_221",pa="_statBoost__label_1mk9a_236",ma="_statBoost__value_1mk9a_239",ga="_loadingState_1mk9a_244",fa="_loadingState__content_1mk9a_248",ja="_pulse_1mk9a_1",ya="_loadingState__text_1mk9a_251",va="_loadingState__subtext_1mk9a_255",Sa="_loadingMore_1mk9a_260",ba="_loadingMore__content_1mk9a_264",Ca="_loadingMore__text_1mk9a_267",wa="_loadingMore__subtext_1mk9a_271",ka="_emptyState_1mk9a_276",Na="_emptyState__icon_1mk9a_280",Ia="_emptyState__text_1mk9a_284",Ta="_emptyState__subtext_1mk9a_288",La="_endOfList_1mk9a_293",Ba="_endOfList__text_1mk9a_298",Aa="_endOfList__subtext_1mk9a_303",Ma="_mealsList_1mk9a_308",Fa="_demoApp_1mk9a_314",Ra="_demoApp__container_1mk9a_319",Pa="_demoApp__title_1mk9a_323",Oa="_demoApp__button_1mk9a_330",p={backdrop:Ps,drawer:Os,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:Es,drawer__headerContent:Ds,drawer__headerIcon:zs,drawer__title:qs,drawer__closeButton:Ws,drawer__content:$s,mealCard:Gs,mealCard__header:Us,mealCard__info:Hs,mealCard__title:Vs,mealCard__timestamp:Xs,mealCard__calories:Ys,mealCard__caloriesValue:Ks,mealCard__caloriesLabel:Qs,mealCard__macros:Js,mealCard__additionalStats:Zs,mealCard__statBoosts:ea,mealCard__statBoostsTitle:ta,mealCard__statBoostsGrid:sa,mealCard__currency:aa,mealCard__currencyText:na,macroItem:oa,macroItem__value:ra,macroItem__label:ia,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:la,additionalStat__icon:ca,additionalStat__content:da,additionalStat__value:_a,additionalStat__label:ua,statBoost:xa,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:ha,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:pa,statBoost__value:ma,loadingState:ga,loadingState__content:fa,pulse:ja,loadingState__text:ya,loadingState__subtext:va,loadingMore:Sa,loadingMore__content:ba,loadingMore__text:Ca,loadingMore__subtext:wa,emptyState:ka,emptyState__icon:Na,emptyState__text:Ia,emptyState__subtext:Ta,endOfList:La,endOfList__text:Ba,endOfList__subtext:Aa,mealsList:Ma,demoApp:Fa,demoApp__container:Ra,demoApp__title:Pa,demoApp__button:Oa},Ea=()=>{const{userData:t}=$(),[a,r]=o.useState([]),[n,s]=o.useState(!1),[i,m]=o.useState(!1),[c,g]=o.useState(!0),[l,v]=o.useState(0),j=o.useRef(null),L=10,S=async(w=l,d=!1)=>{d?s(!0):m(!0);try{const u=(await E.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${L}&offset=${w}`)).data,y=u.meals||[];r(d?y:h=>[...h,...y]);const I=u.total||0,x=w+y.length;g(x<I),v(w+y.length)}catch(b){console.error("Error fetching meals:",b)}s(!1),m(!1)};o.useEffect(()=>{S(0,!0)},[]),o.useEffect(()=>{const w=()=>{const b=document.querySelector(".saltDrawer");if(!b)return;const{scrollTop:u,scrollHeight:y,clientHeight:I}=b;y-u<=I+100&&c&&!i&&S(l,!1)},d=document.querySelector(".saltDrawer");return d&&d.addEventListener("scroll",w),()=>{d&&d.removeEventListener("scroll",w)}},[l,c,i]);const B=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=({icon:w,label:d,value:b,color:u})=>e.jsxs("div",{className:`${p.statBoost} ${p[`statBoost--${u}`]}`,children:[e.jsx(w,{size:12,className:p.statBoost__icon}),e.jsx("span",{className:p.statBoost__label,children:d}),e.jsxs("span",{className:p.statBoost__value,children:["+",b]})]}),O=({meal:w})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:p.mealCard,children:[e.jsxs("div",{className:p.mealCard__header,children:[e.jsxs("div",{className:p.mealCard__info,children:[e.jsx("h3",{className:p.mealCard__title,children:w.description}),e.jsx("p",{className:p.mealCard__timestamp,children:B(w.timestamp)})]}),e.jsxs("div",{className:p.mealCard__calories,children:[e.jsx("div",{className:p.mealCard__caloriesValue,children:w.calories}),e.jsx("div",{className:p.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:p.mealCard__macros,children:[e.jsxs("div",{className:`${p.macroItem} ${p["macroItem--protein"]}`,children:[e.jsxs("div",{className:p.macroItem__value,children:[w.protein,"g"]}),e.jsx("div",{className:p.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${p.macroItem} ${p["macroItem--carbs"]}`,children:[e.jsxs("div",{className:p.macroItem__value,children:[w.carbs,"g"]}),e.jsx("div",{className:p.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${p.macroItem} ${p["macroItem--fat"]}`,children:[e.jsxs("div",{className:p.macroItem__value,children:[w.fat,"g"]}),e.jsx("div",{className:p.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:p.mealCard__additionalStats,children:[e.jsxs("div",{className:p.additionalStat,children:[e.jsx(lt,{size:16,className:p.additionalStat__icon}),e.jsxs("div",{className:p.additionalStat__content,children:[e.jsxs("div",{className:p.additionalStat__value,children:[w.fluid_intake_ml,"ml"]}),e.jsx("div",{className:p.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:p.additionalStat,children:[e.jsx(ct,{size:16,className:p.additionalStat__icon}),e.jsxs("div",{className:p.additionalStat__content,children:[e.jsx("div",{className:p.additionalStat__value,children:w.servings_of_fruits_vegetables}),e.jsx("div",{className:p.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:p.mealCard__statBoosts,children:[e.jsx("div",{className:p.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:p.mealCard__statBoostsGrid,children:[w.mealAffects.armorIncrease>0&&e.jsx(A,{icon:dt,label:"ARM",value:w.mealAffects.armorIncrease,color:"blue"}),w.mealAffects.speedIncrease>0&&e.jsx(A,{icon:Pe,label:"SPD",value:w.mealAffects.speedIncrease,color:"yellow"}),w.mealAffects.intelligenceIncrease>0&&e.jsx(A,{icon:Oe,label:"INT",value:w.mealAffects.intelligenceIncrease,color:"pink"}),w.mealAffects.defenseIncrease>0&&e.jsx(A,{icon:_t,label:"DEF",value:w.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:p.mealCard__currency,children:e.jsxs("span",{className:p.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(ut,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(xt,{size:15,style:{verticalAlign:"middle"}})})," "+w.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:p.drawer__header,children:e.jsxs("div",{className:p.drawer__headerContent,children:[e.jsx(Ne,{className:p.drawer__headerIcon,size:32}),e.jsx("h2",{className:p.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:j,children:n?e.jsx("div",{className:p.loadingState,children:e.jsxs("div",{className:p.loadingState__content,children:[e.jsx("div",{className:p.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:p.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:p.emptyState,children:[e.jsx(Ne,{className:p.emptyState__icon,size:48}),e.jsx("div",{className:p.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:p.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:p.mealsList,children:[a.map((w,d)=>e.jsx(O,{meal:w},`${w.id}-${d}`)),i&&e.jsx("div",{className:p.loadingMore,children:e.jsxs("div",{className:p.loadingMore__content,children:[e.jsx("div",{className:p.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:p.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!c&&a.length>0&&e.jsxs("div",{className:p.endOfList,children:[e.jsx("div",{className:p.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:p.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},Da="_container_1chaz_4",za="_heading_1chaz_10",qa="_rangeButtons_1chaz_16",Wa="_button_1chaz_23",$a="_activeButton_1chaz_37",Ga="_checkmarkPath_1chaz_53",Z={container:Da,heading:za,rangeButtons:qa,button:Wa,activeButton:$a,checkmarkPath:Ga,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Ua=({onWeightChange:t})=>{var c,g;const{userData:a}=$(),r=()=>{var v,j;const l=(v=a==null?void 0:a.bodyStats)==null?void 0:v.weightLogs;if(Array.isArray(l)&&l.length>0){const L=[...l].sort((S,B)=>new Date(S.date).getTime()-new Date(B.date).getTime());return L[L.length-1].weight}return((j=a==null?void 0:a.bodyStats)==null?void 0:j.weight)??150},[n,s]=o.useState(r());o.useEffect(()=>{s(r())},[(c=a==null?void 0:a.bodyStats)==null?void 0:c.weightLogs,(g=a==null?void 0:a.bodyStats)==null?void 0:g.weight]);const i=l=>{const v=parseFloat((n+l).toFixed(1));v>=0&&s(v)},m=()=>{t(n)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(Se,{id:"current-weight",type:"number",step:.1,value:n,onChange:l=>{const v=parseFloat(l.target.value);!isNaN(v)&&v>=0?s(v):l.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(G,{onClick:()=>i(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(G,{onClick:()=>i(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(G,{onClick:m,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Ha={week:7,month:30,threeMonths:90,all:1/0},Va=t=>t<=7?0:t<=30?4:t<=90?15:30,Xa=()=>{const[t,a]=o.useState(!1),{userData:r}=$(),[n,s]=o.useState("week"),[i,m]=o.useState([]),[c,g]=o.useState(!0);o.useEffect(()=>{(t||c)&&E.get(`/weightLogs/${r==null?void 0:r.uid}`).then(S=>{m(S.data.weightLogs)}).catch(S=>{console.log(S)}),g(!1)},[t]);const l=[...i].sort((S,B)=>new Date(S.date).getTime()-new Date(B.date).getTime()).map(S=>({date:typeof S.date=="string"?S.date.slice(0,10):S.date instanceof Date?S.date.toISOString().slice(0,10):"",weight:S.weight})),v=n==="all"?l:l.slice(-Ha[n]),j=Va(v.length),L=async S=>{if(!r)return;const B={date:new Date().toISOString(),weight:S,userId:r.uid};try{const{data:A}=await E.post("weightLogs/addWeightLog",B);a(!0),setTimeout(()=>a(!1),1500)}catch(A){console.error(A)}};return e.jsxs("div",{className:Z.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:Z.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:Z.heading,children:"Log Your Weight"}),e.jsx("div",{className:Z.rangeButtons,children:["week","month","threeMonths","all"].map(S=>e.jsx(G,{className:n===S?Z.activeButton:Z.button,onClick:()=>s(S),children:S==="week"?"1W":S==="month"?"1M":S==="threeMonths"?"3M":"ALL"},S))}),e.jsx(ht,{width:"100%",height:300,children:e.jsxs(pt,{data:v,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(mt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(gt,{dataKey:"date",tickFormatter:S=>{const B=new Date(S);return isNaN(B.getTime())?"":Ie(B,"MM/dd")},stroke:"#ff9900",interval:j,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(ft,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(jt,{labelFormatter:S=>Ie(new Date(S),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(yt,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Ua,{onWeightChange:L})})]})},Ya="_drawer__header_1hvqx_2",Ka="_drawer__headerContent_1hvqx_24",Qa="_drawer__headerIcon_1hvqx_32",Ja="_drawer__title_1hvqx_46",Za="_drawer__content_1hvqx_56",en="_loadingState_1hvqx_77",tn="_emptyState_1hvqx_78",sn="_loadingState__content_1hvqx_90",an="_emptyState__content_1hvqx_91",nn="_loadingState__spinner_1hvqx_98",on="_loadingState__text_1hvqx_115",rn="_emptyState__text_1hvqx_116",ln="_loadingState__subtext_1hvqx_125",cn="_emptyState__subtext_1hvqx_126",dn="_emptyState__icon_1hvqx_135",_n="_workoutsList_1hvqx_143",un="_workoutCard_1hvqx_150",xn="_workoutCard__border_1hvqx_186",hn="_workoutCard__header_1hvqx_197",pn="_workoutCard__info_1hvqx_206",mn="_workoutCard__title_1hvqx_210",gn="_workoutCard__timestamp_1hvqx_217",fn="_workoutCard__timestampIcon_1hvqx_229",jn="_workoutCard__xp_1hvqx_233",yn="_workoutCard__xpValue_1hvqx_244",vn="_workoutCard__xpLabel_1hvqx_251",Sn="_workoutCard__stats_1hvqx_256",bn="_statItem_1hvqx_263",Cn="_statItem__value_1hvqx_304",wn="_statItem__label_1hvqx_311",kn="_workoutCard__sectionTitle_1hvqx_317",Nn="_workoutCard__manualStats_1hvqx_333",In="_workoutCard__manualGrid_1hvqx_337",Tn="_manualStat_1hvqx_343",Ln="_manualStat__icon_1hvqx_354",Bn="_manualStat__content_1hvqx_359",An="_manualStat__value_1hvqx_365",Mn="_manualStat__label_1hvqx_373",Fn="_workoutCard__exercises_1hvqx_379",Rn="_workoutCard__exercisesList_1hvqx_383",Pn="_exerciseItem_1hvqx_389",On="_exerciseItem__name_1hvqx_407",En="_exerciseItem__sets_1hvqx_414",Dn="_exerciseItem__set_1hvqx_414",zn="_exerciseItem__notes_1hvqx_430",qn="_workoutCard__statBoosts_1hvqx_439",Wn="_workoutCard__statBoostsGrid_1hvqx_449",$n="_statBoost_1hvqx_455",Gn="_statBoost__icon_1hvqx_496",Un="_statBoost__label_1hvqx_500",Hn="_statBoost__value_1hvqx_504",Vn="_workoutCard__notes_1hvqx_509",Xn="_workoutCard__notesText_1hvqx_514",Yn="_loadingMore_1hvqx_524",Kn="_endOfList_1hvqx_525",Qn="_loadingMore__content_1hvqx_539",Jn="_loadingMore__spinner_1hvqx_545",Zn="_loadingMore__text_1hvqx_553",eo="_loadingMore__subtext_1hvqx_561",to="_endOfList__content_1hvqx_575",so="_endOfList__text_1hvqx_581",ao="_endOfList__subtext_1hvqx_589",_={drawer__header:Ya,drawer__headerContent:Ka,drawer__headerIcon:Qa,"pulse-glow":"_pulse-glow_1hvqx_1",drawer__title:Ja,drawer__content:Za,loadingState:en,emptyState:tn,loadingState__content:sn,emptyState__content:an,loadingState__spinner:nn,"pixel-spin":"_pixel-spin_1hvqx_1",loadingState__text:on,emptyState__text:rn,loadingState__subtext:ln,emptyState__subtext:cn,emptyState__icon:dn,workoutsList:_n,workoutCard:un,"scan-line":"_scan-line_1hvqx_1",workoutCard__border:xn,workoutCard__header:hn,workoutCard__info:pn,workoutCard__title:mn,workoutCard__timestamp:gn,workoutCard__timestampIcon:fn,workoutCard__xp:jn,workoutCard__xpValue:yn,workoutCard__xpLabel:vn,workoutCard__stats:Sn,statItem:bn,"statItem--type":"_statItem--type_1hvqx_286","statItem--logtype":"_statItem--logtype_1hvqx_292","statItem--rpe":"_statItem--rpe_1hvqx_298",statItem__value:Cn,statItem__label:wn,workoutCard__sectionTitle:kn,workoutCard__manualStats:Nn,workoutCard__manualGrid:In,manualStat:Tn,manualStat__icon:Ln,manualStat__content:Bn,manualStat__value:An,manualStat__label:Mn,workoutCard__exercises:Fn,workoutCard__exercisesList:Rn,exerciseItem:Pn,exerciseItem__name:On,exerciseItem__sets:En,exerciseItem__set:Dn,exerciseItem__notes:zn,workoutCard__statBoosts:qn,workoutCard__statBoostsGrid:Wn,statBoost:$n,"statBoost--red":"_statBoost--red_1hvqx_478","statBoost--yellow":"_statBoost--yellow_1hvqx_484","statBoost--pink":"_statBoost--pink_1hvqx_490",statBoost__icon:Gn,statBoost__label:Un,statBoost__value:Hn,workoutCard__notes:Vn,workoutCard__notesText:Xn,loadingMore:Yn,endOfList:Kn,loadingMore__content:Qn,loadingMore__spinner:Jn,loadingMore__text:Zn,loadingMore__subtext:eo,endOfList__content:to,endOfList__text:so,endOfList__subtext:ao},no=()=>{const{userData:t}=$(),[a,r]=o.useState([]),[n,s]=o.useState(!1),[i,m]=o.useState(!1),[c,g]=o.useState(!0),[l,v]=o.useState(0),j=o.useRef(null),L=10,S=async(d=l,b=!1)=>{b?s(!0):m(!0);try{const y=(await E.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${L}&offset=${d}`)).data,I=y.workouts||[];r(b?I:f=>[...f,...I]);const x=y.total||0,h=d+I.length;g(h<x),v(d+I.length)}catch(u){console.error("Error fetching workouts:",u)}s(!1),m(!1)};o.useEffect(()=>{S(0,!0)},[]),o.useEffect(()=>{const d=()=>{const u=document.querySelector(".saltDrawer");if(!u)return;const{scrollTop:y,scrollHeight:I,clientHeight:x}=u;I-y<=x+100&&c&&!i&&S(l,!1)},b=document.querySelector(".saltDrawer");return b&&b.addEventListener("scroll",d),()=>{b&&b.removeEventListener("scroll",d)}},[l,c,i]);const B=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=d=>{const b=Math.floor(d/60),u=d%60;return b>0?`${b}h ${u}m`:`${u}m`},O=({icon:d,label:b,value:u,color:y})=>e.jsxs("div",{className:`${_.statBoost} ${_[`statBoost--${y}`]}`,children:[e.jsx(d,{size:17,className:_.statBoost__icon}),e.jsx("span",{className:_.statBoost__label,children:b}),e.jsxs("span",{className:_.statBoost__value,children:["+",u]})]}),w=({workout:d})=>{var I;const b=d.logType==="manual",u=d.logType==="routine",y=d.workoutXp.pet;return e.jsxs("div",{className:_.workoutCard,children:[e.jsx("div",{className:_.workoutCard__border}),e.jsxs("div",{className:_.workoutCard__header,children:[e.jsxs("div",{className:_.workoutCard__info,children:[e.jsx("h3",{className:_.workoutCard__title,children:u?`${d.routineDay} ROUTINE`:`${(I=d==null?void 0:d.workoutType)==null?void 0:I.toUpperCase()} SESSION`}),e.jsxs("p",{className:_.workoutCard__timestamp,children:[e.jsx(vt,{size:12,className:_.workoutCard__timestampIcon}),B(d.timestamp)]})]}),e.jsxs("div",{className:_.workoutCard__xp,children:[e.jsx("div",{className:_.workoutCard__xpValue,children:y}),e.jsx("div",{className:_.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:_.workoutCard__stats,children:d.rpe&&e.jsxs("div",{className:`${_.statItem} ${_["statItem--rpe"]}`,children:[e.jsxs("div",{className:_.statItem__value,children:[d.rpe,"/4"]}),e.jsx("div",{className:_.statItem__label,children:"RPE"})]})}),b&&e.jsx("div",{className:_.workoutCard__manualStats,children:e.jsxs("div",{className:_.workoutCard__manualGrid,children:[d.duration&&e.jsxs("div",{className:_.manualStat,children:[e.jsx(St,{size:25,className:_.manualStat__icon}),e.jsxs("div",{className:_.manualStat__content,children:[e.jsx("div",{className:_.manualStat__value,children:A(d.duration)}),e.jsx("div",{className:_.manualStat__label,children:"DURATION"})]})]}),d.distance!=0&&e.jsxs("div",{className:_.manualStat,children:[e.jsx(bt,{size:16,className:_.manualStat__icon}),e.jsxs("div",{className:_.manualStat__content,children:[e.jsxs("div",{className:_.manualStat__value,children:[d.distance," KM"]}),e.jsx("div",{className:_.manualStat__label,children:"DISTANCE"})]})]})]})}),u&&d.performedExercises&&d.performedExercises.length>0&&e.jsxs("div",{className:_.workoutCard__exercises,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(_e,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:_.workoutCard__exercisesList,children:d.performedExercises.map((x,h)=>e.jsxs("div",{className:_.exerciseItem,children:[e.jsx("div",{className:_.exerciseItem__name,children:x.name.toUpperCase()}),e.jsx("div",{className:_.exerciseItem__sets,children:x.sets.map((f,k)=>e.jsxs("span",{className:_.exerciseItem__set,children:[f.weight,"KG Ã— ",f.reps]},k))}),x.notes&&e.jsxs("div",{className:_.exerciseItem__notes,children:['"',x.notes,'"']})]},h))})]}),e.jsxs("div",{className:_.workoutCard__statBoosts,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(Ct,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:_.workoutCard__statBoostsGrid,children:[d.workoutXp.strength>0&&e.jsx(O,{icon:wt,label:"STR",value:d.workoutXp.strength,color:"red"}),d.workoutXp.agility>0&&e.jsx(O,{icon:Pe,label:"AGI",value:d.workoutXp.agility,color:"yellow"})]})]}),d.notes&&e.jsxs("div",{className:_.workoutCard__notes,children:[e.jsxs("div",{className:_.workoutCard__sectionTitle,children:[e.jsx(Oe,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:_.workoutCard__notesText,children:['"',d.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.drawer__header,children:e.jsxs("div",{className:_.drawer__headerContent,children:[e.jsx(_e,{className:_.drawer__headerIcon,size:32}),e.jsx("h2",{className:_.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:_.drawer__content,ref:j,children:n?e.jsx("div",{className:_.loadingState,children:e.jsxs("div",{className:_.loadingState__content,children:[e.jsx("div",{className:_.loadingState__spinner}),e.jsx("div",{className:_.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:_.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:_.emptyState,children:e.jsxs("div",{className:_.emptyState__content,children:[e.jsx(_e,{className:_.emptyState__icon,size:48}),e.jsx("div",{className:_.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:_.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:_.workoutsList,children:[a.map((d,b)=>e.jsx(w,{workout:d},`${d._id}-${b}`)),i&&e.jsx("div",{className:_.loadingMore,children:e.jsxs("div",{className:_.loadingMore__content,children:[e.jsx("div",{className:_.loadingMore__spinner}),e.jsx("div",{className:_.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:_.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!c&&a.length>0&&e.jsx("div",{className:_.endOfList,children:e.jsxs("div",{className:_.endOfList__content,children:[e.jsx("div",{className:_.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:_.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})};o.forwardRef(function({onClick:a,to:r,...n},s){const i=kt(r),m=Nt(r);return e.jsx(It,{...n,href:i,onClick:c=>{a==null||a(c),c.defaultPrevented||m(c)},ref:s})});const oo=["Pet","Skills","Quests","Routines"],ro=({selectedIndex:t,setSelectedIndex:a})=>{const[r,n]=o.useState("none"),{pathname:s}=Tt();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Te,{children:[e.jsx(Le,{children:e.jsx(G,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Lt,{"aria-hidden":!0})})}),e.jsxs(Be,{children:[e.jsx(Q,{onClick:()=>n("logWeight"),children:"Log Weight"}),e.jsx(Q,{onClick:()=>n("logFood"),children:"Log Food"}),e.jsx(Q,{onClick:()=>n("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(Ee,{selectedIndex:t,onChange:a,children:e.jsx(De,{className:"tab-nav",children:oo.map((i,m)=>e.jsx(ze,{className:({selected:c})=>`tab-button ${c?"tab-selected":""}`,children:i},i))})}),e.jsx("div",{children:e.jsx(Bt,{placement:"top",content:"User Settings",children:e.jsxs(Te,{children:[e.jsx(Le,{children:e.jsx(G,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(At,{"aria-hidden":!0})})}),e.jsxs(Be,{children:[e.jsx(Q,{onClick:()=>n("mealHist"),children:"View Meals"}),e.jsx(Q,{onClick:()=>n("workoutHist"),children:"View Workouts"}),e.jsx(Q,{onClick:ps,children:"Logout"})]})]})})}),e.jsxs(Mt,{open:r!=="none",onOpenChange:()=>n("none"),position:"bottom",children:[e.jsx(Ft,{onClick:()=>n("none")}),r==="logFood"&&e.jsx(gs,{}),r==="logWorkout"&&e.jsx(Rs,{setDrawerView:n}),r==="mealHist"&&e.jsx(Ea,{}),r==="workoutHist"&&e.jsx(no,{}),r==="logWeight"&&e.jsx(Xa,{})]})]})},io="_myBackground_1pm88_1",lo="_loginScreen_1pm88_13",co="_overlay_1pm88_29",_o="_loginContainer_1pm88_39",uo="_googleButton_1pm88_49",ge={myBackground:io,loginScreen:lo,overlay:co,loginContainer:_o,googleButton:uo};function xo(){const{setUserData:t}=$(),[a,r]=o.useState(!1),n=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const i=await(await Rt(ce,hs)).user.getIdToken(),{data:m}=await E.post("/auth/google",{token:i}),g=(await E.get(`/users/${m.uid}`)).data;t(g),console.log("User saved or retrieved from DB:",m)}catch(s){console.error(s)}r(!0)};return e.jsx("div",{className:ge.loginScreen,children:e.jsx("div",{className:ge.loginContainer,children:a?e.jsx(Re,{size:"large","aria-label":"loading",role:"status"}):e.jsx(ee,{className:ge.googleButton,onClick:n,children:"Embark with Google"})})})}const ho=()=>{const{userData:t,setUserData:a}=$();if(!t)return e.jsx(C,{children:"Loading..."});const[r,n]=o.useState(0),[s,i]=o.useState(t),[m,c]=o.useState(1),[g,l]=o.useState(1.2),[v,j]=o.useState(0),[L,S]=o.useState(Math.floor(s.bodyStats.height/12)),[B,A]=o.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(C,{children:"Loading..."});o.useEffect(()=>{const x=L*12+B;console.log("total inches : ",x),i(h=>({...h,bodyStats:{...h.bodyStats,height:x}}))},[L,B]);const O=x=>{const{weight:h,height:f,age:k,sex:F}=x;return F==="male"?10*(h/2.205)+6.25*(f*2.54)-5*k+5:10*(h/2.205)+6.25*(f*2.54)-5*k-161},w=x=>{const h=g+v;return x*h},d=async x=>{x.preventDefault();const h=s.bodyStats.weight,f={userId:t.uid,date:new Date,weight:h},k=O(s.bodyStats),F=w(k),H=s.goal.goalType==="weight_loss"?F-m*3500/7:s.goal.goalType==="muscle_gain"?F+300:F,X=Math.round(H/100),V={...s,bodyStats:{...s.bodyStats,bmr:k,tdee:F,weight:h},goal:{...s.goal,dailyCalorieGoal:H,dailyCurrencyTotal:X,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",V);try{const{data:Y}=await E.post("/users/update",{...V});a(Y)}catch(Y){console.error("Error updating user data:",Y)}try{await E.post("/weightLogs/addWeightLog",f)}catch(Y){console.error(Y)}},b=(x,h,f)=>{const{name:k,value:F}=x.target;i({...s,[h]:{...s[h],[f||k]:F}})},u=(x,h,f)=>{i({...s,[x]:{...s[x],[h]:f}})},y=()=>{if(r===0){const{weight:x,height:h,age:f,sex:k}=s.bodyStats;return x>0&&h>0&&f>0&&["male","female"].includes(k)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(r===2){const{name:x,currentPet:h}=s.pet;return x.trim()!==""&&["puppy","kitten","bird"].includes(h)}return!0},I=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(T,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(P,{grow:1,children:e.jsxs(q,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(P,{children:e.jsx(C,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(P,{children:e.jsx(Pt,{children:I.map((x,h)=>e.jsx(Ot,{label:x,stage:r===h?"active":h<r?"completed":"pending"},h))})}),e.jsxs("form",{onSubmit:d,children:[r===0&&e.jsxs(q,{align:"stretch",gap:2,children:[e.jsx(C,{styleAs:"h2",children:"Body Stats"}),e.jsxs(K,{children:[e.jsx(J,{children:"Weight (lbs)"}),e.jsx(re,{value:s.bodyStats.weight,onChange:x=>b(x,"bodyStats","weight")})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(ie,{value:L.toString()+" ft",onSelectionChange:(x,h)=>S(Number(h)),children:[2,3,4,5,6,7,8,9].map(x=>e.jsxs(le,{value:x.toString(),children:[x," ft"]},x))}),e.jsx(ie,{value:B.toString()+" in",onSelectionChange:(x,h)=>A(Number(h)),children:Array.from({length:12},(x,h)=>e.jsxs(le,{value:h.toString(),children:[h," in"]},h))})]})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Sex"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(T,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(C,{children:"Male"})]})})}),e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(T,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(C,{children:"Female"})]})})})]})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Age (years)"}),e.jsx(re,{value:s.bodyStats.age,onChange:x=>b(x,"bodyStats","age")})]})]}),r===1&&e.jsxs(q,{gap:2,children:[e.jsx(C,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ”¥",size:24}),e.jsx(C,{children:"Weight Loss"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(C,{children:"Muscle Gain"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ› ï¸",size:24}),e.jsx(C,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(K,{children:[e.jsx(C,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Et,{max:2,min:.5,step:.25,value:m,onChange:(x,h)=>c(h),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(q,{gap:1,children:[e.jsx(C,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(C,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(T,{direction:"column",gap:1,children:[e.jsx(z,{onClick:()=>l(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ’»",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(z,{onClick:()=>l(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(z,{onClick:()=>l(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(z,{onClick:()=>l(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(q,{gap:1,children:[e.jsx(C,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(C,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(T,{direction:"column",gap:1,children:[e.jsx(z,{onClick:()=>j(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Sedentary"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(z,{onClick:()=>j(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Lightly Active"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(z,{onClick:()=>j(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Moderately Active"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(z,{onClick:()=>j(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Very Active"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(z,{onClick:()=>j(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ’ª",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(C,{styleAs:"h2",children:"Extremely Active"}),e.jsx(C,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(q,{gap:2,children:[e.jsx(C,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(K,{children:[e.jsx(J,{children:"Pet Name"}),e.jsx(re,{value:s.pet.name,onChange:x=>b(x,"pet","name")})]}),e.jsxs(K,{children:[e.jsx(J,{children:"Pet Type"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ¶",size:24}),e.jsx(C,{children:"Dog"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(z,{onClick:()=>u("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ±",size:24}),e.jsx(C,{children:"Cat"})]})})})})]})]})]}),e.jsx(P,{style:{paddingTop:"20px"},children:e.jsxs(T,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(ee,{sentiment:"neutral",appearance:"solid",onClick:()=>n(r-1),children:"Previous"}),r<I.length-1&&e.jsx(ee,{sentiment:"accented",appearance:"solid",disabled:!y(),onClick:()=>n(r+1),children:"Next"}),r===I.length-1&&e.jsx(ee,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!y(),onClick:d,children:"Start Your Adventure!"})]})})]})]})})})},po="_homePage_santw_1",mo="_homePageTitle_santw_6",go="_statusSection_santw_24",fo="_levelText_santw_29",jo="_xpBarWrapper_santw_35",yo="_xpBarFill_santw_44",vo="_pixelBorder_santw_50",Me={homePage:po,homePageTitle:mo,"card-links":"_card-links_santw_10","card-image":"_card-image_santw_19",statusSection:go,levelText:fo,xpBarWrapper:jo,xpBarFill:yo,pixelBorder:vo},So="_xpBarWrapper_sqxxw_1",bo="_xpBarFill_sqxxw_12",Co="_pixelGlow_sqxxw_1",wo="_xpText_sqxxw_33",ko="_levelText_sqxxw_59",oe={xpBarWrapper:So,xpBarFill:bo,pixelGlow:Co,xpText:wo,levelText:ko};function No(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function fe(t,a){const r=No(a);return{progress:Math.min(Math.max(t/r*100,0),100),xpNeeded:r}}const Io=({currentXp:t,level:a})=>{const[r,n]=o.useState(()=>fe(t,a).progress),s=o.useRef(t),{xpNeeded:i}=fe(t,a);return o.useEffect(()=>{const m=fe(t,a).progress,c=s.current;t>c,n(m),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(C,{className:oe.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:oe.xpBarWrapper,children:[e.jsx("div",{className:oe.xpBarFill,style:{width:`${r}%`}}),e.jsxs(C,{className:oe.xpText,styleAs:"label",children:[" ",t," / ",i]})]})]})},To=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:n?0:1}})},Lo=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:n?0:1}})},Bo=({count:t,consumedCurrency:a,userArchetype:r})=>{const n=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[n," / ",t," ",r==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,i)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(To,{consumed:a[i]??!1}):e.jsx(Lo,{consumed:a[i]??!1})},i))})]})},Fe=()=>{var v,j;const{userData:t}=$(),[a,r]=o.useState(0),[n,s]=o.useState([]),i=o.useRef(null),m={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"},c=((v=t==null?void 0:t.pet)==null?void 0:v.currentPet)??"puppy",g=o.useMemo(()=>m[c],[c]),l=o.useMemo(()=>c==="kitten",[c]);return o.useEffect(()=>{var w,d,b;const L=new Date().toISOString().slice(0,10),S=((w=t==null?void 0:t.goal)==null?void 0:w.dailyCurrencyTotal)??0,B=((b=(d=t==null?void 0:t.goal)==null?void 0:d.dailyCurrencyUsed)==null?void 0:b[L])??0,A=S-B;r(A);const O=Array(S).fill(!1).map((u,y)=>y>=A);s(O)},[t]),console.log("Model Path:",g),console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(T,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(P,{align:"center",style:{flexShrink:0},children:e.jsx(C,{styleAs:"h1",className:Me.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(P,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(Bo,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((j=t==null?void 0:t.goal)==null?void 0:j.dailyCurrencyTotal)??0,consumedCurrency:n})}),e.jsx(P,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:e.jsxs(Dt,{resize:{polyfill:ResizeObserver},camera:{position:[2,0,4],fov:100},gl:L=>{const S=new qt({canvas:L,alpha:!0});return S.setClearColor("#87ceeb",1),S},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(Mo,{modelPath:g,isKitten:l}),e.jsx(zt,{ref:i,maxPolarAngle:Math.PI/1.5,minDistance:3,maxDistance:10})]})})}),e.jsx(P,{className:Me.statusSection,style:{flexShrink:0},children:e.jsx(Io,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},Ao=({modelRef:t})=>{const{camera:a,controls:r}=Ut();return o.useEffect(()=>{if(!t.current)return;const n=new Ht().setFromObject(t.current),s=n.getSize(new Ae),i=n.getCenter(new Ae);if("fov"in a){const m=a,c=m.fov*Math.PI/180,l=Math.max(s.x,s.y,s.z)/(2*Math.tan(c/2)),v=Math.max(l*2,5);m.position.set(i.x+v*.6,i.y+v*.6,i.z+v*.6),m.lookAt(i);const j=r;j!=null&&j.target&&typeof j.update=="function"&&(j.target.copy(i),j.update())}},[t,a,r]),null};function Mo({modelPath:t,isKitten:a}){const[r,n,s,i]=Wt(["/assets/grass/AmbientOcclusion.jpg","/assets/grass/Color.jpg","/assets/grass/NormalGL.jpg","/assets/grass/Roughness.jpg"]);console.log(a);const m=$t(t),c=o.useMemo(()=>m.scene.clone(),[m.scene]),g=o.useRef(null);return e.jsxs(o.Suspense,{fallback:null,children:[e.jsx("primitive",{ref:g,object:c,scale:.8,position:[0,-3.5,0],rotation:a?[0,Math.PI,0]:[0,0,0]}),e.jsx(Ao,{modelRef:g}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-3.5,0],receiveShadow:!0,children:[e.jsx("planeGeometry",{args:[100,100]}),e.jsx("meshStandardMaterial",{map:n,normalMap:s,roughnessMap:i,aoMap:r,side:Gt})]})]})}const Fo=({content:t})=>{const[a,r]=o.useState(null),n=m=>{r(m.currentTarget)},s=()=>{r(null)},i=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:n,style:{cursor:"pointer",marginLeft:4},children:e.jsx(M,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(Vt,{open:i,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Ro=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],Po=()=>{const{userData:t}=$();if(!t)return null;const{pet:a}=t;return e.jsxs(T,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(T,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(M,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(C,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Ro.map(r=>e.jsx(be,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(T,{justify:"space-between",align:"center",children:[e.jsxs(T,{align:"center",gap:1,children:[e.jsx(M,{symbol:r.emoji,size:20}),e.jsx(C,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(Fo,{content:r.description})]}),e.jsxs(C,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},je=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],ye=({name:t,description:a,progress:r})=>e.jsxs(be,{style:{width:"100%"},children:[e.jsx(C,{styleAs:"h4",children:t}),e.jsx(C,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Yt,{value:r}),e.jsxs(C,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),Oo=()=>{const t=je.filter(n=>n.status==="inProgress"),a=je.filter(n=>n.status==="notStarted"),r=je.filter(n=>n.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(C,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Xt,{children:[e.jsxs(ue,{value:"",children:[e.jsx(xe,{children:"In Progress"}),e.jsx(he,{children:e.jsx(T,{direction:"column",gap:2,children:t.map(n=>e.jsx(ye,{...n},n.name))})})]}),e.jsxs(ue,{value:"",children:[e.jsx(xe,{children:"Not Started"}),e.jsx(he,{children:e.jsx(T,{direction:"column",gap:2,children:a.map(n=>e.jsx(ye,{...n},n.name))})})]}),e.jsxs(ue,{value:"",children:[e.jsx(xe,{children:"Completed"}),e.jsx(he,{children:e.jsx(T,{direction:"column",gap:2,children:r.map(n=>e.jsx(ye,{...n},n.name))})})]})]})]})},Eo="_container_4o28a_1",Do="_tabList_4o28a_11",zo="_tabButton_4o28a_18",qo="_active_4o28a_34",Wo="_borderGlow_4o28a_1",$o="_form_4o28a_50",Go="_heroSection_4o28a_100",Uo="_heroList_4o28a_107",Ho="_hero_4o28a_100",Vo="_selected_4o28a_138",Xo="_disclosureButton_4o28a_151",Yo="_chevron_4o28a_169",Ko="_rotate_4o28a_174",Qo="_equipmentSection_4o28a_178",Jo="_equipmentList_4o28a_186",Zo="_equipment_4o28a_178",D={container:Eo,tabList:Do,tabButton:zo,active:qo,borderGlow:Wo,form:$o,heroSection:Go,heroList:Uo,hero:Ho,selected:Vo,disclosureButton:Xo,chevron:Yo,rotate:Ko,equipmentSection:Qo,equipmentList:Jo,equipment:Zo},er="_puppySpinner_qnb89_1",tr="_loadingText_qnb89_9",sr="_puppy_qnb89_1",ar="_run_qnb89_1",nr="_treadmillBelt_qnb89_19",ve={puppySpinner:er,loadingText:tr,puppy:sr,run:ar,treadmillBelt:nr,"belt-move":"_belt-move_qnb89_1"};function de({scale:t=1}){const a=150*t;return e.jsxs("div",{className:ve.puppySpinner,style:{width:`${a}px`,height:`${a}px`},children:[e.jsx("div",{className:ve.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:ve.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const or=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],rr=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function ir(){const{userData:t}=$(),[a,r]=o.useState("Max Muscle"),[n,s]=o.useState(""),[i,m]=o.useState("beginner"),[c,g]=o.useState(3),[l,v]=o.useState([]),[j,L]=o.useState(""),[S,B]=o.useState(""),[A,O]=o.useState(""),[w,d]=o.useState(""),[b,u]=o.useState(15),[y,I]=o.useState(!1),{addToast:x}=Xe(),h=f=>{f.preventDefault(),I(!0);const k={goal:a,sport:a==="Sport Specific"?n:null,experience:i,days:c,equipment:l.join(", "),include:j,exclude:S,considerations:A,sessionDurationMinutes:b,petCoach:w,userId:t==null?void 0:t.uid};E.post("/workout/routine/createRoutine",k,{timeout:3e4}).then(F=>{console.log("Routine Created:",F.data),x({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"âšâ–ˆâ•â•â–ˆâš"}),e.jsx("div",{className:D.routineCreatedText,children:"Routine Created!"})]})})}).catch(F=>{console.error(F)}).finally(()=>I(!1))};return y?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(de,{scale:2})}):e.jsxs("form",{className:D.form,onSubmit:h,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:a,onChange:f=>r(f.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),a==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:i,onChange:f=>m(f.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:c,onChange:f=>g(Number(f.target.value)),children:[...Array(7)].map((f,k)=>e.jsxs("option",{value:k+1,children:[k+1," ",k===0?"day":"days"]},k+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:b,onChange:f=>u(Number(f.target.value)),children:[...Array(12)].map((f,k)=>{const F=(k+1)*15,H=Math.floor(F/60),X=F%60,V=H>0?`${H}h${X>0?` ${X}m`:""}`:`${X} minutes`;return e.jsx("option",{value:F,children:V},F)})})]}),e.jsxs("div",{className:D.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:D.equipmentList,children:rr.map(f=>e.jsx(G,{type:"button",onClick:()=>v(k=>k.includes(f)?k.filter(F=>F!==f):[...k,f]),className:`${D.equipment} ${l.includes(f)?D.selected:""}`,children:f},f))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:j,onChange:f=>L(f.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:S,onChange:f=>B(f.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:A,onChange:f=>O(f.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(qe,{children:({open:f})=>e.jsxs("div",{className:D.heroSection,children:[e.jsxs(We,{className:D.disclosureButton,children:["Let one of our XPets train you!",e.jsx($e,{className:`${D.chevron} ${f?D.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(Ge,{className:D.heroList,children:or.map(k=>e.jsx(G,{type:"button",onClick:()=>d(k.name),className:`${D.hero} ${w===k.name?D.selected:""}`,style:{borderColor:typeof k.color=="string"&&k.color.includes("linear")?void 0:k.color,borderImage:k.color.includes("linear")?k.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:k.name},k.name))})]})}),e.jsx(G,{type:"submit",children:"Generate Routine"})]})}function Ke({routine:t,setRoutines:a,menuOptions:r,onStartWorkout:n}){const{userData:s}=$();if(!t||t.length===0)return null;const i=g=>{console.log("Delete",g),E.delete(`/routines/delete/${g}`).then(()=>{a(l=>l==null?void 0:l.filter(v=>v._id!==g))}).catch(l=>{console.error("Failed to delete routine: ",l)})},m=g=>{E.post(`/routines/share/${g._id}`).then(()=>{console.log("Routine shared to community.")}).catch(l=>{console.error("Failed to share routine: ",l)})},c=g=>{E.post(`/routines/copy/${g._id}`,{userId:s==null?void 0:s.uid}).then(l=>{console.log("Copied routine:",l.data.routine),a==null||a(v=>[...v||[],l.data.routine])}).catch(l=>{console.error("Failed to copy routine:",l)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((g,l)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(qe,{children:({open:v})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(We,{className:"accordion-trigger",children:[e.jsx($e,{size:32,className:`chevron ${v?"open":""}`}),e.jsx("span",{className:"routine-title",children:g.routineName})]}),e.jsxs(Kt,{as:"div",className:"menu-wrapper",children:[e.jsx(Qt,{className:"menu-button",onClick:j=>j.stopPropagation(),children:e.jsx(Jt,{size:20})}),e.jsxs(Zt,{className:"menu-dropdown",children:[r.includes("Share")&&e.jsx(pe,{children:e.jsx(G,{onClick:()=>m(g),className:"menu-item",children:"Share"})}),r.includes("Delete")&&e.jsx(pe,{children:e.jsx(G,{onClick:()=>i(g._id),className:"menu-item",children:"Delete"})}),r.includes("Copy")&&e.jsx(pe,{children:e.jsx(G,{onClick:()=>c(g),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(Ge,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:g.weeklySchedule.map((j,L)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:j.dayName}),e.jsx("div",{className:"day-exercises",children:j.exercises.map(S=>S.exercise).join(", ")}),j.exercises.length>0&&e.jsx(G,{className:"start-button",onClick:()=>n!==void 0?n(j):void 0,children:"START WORKOUT"})]},j.dayName+L))})})]})})},g.routineName+l))})}const lr="_fullScreenWrapper_117p9_2",cr="_timer_117p9_18",dr="_deckContainer_117p9_28",_r="_card_117p9_39",ur="_exerciseTitle_117p9_56",xr="_repRange_117p9_64",hr="_setGrid_117p9_72",pr="_setRow_117p9_80",mr="_setLabel_117p9_85",gr="_inputLabel_117p9_93",fr="_checkboxLabel_117p9_94",jr="_compactInput_117p9_99",yr="_setHeaderRow_117p9_124",vr="_finishButton_117p9_151",Sr="_setCheckbox_117p9_170",br="_checked_117p9_192",Cr="_cardSuitTop_117p9_197",wr="_cardSuitBottom_117p9_198",R={fullScreenWrapper:lr,timer:cr,deckContainer:dr,card:_r,exerciseTitle:ur,repRange:xr,setGrid:hr,setRow:pr,setLabel:mr,inputLabel:gr,checkboxLabel:fr,compactInput:jr,setHeaderRow:yr,finishButton:vr,setCheckbox:Sr,checked:br,cardSuitTop:Cr,cardSuitBottom:wr},kr=({startTime:t})=>{const[a,r]=o.useState(0);o.useEffect(()=>{const s=setInterval(()=>{r(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(s)},[t]);const n=s=>{const i=Math.floor(s/60),m=s%60;return`${String(i).padStart(2,"0")}:${String(m).padStart(2,"0")}`};return e.jsx("div",{style:{fontSize:"1.5rem"},children:n(a)})},Nr=({exercises:t,onFinish:a})=>{const[r]=o.useState(Date.now()),[n,s]=o.useState(t.map((u,y)=>({...u,cardId:`${u.exercise}-${y}`}))),[i,m]=o.useState(0),[c,g]=o.useState(0),[l,v]=o.useState(null),[j,L]=o.useState(.4),S=(u,y)=>{const x=Math.abs(u)/1e3,h=Math.abs(y)/300;return Math.max(.2,Math.min(.6,.4-x*.15+h*.1))},B=(u,y)=>{const I=O()[0];if(I){const x=S(u,y);L(x),v(I.cardId),setTimeout(()=>{s(h=>{const[f,...k]=h;return[...k,f]}),g(h=>h+1),v(null)},x*1e3)}},A=(u,y,I,x)=>{s(h=>h.map(k=>{if(k.cardId===u){const F=k.sets.map((H,X)=>X===y?{...H,[I]:x}:H);return{...k,sets:F}}return k}))},O=()=>{const u=n.length;if(u===0)return[];const y=c%u,I=[];for(let x=0;x<3;x++){const h=(y+x)%u;n[h]&&I.push({...n[h],displayIndex:x,originalIndex:h})}return I},w=[e.jsx(as,{size:32,color:"#ff4d4d"}),e.jsx(ns,{size:32,color:"#ff4d4d"}),e.jsx(os,{size:32,color:"#ff4d4d"}),e.jsx(rs,{size:32,color:"#ff4d4d"})],b=(()=>{const u=Math.floor(Math.random()*w.length);return w[u]})();return e.jsxs("div",{className:R.fullScreenWrapper,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",fontSize:"19px",gap:"16px",alignItems:"center"},children:[e.jsx("div",{children:t[0].dayName}),e.jsx("div",{className:R.timer,children:e.jsx(kr,{startTime:r})})]}),e.jsx("div",{className:R.deckContainer,children:e.jsx(es,{initial:!1,children:O().map((u,y)=>{const I=y===0,x=u.cardId===l;return e.jsxs(ts.div,{className:R.card,initial:{x:0,y:y*20,zIndex:100-y},animate:{x:0,scale:1-y*.02,y:y*20,zIndex:100-y},exit:{y:-400,opacity:0,zIndex:100-y,transition:{duration:j,ease:"easeOut"}},transition:{duration:.3},drag:I&&!x?"y":!1,dragElastic:.2,whileTap:{scale:.98},dragConstraints:{top:-400,bottom:0},onDragEnd:(h,f)=>{f.offset.y<-100&&!x&&B(f.velocity.y,f.offset.y)},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("span",{className:R.cardSuitTop,children:b})}),e.jsx("div",{className:R.exerciseTitle,children:u.exercise}),e.jsxs("div",{className:R.repRange,children:["Target: ",u.repRange," reps"]})]}),e.jsxs("div",{className:R.setGrid,children:[e.jsxs("div",{className:R.setHeaderRow,children:[e.jsx("span",{className:R.setLabel,children:"Set"}),e.jsx("span",{className:R.inputLabel,children:"Weight"}),e.jsx("span",{className:R.inputLabel,children:"Reps"}),e.jsx("span",{className:R.checkboxLabel,children:"âœ”"})]}),u.sets.map((h,f)=>e.jsxs("div",{className:R.setRow,children:[e.jsx("span",{className:R.setLabel,children:f+1}),e.jsx(Se,{type:"number",value:h.weight===0?"":h.weight,placeholder:"Weight",className:R.compactInput,onChange:k=>A(u.cardId,f,"weight",Number(k.target.value))}),e.jsx(Se,{type:"number",value:h.reps===0?"":h.reps,placeholder:"Reps",className:R.compactInput,onChange:k=>A(u.cardId,f,"reps",Number(k.target.value))}),e.jsx(ss,{checked:h.completed??!1,onChange:k=>{A(u.cardId,f,"completed",k)},className:({checked:k})=>`${R.setCheckbox} ${k?R.checked:""}`,children:e.jsx("span",{"aria-hidden":"true",children:h.completed?"âœ”":""})})]},f)),e.jsx("span",{className:R.cardSuitBottom,children:b})]})]},`${u.cardId}-cycle-${c}-${y}`)})})}),e.jsx("button",{className:R.finishButton,onClick:()=>a({duration:i,exercises:n}),children:"Finish Workout"})]})};function Ir(){const[t,a]=o.useState(),[r,n]=o.useState(!0),{userData:s}=$(),[i,m]=o.useState(null),c=l=>{const v=l.exercises.map(j=>({dayName:l.dayName,exercise:j.exercise,repRange:j.repRange,sets:Array(Number(j.sets)).fill({weight:0,reps:0})}));m(v)},g=l=>{console.log("Workout complete:",l),m(null)};return o.useEffect(()=>{E.get(`/routines?uid=${s==null?void 0:s.uid}`).then(l=>{a(l.data.routines)}).catch(l=>{console.error(l)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(de,{scale:2})}):e.jsxs("div",{style:{display:"flex",width:"100%"},children:[i&&e.jsx(Nr,{exercises:i,onFinish:g}),e.jsx(Ke,{routine:t,setRoutines:a,menuOptions:["Share","Delete"],onStartWorkout:c})]})}function Tr(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(de,{scale:2})})}function Lr(){const[t,a]=o.useState(),[r,n]=o.useState(!0);return $(),o.useEffect(()=>{E.get("/routines?communityRoutine=true").then(s=>{a(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>n(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(de,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Ke,{routine:t,setRoutines:a,menuOptions:["Copy"]})})}function Br(){return e.jsx("div",{className:D.container,children:e.jsxs(Ee,{children:[e.jsx(De,{className:D.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(ze,{className:({selected:a})=>`${D.tabButton} ${a?D.active:""}`,children:t},t))}),e.jsxs(is,{children:[e.jsx(ne,{children:e.jsx(Ir,{})}),e.jsx(ne,{children:e.jsx(ir,{})}),e.jsx(ne,{children:e.jsx(Tr,{})}),e.jsx(ne,{children:e.jsx(Lr,{})})]})]})})}const Ar=["Pet","Skills","Quests","Routines"];function Mr(){const[t,a]=o.useState(null),[r,n]=o.useState(!0),{userData:s,setUserData:i}=$(),[m,c]=o.useState(0),g=l=>{switch(Ar[l]){case"Pet":return e.jsx(Fe,{});case"Skills":return e.jsx(Po,{});case"Quests":return e.jsx(Oo,{});case"Routines":return e.jsx(Br,{});default:return e.jsx(Fe,{})}};return o.useEffect(()=>{const l=ls.throttle(()=>{console.log("Fetching user object..."),E.get(`/users/${s==null?void 0:s.uid}`).then(j=>{i(j.data),console.log("User data synced:",j.data)}).catch(j=>{console.error("Failed to fetch user:",j)})},1e4),v=()=>{console.log("User came back!"),l()};return s&&window.addEventListener("focus",v),()=>{s&&(window.removeEventListener("focus",v),l.cancel())}},[]),o.useEffect(()=>{const l=cs(ce,v=>{console.log("Auth state changed:",v),console.log("User Data in App useEffect:",s),a(v),n(!1);const j=localStorage.getItem("userData");j&&i(JSON.parse(j))});return()=>l()},[]),console.log("App render - Loading:",r,"User:",t,"UserData:",s),r?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(me,{mode:"dark",children:e.jsx(xo,{})}):s.bodyStats.weight===0?e.jsx(me,{mode:"dark",children:e.jsx(ho,{})}):e.jsx(me,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:g(m)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(ro,{selectedIndex:m,setSelectedIndex:c})})]})})}ds.createRoot(document.getElementById("root")).render(e.jsx(_s.StrictMode,{children:e.jsx(us,{children:e.jsx(ms,{children:e.jsx(Ss,{children:e.jsx(As,{children:e.jsx(Mr,{})})})})})}));
