import{i as Je,g as Ze,a as et,s as tt,G as st,b as at,c as ot,d as nt,r,j as e,C as ve,T as h,B as Z,P as Se,S as Me,e as be,f as Ce,I as ne,h as q,D as re,O as le,U as we,k as rt,A as lt,l as it,R as Fe,m as Pe,n as ct,o as dt,F as _t,p as ut,H as U,q as xt,L as ht,t as pt,X as mt,u as ke,Y as gt,v as ft,w as jt,x as de,y as yt,z as vt,M as St,Z as bt,E as Ct,J as wt,K as kt,N as Nt,Q as It,V as Ne,W as Ie,_ as Tt,$ as Te,a0 as K,a1 as Oe,a2 as Ee,a3 as Re,a4 as Lt,a5 as Bt,a6 as At,a7 as Mt,a8 as Ft,a9 as I,aa as P,ab as Pt,ac as Ot,ad as Y,ae as Q,af as D,ag as Et,ah as Rt,ai as Dt,aj as qt,ak as zt,al as $t,am as Wt,an as Gt,ao as Ut,ap as Le,aq as Ht,ar as Vt,as as _e,at as ue,au as xe,av as Xt,aw as De,ax as qe,ay as ze,az as $e,aA as Yt,aB as Kt,aC as Qt,aD as Jt,aE as he,aF as Zt,aG as ae,aH as es,aI as ts,aJ as pe,aK as ss,aL as as,aM as os}from"./vendor-CldGw2mE.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const ns={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},We=Je(ns);Ze(We);const ie=et(We);tt(ie,at).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const rs=new st;function ls(){ot(ie).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const O=nt.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),Ge=r.createContext(void 0),is=({children:t})=>{const[a,n]=r.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),o=s=>{n(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(Ge.Provider,{value:{userData:a,setUserData:o},children:t})},$=()=>{const t=r.useContext(Ge);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:n}=t,o=r.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:n,dailyCurrency:o}},cs=()=>{const{userData:t,setUserData:a}=$(),n=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[o,s]=r.useState(""),[l,p]=r.useState(null),[i,u]=r.useState(!1),[x,m]=r.useState(null),[v,T]=r.useState(null),[f,L]=r.useState(!1),A=async()=>{var c,g;if(o.trim()){u(!0),m(null),p(null);try{const{data:w}=await O.post("/chatnutrition",{message:o}),k={...w,description:o,userId:t==null?void 0:t.uid};console.log(k),T(k),L(!0)}catch(w){const k=w,B=(c=k.response)==null?void 0:c.data;((g=k.response)==null?void 0:g.status)===400?m((B==null?void 0:B.suggestion)||"Please describe a specific food item or meal"):m("Failed to get nutrition info. Try again.")}finally{u(!1)}}},R=async()=>{if(v){u(!0),m(null);try{const c=await O.post("/meal/addMeal",v),{mealAffects:g,updatedUser:w}=c.data;a(w);const k=[];g.currency&&k.push(`ðŸ¦´ This meal cost ${g.currency} bone${g.currency>1?"s":""}!`),g.armorIncrease&&k.push(`ðŸ›¡ï¸ +${g.armorIncrease.toFixed(1)} Armor from protein`),g.defenseIncrease&&k.push(`ðŸ§± +${g.defenseIncrease.toFixed(1)} Defense from fiber`),g.speedIncrease&&k.push(`ðŸ’¨ +${g.speedIncrease.toFixed(1)} Speed from hydration`),g.intelligenceIncrease&&k.push(`ðŸ§  +${g.intelligenceIncrease} Intelligence from fruits & vegetables`),k.length===0&&k.push("Seems like this meal didnt contain any sustenance!"),p(k.join(`
`))}catch{m("Failed to confirm meal. Try again.")}finally{u(!1),T(null),L(!1),s("")}}},j=()=>{T(null),L(!1),p(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:o,onChange:c=>s(c.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),f?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[n==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(v.calories/100)," ",n]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:R,disabled:i,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:i?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:i?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:j,disabled:i,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:i?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:A,disabled:i||!o.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:i||!o.trim()?"#332200":"#1a1100",color:i||!o.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i||!o.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:i||!o.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:i?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),x&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",x]})}),l&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:l})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},M=({symbol:t,label:a="",className:n="",style:o={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:n,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...o},children:t}),ds={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},_s=({petType:t,selectedRpe:a,onChange:n})=>{const o=ds[t],s=l=>{n(l)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:o.map(l=>e.jsxs(ve,{onClick:()=>s(l.rpe),style:{cursor:"pointer",border:a===l.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===l.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(M,{size:32,symbol:l.emoji}),e.jsx(h,{style:{fontSize:12,marginTop:8},children:l.rpe}),e.jsx(h,{style:{fontSize:14,marginTop:6},children:l.text})]},l.rpe))})},us=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(M,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,Ue=r.createContext(void 0),He=()=>{const t=r.useContext(Ue);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let xs=0;const hs=({children:t})=>{const[a,n]=r.useState([]),[o,s]=r.useState(null);r.useEffect(()=>{!o&&a.length>0&&(s(a[0]),n(i=>i.slice(1)))},[a,o]),r.useEffect(()=>{if(!o)return;const i=o.duration??3e3,u=setTimeout(()=>{s(null)},i);return()=>clearTimeout(u)},[o]);const l=r.useCallback(i=>{const u=++xs;n(x=>[...x,{id:u,...i}])},[]),p=r.useCallback(()=>{s(null)},[]);return e.jsxs(Ue.Provider,{value:{addToast:l,removeToast:p},children:[t,o&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:o.content},o.id)})]})},ps="_levelUpContainer_vq3kq_1",ms="_levelUpPulse_vq3kq_1",gs="_shimmer_vq3kq_1",fs="_emoji_vq3kq_32",js="_bounce_vq3kq_1",ys="_levelText_vq3kq_41",vs="_levelNumber_vq3kq_54",Ss="_celebration_vq3kq_67",bs="_fadeInUp_vq3kq_1",ee={levelUpContainer:ps,levelUpPulse:ms,shimmer:gs,emoji:fs,bounce:js,levelText:ys,levelNumber:vs,celebration:Ss,fadeInUp:bs},Ve=r.createContext(void 0),Cs=({children:t})=>{const[a,n]=r.useState(null),[o,s]=r.useState(void 0),l=({content:i,style:u})=>{n(i),s(u)},p=()=>{n(null),s(void 0)};return e.jsxs(Ve.Provider,{value:{showSplash:l,hideSplash:p},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...o},onClick:p,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(Z,{onClick:p,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},ws=()=>{const t=r.useContext(Ve);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},ks={1:.5,2:1,3:1.5,4:2.2},Ns=({setDrawerView:t})=>{const{userData:a,setUserData:n}=$(),{addToast:o}=He(),{showSplash:s}=ws(),[l,p]=r.useState(!1),[i,u]=r.useState("WEIGHTS"),[x,m]=r.useState("DURATION"),[v,T]=r.useState(""),[f,L]=r.useState(""),[A,R]=r.useState(""),[j,c]=r.useState(null),[g,w]=r.useState(""),k=["WEIGHTS","CARDIO","MOBILITY","SPORT"],B=["DURATION","DISTANCE"],[y,C]=r.useState(!1),b=Array.from({length:12},(S,W)=>W),N=Array.from({length:60},(S,W)=>W),[F,H]=r.useState({strength:0,agility:0,pet:0});console.log(f),console.log(j);function V(){const S=(Number(f)||0)*60+(Number(A)||0);console.log("totalDuration ",S);const W=ks[j??2];let z=0;S>0?z=Math.round(S*10*W):Number(v)>0&&(z=Math.round(Number(v)*125*W)),console.log("totalXp ",z);let te=0,se=0;switch(i){case"WEIGHTS":te=Math.round(z/100);break;case"CARDIO":se=Math.round(z/100);break;case"MOBILITY":case"SPORT":const Ke=z/2/100,Qe=z/2/100;te=Math.round(Ke),se=Math.round(Qe);break}return console.log("final ",{strength:te,agility:se,pet:z}),{strength:te,agility:se,pet:z}}const G=k.includes(i)&&B.includes(x)&&(v!==""||f!==""||A!=="")&&j!==null;function X(){T(""),L(""),R(""),c(null),w(""),u("WEIGHTS"),m("DURATION")}const Ye=async()=>{const S=V();if(H(S),!a||!a.uid){alert("User not loaded properly.");return}const W=x==="DURATION"?(Number(f)||0)*60+(Number(A)||0):0;try{const{data:z}=await O.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:i,cardioMode:x,duration:W,distance:x==="DISTANCE"&&Number(v)||0,rpe:j,notes:g,workoutXp:S});n(z.updatedUser),X(),o({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",S.pet," PET XP"]}),S.strength>0&&S.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",S.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",S.agility," AGILITY"]})]}):S.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",S.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",S.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{z.levelUp&&s({content:e.jsxs("div",{className:ee.levelUpContainer,children:[e.jsx("div",{className:ee.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:ee.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:ee.levelNumber,children:["LEVEL ",z.updatedUser.pet.level]}),e.jsx("div",{className:ee.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(z){console.error(z),alert("There was an error logging your workout.")}};return l?e.jsx(Se,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(Me,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Se,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(us,{open:y,onClose:()=>C(!1)}),e.jsx(h,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(h,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(be,{value:i??"",onChange:S=>u(S.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:k.map(S=>e.jsx(Ce,{value:S,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:S},S))}),i==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(be,{value:x??"",onChange:S=>{m(S.currentTarget.value),T(""),L(""),R("")},style:{marginBottom:16},children:B.map(S=>e.jsx(Ce,{value:S,appearance:S==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:S},S))})]}),x==="DISTANCE"&&i==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(h,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(ne,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:v,onChange:S=>T(S.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(h,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(q,{direction:"row",gap:2,children:[e.jsx(re,{value:f+" hr(s)",onSelectionChange:(S,W)=>L(W[0]??""),placeholder:"Hours",children:b.map(S=>e.jsxs(le,{value:String(S),children:[S," hr"]},S))}),e.jsx(re,{value:A+" min(s)",onSelectionChange:(S,W)=>R(W[0]??""),placeholder:"Minutes",children:N.map(S=>e.jsxs(le,{value:String(S),children:[S<10?`0${S}`:S," min"]},S))})]})]}),e.jsx(h,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(_s,{selectedRpe:j,onChange:S=>c(S),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(h,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:g,onChange:S=>w(S.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(Z,{onClick:Ye,disabled:!G,style:{opacity:G?1:.4,cursor:G?"pointer":"not-allowed",color:G?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:G?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Is="_backdrop_1mk9a_9",Ts="_drawer_1mk9a_17",Ls="_drawer__header_1mk9a_34",Bs="_drawer__headerContent_1mk9a_41",As="_drawer__headerIcon_1mk9a_46",Ms="_drawer__title_1mk9a_49",Fs="_drawer__closeButton_1mk9a_55",Ps="_drawer__content_1mk9a_67",Os="_mealCard_1mk9a_73",Es="_mealCard__header_1mk9a_85",Rs="_mealCard__info_1mk9a_91",Ds="_mealCard__title_1mk9a_94",qs="_mealCard__timestamp_1mk9a_100",zs="_mealCard__calories_1mk9a_105",$s="_mealCard__caloriesValue_1mk9a_108",Ws="_mealCard__caloriesLabel_1mk9a_115",Gs="_mealCard__macros_1mk9a_119",Us="_mealCard__additionalStats_1mk9a_125",Hs="_mealCard__statBoosts_1mk9a_131",Vs="_mealCard__statBoostsTitle_1mk9a_135",Xs="_mealCard__statBoostsGrid_1mk9a_141",Ys="_mealCard__currency_1mk9a_146",Ks="_mealCard__currencyText_1mk9a_150",Qs="_macroItem_1mk9a_156",Js="_macroItem__value_1mk9a_162",Zs="_macroItem__label_1mk9a_168",ea="_additionalStat_1mk9a_182",ta="_additionalStat__icon_1mk9a_190",sa="_additionalStat__content_1mk9a_193",aa="_additionalStat__value_1mk9a_196",oa="_additionalStat__label_1mk9a_203",na="_statBoost_1mk9a_212",ra="_statBoost__icon_1mk9a_221",la="_statBoost__label_1mk9a_236",ia="_statBoost__value_1mk9a_239",ca="_loadingState_1mk9a_244",da="_loadingState__content_1mk9a_248",_a="_pulse_1mk9a_1",ua="_loadingState__text_1mk9a_251",xa="_loadingState__subtext_1mk9a_255",ha="_loadingMore_1mk9a_260",pa="_loadingMore__content_1mk9a_264",ma="_loadingMore__text_1mk9a_267",ga="_loadingMore__subtext_1mk9a_271",fa="_emptyState_1mk9a_276",ja="_emptyState__icon_1mk9a_280",ya="_emptyState__text_1mk9a_284",va="_emptyState__subtext_1mk9a_288",Sa="_endOfList_1mk9a_293",ba="_endOfList__text_1mk9a_298",Ca="_endOfList__subtext_1mk9a_303",wa="_mealsList_1mk9a_308",ka="_demoApp_1mk9a_314",Na="_demoApp__container_1mk9a_319",Ia="_demoApp__title_1mk9a_323",Ta="_demoApp__button_1mk9a_330",_={backdrop:Is,drawer:Ts,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:Ls,drawer__headerContent:Bs,drawer__headerIcon:As,drawer__title:Ms,drawer__closeButton:Fs,drawer__content:Ps,mealCard:Os,mealCard__header:Es,mealCard__info:Rs,mealCard__title:Ds,mealCard__timestamp:qs,mealCard__calories:zs,mealCard__caloriesValue:$s,mealCard__caloriesLabel:Ws,mealCard__macros:Gs,mealCard__additionalStats:Us,mealCard__statBoosts:Hs,mealCard__statBoostsTitle:Vs,mealCard__statBoostsGrid:Xs,mealCard__currency:Ys,mealCard__currencyText:Ks,macroItem:Qs,macroItem__value:Js,macroItem__label:Zs,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:ea,additionalStat__icon:ta,additionalStat__content:sa,additionalStat__value:aa,additionalStat__label:oa,statBoost:na,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:ra,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:la,statBoost__value:ia,loadingState:ca,loadingState__content:da,pulse:_a,loadingState__text:ua,loadingState__subtext:xa,loadingMore:ha,loadingMore__content:pa,loadingMore__text:ma,loadingMore__subtext:ga,emptyState:fa,emptyState__icon:ja,emptyState__text:ya,emptyState__subtext:va,endOfList:Sa,endOfList__text:ba,endOfList__subtext:Ca,mealsList:wa,demoApp:ka,demoApp__container:Na,demoApp__title:Ia,demoApp__button:Ta},La=()=>{const{userData:t}=$(),[a,n]=r.useState([]),[o,s]=r.useState(!1),[l,p]=r.useState(!1),[i,u]=r.useState(!0),[x,m]=r.useState(0),v=r.useRef(null),T=10,f=async(j=x,c=!1)=>{c?s(!0):p(!0);try{const w=(await O.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${T}&offset=${j}`)).data,k=w.meals||[];n(c?k:C=>[...C,...k]);const B=w.total||0,y=j+k.length;u(y<B),m(j+k.length)}catch(g){console.error("Error fetching meals:",g)}s(!1),p(!1)};r.useEffect(()=>{f(0,!0)},[]),r.useEffect(()=>{const j=()=>{const g=document.querySelector(".saltDrawer");if(!g)return;const{scrollTop:w,scrollHeight:k,clientHeight:B}=g;k-w<=B+100&&i&&!l&&f(x,!1)},c=document.querySelector(".saltDrawer");return c&&c.addEventListener("scroll",j),()=>{c&&c.removeEventListener("scroll",j)}},[x,i,l]);const L=j=>new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=({icon:j,label:c,value:g,color:w})=>e.jsxs("div",{className:`${_.statBoost} ${_[`statBoost--${w}`]}`,children:[e.jsx(j,{size:12,className:_.statBoost__icon}),e.jsx("span",{className:_.statBoost__label,children:c}),e.jsxs("span",{className:_.statBoost__value,children:["+",g]})]}),R=({meal:j})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.mealCard,children:[e.jsxs("div",{className:_.mealCard__header,children:[e.jsxs("div",{className:_.mealCard__info,children:[e.jsx("h3",{className:_.mealCard__title,children:j.description}),e.jsx("p",{className:_.mealCard__timestamp,children:L(j.timestamp)})]}),e.jsxs("div",{className:_.mealCard__calories,children:[e.jsx("div",{className:_.mealCard__caloriesValue,children:j.calories}),e.jsx("div",{className:_.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:_.mealCard__macros,children:[e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--protein"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[j.protein,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--carbs"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[j.carbs,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--fat"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[j.fat,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:_.mealCard__additionalStats,children:[e.jsxs("div",{className:_.additionalStat,children:[e.jsx(rt,{size:16,className:_.additionalStat__icon}),e.jsxs("div",{className:_.additionalStat__content,children:[e.jsxs("div",{className:_.additionalStat__value,children:[j.fluid_intake_ml,"ml"]}),e.jsx("div",{className:_.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:_.additionalStat,children:[e.jsx(lt,{size:16,className:_.additionalStat__icon}),e.jsxs("div",{className:_.additionalStat__content,children:[e.jsx("div",{className:_.additionalStat__value,children:j.servings_of_fruits_vegetables}),e.jsx("div",{className:_.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:_.mealCard__statBoosts,children:[e.jsx("div",{className:_.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:_.mealCard__statBoostsGrid,children:[j.mealAffects.armorIncrease>0&&e.jsx(A,{icon:it,label:"ARM",value:j.mealAffects.armorIncrease,color:"blue"}),j.mealAffects.speedIncrease>0&&e.jsx(A,{icon:Fe,label:"SPD",value:j.mealAffects.speedIncrease,color:"yellow"}),j.mealAffects.intelligenceIncrease>0&&e.jsx(A,{icon:Pe,label:"INT",value:j.mealAffects.intelligenceIncrease,color:"pink"}),j.mealAffects.defenseIncrease>0&&e.jsx(A,{icon:ct,label:"DEF",value:j.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:_.mealCard__currency,children:e.jsxs("span",{className:_.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(dt,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(_t,{size:15,style:{verticalAlign:"middle"}})})," "+j.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.drawer__header,children:e.jsxs("div",{className:_.drawer__headerContent,children:[e.jsx(we,{className:_.drawer__headerIcon,size:32}),e.jsx("h2",{className:_.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:v,children:o?e.jsx("div",{className:_.loadingState,children:e.jsxs("div",{className:_.loadingState__content,children:[e.jsx("div",{className:_.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:_.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:_.emptyState,children:[e.jsx(we,{className:_.emptyState__icon,size:48}),e.jsx("div",{className:_.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:_.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:_.mealsList,children:[a.map((j,c)=>e.jsx(R,{meal:j},`${j.id}-${c}`)),l&&e.jsx("div",{className:_.loadingMore,children:e.jsxs("div",{className:_.loadingMore__content,children:[e.jsx("div",{className:_.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:_.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!i&&a.length>0&&e.jsxs("div",{className:_.endOfList,children:[e.jsx("div",{className:_.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:_.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},Ba="_container_1chaz_4",Aa="_heading_1chaz_10",Ma="_rangeButtons_1chaz_16",Fa="_button_1chaz_23",Pa="_activeButton_1chaz_37",Oa="_checkmarkPath_1chaz_53",J={container:Ba,heading:Aa,rangeButtons:Ma,button:Fa,activeButton:Pa,checkmarkPath:Oa,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Ea=({onWeightChange:t})=>{var i,u;const{userData:a}=$(),n=()=>{var m,v;const x=(m=a==null?void 0:a.bodyStats)==null?void 0:m.weightLogs;if(Array.isArray(x)&&x.length>0){const T=[...x].sort((f,L)=>new Date(f.date).getTime()-new Date(L.date).getTime());return T[T.length-1].weight}return((v=a==null?void 0:a.bodyStats)==null?void 0:v.weight)??150},[o,s]=r.useState(n());r.useEffect(()=>{s(n())},[(i=a==null?void 0:a.bodyStats)==null?void 0:i.weightLogs,(u=a==null?void 0:a.bodyStats)==null?void 0:u.weight]);const l=x=>{const m=parseFloat((o+x).toFixed(1));m>=0&&s(m)},p=()=>{t(o)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(ut,{id:"current-weight",type:"number",step:.1,value:o,onChange:x=>{const m=parseFloat(x.target.value);!isNaN(m)&&m>=0?s(m):x.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(U,{onClick:()=>l(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(U,{onClick:()=>l(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(U,{onClick:p,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Ra={week:7,month:30,threeMonths:90,all:1/0},Da=t=>t<=7?0:t<=30?4:t<=90?15:30,qa=()=>{const[t,a]=r.useState(!1),{userData:n}=$(),[o,s]=r.useState("week"),[l,p]=r.useState([]),[i,u]=r.useState(!0);r.useEffect(()=>{(t||i)&&O.get(`/weightLogs/${n==null?void 0:n.uid}`).then(f=>{p(f.data.weightLogs)}).catch(f=>{console.log(f)}),u(!1)},[t]);const x=[...l].sort((f,L)=>new Date(f.date).getTime()-new Date(L.date).getTime()).map(f=>({date:typeof f.date=="string"?f.date.slice(0,10):f.date instanceof Date?f.date.toISOString().slice(0,10):"",weight:f.weight})),m=o==="all"?x:x.slice(-Ra[o]),v=Da(m.length),T=async f=>{if(!n)return;const L={date:new Date().toISOString(),weight:f,userId:n.uid};try{const{data:A}=await O.post("weightLogs/addWeightLog",L);a(!0),setTimeout(()=>a(!1),1500)}catch(A){console.error(A)}};return e.jsxs("div",{className:J.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:J.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:J.heading,children:"Log Your Weight"}),e.jsx("div",{className:J.rangeButtons,children:["week","month","threeMonths","all"].map(f=>e.jsx(U,{className:o===f?J.activeButton:J.button,onClick:()=>s(f),children:f==="week"?"1W":f==="month"?"1M":f==="threeMonths"?"3M":"ALL"},f))}),e.jsx(xt,{width:"100%",height:300,children:e.jsxs(ht,{data:m,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(pt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(mt,{dataKey:"date",tickFormatter:f=>{const L=new Date(f);return isNaN(L.getTime())?"":ke(L,"MM/dd")},stroke:"#ff9900",interval:v,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(gt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(ft,{labelFormatter:f=>ke(new Date(f),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(jt,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Ea,{onWeightChange:T})})]})},za="_drawer__header_1hvqx_2",$a="_drawer__headerContent_1hvqx_24",Wa="_drawer__headerIcon_1hvqx_32",Ga="_drawer__title_1hvqx_46",Ua="_drawer__content_1hvqx_56",Ha="_loadingState_1hvqx_77",Va="_emptyState_1hvqx_78",Xa="_loadingState__content_1hvqx_90",Ya="_emptyState__content_1hvqx_91",Ka="_loadingState__spinner_1hvqx_98",Qa="_loadingState__text_1hvqx_115",Ja="_emptyState__text_1hvqx_116",Za="_loadingState__subtext_1hvqx_125",eo="_emptyState__subtext_1hvqx_126",to="_emptyState__icon_1hvqx_135",so="_workoutsList_1hvqx_143",ao="_workoutCard_1hvqx_150",oo="_workoutCard__border_1hvqx_186",no="_workoutCard__header_1hvqx_197",ro="_workoutCard__info_1hvqx_206",lo="_workoutCard__title_1hvqx_210",io="_workoutCard__timestamp_1hvqx_217",co="_workoutCard__timestampIcon_1hvqx_229",_o="_workoutCard__xp_1hvqx_233",uo="_workoutCard__xpValue_1hvqx_244",xo="_workoutCard__xpLabel_1hvqx_251",ho="_workoutCard__stats_1hvqx_256",po="_statItem_1hvqx_263",mo="_statItem__value_1hvqx_304",go="_statItem__label_1hvqx_311",fo="_workoutCard__sectionTitle_1hvqx_317",jo="_workoutCard__manualStats_1hvqx_333",yo="_workoutCard__manualGrid_1hvqx_337",vo="_manualStat_1hvqx_343",So="_manualStat__icon_1hvqx_354",bo="_manualStat__content_1hvqx_359",Co="_manualStat__value_1hvqx_365",wo="_manualStat__label_1hvqx_373",ko="_workoutCard__exercises_1hvqx_379",No="_workoutCard__exercisesList_1hvqx_383",Io="_exerciseItem_1hvqx_389",To="_exerciseItem__name_1hvqx_407",Lo="_exerciseItem__sets_1hvqx_414",Bo="_exerciseItem__set_1hvqx_414",Ao="_exerciseItem__notes_1hvqx_430",Mo="_workoutCard__statBoosts_1hvqx_439",Fo="_workoutCard__statBoostsGrid_1hvqx_449",Po="_statBoost_1hvqx_455",Oo="_statBoost__icon_1hvqx_496",Eo="_statBoost__label_1hvqx_500",Ro="_statBoost__value_1hvqx_504",Do="_workoutCard__notes_1hvqx_509",qo="_workoutCard__notesText_1hvqx_514",zo="_loadingMore_1hvqx_524",$o="_endOfList_1hvqx_525",Wo="_loadingMore__content_1hvqx_539",Go="_loadingMore__spinner_1hvqx_545",Uo="_loadingMore__text_1hvqx_553",Ho="_loadingMore__subtext_1hvqx_561",Vo="_endOfList__content_1hvqx_575",Xo="_endOfList__text_1hvqx_581",Yo="_endOfList__subtext_1hvqx_589",d={drawer__header:za,drawer__headerContent:$a,drawer__headerIcon:Wa,"pulse-glow":"_pulse-glow_1hvqx_1",drawer__title:Ga,drawer__content:Ua,loadingState:Ha,emptyState:Va,loadingState__content:Xa,emptyState__content:Ya,loadingState__spinner:Ka,"pixel-spin":"_pixel-spin_1hvqx_1",loadingState__text:Qa,emptyState__text:Ja,loadingState__subtext:Za,emptyState__subtext:eo,emptyState__icon:to,workoutsList:so,workoutCard:ao,"scan-line":"_scan-line_1hvqx_1",workoutCard__border:oo,workoutCard__header:no,workoutCard__info:ro,workoutCard__title:lo,workoutCard__timestamp:io,workoutCard__timestampIcon:co,workoutCard__xp:_o,workoutCard__xpValue:uo,workoutCard__xpLabel:xo,workoutCard__stats:ho,statItem:po,"statItem--type":"_statItem--type_1hvqx_286","statItem--logtype":"_statItem--logtype_1hvqx_292","statItem--rpe":"_statItem--rpe_1hvqx_298",statItem__value:mo,statItem__label:go,workoutCard__sectionTitle:fo,workoutCard__manualStats:jo,workoutCard__manualGrid:yo,manualStat:vo,manualStat__icon:So,manualStat__content:bo,manualStat__value:Co,manualStat__label:wo,workoutCard__exercises:ko,workoutCard__exercisesList:No,exerciseItem:Io,exerciseItem__name:To,exerciseItem__sets:Lo,exerciseItem__set:Bo,exerciseItem__notes:Ao,workoutCard__statBoosts:Mo,workoutCard__statBoostsGrid:Fo,statBoost:Po,"statBoost--red":"_statBoost--red_1hvqx_478","statBoost--yellow":"_statBoost--yellow_1hvqx_484","statBoost--pink":"_statBoost--pink_1hvqx_490",statBoost__icon:Oo,statBoost__label:Eo,statBoost__value:Ro,workoutCard__notes:Do,workoutCard__notesText:qo,loadingMore:zo,endOfList:$o,loadingMore__content:Wo,loadingMore__spinner:Go,loadingMore__text:Uo,loadingMore__subtext:Ho,endOfList__content:Vo,endOfList__text:Xo,endOfList__subtext:Yo},Ko=()=>{const{userData:t}=$(),[a,n]=r.useState([]),[o,s]=r.useState(!1),[l,p]=r.useState(!1),[i,u]=r.useState(!0),[x,m]=r.useState(0),v=r.useRef(null),T=10,f=async(c=x,g=!1)=>{g?s(!0):p(!0);try{const k=(await O.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${T}&offset=${c}`)).data,B=k.workouts||[];n(g?B:b=>[...b,...B]);const y=k.total||0,C=c+B.length;u(C<y),m(c+B.length)}catch(w){console.error("Error fetching workouts:",w)}s(!1),p(!1)};r.useEffect(()=>{f(0,!0)},[]),r.useEffect(()=>{const c=()=>{const w=document.querySelector(".saltDrawer");if(!w)return;const{scrollTop:k,scrollHeight:B,clientHeight:y}=w;B-k<=y+100&&i&&!l&&f(x,!1)},g=document.querySelector(".saltDrawer");return g&&g.addEventListener("scroll",c),()=>{g&&g.removeEventListener("scroll",c)}},[x,i,l]);const L=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=c=>{const g=Math.floor(c/60),w=c%60;return g>0?`${g}h ${w}m`:`${w}m`},R=({icon:c,label:g,value:w,color:k})=>e.jsxs("div",{className:`${d.statBoost} ${d[`statBoost--${k}`]}`,children:[e.jsx(c,{size:17,className:d.statBoost__icon}),e.jsx("span",{className:d.statBoost__label,children:g}),e.jsxs("span",{className:d.statBoost__value,children:["+",w]})]}),j=({workout:c})=>{var B;const g=c.logType==="manual",w=c.logType==="routine",k=c.workoutXp.pet;return e.jsxs("div",{className:d.workoutCard,children:[e.jsx("div",{className:d.workoutCard__border}),e.jsxs("div",{className:d.workoutCard__header,children:[e.jsxs("div",{className:d.workoutCard__info,children:[e.jsx("h3",{className:d.workoutCard__title,children:w?`${c.routineDay} ROUTINE`:`${(B=c==null?void 0:c.workoutType)==null?void 0:B.toUpperCase()} SESSION`}),e.jsxs("p",{className:d.workoutCard__timestamp,children:[e.jsx(yt,{size:12,className:d.workoutCard__timestampIcon}),L(c.timestamp)]})]}),e.jsxs("div",{className:d.workoutCard__xp,children:[e.jsx("div",{className:d.workoutCard__xpValue,children:k}),e.jsx("div",{className:d.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:d.workoutCard__stats,children:c.rpe&&e.jsxs("div",{className:`${d.statItem} ${d["statItem--rpe"]}`,children:[e.jsxs("div",{className:d.statItem__value,children:[c.rpe,"/4"]}),e.jsx("div",{className:d.statItem__label,children:"RPE"})]})}),g&&e.jsx("div",{className:d.workoutCard__manualStats,children:e.jsxs("div",{className:d.workoutCard__manualGrid,children:[c.duration&&e.jsxs("div",{className:d.manualStat,children:[e.jsx(vt,{size:25,className:d.manualStat__icon}),e.jsxs("div",{className:d.manualStat__content,children:[e.jsx("div",{className:d.manualStat__value,children:A(c.duration)}),e.jsx("div",{className:d.manualStat__label,children:"DURATION"})]})]}),c.distance!=0&&e.jsxs("div",{className:d.manualStat,children:[e.jsx(St,{size:16,className:d.manualStat__icon}),e.jsxs("div",{className:d.manualStat__content,children:[e.jsxs("div",{className:d.manualStat__value,children:[c.distance," KM"]}),e.jsx("div",{className:d.manualStat__label,children:"DISTANCE"})]})]})]})}),w&&c.performedExercises&&c.performedExercises.length>0&&e.jsxs("div",{className:d.workoutCard__exercises,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(de,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:d.workoutCard__exercisesList,children:c.performedExercises.map((y,C)=>e.jsxs("div",{className:d.exerciseItem,children:[e.jsx("div",{className:d.exerciseItem__name,children:y.name.toUpperCase()}),e.jsx("div",{className:d.exerciseItem__sets,children:y.sets.map((b,N)=>e.jsxs("span",{className:d.exerciseItem__set,children:[b.weight,"KG Ã— ",b.reps]},N))}),y.notes&&e.jsxs("div",{className:d.exerciseItem__notes,children:['"',y.notes,'"']})]},C))})]}),e.jsxs("div",{className:d.workoutCard__statBoosts,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(bt,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:d.workoutCard__statBoostsGrid,children:[c.workoutXp.strength>0&&e.jsx(R,{icon:Ct,label:"STR",value:c.workoutXp.strength,color:"red"}),c.workoutXp.agility>0&&e.jsx(R,{icon:Fe,label:"AGI",value:c.workoutXp.agility,color:"yellow"})]})]}),c.notes&&e.jsxs("div",{className:d.workoutCard__notes,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(Pe,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:d.workoutCard__notesText,children:['"',c.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:d.drawer__header,children:e.jsxs("div",{className:d.drawer__headerContent,children:[e.jsx(de,{className:d.drawer__headerIcon,size:32}),e.jsx("h2",{className:d.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:d.drawer__content,ref:v,children:o?e.jsx("div",{className:d.loadingState,children:e.jsxs("div",{className:d.loadingState__content,children:[e.jsx("div",{className:d.loadingState__spinner}),e.jsx("div",{className:d.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:d.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:d.emptyState,children:e.jsxs("div",{className:d.emptyState__content,children:[e.jsx(de,{className:d.emptyState__icon,size:48}),e.jsx("div",{className:d.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:d.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:d.workoutsList,children:[a.map((c,g)=>e.jsx(j,{workout:c},`${c._id}-${g}`)),l&&e.jsx("div",{className:d.loadingMore,children:e.jsxs("div",{className:d.loadingMore__content,children:[e.jsx("div",{className:d.loadingMore__spinner}),e.jsx("div",{className:d.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:d.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!i&&a.length>0&&e.jsx("div",{className:d.endOfList,children:e.jsxs("div",{className:d.endOfList__content,children:[e.jsx("div",{className:d.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:d.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})};r.forwardRef(function({onClick:a,to:n,...o},s){const l=wt(n),p=kt(n);return e.jsx(Nt,{...o,href:l,onClick:i=>{a==null||a(i),i.defaultPrevented||p(i)},ref:s})});const Qo=["Pet","Skills","Quests","Routines"],Jo=({selectedIndex:t,setSelectedIndex:a})=>{const[n,o]=r.useState("none"),{pathname:s}=It();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Ne,{children:[e.jsx(Ie,{children:e.jsx(U,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Tt,{"aria-hidden":!0})})}),e.jsxs(Te,{children:[e.jsx(K,{onClick:()=>o("logWeight"),children:"Log Weight"}),e.jsx(K,{onClick:()=>o("logFood"),children:"Log Food"}),e.jsx(K,{onClick:()=>o("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(Oe,{selectedIndex:t,onChange:a,children:e.jsx(Ee,{className:"tab-nav",children:Qo.map((l,p)=>e.jsx(Re,{className:({selected:i})=>`tab-button ${i?"tab-selected":""}`,children:l},l))})}),e.jsx("div",{children:e.jsx(Lt,{placement:"top",content:"User Settings",children:e.jsxs(Ne,{children:[e.jsx(Ie,{children:e.jsx(U,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Bt,{"aria-hidden":!0})})}),e.jsxs(Te,{children:[e.jsx(K,{onClick:()=>o("mealHist"),children:"View Meals"}),e.jsx(K,{onClick:()=>o("workoutHist"),children:"View Workouts"}),e.jsx(K,{onClick:ls,children:"Logout"})]})]})})}),e.jsxs(At,{open:n!=="none",onOpenChange:()=>o("none"),position:"bottom",children:[e.jsx(Mt,{onClick:()=>o("none")}),n==="logFood"&&e.jsx(cs,{}),n==="logWorkout"&&e.jsx(Ns,{setDrawerView:o}),n==="mealHist"&&e.jsx(La,{}),n==="workoutHist"&&e.jsx(Ko,{}),n==="logWeight"&&e.jsx(qa,{})]})]})},Zo="_myBackground_1pm88_1",en="_loginScreen_1pm88_13",tn="_overlay_1pm88_29",sn="_loginContainer_1pm88_39",an="_googleButton_1pm88_49",me={myBackground:Zo,loginScreen:en,overlay:tn,loginContainer:sn,googleButton:an};function on(){const{setUserData:t}=$(),[a,n]=r.useState(!1),o=async()=>{n(!0),console.log("Attempting to log in with Google...");try{const l=await(await Ft(ie,rs)).user.getIdToken(),{data:p}=await O.post("/auth/google",{token:l}),u=(await O.get(`/users/${p.uid}`)).data;t(u),console.log("User saved or retrieved from DB:",p)}catch(s){console.error(s)}n(!0)};return e.jsx("div",{className:me.loginScreen,children:e.jsx("div",{className:me.loginContainer,children:a?e.jsx(Me,{size:"large","aria-label":"loading",role:"status"}):e.jsx(Z,{className:me.googleButton,onClick:o,children:"Embark with Google"})})})}const nn=()=>{const{userData:t,setUserData:a}=$();if(!t)return e.jsx(h,{children:"Loading..."});const[n,o]=r.useState(0),[s,l]=r.useState(t),[p,i]=r.useState(1),[u,x]=r.useState(1.2),[m,v]=r.useState(0),[T,f]=r.useState(Math.floor(s.bodyStats.height/12)),[L,A]=r.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(h,{children:"Loading..."});r.useEffect(()=>{const y=T*12+L;console.log("total inches : ",y),l(C=>({...C,bodyStats:{...C.bodyStats,height:y}}))},[T,L]);const R=y=>{const{weight:C,height:b,age:N,sex:F}=y;return F==="male"?10*(C/2.205)+6.25*(b*2.54)-5*N+5:10*(C/2.205)+6.25*(b*2.54)-5*N-161},j=y=>{const C=u+m;return y*C},c=async y=>{y.preventDefault();const C=s.bodyStats.weight,b={userId:t.uid,date:new Date,weight:C},N=R(s.bodyStats),F=j(N),H=s.goal.goalType==="weight_loss"?F-p*3500/7:s.goal.goalType==="muscle_gain"?F+300:F,V=Math.round(H/100),G={...s,bodyStats:{...s.bodyStats,bmr:N,tdee:F,weight:C},goal:{...s.goal,dailyCalorieGoal:H,dailyCurrencyTotal:V,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",G);try{const{data:X}=await O.post("/users/update",{...G});a(X)}catch(X){console.error("Error updating user data:",X)}try{await O.post("/weightLogs/addWeightLog",b)}catch(X){console.error(X)}},g=(y,C,b)=>{const{name:N,value:F}=y.target;l({...s,[C]:{...s[C],[b||N]:F}})},w=(y,C,b)=>{l({...s,[y]:{...s[y],[C]:b}})},k=()=>{if(n===0){const{weight:y,height:C,age:b,sex:N}=s.bodyStats;return y>0&&C>0&&b>0&&["male","female"].includes(N)}if(n===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(n===2){const{name:y,currentPet:C}=s.pet;return y.trim()!==""&&["puppy","kitten","bird"].includes(C)}return!0},B=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(I,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(P,{grow:1,children:e.jsxs(q,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(P,{children:e.jsx(h,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(P,{children:e.jsx(Pt,{children:B.map((y,C)=>e.jsx(Ot,{label:y,stage:n===C?"active":C<n?"completed":"pending"},C))})}),e.jsxs("form",{onSubmit:c,children:[n===0&&e.jsxs(q,{align:"stretch",gap:2,children:[e.jsx(h,{styleAs:"h2",children:"Body Stats"}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Weight (lbs)"}),e.jsx(ne,{value:s.bodyStats.weight,onChange:y=>g(y,"bodyStats","weight")})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(re,{value:T.toString()+" ft",onSelectionChange:(y,C)=>f(Number(C)),children:[2,3,4,5,6,7,8,9].map(y=>e.jsxs(le,{value:y.toString(),children:[y," ft"]},y))}),e.jsx(re,{value:L.toString()+" in",onSelectionChange:(y,C)=>A(Number(C)),children:Array.from({length:12},(y,C)=>e.jsxs(le,{value:C.toString(),children:[C," in"]},C))})]})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Sex"}),e.jsxs(I,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(I,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(h,{children:"Male"})]})})}),e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(I,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(h,{children:"Female"})]})})})]})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Age (years)"}),e.jsx(ne,{value:s.bodyStats.age,onChange:y=>g(y,"bodyStats","age")})]})]}),n===1&&e.jsxs(q,{gap:2,children:[e.jsx(h,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(I,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(I,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ”¥",size:24}),e.jsx(h,{children:"Weight Loss"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(I,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(h,{children:"Muscle Gain"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(I,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ› ï¸",size:24}),e.jsx(h,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(Y,{children:[e.jsx(h,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Et,{max:2,min:.5,step:.25,value:p,onChange:(y,C)=>i(C),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(q,{gap:1,children:[e.jsx(h,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(h,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(I,{direction:"column",gap:1,children:[e.jsx(D,{onClick:()=>x(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ’»",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(D,{onClick:()=>x(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(D,{onClick:()=>x(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(D,{onClick:()=>x(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(q,{gap:1,children:[e.jsx(h,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(h,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(I,{direction:"column",gap:1,children:[e.jsx(D,{onClick:()=>v(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Sedentary"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(D,{onClick:()=>v(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Lightly Active"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(D,{onClick:()=>v(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Moderately Active"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(D,{onClick:()=>v(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Very Active"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(D,{onClick:()=>v(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(I,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"ðŸ’ª",size:30}),e.jsxs(q,{gap:0,children:[e.jsx(h,{styleAs:"h2",children:"Extremely Active"}),e.jsx(h,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),n===2&&e.jsxs(q,{gap:2,children:[e.jsx(h,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Pet Name"}),e.jsx(ne,{value:s.pet.name,onChange:y=>g(y,"pet","name")})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Pet Type"}),e.jsxs(I,{direction:"row",gap:2,children:[e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(I,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ¶",size:24}),e.jsx(h,{children:"Dog"})]})})})}),e.jsx(P,{grow:1,children:e.jsx(D,{onClick:()=>w("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(I,{direction:"column",align:"center",gap:1,children:e.jsxs(P,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"ðŸ±",size:24}),e.jsx(h,{children:"Cat"})]})})})})]})]})]}),e.jsx(P,{style:{paddingTop:"20px"},children:e.jsxs(I,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[n>0&&e.jsx(Z,{sentiment:"neutral",appearance:"solid",onClick:()=>o(n-1),children:"Previous"}),n<B.length-1&&e.jsx(Z,{sentiment:"accented",appearance:"solid",disabled:!k(),onClick:()=>o(n+1),children:"Next"}),n===B.length-1&&e.jsx(Z,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!k(),onClick:c,children:"Start Your Adventure!"})]})})]})]})})})},rn="_homePage_santw_1",ln="_homePageTitle_santw_6",cn="_statusSection_santw_24",dn="_levelText_santw_29",_n="_xpBarWrapper_santw_35",un="_xpBarFill_santw_44",xn="_pixelBorder_santw_50",Be={homePage:rn,homePageTitle:ln,"card-links":"_card-links_santw_10","card-image":"_card-image_santw_19",statusSection:cn,levelText:dn,xpBarWrapper:_n,xpBarFill:un,pixelBorder:xn},hn="_xpBarWrapper_sqxxw_1",pn="_xpBarFill_sqxxw_12",mn="_pixelGlow_sqxxw_1",gn="_xpText_sqxxw_33",fn="_levelText_sqxxw_59",oe={xpBarWrapper:hn,xpBarFill:pn,pixelGlow:mn,xpText:gn,levelText:fn};function jn(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function ge(t,a){const n=jn(a);return{progress:Math.min(Math.max(t/n*100,0),100),xpNeeded:n}}const yn=({currentXp:t,level:a})=>{const[n,o]=r.useState(()=>ge(t,a).progress),s=r.useRef(t),{xpNeeded:l}=ge(t,a);return r.useEffect(()=>{const p=ge(t,a).progress,i=s.current;t>i,o(p),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(h,{className:oe.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:oe.xpBarWrapper,children:[e.jsx("div",{className:oe.xpBarFill,style:{width:`${n}%`}}),e.jsxs(h,{className:oe.xpText,styleAs:"label",children:[" ",t," / ",l]})]})]})},vn=({consumed:t=!1,size:a=48,className:n})=>{const[o,s]=r.useState(!1);return r.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:o?0:1}})},Sn=({consumed:t=!1,size:a=48,className:n})=>{const[o,s]=r.useState(!1);return r.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:o?0:1}})},bn=({count:t,consumedCurrency:a,userArchetype:n})=>{const o=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[o," / ",t," ",n==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,l)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:n==="puppy"?e.jsx(vn,{consumed:a[l]??!1}):e.jsx(Sn,{consumed:a[l]??!1})},l))})]})},Ae=()=>{var m,v;const{userData:t}=$(),[a,n]=r.useState(0),[o,s]=r.useState([]),l=r.useRef(null),p={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"},i=((m=t==null?void 0:t.pet)==null?void 0:m.currentPet)??"puppy",u=r.useMemo(()=>p[i],[i]),x=r.useMemo(()=>i==="kitten",[i]);return r.useEffect(()=>{var j,c,g;const T=new Date().toISOString().slice(0,10),f=((j=t==null?void 0:t.goal)==null?void 0:j.dailyCurrencyTotal)??0,L=((g=(c=t==null?void 0:t.goal)==null?void 0:c.dailyCurrencyUsed)==null?void 0:g[T])??0,A=f-L;n(A);const R=Array(f).fill(!1).map((w,k)=>k>=A);s(R)},[t]),console.log("Model Path:",u),console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(I,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(P,{align:"center",style:{flexShrink:0},children:e.jsx(h,{styleAs:"h1",className:Be.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(P,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(bn,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((v=t==null?void 0:t.goal)==null?void 0:v.dailyCurrencyTotal)??0,consumedCurrency:o})}),e.jsx(P,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:e.jsxs(Rt,{resize:{polyfill:ResizeObserver},camera:{position:[2,0,4],fov:100},gl:T=>{const f=new qt({canvas:T,alpha:!0});return f.setClearColor("#87ceeb",1),f},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(wn,{modelPath:u,isKitten:x}),e.jsx(Dt,{ref:l,maxPolarAngle:Math.PI/1.5,minDistance:3,maxDistance:10})]})})}),e.jsx(P,{className:Be.statusSection,style:{flexShrink:0},children:e.jsx(yn,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},Cn=({modelRef:t})=>{const{camera:a,controls:n}=Gt();return r.useEffect(()=>{if(!t.current)return;const o=new Ut().setFromObject(t.current),s=o.getSize(new Le),l=o.getCenter(new Le);if("fov"in a){const p=a,i=p.fov*Math.PI/180,x=Math.max(s.x,s.y,s.z)/(2*Math.tan(i/2)),m=Math.max(x*2,5);p.position.set(l.x+m*.6,l.y+m*.6,l.z+m*.6),p.lookAt(l);const v=n;v!=null&&v.target&&typeof v.update=="function"&&(v.target.copy(l),v.update())}},[t,a,n]),null};function wn({modelPath:t,isKitten:a}){const[n,o,s,l]=zt(["/assets/grass/AmbientOcclusion.jpg","/assets/grass/Color.jpg","/assets/grass/NormalGL.jpg","/assets/grass/Roughness.jpg"]);console.log(a);const p=$t(t),i=r.useMemo(()=>p.scene.clone(),[p.scene]),u=r.useRef(null);return e.jsxs(r.Suspense,{fallback:null,children:[e.jsx("primitive",{ref:u,object:i,scale:.8,position:[0,-3.5,0],rotation:a?[0,Math.PI,0]:[0,0,0]}),e.jsx(Cn,{modelRef:u}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-3.5,0],receiveShadow:!0,children:[e.jsx("planeGeometry",{args:[100,100]}),e.jsx("meshStandardMaterial",{map:o,normalMap:s,roughnessMap:l,aoMap:n,side:Wt})]})]})}const kn=({content:t})=>{const[a,n]=r.useState(null),o=p=>{n(p.currentTarget)},s=()=>{n(null)},l=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:o,style:{cursor:"pointer",marginLeft:4},children:e.jsx(M,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(Ht,{open:l,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Nn=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],In=()=>{const{userData:t}=$();if(!t)return null;const{pet:a}=t;return e.jsxs(I,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(I,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(M,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(h,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Nn.map(n=>e.jsx(ve,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(I,{justify:"space-between",align:"center",children:[e.jsxs(I,{align:"center",gap:1,children:[e.jsx(M,{symbol:n.emoji,size:20}),e.jsx(h,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:n.label}),e.jsx(kn,{content:n.description})]}),e.jsxs(h,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[n.key]]})]})},n.key))]})},fe=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],je=({name:t,description:a,progress:n})=>e.jsxs(ve,{style:{width:"100%"},children:[e.jsx(h,{styleAs:"h4",children:t}),e.jsx(h,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Xt,{value:n}),e.jsxs(h,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[n,"% complete"]})]}),Tn=()=>{const t=fe.filter(o=>o.status==="inProgress"),a=fe.filter(o=>o.status==="notStarted"),n=fe.filter(o=>o.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(h,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Vt,{children:[e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"In Progress"}),e.jsx(xe,{children:e.jsx(I,{direction:"column",gap:2,children:t.map(o=>e.jsx(je,{...o},o.name))})})]}),e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"Not Started"}),e.jsx(xe,{children:e.jsx(I,{direction:"column",gap:2,children:a.map(o=>e.jsx(je,{...o},o.name))})})]}),e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"Completed"}),e.jsx(xe,{children:e.jsx(I,{direction:"column",gap:2,children:n.map(o=>e.jsx(je,{...o},o.name))})})]})]})]})},Ln="_container_4o28a_1",Bn="_tabList_4o28a_11",An="_tabButton_4o28a_18",Mn="_active_4o28a_34",Fn="_borderGlow_4o28a_1",Pn="_form_4o28a_50",On="_heroSection_4o28a_100",En="_heroList_4o28a_107",Rn="_hero_4o28a_100",Dn="_selected_4o28a_138",qn="_disclosureButton_4o28a_151",zn="_chevron_4o28a_169",$n="_rotate_4o28a_174",Wn="_equipmentSection_4o28a_178",Gn="_equipmentList_4o28a_186",Un="_equipment_4o28a_178",E={container:Ln,tabList:Bn,tabButton:An,active:Mn,borderGlow:Fn,form:Pn,heroSection:On,heroList:En,hero:Rn,selected:Dn,disclosureButton:qn,chevron:zn,rotate:$n,equipmentSection:Wn,equipmentList:Gn,equipment:Un},Hn="_puppySpinner_qnb89_1",Vn="_loadingText_qnb89_9",Xn="_puppy_qnb89_1",Yn="_run_qnb89_1",Kn="_treadmillBelt_qnb89_19",ye={puppySpinner:Hn,loadingText:Vn,puppy:Xn,run:Yn,treadmillBelt:Kn,"belt-move":"_belt-move_qnb89_1"};function ce({scale:t=1}){const a=150*t;return e.jsxs("div",{className:ye.puppySpinner,style:{width:`${a}px`,height:`${a}px`},children:[e.jsx("div",{className:ye.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:ye.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const Qn=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],Jn=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function Zn(){const{userData:t}=$(),[a,n]=r.useState("Max Muscle"),[o,s]=r.useState(""),[l,p]=r.useState("beginner"),[i,u]=r.useState(3),[x,m]=r.useState([]),[v,T]=r.useState(""),[f,L]=r.useState(""),[A,R]=r.useState(""),[j,c]=r.useState(""),[g,w]=r.useState(15),[k,B]=r.useState(!1),{addToast:y}=He(),C=b=>{b.preventDefault(),B(!0);const N={goal:a,sport:a==="Sport Specific"?o:null,experience:l,days:i,equipment:x.join(", "),include:v,exclude:f,considerations:A,sessionDurationMinutes:g,petCoach:j,userId:t==null?void 0:t.uid};O.post("/workout/routine/createRoutine",N,{timeout:3e4}).then(F=>{console.log("Routine Created:",F.data),y({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"âšâ–ˆâ•â•â–ˆâš"}),e.jsx("div",{className:E.routineCreatedText,children:"Routine Created!"})]})})}).catch(F=>{console.error(F)}).finally(()=>B(!1))};return k?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsxs("form",{className:E.form,onSubmit:C,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:a,onChange:b=>n(b.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),a==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:o,onChange:b=>s(b.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:l,onChange:b=>p(b.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:i,onChange:b=>u(Number(b.target.value)),children:[...Array(7)].map((b,N)=>e.jsxs("option",{value:N+1,children:[N+1," ",N===0?"day":"days"]},N+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:g,onChange:b=>w(Number(b.target.value)),children:[...Array(12)].map((b,N)=>{const F=(N+1)*15,H=Math.floor(F/60),V=F%60,G=H>0?`${H}h${V>0?` ${V}m`:""}`:`${V} minutes`;return e.jsx("option",{value:F,children:G},F)})})]}),e.jsxs("div",{className:E.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:E.equipmentList,children:Jn.map(b=>e.jsx(U,{type:"button",onClick:()=>m(N=>N.includes(b)?N.filter(F=>F!==b):[...N,b]),className:`${E.equipment} ${x.includes(b)?E.selected:""}`,children:b},b))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:v,onChange:b=>T(b.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:f,onChange:b=>L(b.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:A,onChange:b=>R(b.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(De,{children:({open:b})=>e.jsxs("div",{className:E.heroSection,children:[e.jsxs(qe,{className:E.disclosureButton,children:["Let one of our XPets train you!",e.jsx(ze,{className:`${E.chevron} ${b?E.rotate:""}`,"aria-hidden":"true"})]}),e.jsx($e,{className:E.heroList,children:Qn.map(N=>e.jsx(U,{type:"button",onClick:()=>c(N.name),className:`${E.hero} ${j===N.name?E.selected:""}`,style:{borderColor:typeof N.color=="string"&&N.color.includes("linear")?void 0:N.color,borderImage:N.color.includes("linear")?N.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:N.name},N.name))})]})}),e.jsx(U,{type:"submit",children:"Generate Routine"})]})}function Xe({routine:t,setRoutines:a,menuOptions:n}){const{userData:o}=$();if(!t||t.length===0)return null;const s=i=>{console.log("Delete",i),O.delete(`/routines/delete/${i}`).then(()=>{a(u=>u==null?void 0:u.filter(x=>x._id!==i))}).catch(u=>{console.error("Failed to delete routine: ",u)})},l=i=>{O.post(`/routines/share/${i._id}`).then(()=>{console.log("Routine shared to community.")}).catch(u=>{console.error("Failed to share routine: ",u)})},p=i=>{O.post(`/routines/copy/${i._id}`,{userId:o==null?void 0:o.uid}).then(u=>{console.log("Copied routine:",u.data.routine),a==null||a(x=>[...x||[],u.data.routine])}).catch(u=>{console.error("Failed to copy routine:",u)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((i,u)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(De,{children:({open:x})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(qe,{className:"accordion-trigger",children:[e.jsx(ze,{size:32,className:`chevron ${x?"open":""}`}),e.jsx("span",{className:"routine-title",children:i.routineName})]}),e.jsxs(Yt,{as:"div",className:"menu-wrapper",children:[e.jsx(Kt,{className:"menu-button",onClick:m=>m.stopPropagation(),children:e.jsx(Qt,{size:20})}),e.jsxs(Jt,{className:"menu-dropdown",children:[n.includes("Share")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>l(i),className:"menu-item",children:"Share"})}),n.includes("Delete")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>s(i._id),className:"menu-item",children:"Delete"})}),n.includes("Copy")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>p(i),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx($e,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:i.weeklySchedule.map((m,v)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:m.dayName}),e.jsx("div",{className:"day-exercises",children:m.exercises.map(T=>T.exercise).join(", ")}),e.jsx("button",{className:"start-button",children:"START WORKOUT"})]},m.dayName+v))})})]})})},i.routineName+u))})}function er(){const[t,a]=r.useState(),[n,o]=r.useState(!0),{userData:s}=$();return r.useEffect(()=>{O.get(`/routines?uid=${s==null?void 0:s.uid}`).then(l=>{a(l.data.routines)}).catch(l=>{console.error(l)}).finally(()=>o(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):n?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Xe,{routine:t,setRoutines:a,menuOptions:["Share","Delete"]})})}function tr(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})})}function sr(){const[t,a]=r.useState(),[n,o]=r.useState(!0);return $(),r.useEffect(()=>{O.get("/routines?communityRoutine=true").then(s=>{a(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>o(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):n?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Xe,{routine:t,setRoutines:a,menuOptions:["Copy"]})})}function ar(){return e.jsx("div",{className:E.container,children:e.jsxs(Oe,{children:[e.jsx(Ee,{className:E.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(Re,{className:({selected:a})=>`${E.tabButton} ${a?E.active:""}`,children:t},t))}),e.jsxs(Zt,{children:[e.jsx(ae,{children:e.jsx(er,{})}),e.jsx(ae,{children:e.jsx(Zn,{})}),e.jsx(ae,{children:e.jsx(tr,{})}),e.jsx(ae,{children:e.jsx(sr,{})})]})]})})}const or=["Pet","Skills","Quests","Routines"];function nr(){const[t,a]=r.useState(null),[n,o]=r.useState(!0),{userData:s,setUserData:l}=$(),[p,i]=r.useState(0),u=x=>{switch(or[x]){case"Pet":return e.jsx(Ae,{});case"Skills":return e.jsx(In,{});case"Quests":return e.jsx(Tn,{});case"Routines":return e.jsx(ar,{});default:return e.jsx(Ae,{})}};return r.useEffect(()=>{const x=es.throttle(()=>{console.log("Fetching user object..."),O.get(`/users/${s==null?void 0:s.uid}`).then(v=>{l(v.data),console.log("User data synced:",v.data)}).catch(v=>{console.error("Failed to fetch user:",v)})},1e4),m=()=>{console.log("User came back!"),x()};return s&&window.addEventListener("focus",m),()=>{s&&(window.removeEventListener("focus",m),x.cancel())}},[]),r.useEffect(()=>{const x=ts(ie,m=>{console.log("Auth state changed:",m),console.log("User Data in App useEffect:",s),a(m),o(!1);const v=localStorage.getItem("userData");v&&l(JSON.parse(v))});return()=>x()},[]),console.log("App render - Loading:",n,"User:",t,"UserData:",s),n?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(pe,{mode:"dark",children:e.jsx(on,{})}):s.bodyStats.weight===0?e.jsx(pe,{mode:"dark",children:e.jsx(nn,{})}):e.jsx(pe,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:u(p)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(Jo,{selectedIndex:p,setSelectedIndex:i})})]})})}ss.createRoot(document.getElementById("root")).render(e.jsx(as.StrictMode,{children:e.jsx(os,{children:e.jsx(is,{children:e.jsx(hs,{children:e.jsx(Cs,{children:e.jsx(nr,{})})})})})}));
