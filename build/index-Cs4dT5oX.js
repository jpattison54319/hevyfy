import{r as o,j as e,T as l,F as u,a as x,C as de,B as pe,O as ue,u as he,P as ge,b as le,A as xe,c as O,d as $,e as G,L as me,i as ye,g as je,f as fe,s as be,G as ve,h as Se,k as ke,l as we,m as Ce,n as T,S as Z,o as Ae,p as Pe,N as _e,q as Le,M as Fe,t as Te,v as Ie,w as Be,x as te,y as b,z as Me,U as Re,D as ze,E as We,H as Ne,I as He,J as M,K as z,Q as V,R as se,V as re,W as f,X as Ee,Y as De,Z as Ue,_ as Y,$ as Oe,a0 as $e,a1 as Ge,a2 as Ve,a3 as Ye}from"./vendor-B4BZc2Kv.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();const Je="_homePage_rxrt2_1",Ke="_homePageTitle_rxrt2_6",Qe="_statusSection_rxrt2_24",Xe="_levelText_rxrt2_29",qe="_xpBarWrapper_rxrt2_35",Ze="_xpBarFill_rxrt2_44",ne={homePage:Je,homePageTitle:Ke,"card-links":"_card-links_rxrt2_10","card-image":"_card-image_rxrt2_19",statusSection:Qe,levelText:Xe,xpBarWrapper:qe,xpBarFill:Ze},oe=o.createContext(void 0),et=({children:s})=>{const[a,r]=o.useState(()=>{const t=localStorage.getItem("userData");return t?JSON.parse(t):null}),n=t=>{r(t),t?localStorage.setItem("userData",JSON.stringify(t)):localStorage.removeItem("userData")};return e.jsx(oe.Provider,{value:{userData:a,setUserData:n},children:s})},N=()=>{const s=o.useContext(oe);if(!s)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=s,n=o.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:n}},tt="_xpBarWrapper_rtmpn_1",st="_xpBarFill_rtmpn_11",rt="_xpText_rtmpn_18",J={xpBarWrapper:tt,xpBarFill:st,xpText:rt};function ae(s){return 100+s*50}function K(s,a){let r=0;for(let c=1;c<a;c++)r+=ae(c);const n=s-r,t=ae(a);return{progress:Math.min(Math.max(n/t*100,0),100),currentLevelXp:n,xpNeeded:t}}const nt=({currentXp:s,level:a})=>{const[r,n]=o.useState(()=>K(s,a).progress),t=o.useRef(s),{currentLevelXp:i,xpNeeded:c}=K(s,a);return o.useEffect(()=>{const h=K(s,a).progress,g=t.current;s>g,n(h),t.current=s},[s,a]),e.jsxs(e.Fragment,{children:[e.jsxs(l,{styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:J.xpBarWrapper,children:[e.jsx("div",{className:J.xpBarFill,style:{width:`${r}%`}}),e.jsxs(l,{className:J.xpText,styleAs:"label",children:[" ",i," / ",c]})]})]})},at=({consumed:s=!1,size:a=48,className:r})=>{const[n,t]=o.useState(!1);return o.useEffect(()=>{if(s){const i=setTimeout(()=>t(!0),20);return()=>clearTimeout(i)}else t(!1)},[s]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:n?0:1}})},lt=({consumed:s=!1,size:a=48,className:r})=>{const[n,t]=o.useState(!1);return o.useEffect(()=>{if(s){const i=setTimeout(()=>t(!0),20);return()=>clearTimeout(i)}else t(!1)},[s]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:n?0:1}})},ot=({count:s,consumedCurrency:a,userArchetype:r})=>e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden"},children:[...Array(s)].map((n,t)=>e.jsx("div",{style:{flex:`1 0 ${100/s}%`,maxWidth:`${100/s}%`,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(at,{consumed:a[t]??!1}):e.jsx(lt,{consumed:a[t]??!1})},t))}),it=()=>{var v;const{userData:s}=N(),[a,r]=o.useState(""),[n,t]=o.useState(0),[i,c]=o.useState([]);let h=!1;const g={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};o.useEffect(()=>{var j;r(g[((j=s==null?void 0:s.pet)==null?void 0:j.currentPet)??"puppy"]),h=a==null?void 0:a.includes("kitten")},[s]),o.useEffect(()=>{var I,R,S;const j=new Date().toISOString().slice(0,10),w=((I=s==null?void 0:s.goal)==null?void 0:I.dailyCurrencyTotal)??0,B=((S=(R=s==null?void 0:s.goal)==null?void 0:R.dailyCurrencyUsed)==null?void 0:S[j])??0,C=w-B;t(C);const P=Array(w).fill(!1).map((m,A)=>A>=C);c(P)},[s]),console.log("Model Path:",a);function _({url:j,scale:w=2,position:B=[0,-2,0],rotation:C=[0,0,0]}){const P=he(j);if(!P||!P.scene)return null;const I=o.useMemo(()=>P.scene.clone(),[P.scene]);return e.jsx("primitive",{object:I,scale:w,position:B,rotation:C})}return console.log("userData",s),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(u,{style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(x,{align:"center",style:{flexShrink:0},children:e.jsx(l,{styleAs:"h1",className:ne.homePageTitle,children:s==null?void 0:s.pet.name})}),e.jsx(x,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(ot,{userArchetype:(s==null?void 0:s.pet.currentPet)??"puppy",count:((v=s==null?void 0:s.goal)==null?void 0:v.dailyCurrencyTotal)??0,consumedCurrency:i})}),e.jsx(x,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(de,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(o.Suspense,{children:e.jsx(pe,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(_,{url:a,scale:.8,position:h?[0,-3,0]:[0,-2,0],rotation:h?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(ue,{})]})})}),e.jsx(x,{className:ne.statusSection,style:{flexShrink:0},children:e.jsx(nt,{currentXp:(s==null?void 0:s.pet.xp)??0,level:(s==null?void 0:s.pet.level)??0})})]})})},y=({symbol:s,label:a="",className:r="",style:n={},size:t=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof t=="number"?`${t}px`:t,lineHeight:1,...n},children:s}),ct=({content:s})=>{const[a,r]=o.useState(null),n=c=>{r(c.currentTarget)},t=()=>{r(null)},i=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:n,style:{cursor:"pointer",marginLeft:4},children:e.jsx(y,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(ge,{open:i,anchorEl:a,onClose:t,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:s})]})},dt=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],pt=()=>{const{userData:s}=N();if(!s)return null;const{pet:a}=s;return e.jsxs(u,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(u,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(y,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(l,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),dt.map(r=>e.jsx(le,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(u,{justify:"space-between",align:"center",children:[e.jsxs(u,{align:"center",gap:1,children:[e.jsx(y,{symbol:r.emoji,size:20}),e.jsx(l,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(ct,{content:r.description})]}),e.jsxs(l,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},Q=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],X=({name:s,description:a,progress:r})=>e.jsxs(le,{style:{width:"100%"},children:[e.jsx(l,{styleAs:"h4",children:s}),e.jsx(l,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(me,{value:r}),e.jsxs(l,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),ut=()=>{const s=Q.filter(n=>n.status==="inProgress"),a=Q.filter(n=>n.status==="notStarted"),r=Q.filter(n=>n.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(l,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(xe,{children:[e.jsxs(O,{value:"",children:[e.jsx($,{children:"In Progress"}),e.jsx(G,{children:e.jsx(u,{direction:"column",gap:2,children:s.map(n=>e.jsx(X,{...n},n.name))})})]}),e.jsxs(O,{value:"",children:[e.jsx($,{children:"Not Started"}),e.jsx(G,{children:e.jsx(u,{direction:"column",gap:2,children:a.map(n=>e.jsx(X,{...n},n.name))})})]}),e.jsxs(O,{value:"",children:[e.jsx($,{children:"Completed"}),e.jsx(G,{children:e.jsx(u,{direction:"column",gap:2,children:r.map(n=>e.jsx(X,{...n},n.name))})})]})]})]})},ie=[{path:"/",name:"Character",element:e.jsx(it,{})},{path:"/skills",name:"Skills",element:e.jsx(pt,{})},{path:"/quests",name:"Quests",element:e.jsx(ut,{})}],ht={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},ce=ye(ht);je(ce);const E=fe(ce);be(E,Se).then(()=>{}).catch(s=>{console.error("Failed to set persistence:",s)});const gt=new ve;function xt(){ke(E).then(()=>{console.log("Signed out!")}).catch(s=>{console.error("Sign out error:",s)})}const W=we.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),mt=()=>{const{userData:s,setUserData:a}=N(),r=(s==null?void 0:s.pet.currentPet)==="puppy"?"bones":"fish",[n,t]=o.useState(""),[i,c]=o.useState(null),[h,g]=o.useState(!1),[_,v]=o.useState(null),[j,w]=o.useState(null),[B,C]=o.useState(!1),P=async()=>{if(n.trim()){g(!0),v(null),c(null);try{const{data:S}=await W.post("/chatnutrition",{message:n}),m={...S,description:n};console.log(m),w(m),C(!0)}catch{v("Failed to get nutrition info. Try again.")}finally{g(!1)}}},I=async()=>{if(j){g(!0),v(null);try{const S=await W.post(`/chatnutrition/${s==null?void 0:s.uid}/addMeal`,j),{mealAffects:m,updatedUser:A}=S.data;a(A);const L=[];m.currency&&L.push(`ðŸ¦´ This meal cost ${m.currency} bone${m.currency>1?"s":""}!`),m.armorIncrease&&L.push(`ðŸ›¡ï¸ +${m.armorIncrease.toFixed(1)} Armor from protein`),m.defenseIncrease&&L.push(`ðŸ§± +${m.defenseIncrease.toFixed(1)} Defense from fiber`),m.speedIncrease&&L.push(`ðŸ’¨ +${m.speedIncrease.toFixed(1)} Speed from hydration`),m.intelligenceIncrease&&L.push(`ðŸ§  +${m.intelligenceIncrease} Intelligence from fruits & vegetables`),c(L.join(`
`))}catch{v("Failed to confirm meal. Try again.")}finally{g(!1),w(null),C(!1),t("")}}},R=()=>{w(null),C(!1),c(null)};return e.jsxs(Ce,{style:{maxWidth:480,margin:"auto",padding:16},children:[e.jsx(l,{styleAs:"h2",style:{marginBottom:12},children:"Log Your Food"}),e.jsx("textarea",{value:n,onChange:S=>t(S.target.value),placeholder:"Describe what you ate today...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:5,style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--salt-palette-neutral-300)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}}),B?e.jsxs(e.Fragment,{children:[e.jsxs(l,{styleAs:"h2",children:["ðŸ¦´ This meal will cost ",Math.round(j.calories/100)," ",r,". Proceed?"]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[e.jsx(T,{onClick:I,sentiment:"positive",disabled:h,children:h?e.jsx(Z,{size:"small"}):"Confirm"}),e.jsx(T,{onClick:R,sentiment:"neutral",disabled:h,children:"Cancel"})]})]}):e.jsx(T,{appearance:"solid",sentiment:"accented",onClick:P,disabled:h||!n.trim(),style:{marginTop:12},children:h?e.jsx(Z,{size:"small"}):"Send"}),_&&e.jsx(l,{styleAs:"display2",style:{color:"var(--salt-error-text-color)",marginTop:12},children:_}),i&&e.jsx("pre",{style:{marginTop:16,backgroundColor:"var(--salt-gray-50)",padding:12,borderRadius:6,whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:14},children:e.jsxs(l,{style:{lineHeight:"33px"},styleAs:"h3",children:[" ",i]})})]})},yt=o.forwardRef(function({onClick:a,to:r,...n},t){const i=Ae(r),c=Pe(r);return e.jsx(_e,{...n,href:i,onClick:h=>{a==null||a(h),h.defaultPrevented||c(h)},ref:t})}),jt=()=>{const[s,a]=o.useState("none"),{pathname:r}=Le();return e.jsxs(u,{as:"header",justify:"space-between",align:"center",className:"app-header",children:[e.jsx(x,{children:e.jsxs(Fe,{children:[e.jsx(Te,{children:e.jsx(T,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(Ie,{"aria-hidden":!0})})}),e.jsxs(Be,{children:[e.jsx(te,{onClick:()=>a("logFood"),children:"Log Food"}),e.jsx(te,{children:"Log Manual Workout"})]})]})}),e.jsx(x,{children:e.jsx("nav",{children:e.jsx(b,{direction:"row",gap:1,role:"list",children:ie.map(n=>e.jsx("div",{role:"listitem",children:e.jsx(yt,{active:r===n.path,to:n.path,children:n.name})},n.name))})})}),e.jsx(x,{children:e.jsx(Me,{placement:"top",content:"User Settings",children:e.jsx(T,{appearance:"bordered",sentiment:"accented","aria-label":"User Settings",onClick:xt,children:e.jsx(Re,{})})})}),e.jsxs(ze,{open:s!=="none",onOpenChange:()=>a("none"),position:"bottom",children:[s==="logFood"&&e.jsx(mt,{}),s==="logWorkout"&&e.jsx(e.Fragment,{})]})]})},ft="_myBackground_1pm88_1",bt="_loginScreen_1pm88_13",vt="_overlay_1pm88_29",St="_loginContainer_1pm88_39",kt="_googleButton_1pm88_49",q={myBackground:ft,loginScreen:bt,overlay:vt,loginContainer:St,googleButton:kt};function wt(){const{setUserData:s}=N(),[a,r]=o.useState(!1),n=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const i=await(await We(E,gt)).user.getIdToken(),{data:c}=await W.post("/auth/google",{token:i}),g=(await W.get(`/users/${c.uid}`)).data;s(g),console.log("User saved or retrieved from DB:",c)}catch(t){console.error(t)}r(!0)};return e.jsx("div",{className:q.loginScreen,children:e.jsx("div",{className:q.loginContainer,children:a?e.jsx(Z,{size:"large","aria-label":"loading",role:"status"}):e.jsx(T,{className:q.googleButton,onClick:n,children:"Embark with Google"})})})}const Ct=()=>{const{userData:s,setUserData:a}=N();if(!s)return e.jsx(l,{children:"Loading..."});const[r,n]=o.useState(0),[t,i]=o.useState(s),[c,h]=o.useState(1),[g,_]=o.useState(1.2),[v,j]=o.useState(0),[w,B]=o.useState(Math.floor(t.bodyStats.height/12)),[C,P]=o.useState(t.bodyStats.height%12);if(!s||!t)return e.jsx(l,{children:"Loading..."});o.useEffect(()=>{const d=w*12+C;console.log("total inches : ",d),i(p=>({...p,bodyStats:{...p.bodyStats,height:d}}))},[w,C]);const I=d=>{const{weight:p,height:k,age:F,sex:H}=d;return H==="male"?10*(p/2.205)+6.25*(k*2.54)-5*F+5:10*(p/2.205)+6.25*(k*2.54)-5*F-161},R=d=>{const p=g+v;return d*p},S=async d=>{d.preventDefault();const p=I(t.bodyStats),k=R(p),F=t.goal.goalType==="weight_loss"?k-c*3500/7:t.goal.goalType==="muscle_gain"?k+300:k,H=Math.round(F/100),ee={...t,bodyStats:{...t.bodyStats,bmr:p,tdee:k},goal:{...t.goal,dailyCalorieGoal:F,dailyCurrencyTotal:H,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",ee);try{const{data:U}=await W.post("/users/update",{...ee});a(U)}catch(U){console.error("Error updating user data:",U)}},m=(d,p,k)=>{const{name:F,value:H}=d.target;i({...t,[p]:{...t[p],[k||F]:H}})},A=(d,p,k)=>{i({...t,[d]:{...t[d],[p]:k}})},L=()=>{if(r===0){const{weight:d,height:p,age:k,sex:F}=t.bodyStats;return d>0&&p>0&&k>0&&["male","female"].includes(F)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(t.goal.goalType);if(r===2){const{name:d,currentPet:p}=t.pet;return d.trim()!==""&&["puppy","kitten","bird"].includes(p)}return!0},D=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(u,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(x,{grow:1,children:e.jsxs(b,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(x,{children:e.jsx(l,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(x,{children:e.jsx(Ne,{children:D.map((d,p)=>e.jsx(He,{label:d,stage:r===p?"active":p<r?"completed":"pending"},p))})}),e.jsxs("form",{onSubmit:S,children:[r===0&&e.jsxs(b,{align:"stretch",gap:2,children:[e.jsx(l,{styleAs:"h2",children:"Body Stats"}),e.jsxs(M,{children:[e.jsx(z,{children:"Weight (lbs)"}),e.jsx(V,{value:t.bodyStats.weight,onChange:d=>m(d,"bodyStats","weight")})]}),e.jsxs(M,{children:[e.jsx(z,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(se,{value:w.toString()+" ft",onSelectionChange:(d,p)=>B(Number(p)),children:[2,3,4,5,6,7,8,9].map(d=>e.jsxs(re,{value:d.toString(),children:[d," ft"]},d))}),e.jsx(se,{value:C.toString()+" in",onSelectionChange:(d,p)=>P(Number(p)),children:Array.from({length:12},(d,p)=>e.jsxs(re,{value:p.toString(),children:[p," in"]},p))})]})]}),e.jsxs(M,{children:[e.jsx(z,{children:"Sex"}),e.jsxs(u,{direction:"row",gap:2,children:[e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(u,{direction:"column",align:"center",gap:1,children:[e.jsx(y,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(l,{children:"Male"})]})})}),e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:t.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(u,{direction:"column",align:"center",gap:1,children:[e.jsx(y,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(l,{children:"Female"})]})})})]})]}),e.jsxs(M,{children:[e.jsx(z,{children:"Age (years)"}),e.jsx(V,{value:t.bodyStats.age,onChange:d=>m(d,"bodyStats","age")})]})]}),r===1&&e.jsxs(b,{gap:2,children:[e.jsx(l,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(u,{direction:"row",gap:2,children:[e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(u,{direction:"column",align:"center",gap:1,children:e.jsxs(x,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(y,{symbol:"ðŸ”¥",size:24}),e.jsx(l,{children:"Weight Loss"})]})})})}),e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(u,{direction:"column",align:"center",gap:1,children:e.jsxs(x,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(y,{symbol:t.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(l,{children:"Muscle Gain"})]})})})}),e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(u,{direction:"column",align:"center",gap:1,children:e.jsxs(x,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(y,{symbol:"ðŸ› ï¸",size:24}),e.jsx(l,{children:"Maintenance"})]})})})})]}),t.goal.goalType==="weight_loss"&&e.jsxs(M,{children:[e.jsx(l,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Ee,{max:2,min:.5,step:.25,value:c,onChange:(d,p)=>h(p),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(b,{gap:1,children:[e.jsx(l,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(l,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(u,{direction:"column",gap:1,children:[e.jsx(f,{onClick:()=>_(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ’»",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(f,{onClick:()=>_(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(f,{onClick:()=>_(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(f,{onClick:()=>_(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(b,{gap:1,children:[e.jsx(l,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(l,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(u,{direction:"column",gap:1,children:[e.jsx(f,{onClick:()=>j(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Sedentary"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(f,{onClick:()=>j(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Lightly Active"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(f,{onClick:()=>j(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Moderately Active"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(f,{onClick:()=>j(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Very Active"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(f,{onClick:()=>j(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(u,{direction:"row",align:"center",gap:2,children:[e.jsx(y,{symbol:"ðŸ’ª",size:30}),e.jsxs(b,{gap:0,children:[e.jsx(l,{styleAs:"h2",children:"Extremely Active"}),e.jsx(l,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(b,{gap:2,children:[e.jsx(l,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(M,{children:[e.jsx(z,{children:"Pet Name"}),e.jsx(V,{value:t.pet.name,onChange:d=>m(d,"pet","name")})]}),e.jsxs(M,{children:[e.jsx(z,{children:"Pet Type"}),e.jsxs(u,{direction:"row",gap:2,children:[e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(u,{direction:"column",align:"center",gap:1,children:e.jsxs(x,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(y,{symbol:"ðŸ¶",size:24}),e.jsx(l,{children:"Dog"})]})})})}),e.jsx(x,{grow:1,children:e.jsx(f,{onClick:()=>A("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:t.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(u,{direction:"column",align:"center",gap:1,children:e.jsxs(x,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(y,{symbol:"ðŸ±",size:24}),e.jsx(l,{children:"Cat"})]})})})})]})]})]}),e.jsx(x,{style:{paddingTop:"20px"},children:e.jsxs(u,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(T,{sentiment:"neutral",appearance:"solid",onClick:()=>n(r-1),children:"Previous"}),r<D.length-1&&e.jsx(T,{sentiment:"accented",appearance:"solid",disabled:!L(),onClick:()=>n(r+1),children:"Next"}),r===D.length-1&&e.jsx(T,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!L(),onClick:S,children:"Start Your Adventure!"})]})})]})]})})})};function At(){const[s,a]=o.useState(null),[r,n]=o.useState(!0),{userData:t,setUserData:i}=N();return o.useEffect(()=>{const c=De.throttle(()=>{console.log("Fetching user object..."),W.get(`/users/${t==null?void 0:t.uid}`).then(g=>{i(g.data),console.log("User data synced:",g.data)}).catch(g=>{console.error("Failed to fetch user:",g)})},1e4),h=()=>{console.log("User came back!"),c()};return t&&window.addEventListener("focus",h),()=>{t&&(window.removeEventListener("focus",h),c.cancel())}},[]),o.useEffect(()=>{const c=Ue(E,h=>{console.log("Auth state changed:",h),console.log("User Data in App useEffect:",t),a(h),n(!1);const g=localStorage.getItem("userData");g&&i(JSON.parse(g))});return()=>c()},[]),console.log("App render - Loading:",r,"User:",s,"UserData:",t),r?e.jsx("div",{children:"Loading in app.tsx..."}):!s||!t?e.jsx(Y,{mode:"dark",children:e.jsx(wt,{})}):t.bodyStats.weight===0?e.jsx(Y,{mode:"dark",children:e.jsx(Ct,{})}):e.jsx(Y,{mode:"dark",children:e.jsxs("div",{style:{maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:e.jsx(Oe,{children:ie.map(c=>e.jsx($e,{path:c.path,element:c.element},c.name))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(jt,{})})]})})}Ge.createRoot(document.getElementById("root")).render(e.jsx(Ve.StrictMode,{children:e.jsx(Ye,{children:e.jsx(et,{children:e.jsx(At,{})})})}));
