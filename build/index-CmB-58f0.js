import{i as mt,g as _t,a as xt,s as gt,G as ft,b as yt,c as jt,d as vt,r as o,j as e,C as Ee,T as S,B as oe,P as Ge,S as st,e as qe,f as Ve,I as _e,h as K,D as ge,O as fe,U as Ke,k as St,A as bt,l as Ct,R as at,m as nt,n as wt,o as kt,F as Nt,p as ye,H as X,q as It,L as Tt,t as Bt,X as Lt,u as Xe,Y as Ft,v as At,w as Pt,x as xe,y as Et,Z as Wt,z as Rt,E as Mt,J as $t,N as zt,K as Ht,M as Ot,Q as Dt,V as Ut,W as Gt,_ as qt,$ as Ye,a0 as Qe,a1 as Vt,a2 as Je,a3 as te,a4 as We,a5 as Re,a6 as Ze,a7 as ce,a8 as Kt,a9 as Xt,aa as Yt,ab as Qt,ac as Jt,ad as Zt,ae as et,af as es,ag as W,ah as D,ai as ts,aj as ss,ak as Se,al as be,am as Ce,an as as,ao as Me,ap as $e,aq as ze,ar as He,as as ns,at as rs,au as os,av as is,aw as we,ax as ls,ay as cs,az as ds,aA as us,aB as ps,aC as hs,aD as ms,aE as rt,aF as le,aG as _s,aH as xs,aI as gs,aJ as fs,aK as ys,aL as js,aM as vs,aN as Ss,aO as bs,aP as se,aQ as ne,aR as V,aS as Cs,aT as ws,aU as ks,aV as pe,aW as Ns,aX as Is,aY as Ts,aZ as Bs,a_ as Ls}from"./vendor-Bz_Zh7ab.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const Fs={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},ot=mt(Fs);_t(ot);const je=xt(ot);gt(je,yt).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const As=new ft;function Ps(){jt(je).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const z=vt.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),it=o.createContext(void 0),Es=({children:t})=>{const[s,n]=o.useState(()=>{const a=localStorage.getItem("userData");return a?JSON.parse(a):null}),r=a=>{n(a),a?localStorage.setItem("userData",JSON.stringify(a)):localStorage.removeItem("userData")};return e.jsx(it.Provider,{value:{userData:s,setUserData:r},children:t})},U=()=>{const t=o.useContext(it);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:s,setUserData:n}=t,r=o.useMemo(()=>{if(s)return Math.floor(s.goal.dailyCalorieGoal/100)},[s]);return{userData:s,setUserData:n,dailyCurrency:r}},Ws=()=>{const{userData:t,setUserData:s}=U(),n=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[r,a]=o.useState(""),[i,h]=o.useState(null),[l,u]=o.useState(!1),[p,_]=o.useState(null),[j,I]=o.useState(null),[y,A]=o.useState(!1),E=async()=>{var B,k;if(r.trim()){u(!0),_(null),h(null);try{const{data:v}=await z.post("/chatnutrition",{message:r}),b=new Date().toISOString(),c=Intl.DateTimeFormat().resolvedOptions().timeZone,d={...v,description:r,userId:t==null?void 0:t.uid,fullTimeStamp:b,userTimeZone:c};console.log(d),I(d),A(!0)}catch(v){const b=v,c=(B=b.response)==null?void 0:B.data;((k=b.response)==null?void 0:k.status)===400?_((c==null?void 0:c.suggestion)||"Please describe a specific food item or meal"):_("Failed to get nutrition info. Try again.")}finally{u(!1)}}},g=async()=>{if(j){u(!0),_(null);try{const B=await z.post("/meal/addMeal",j),{mealAffects:k,updatedUser:v}=B.data;s(v);const b=[];k.currency&&b.push(`ðŸ¦´ This meal cost ${k.currency} ${n}!`),k.armorIncrease&&b.push(`ðŸ›¡ï¸ +${k.armorIncrease.toFixed(1)} Armor from protein`),k.defenseIncrease&&b.push(`ðŸ§± +${k.defenseIncrease.toFixed(1)} Defense from fiber`),k.speedIncrease&&b.push(`ðŸ’¨ +${k.speedIncrease.toFixed(1)} Speed from hydration`),k.intelligenceIncrease&&b.push(`ðŸ§  +${k.intelligenceIncrease} Intelligence from fruits & vegetables`),b.length===0&&b.push("Seems like this meal didnt contain any sustenance!"),h(b.join(`
`))}catch{_("Failed to confirm meal. Try again.")}finally{u(!1),I(null),A(!1),a("")}}},x=()=>{I(null),A(!1),h(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:r,onChange:B=>a(B.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),y?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[n==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(j.calories/100)," ",n]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:g,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:l?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:l?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:x,disabled:l,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:l?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:E,disabled:l||!r.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:l||!r.trim()?"#332200":"#1a1100",color:l||!r.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:l||!r.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:l||!r.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:l?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),p&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",p]})}),i&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:i})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},$=({symbol:t,label:s="",className:n="",style:r={},size:a=24})=>e.jsx("span",{role:"img","aria-label":s||void 0,"aria-hidden":s?"false":"true",className:n,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof a=="number"?`${a}px`:a,lineHeight:1,...r},children:t}),Rs={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},Ms=({petType:t,selectedRpe:s,onChange:n})=>{const r=Rs[t],a=i=>{n(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:r.map(i=>e.jsxs(Ee,{onClick:()=>a(i.rpe),style:{cursor:"pointer",border:s===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:s===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx($,{size:32,symbol:i.emoji}),e.jsx(S,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(S,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},$s=({open:t,onClose:s})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx($,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:s,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,lt=o.createContext(void 0),Oe=()=>{const t=o.useContext(lt);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let zs=0;const Hs=({children:t})=>{const[s,n]=o.useState([]),[r,a]=o.useState(null);o.useEffect(()=>{!r&&s.length>0&&(a(s[0]),n(l=>l.slice(1)))},[s,r]),o.useEffect(()=>{if(!r)return;const l=r.duration??3e3,u=setTimeout(()=>{a(null)},l);return()=>clearTimeout(u)},[r]);const i=o.useCallback(l=>{const u=++zs;n(p=>[...p,{id:u,...l}])},[]),h=o.useCallback(()=>{a(null)},[]);return e.jsxs(lt.Provider,{value:{addToast:i,removeToast:h},children:[t,r&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:r.content},r.id)})]})},Os="_levelUpContainer_vq3kq_1",Ds="_levelUpPulse_vq3kq_1",Us="_shimmer_vq3kq_1",Gs="_emoji_vq3kq_32",qs="_bounce_vq3kq_1",Vs="_levelText_vq3kq_41",Ks="_levelNumber_vq3kq_54",Xs="_celebration_vq3kq_67",Ys="_fadeInUp_vq3kq_1",ie={levelUpContainer:Os,levelUpPulse:Ds,shimmer:Us,emoji:Gs,bounce:qs,levelText:Vs,levelNumber:Ks,celebration:Xs,fadeInUp:Ys},ct=o.createContext(void 0),Qs=({children:t})=>{const[s,n]=o.useState(null),[r,a]=o.useState(void 0),i=({content:l,style:u})=>{n(l),a(u)},h=()=>{n(null),a(void 0)};return e.jsxs(ct.Provider,{value:{showSplash:i,hideSplash:h},children:[t,s&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...r},onClick:h,children:[s,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(oe,{onClick:h,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Js=()=>{const t=o.useContext(ct);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},Zs={1:.5,2:1,3:1.5,4:2.2},ea=({setDrawerView:t})=>{const{userData:s,setUserData:n}=U(),{addToast:r}=Oe(),{showSplash:a}=Js(),[i,h]=o.useState(!1),[l,u]=o.useState("WEIGHTS"),[p,_]=o.useState("DURATION"),[j,I]=o.useState(""),[y,A]=o.useState(""),[E,g]=o.useState(""),[x,B]=o.useState(null),[k,v]=o.useState(""),b=["WEIGHTS","CARDIO","MOBILITY","SPORT"],c=["DURATION","DISTANCE"],[d,m]=o.useState(!1),P=Array.from({length:12},(w,Z)=>Z),L=Array.from({length:60},(w,Z)=>Z),[N,F]=o.useState({strength:0,agility:0,pet:0});console.log(y),console.log(x);function H(){const w=(Number(y)||0)*60+(Number(E)||0);console.log("totalDuration ",w);const Z=Zs[x??2];let J=0;w>0?J=Math.round(w*10*Z):Number(j)>0&&(J=Math.round(Number(j)*125*Z)),console.log("totalXp ",J);let de=0,ue=0;switch(l){case"WEIGHTS":de=Math.round(J/100);break;case"CARDIO":ue=Math.round(J/100);break;case"MOBILITY":case"SPORT":const pt=J/2/100,ht=J/2/100;de=Math.round(pt),ue=Math.round(ht);break}return console.log("final ",{strength:de,agility:ue,pet:J}),{strength:de,agility:ue,pet:J}}const q=b.includes(l)&&c.includes(p)&&(j!==""||y!==""||E!=="")&&x!==null;function Y(){I(""),A(""),g(""),B(null),v(""),u("WEIGHTS"),_("DURATION")}const Q=async()=>{const w=H();if(F(w),!s||!s.uid){alert("User not loaded properly.");return}const Z=p==="DURATION"?(Number(y)||0)*60+(Number(E)||0):0;try{const{data:J}=await z.post("/workout/logWorkout",{userId:s.uid,logType:"manual",workoutType:l,cardioMode:p,duration:Z,distance:p==="DISTANCE"&&Number(j)||0,rpe:x,notes:k,workoutXp:w});n(J.updatedUser),Y(),r({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx($,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.pet," PET XP"]}),w.strength>0&&w.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]}):w.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{J.levelUp&&a({content:e.jsxs("div",{className:ie.levelUpContainer,children:[e.jsx("div",{className:ie.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:ie.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:ie.levelNumber,children:["LEVEL ",J.updatedUser.pet.level]}),e.jsx("div",{className:ie.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(J){console.error(J),alert("There was an error logging your workout.")}};return i?e.jsx(Ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(st,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx($s,{open:d,onClose:()=>m(!1)}),e.jsx(S,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(qe,{value:l??"",onChange:w=>u(w.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:b.map(w=>e.jsx(Ve,{value:w,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:w},w))}),l==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(qe,{value:p??"",onChange:w=>{_(w.currentTarget.value),I(""),A(""),g("")},style:{marginBottom:16},children:c.map(w=>e.jsx(Ve,{value:w,appearance:w==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:w},w))})]}),p==="DISTANCE"&&l==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(_e,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:j,onChange:w=>I(w.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(S,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(K,{direction:"row",gap:2,children:[e.jsx(ge,{value:y+" hr(s)",onSelectionChange:(w,Z)=>A(Z[0]??""),placeholder:"Hours",children:P.map(w=>e.jsxs(fe,{value:String(w),children:[w," hr"]},w))}),e.jsx(ge,{value:E+" min(s)",onSelectionChange:(w,Z)=>g(Z[0]??""),placeholder:"Minutes",children:L.map(w=>e.jsxs(fe,{value:String(w),children:[w<10?`0${w}`:w," min"]},w))})]})]}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(Ms,{selectedRpe:x,onChange:w=>B(w),petType:(s==null?void 0:s.pet.currentPet)??"puppy"})}),e.jsx(S,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:k,onChange:w=>v(w.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(oe,{onClick:Q,disabled:!q,style:{opacity:q?1:.4,cursor:q?"pointer":"not-allowed",color:q?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:q?"#ff9900":void 0},children:"LOG WORKOUT"})]})},ta="_backdrop_1mk9a_9",sa="_drawer_1mk9a_17",aa="_drawer__header_1mk9a_34",na="_drawer__headerContent_1mk9a_41",ra="_drawer__headerIcon_1mk9a_46",oa="_drawer__title_1mk9a_49",ia="_drawer__closeButton_1mk9a_55",la="_drawer__content_1mk9a_67",ca="_mealCard_1mk9a_73",da="_mealCard__header_1mk9a_85",ua="_mealCard__info_1mk9a_91",pa="_mealCard__title_1mk9a_94",ha="_mealCard__timestamp_1mk9a_100",ma="_mealCard__calories_1mk9a_105",_a="_mealCard__caloriesValue_1mk9a_108",xa="_mealCard__caloriesLabel_1mk9a_115",ga="_mealCard__macros_1mk9a_119",fa="_mealCard__additionalStats_1mk9a_125",ya="_mealCard__statBoosts_1mk9a_131",ja="_mealCard__statBoostsTitle_1mk9a_135",va="_mealCard__statBoostsGrid_1mk9a_141",Sa="_mealCard__currency_1mk9a_146",ba="_mealCard__currencyText_1mk9a_150",Ca="_macroItem_1mk9a_156",wa="_macroItem__value_1mk9a_162",ka="_macroItem__label_1mk9a_168",Na="_additionalStat_1mk9a_182",Ia="_additionalStat__icon_1mk9a_190",Ta="_additionalStat__content_1mk9a_193",Ba="_additionalStat__value_1mk9a_196",La="_additionalStat__label_1mk9a_203",Fa="_statBoost_1mk9a_212",Aa="_statBoost__icon_1mk9a_221",Pa="_statBoost__label_1mk9a_236",Ea="_statBoost__value_1mk9a_239",Wa="_loadingState_1mk9a_244",Ra="_loadingState__content_1mk9a_248",Ma="_pulse_1mk9a_1",$a="_loadingState__text_1mk9a_251",za="_loadingState__subtext_1mk9a_255",Ha="_loadingMore_1mk9a_260",Oa="_loadingMore__content_1mk9a_264",Da="_loadingMore__text_1mk9a_267",Ua="_loadingMore__subtext_1mk9a_271",Ga="_emptyState_1mk9a_276",qa="_emptyState__icon_1mk9a_280",Va="_emptyState__text_1mk9a_284",Ka="_emptyState__subtext_1mk9a_288",Xa="_endOfList_1mk9a_293",Ya="_endOfList__text_1mk9a_298",Qa="_endOfList__subtext_1mk9a_303",Ja="_mealsList_1mk9a_308",Za="_demoApp_1mk9a_314",en="_demoApp__container_1mk9a_319",tn="_demoApp__title_1mk9a_323",sn="_demoApp__button_1mk9a_330",f={backdrop:ta,drawer:sa,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:aa,drawer__headerContent:na,drawer__headerIcon:ra,drawer__title:oa,drawer__closeButton:ia,drawer__content:la,mealCard:ca,mealCard__header:da,mealCard__info:ua,mealCard__title:pa,mealCard__timestamp:ha,mealCard__calories:ma,mealCard__caloriesValue:_a,mealCard__caloriesLabel:xa,mealCard__macros:ga,mealCard__additionalStats:fa,mealCard__statBoosts:ya,mealCard__statBoostsTitle:ja,mealCard__statBoostsGrid:va,mealCard__currency:Sa,mealCard__currencyText:ba,macroItem:Ca,macroItem__value:wa,macroItem__label:ka,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:Na,additionalStat__icon:Ia,additionalStat__content:Ta,additionalStat__value:Ba,additionalStat__label:La,statBoost:Fa,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:Aa,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:Pa,statBoost__value:Ea,loadingState:Wa,loadingState__content:Ra,pulse:Ma,loadingState__text:$a,loadingState__subtext:za,loadingMore:Ha,loadingMore__content:Oa,loadingMore__text:Da,loadingMore__subtext:Ua,emptyState:Ga,emptyState__icon:qa,emptyState__text:Va,emptyState__subtext:Ka,endOfList:Xa,endOfList__text:Ya,endOfList__subtext:Qa,mealsList:Ja,demoApp:Za,demoApp__container:en,demoApp__title:tn,demoApp__button:sn},an=()=>{const{userData:t}=U(),[s,n]=o.useState([]),[r,a]=o.useState(!1),[i,h]=o.useState(!1),[l,u]=o.useState(!0),[p,_]=o.useState(0),j=o.useRef(null),I=10,y=async(x=p,B=!1)=>{B?a(!0):h(!0);try{const v=(await z.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${I}&offset=${x}`)).data,b=v.meals||[];n(B?b:m=>[...m,...b]);const c=v.total||0,d=x+b.length;u(d<c),_(x+b.length)}catch(k){console.error("Error fetching meals:",k)}a(!1),h(!1)};o.useEffect(()=>{y(0,!0)},[]),o.useEffect(()=>{const x=()=>{const k=document.querySelector(".saltDrawer");if(!k)return;const{scrollTop:v,scrollHeight:b,clientHeight:c}=k;b-v<=c+100&&l&&!i&&y(p,!1)},B=document.querySelector(".saltDrawer");return B&&B.addEventListener("scroll",x),()=>{B&&B.removeEventListener("scroll",x)}},[p,l,i]);const A=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=({icon:x,label:B,value:k,color:v})=>e.jsxs("div",{className:`${f.statBoost} ${f[`statBoost--${v}`]}`,children:[e.jsx(x,{size:12,className:f.statBoost__icon}),e.jsx("span",{className:f.statBoost__label,children:B}),e.jsxs("span",{className:f.statBoost__value,children:["+",k]})]}),g=({meal:x})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:f.mealCard,children:[e.jsxs("div",{className:f.mealCard__header,children:[e.jsxs("div",{className:f.mealCard__info,children:[e.jsx("h3",{className:f.mealCard__title,children:x.description}),e.jsx("p",{className:f.mealCard__timestamp,children:A(x.timestamp)})]}),e.jsxs("div",{className:f.mealCard__calories,children:[e.jsx("div",{className:f.mealCard__caloriesValue,children:x.calories}),e.jsx("div",{className:f.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:f.mealCard__macros,children:[e.jsxs("div",{className:`${f.macroItem} ${f["macroItem--protein"]}`,children:[e.jsxs("div",{className:f.macroItem__value,children:[x.protein,"g"]}),e.jsx("div",{className:f.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${f.macroItem} ${f["macroItem--carbs"]}`,children:[e.jsxs("div",{className:f.macroItem__value,children:[x.carbs,"g"]}),e.jsx("div",{className:f.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${f.macroItem} ${f["macroItem--fat"]}`,children:[e.jsxs("div",{className:f.macroItem__value,children:[x.fat,"g"]}),e.jsx("div",{className:f.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:f.mealCard__additionalStats,children:[e.jsxs("div",{className:f.additionalStat,children:[e.jsx(St,{size:16,className:f.additionalStat__icon}),e.jsxs("div",{className:f.additionalStat__content,children:[e.jsxs("div",{className:f.additionalStat__value,children:[x.fluid_intake_ml,"ml"]}),e.jsx("div",{className:f.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:f.additionalStat,children:[e.jsx(bt,{size:16,className:f.additionalStat__icon}),e.jsxs("div",{className:f.additionalStat__content,children:[e.jsx("div",{className:f.additionalStat__value,children:x.servings_of_fruits_vegetables}),e.jsx("div",{className:f.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:f.mealCard__statBoosts,children:[e.jsx("div",{className:f.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:f.mealCard__statBoostsGrid,children:[x.mealAffects.armorIncrease>0&&e.jsx(E,{icon:Ct,label:"ARM",value:x.mealAffects.armorIncrease,color:"blue"}),x.mealAffects.speedIncrease>0&&e.jsx(E,{icon:at,label:"SPD",value:x.mealAffects.speedIncrease,color:"yellow"}),x.mealAffects.intelligenceIncrease>0&&e.jsx(E,{icon:nt,label:"INT",value:x.mealAffects.intelligenceIncrease,color:"pink"}),x.mealAffects.defenseIncrease>0&&e.jsx(E,{icon:wt,label:"DEF",value:x.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:f.mealCard__currency,children:e.jsxs("span",{className:f.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(kt,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(Nt,{size:15,style:{verticalAlign:"middle"}})})," "+x.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:f.drawer__header,children:e.jsxs("div",{className:f.drawer__headerContent,children:[e.jsx(Ke,{className:f.drawer__headerIcon,size:32}),e.jsx("h2",{className:f.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:j,children:r?e.jsx("div",{className:f.loadingState,children:e.jsxs("div",{className:f.loadingState__content,children:[e.jsx("div",{className:f.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:f.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):s.length===0?e.jsxs("div",{className:f.emptyState,children:[e.jsx(Ke,{className:f.emptyState__icon,size:48}),e.jsx("div",{className:f.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:f.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:f.mealsList,children:[s.map((x,B)=>e.jsx(g,{meal:x},`${x.id}-${B}`)),i&&e.jsx("div",{className:f.loadingMore,children:e.jsxs("div",{className:f.loadingMore__content,children:[e.jsx("div",{className:f.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:f.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!l&&s.length>0&&e.jsxs("div",{className:f.endOfList,children:[e.jsx("div",{className:f.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:f.endOfList__subtext,children:["Total meals loaded: ",s.length]})]})]})})]})},nn="_container_1chaz_4",rn="_heading_1chaz_10",on="_rangeButtons_1chaz_16",ln="_button_1chaz_23",cn="_activeButton_1chaz_37",dn="_checkmarkPath_1chaz_53",re={container:nn,heading:rn,rangeButtons:on,button:ln,activeButton:cn,checkmarkPath:dn,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},un=({onWeightChange:t})=>{var l,u;const{userData:s}=U(),n=()=>{var _,j;const p=(_=s==null?void 0:s.bodyStats)==null?void 0:_.weightLogs;if(Array.isArray(p)&&p.length>0){const I=[...p].sort((y,A)=>new Date(y.date).getTime()-new Date(A.date).getTime());return I[I.length-1].weight}return((j=s==null?void 0:s.bodyStats)==null?void 0:j.weight)??150},[r,a]=o.useState(n());o.useEffect(()=>{a(n())},[(l=s==null?void 0:s.bodyStats)==null?void 0:l.weightLogs,(u=s==null?void 0:s.bodyStats)==null?void 0:u.weight]);const i=p=>{const _=parseFloat((r+p).toFixed(1));_>=0&&a(_)},h=()=>{t(r)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(ye,{id:"current-weight",type:"number",step:.1,value:r,onChange:p=>{const _=parseFloat(p.target.value);!isNaN(_)&&_>=0?a(_):p.target.value===""&&a(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(X,{onClick:()=>i(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(X,{onClick:()=>i(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(X,{onClick:h,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},pn={week:7,month:30,threeMonths:90,all:1/0},hn=t=>t<=7?0:t<=30?4:t<=90?15:30,mn=()=>{const[t,s]=o.useState(!1),{userData:n}=U(),[r,a]=o.useState("week"),[i,h]=o.useState([]),[l,u]=o.useState(!0);o.useEffect(()=>{(t||l)&&z.get(`/weightLogs/${n==null?void 0:n.uid}`).then(y=>{h(y.data.weightLogs)}).catch(y=>{console.log(y)}),u(!1)},[t]);const p=[...i].sort((y,A)=>new Date(y.date).getTime()-new Date(A.date).getTime()).map(y=>({date:typeof y.date=="string"?y.date.slice(0,10):y.date instanceof Date?y.date.toISOString().slice(0,10):"",weight:y.weight})),_=r==="all"?p:p.slice(-pn[r]),j=hn(_.length),I=async y=>{if(!n)return;const A={date:new Date().toISOString(),weight:y,userId:n.uid};try{const{data:E}=await z.post("weightLogs/addWeightLog",A);s(!0),setTimeout(()=>s(!1),1500)}catch(E){console.error(E)}};return e.jsxs("div",{className:re.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:re.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:re.heading,children:"Log Your Weight"}),e.jsx("div",{className:re.rangeButtons,children:["week","month","threeMonths","all"].map(y=>e.jsx(X,{className:r===y?re.activeButton:re.button,onClick:()=>a(y),children:y==="week"?"1W":y==="month"?"1M":y==="threeMonths"?"3M":"ALL"},y))}),e.jsx(It,{width:"100%",height:300,children:e.jsxs(Tt,{data:_,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(Bt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(Lt,{dataKey:"date",tickFormatter:y=>{const A=new Date(y);return isNaN(A.getTime())?"":Xe(A,"MM/dd")},stroke:"#ff9900",interval:j,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(Ft,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(At,{labelFormatter:y=>Xe(new Date(y),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(Pt,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(un,{onWeightChange:I})})]})},_n="_drawer__header_eofhi_2",xn="_drawer__headerContent_eofhi_24",gn="_drawer__headerIcon_eofhi_32",fn="_drawer__title_eofhi_37",yn="_drawer__content_eofhi_47",jn="_loadingState_eofhi_68",vn="_emptyState_eofhi_69",Sn="_loadingState__content_eofhi_82",bn="_emptyState__content_eofhi_83",Cn="_loadingState__spinner_eofhi_90",wn="_spin_eofhi_1",kn="_loadingState__text_eofhi_107",Nn="_emptyState__text_eofhi_108",In="_loadingState__subtext_eofhi_117",Tn="_emptyState__subtext_eofhi_118",Bn="_emptyState__icon_eofhi_127",Ln="_workoutsList_eofhi_136",Fn="_workoutCard_eofhi_143",An="_workoutCard__header_eofhi_162",Pn="_workoutCard__info_eofhi_171",En="_workoutCard__title_eofhi_175",Wn="_workoutCard__timestamp_eofhi_182",Rn="_workoutCard__timestampIcon_eofhi_194",Mn="_workoutCard__xp_eofhi_198",$n="_workoutCard__xpValue_eofhi_210",zn="_workoutCard__xpLabel_eofhi_217",Hn="_workoutCard__sectionTitle_eofhi_222",On="_workoutCard__exercises_eofhi_239",Dn="_workoutCard__exercisesList_eofhi_243",Un="_exerciseItem_eofhi_249",Gn="_exerciseItem__name_eofhi_258",qn="_exerciseItem__sets_eofhi_265",Vn="_setCard_eofhi_272",Kn="_setCard__data_eofhi_304",Xn="_exerciseItem__set_eofhi_265",Yn="_exerciseItem__notes_eofhi_320",Qn="_workoutCard__statBoosts_eofhi_329",Jn="_workoutCard__statBoostsGrid_eofhi_338",Zn="_statBoost_eofhi_344",er="_statBoost__icon_eofhi_376",tr="_statBoost__label_eofhi_380",sr="_statBoost__value_eofhi_384",ar="_workoutCard__notes_eofhi_389",nr="_workoutCard__notesText_eofhi_396",rr="_loadingMore_eofhi_404",or="_endOfList_eofhi_405",ir="_loadingMore__content_eofhi_420",lr="_loadingMore__spinner_eofhi_426",cr="_loadingMore__text_eofhi_434",dr="_loadingMore__subtext_eofhi_442",ur="_endOfList__content_eofhi_456",pr="_endOfList__text_eofhi_462",hr="_endOfList__subtext_eofhi_470",C={drawer__header:_n,drawer__headerContent:xn,drawer__headerIcon:gn,drawer__title:fn,drawer__content:yn,loadingState:jn,emptyState:vn,loadingState__content:Sn,emptyState__content:bn,loadingState__spinner:Cn,spin:wn,loadingState__text:kn,emptyState__text:Nn,loadingState__subtext:In,emptyState__subtext:Tn,emptyState__icon:Bn,workoutsList:Ln,workoutCard:Fn,workoutCard__header:An,workoutCard__info:Pn,workoutCard__title:En,workoutCard__timestamp:Wn,workoutCard__timestampIcon:Rn,workoutCard__xp:Mn,workoutCard__xpValue:$n,workoutCard__xpLabel:zn,workoutCard__sectionTitle:Hn,workoutCard__exercises:On,workoutCard__exercisesList:Dn,exerciseItem:Un,exerciseItem__name:Gn,exerciseItem__sets:qn,setCard:Vn,setCard__data:Kn,exerciseItem__set:Xn,exerciseItem__notes:Yn,workoutCard__statBoosts:Qn,workoutCard__statBoostsGrid:Jn,statBoost:Zn,"statBoost--red":"_statBoost--red_eofhi_358","statBoost--yellow":"_statBoost--yellow_eofhi_364","statBoost--pink":"_statBoost--pink_eofhi_370",statBoost__icon:er,statBoost__label:tr,statBoost__value:sr,workoutCard__notes:ar,workoutCard__notesText:nr,loadingMore:rr,endOfList:or,loadingMore__content:ir,loadingMore__spinner:lr,loadingMore__text:cr,loadingMore__subtext:dr,endOfList__content:ur,endOfList__text:pr,endOfList__subtext:hr},mr=()=>{const{userData:t}=U(),[s,n]=o.useState([]),[r,a]=o.useState(!1),[i,h]=o.useState(!1),[l,u]=o.useState(!0),[p,_]=o.useState(0),j=o.useRef(null),I=10,y=async(c=p,d=!1)=>{d?a(!0):h(!0);try{const P=(await z.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${I}&offset=${c}`)).data,L=P.workouts||[];n(d?L:H=>[...H,...L]);const N=P.total||0,F=c+L.length;u(F<N),_(c+L.length)}catch(m){console.error("Error fetching workouts:",m)}a(!1),h(!1)};o.useEffect(()=>{y(0,!0)},[]),o.useEffect(()=>{const c=()=>{const m=document.querySelector(".saltDrawer");if(!m)return;const{scrollTop:P,scrollHeight:L,clientHeight:N}=m;L-P<=N+100&&l&&!i&&y(p,!1)},d=document.querySelector(".saltDrawer");return d&&d.addEventListener("scroll",c),()=>{d&&d.removeEventListener("scroll",c)}},[p,l,i]);const A=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=c=>{const d=c*2.20462;return Math.round(d*2)/2},g=c=>{const d=E(c);return d%1===0?`${d}`:`${d.toFixed(1)}`},x=c=>{const d=Math.floor(c/60),m=c%60;return d>0?`${d}m ${m}s`:`${m}s`},B=c=>c>=1e3?`${(c/1e3).toFixed(2)}km`:`${c}m`,k=c=>{const d=[];if(c.weight_kg||c.weightKg){const m=c.weight_kg||c.weightKg;d.push(`${g(m)}lbs`)}return c.reps&&d.push(`Ã— ${c.reps}`),c.distance_meters&&!c.reps&&d.push(B(c.distance_meters)),c.duration_seconds&&!c.reps&&d.push(x(c.duration_seconds)),d.length===0?"â€”":d.join(" ")},v=({icon:c,label:d,value:m,color:P})=>e.jsxs("div",{className:`${C.statBoost} ${C[`statBoost--${P}`]}`,children:[e.jsx(c,{size:16,className:C.statBoost__icon}),e.jsx("span",{className:C.statBoost__label,children:d}),e.jsxs("span",{className:C.statBoost__value,children:["+",m]})]}),b=({workout:c})=>{var L,N;c.logType;const d=c.logType==="routine",m=c.logType==="hevy",P=m?c.petAffects.pet:c.workoutXp.pet;return e.jsxs("div",{className:C.workoutCard,children:[e.jsxs("div",{className:C.workoutCard__header,children:[e.jsxs("div",{className:C.workoutCard__info,children:[e.jsx("h3",{className:C.workoutCard__title,children:d?`${c.routineDay} ROUTINE`:m?`${((L=c.title)==null?void 0:L.toUpperCase())||"HEVY WORKOUT"}`:`${(N=c==null?void 0:c.workoutType)==null?void 0:N.toUpperCase()} SESSION`}),e.jsxs("p",{className:C.workoutCard__timestamp,children:[e.jsx(Et,{size:12,className:C.workoutCard__timestampIcon}),A(m?c.startTime:c.timestamp)]})]}),e.jsxs("div",{className:C.workoutCard__xp,children:[e.jsx("div",{className:C.workoutCard__xpValue,children:P}),e.jsx("div",{className:C.workoutCard__xpLabel,children:"XP"})]})]}),m&&e.jsxs("div",{className:C.workoutCard__exercises,children:[e.jsxs("div",{className:C.workoutCard__sectionTitle,children:[e.jsx(xe,{size:14}),"EXERCISES"]}),e.jsx("div",{className:C.workoutCard__exercisesList,children:c.exercises.map((F,H)=>{var q;return e.jsxs("div",{className:C.exerciseItem,children:[e.jsx("div",{className:C.exerciseItem__name,children:(q=F.title)==null?void 0:q.toUpperCase()}),e.jsx("div",{className:C.exerciseItem__sets,children:F.sets.map((Y,Q)=>e.jsx("div",{className:C.setCard,"data-set-number":Q+1,children:e.jsx("div",{className:C.setCard__data,children:k(Y)})},Q))}),F.notes&&e.jsxs("div",{className:C.exerciseItem__notes,children:['"',F.notes,'"']})]},H)})})]}),e.jsxs("div",{className:C.workoutCard__statBoosts,children:[e.jsxs("div",{className:C.workoutCard__sectionTitle,children:[e.jsx(Wt,{size:14}),"Skills GAINED"]}),e.jsxs("div",{className:C.workoutCard__statBoostsGrid,children:[(m?c.petAffects.strength:c.workoutXp.strength)>0&&e.jsx(v,{icon:Rt,label:"STR",value:m?c.petAffects.strength:c.workoutXp.strength,color:"red"}),(m?c.petAffects.agility:c.workoutXp.agility)>0&&e.jsx(v,{icon:at,label:"AGI",value:m?c.petAffects.agility:c.workoutXp.agility,color:"yellow"})]})]}),c.notes&&e.jsxs("div",{className:C.workoutCard__notes,children:[e.jsxs("div",{className:C.workoutCard__sectionTitle,children:[e.jsx(nt,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:C.workoutCard__notesText,children:['"',c.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:C.drawer__header,children:e.jsxs("div",{className:C.drawer__headerContent,children:[e.jsx(xe,{className:C.drawer__headerIcon,size:28}),e.jsx("h2",{className:C.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:C.drawer__content,ref:j,children:r?e.jsx("div",{className:C.loadingState,children:e.jsxs("div",{className:C.loadingState__content,children:[e.jsx("div",{className:C.loadingState__spinner}),e.jsx("div",{className:C.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:C.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):s.length===0?e.jsx("div",{className:C.emptyState,children:e.jsxs("div",{className:C.emptyState__content,children:[e.jsx(xe,{className:C.emptyState__icon,size:40}),e.jsx("div",{className:C.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:C.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:C.workoutsList,children:[s.map((c,d)=>e.jsx(b,{workout:c},`${c._id}-${d}`)),i&&e.jsx("div",{className:C.loadingMore,children:e.jsxs("div",{className:C.loadingMore__content,children:[e.jsx("div",{className:C.loadingMore__spinner}),e.jsx("div",{className:C.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:C.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!l&&s.length>0&&e.jsx("div",{className:C.endOfList,children:e.jsxs("div",{className:C.endOfList__content,children:[e.jsx("div",{className:C.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:C.endOfList__subtext,children:["TOTAL WORKOUTS: ",s.length]})]})})]})})]})},_r="_container_1y1su_2",xr="_heading_1y1su_9",gr="_optionButton_1y1su_15",fr="_integrationSection_1y1su_30",yr="_label_1y1su_51",jr="_input_1y1su_57",vr="_saveButton_1y1su_67",ae={container:_r,heading:xr,optionButton:gr,integrationSection:fr,label:yr,input:jr,saveButton:vr};function Sr(){const[t,s]=o.useState(!1),[n,r]=o.useState(""),{userData:a,setUserData:i}=U(),[h,l]=o.useState(!1),{addToast:u}=Oe();function p(){console.log("saving key"),z.post("/users/hevy/saveKey",{hevyKey:n,uid:a==null?void 0:a.uid}).then(_=>{console.log(_),i(_.data.updatedUser),u({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx($,{size:32,symbol:"ðŸ‹ðŸ½ðŸ”¥ðŸ’ªðŸ¼ðŸŽ§"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"Success!"}),e.jsx("div",{style:{marginBottom:4},children:"Integrated with Hevy!"})]})]}),duration:2e3})}).catch(_=>{console.error(_)})}return o.useEffect(()=>{l(!!(a!=null&&a.hevyKey))},[a]),e.jsxs("div",{className:ae.container,children:[e.jsx("h2",{className:ae.heading,children:"User Settings"}),e.jsx(X,{className:ae.optionButton,onClick:()=>s(_=>!_),children:"Hevy Integration"}),t&&e.jsxs("div",{className:ae.integrationSection,children:[e.jsx("h3",{children:"Connect to Hevy"}),h?e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"green"},children:"âœ… Already integrated with Hevy."}),e.jsx("p",{children:"Your workouts will automatically sync from Hevy."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"red"},children:"Prerequisite: Must be a Hevy Pro member!"}),e.jsx("p",{children:"Integrate your Hevy account to automatically sync workouts logged there into this app to help your pet evolve!"}),e.jsx("p",{children:"To get your API key, go to hevy.com, log in, click 'Settings' â†’ 'Developer', generate and copy your API key, then paste it below."}),e.jsx("label",{className:ae.label,htmlFor:"hevyKey",children:"Hevy API Key"}),e.jsx(ye,{id:"hevyKey",type:"text",className:ae.input,placeholder:"Enter your API key",value:n,onChange:_=>r(_.target.value)}),e.jsx(X,{className:ae.saveButton,onClick:p,children:"Integrate with Hevy!"})]})]})]})}o.forwardRef(function({onClick:s,to:n,...r},a){const i=Mt(n),h=$t(n);return e.jsx(zt,{...r,href:i,onClick:l=>{s==null||s(l),l.defaultPrevented||h(l)},ref:a})});const ke=[{id:"pet",icon:Dt,label:"Pet",path:"/"},{id:"skills",icon:Ut,label:"Skills",path:"/skills"},{id:"quests",icon:Gt,label:"Quests",path:"/quests"},{id:"campaign",icon:qt,label:"Campaign",path:"/BossArena"},{id:"routines",icon:xe,label:"Routines",path:"/routines"}],br=()=>{const[t,s]=o.useState("none"),{pathname:n}=Ht(),r=Ot(),a=ke.findIndex(h=>h.path===n),i=a>=0?a:0;return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(X,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Vt,{"aria-hidden":!0})})}),e.jsxs(Je,{children:[e.jsx(te,{onClick:()=>s("logWeight"),children:"Log Weight"}),e.jsx(te,{onClick:()=>s("logFood"),children:"Log Food"}),e.jsx(te,{onClick:()=>s("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(We,{selectedIndex:i,onChange:h=>r(ke[h].path),children:e.jsx(Re,{className:"tab-nav",children:ke.map(h=>{const l=h.icon;return e.jsx(Ze,{placement:"bottom",content:h.label,children:e.jsx(ce,{className:({selected:u})=>`tab-button tab-icon-button ${u?"tab-selected":""}`,children:e.jsx(l,{"aria-hidden":!0})})},h.id)})})}),e.jsx("div",{children:e.jsx(Ze,{placement:"top",content:"User Settings",children:e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(X,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Kt,{"aria-hidden":!0})})}),e.jsxs(Je,{children:[e.jsx(te,{onClick:()=>s("mealHist"),children:"View Meals"}),e.jsx(te,{onClick:()=>s("workoutHist"),children:"View Workouts"}),e.jsx(te,{onClick:()=>s("settings"),children:"Settings"}),e.jsx(te,{onClick:Ps,children:"Logout"})]})]})})}),e.jsxs(Xt,{open:t!=="none",onOpenChange:()=>s("none"),position:"bottom",children:[e.jsx(Yt,{onClick:()=>s("none")}),t==="logFood"&&e.jsx(Ws,{}),t==="logWorkout"&&e.jsx(ea,{setDrawerView:s}),t==="mealHist"&&e.jsx(an,{}),t==="workoutHist"&&e.jsx(mr,{}),t==="logWeight"&&e.jsx(mn,{}),t==="settings"&&e.jsx(Sr,{})]})]})},Cr="_homePage_10zjh_2",wr="_homePageTitle_10zjh_7",kr="_statusSection_10zjh_25",Nr="_evolveButton_10zjh_33",Ir="_energyPulse_10zjh_1",Tr="_rainbowBorder_10zjh_1",Br="_sparkle_10zjh_1",Lr="_buttonGlow_10zjh_1",Fr="_evolutionFlash_10zjh_1",Ar="_levelText_10zjh_136",Pr="_xpBarWrapper_10zjh_142",Er="_xpBarFill_10zjh_151",Wr="_pixelBorder_10zjh_157",Ne={homePage:Cr,homePageTitle:wr,"card-links":"_card-links_10zjh_11","card-image":"_card-image_10zjh_20",statusSection:kr,evolveButton:Nr,energyPulse:Ir,rainbowBorder:Tr,sparkle:Br,buttonGlow:Lr,evolutionFlash:Fr,levelText:Ar,xpBarWrapper:Pr,xpBarFill:Er,pixelBorder:Wr},Rr="_xpBarWrapper_sqxxw_1",Mr="_xpBarFill_sqxxw_12",$r="_pixelGlow_sqxxw_1",zr="_xpText_sqxxw_33",Hr="_levelText_sqxxw_59",he={xpBarWrapper:Rr,xpBarFill:Mr,pixelGlow:$r,xpText:zr,levelText:Hr};function Or(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function Ie(t,s){const n=Or(s);return{progress:Math.min(Math.max(t/n*100,0),100),xpNeeded:n}}const Dr=({currentXp:t,level:s})=>{const[n,r]=o.useState(()=>Ie(t,s).progress),a=o.useRef(t),{xpNeeded:i}=Ie(t,s);return o.useEffect(()=>{const h=Ie(t,s).progress,l=a.current;t>l,r(h),a.current=t},[t,s]),e.jsxs(e.Fragment,{children:[e.jsxs(S,{className:he.levelText,styleAs:"display4",children:["Level ",s]}),e.jsxs("div",{className:he.xpBarWrapper,children:[e.jsx("div",{className:he.xpBarFill,style:{width:`${n}%`}}),e.jsxs(S,{className:he.xpText,styleAs:"label",children:[" ",t," / ",i]})]})]})},Ur=({consumed:t=!1,size:s=48,className:n})=>{const[r,a]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>a(!0),20);return()=>clearTimeout(i)}else a(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:r?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:r?0:1}})},Gr=({consumed:t=!1,size:s=48,className:n})=>{const[r,a]=o.useState(!1);return o.useEffect(()=>{if(t){const i=setTimeout(()=>a(!0),20);return()=>clearTimeout(i)}else a(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:r?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:r?0:1}})},qr=({count:t,consumedCurrency:s,userArchetype:n})=>{const r=t-s.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[r," / ",t," ",n==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((a,i)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:n==="canine"?e.jsx(Ur,{consumed:s[i]??!1}):e.jsx(Gr,{consumed:s[i]??!1})},i))})]})},De=({spriteSrc:t,backgroundSrc:s,frameWidth:n,frameHeight:r,frameCount:a=1,frameIndex:i=0,fps:h=8,scale:l=1,animated:u=!1,columns:p=4,overrideScale:_=!1})=>{const j=o.useRef(null),[I,y]=o.useState({width:300,height:300}),[A,E]=o.useState(null),[g,x]=o.useState(i),[B]=Qt(s||"");o.useEffect(()=>{const Q=new Image;Q.src=t,Q.onload=()=>E(Q)},[t]),o.useEffect(()=>{if(!u||a<=1)return;x(i);const Q=setInterval(()=>{x(w=>{const Z=(w-i+1)%a;return i+Z})},1e3/h);return()=>clearInterval(Q)},[u,a,h,i]),o.useEffect(()=>{const Q=()=>{j.current&&y({width:j.current.clientWidth,height:j.current.clientHeight})};Q();const w=new ResizeObserver(Q);return j.current&&w.observe(j.current),()=>w.disconnect()},[]);const k=u?g:i,v=k%p*n,b=Math.floor(k/p)*r,c=20,d=I.width-c*2,m=I.height-c*2,P=d/n,L=m/r,N=_?l:Math.min(l,P,L),F=n*N,H=r*N,q=(I.width-F)/2,Y=(I.height-H)/2;return e.jsx("div",{ref:j,style:{width:"100%",height:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsx(Jt,{width:I.width,height:I.height,style:{imageRendering:"pixelated",position:"absolute",top:0,left:0},children:e.jsxs(Zt,{children:[B&&e.jsx(et,{image:B,x:0,y:0,width:I.width,height:I.height,listening:!1}),A&&e.jsx(et,{image:A,crop:{x:v,y:b,width:n,height:r},x:q,y:Y,width:F,height:H,perfectDrawEnabled:!1,listening:!1,filters:[],shadowForStrokeEnabled:!1,globalCompositeOperation:"source-over"})]})})})},tt={puppy:[{name:"sit",spriteSrc:"/assets/sprites/canine/dog/HuskySitting.png",startFrame:0,frameCount:8,fps:5,columns:8,frameWidth:64,frameHeight:64},{name:"run",spriteSrc:"/assets/sprites/canine/dog/HuskyRun.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64},{name:"sniff",spriteSrc:"/assets/sprites/canine/dog/HuskySniff.png",startFrame:0,frameCount:24,fps:12,columns:24,frameWidth:64,frameHeight:64},{name:"attack",spriteSrc:"/assets/sprites/canine/dog/HuskyAttack.png",startFrame:0,frameCount:15,fps:5,columns:15,frameWidth:64,frameHeight:64},{name:"bark",spriteSrc:"/assets/sprites/canine/dog/HuskyBark.png",startFrame:0,frameCount:10,fps:5,columns:10,frameWidth:64,frameHeight:64},{name:"die",spriteSrc:"/assets/sprites/canine/dog/HuskyDie.png",startFrame:0,frameCount:18,fps:5,columns:18,frameWidth:64,frameHeight:64},{name:"liedown",spriteSrc:"/assets/sprites/canine/dog/HuskyLieDown.png",startFrame:0,frameCount:12,fps:4,columns:12,frameWidth:64,frameHeight:64},{name:"sleep",spriteSrc:"/assets/sprites/canine/dog/HuskySleep.png",startFrame:0,frameCount:8,fps:4,columns:8,frameWidth:64,frameHeight:64},{name:"idle",spriteSrc:"/assets/sprites/canine/dog/HuskyIdle.png",startFrame:0,frameCount:6,fps:2,columns:6,frameWidth:64,frameHeight:64}],fox:[{name:"attack",spriteSrc:"/assets/sprites/canine/fox/FoxAttack.png",startFrame:0,frameCount:8,fps:5,columns:8,frameWidth:32,frameHeight:32},{name:"die",spriteSrc:"/assets/sprites/canine/fox/FoxDie.png",startFrame:0,frameCount:5,fps:5,columns:5,frameWidth:32,frameHeight:32},{name:"jump",spriteSrc:"/assets/sprites/canine/fox/FoxJump.png",startFrame:0,frameCount:10,fps:5,columns:10,frameWidth:32,frameHeight:32},{name:"sitting",spriteSrc:"/assets/sprites/canine/fox/FoxSitting.png",startFrame:0,frameCount:2,fps:2,columns:2,frameWidth:32,frameHeight:32},{name:"sleep",spriteSrc:"/assets/sprites/canine/fox/FoxSleep.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"walking",spriteSrc:"/assets/sprites/canine/fox/FixWalking.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/canine/fox/FoxIdle.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/canine/fox/FoxIdle.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32}],wolf:[{name:"one",spriteSrc:"/assets/sprites/canine/wolf/wolf_4.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64},{name:"two",spriteSrc:"/assets/sprites/canine/wolf/wolf_4.png",startFrame:6,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64},{name:"three",spriteSrc:"/assets/sprites/canine/wolf/wolf_4.png",startFrame:12,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64},{name:"four",spriteSrc:"/assets/sprites/canine/wolf/wolf_4.png",startFrame:18,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64}],werewolf:[{name:"attack",spriteSrc:"/assets/sprites/canine/werewolf/ATTACK1.png",startFrame:0,frameCount:7,fps:4,columns:7,frameWidth:158,frameHeight:125},{name:"attack2",spriteSrc:"/assets/sprites/canine/werewolf/ATTACK2.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:158,frameHeight:125},{name:"death",spriteSrc:"/assets/sprites/canine/werewolf/DEATH.png",startFrame:0,frameCount:10,fps:5,columns:10,frameWidth:158,frameHeight:125},{name:"idle",spriteSrc:"/assets/sprites/canine/werewolf/IDLE.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:158,frameHeight:125},{name:"run",spriteSrc:"/assets/sprites/canine/werewolf/RUN.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:158,frameHeight:125},{name:"run",spriteSrc:"/assets/sprites/canine/werewolf/TRANSFORMATION.png",startFrame:0,frameCount:8,fps:4,columns:8,frameWidth:158,frameHeight:125}],cerberus:[{name:"attack",spriteSrc:"/assets/sprites/canine/cerberus/ATTACK.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:125,frameHeight:100},{name:"death",spriteSrc:"/assets/sprites/canine/cerberus/DEATH.png",startFrame:0,frameCount:7,fps:4,columns:7,frameWidth:125,frameHeight:100},{name:"idle",spriteSrc:"/assets/sprites/canine/cerberus/IDLE.png",startFrame:0,frameCount:3,fps:3,columns:3,frameWidth:125,frameHeight:100},{name:"run",spriteSrc:"/assets/sprites/canine/cerberus/RUN.png",startFrame:0,frameCount:3,fps:3,columns:3,frameWidth:125,frameHeight:100}]},Vr=t=>Promise.all(t.map(s=>new Promise(n=>{const r=new Image;r.src=s,r.onload=()=>n(),r.onerror=()=>n()}))).then(()=>{}),Kr=({currentPet:t})=>{const s=o.useMemo(()=>tt[t]??tt.puppy,[t]),[n,r]=o.useState(s[0]),[a,i]=o.useState(!1);return o.useEffect(()=>{const h=Array.from(new Set(s.map(l=>l.spriteSrc)));Vr(h).then(()=>{i(!0)})},[]),o.useEffect(()=>{if(!a)return;let h;const l=()=>{const u=s[Math.floor(Math.random()*s.length)];r(u);const p=u.frameCount/u.fps*1e3*2;h=setTimeout(l,p)};return l(),()=>clearTimeout(h)},[a]),a?e.jsx(De,{spriteSrc:n.spriteSrc,backgroundSrc:"/assets/backgrounds/grass.png",frameWidth:n.frameWidth,frameHeight:n.frameHeight,frameCount:n.frameCount,frameIndex:n.startFrame,fps:n.fps,columns:n.columns,scale:4,animated:!0}):e.jsx("div",{children:"Loading..."})},me=[{name:"box",spriteSrc:"/assets/sprites/feline/cat/Box2.png",startFrame:0,frameCount:12,fps:2,columns:12,frameWidth:32,frameHeight:32},{name:"excited",spriteSrc:"/assets/sprites/feline/cat/Excited.png",startFrame:0,frameCount:12,fps:6,columns:12,frameWidth:32,frameHeight:32},{name:"dance",spriteSrc:"/assets/sprites/feline/cat/Dance.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"eating",spriteSrc:"/assets/sprites/feline/cat/Eating.png",startFrame:0,frameCount:15,fps:5,columns:15,frameWidth:32,frameHeight:32},{name:"sleepy",spriteSrc:"/assets/sprites/feline/cat/Sleepy.png",startFrame:0,frameCount:8,fps:2,columns:8,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:1,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32}],Xr=t=>Promise.all(t.map(s=>new Promise(n=>{const r=new Image;r.src=s,r.onload=()=>n(),r.onerror=()=>n()}))).then(()=>{}),Yr=({currentPet:t})=>{const[s,n]=o.useState(me[0]),[r,a]=o.useState(!1);return o.useEffect(()=>{const i=Array.from(new Set(me.map(h=>h.spriteSrc)));Xr(i).then(()=>a(!0))},[]),o.useEffect(()=>{if(!r)return;let i;const h=()=>{const l=me[Math.floor(Math.random()*me.length)];n(l);const u=l.frameCount/l.fps*1e3*2;i=setTimeout(h,u)};return h(),()=>clearTimeout(i)},[r]),r?e.jsx(De,{spriteSrc:s.spriteSrc,backgroundSrc:"/assets/backgrounds/grass.png",frameWidth:s.frameWidth,frameHeight:s.frameHeight,frameCount:s.frameCount,fps:s.fps,animated:!0,columns:s.columns,scale:4}):e.jsx("div",{children:"Loading..."})},dt={puppy:"fox",fox:"wolf",wolf:"werewolf",werewolf:"cerberus",cerberus:null},Qr={puppy:1,fox:10,wolf:25,werewolf:45,cerberus:70},Jr={kitten:"egyptian cat","egyptian cat":"astronaut cat","astronaut cat":"pirate cat","pirate cat":"superhero cat","superhero cat":null},Zr={kitten:1,"egyptian cat":10,"astronaut cat":25,"pirate cat":45,"superhero cat":70},eo=()=>{const s=Date.now()+3e3,n={startVelocity:30,spread:360,ticks:60,zIndex:9999},r=setInterval(()=>{const a=s-Date.now();if(a<=0){clearInterval(r);return}const i=500*(a/3e3);es({...n,particleCount:i,origin:{x:Math.random(),y:Math.random()*.5}})},250)},to="_evolutionContainer_hrpc2_1",so="_energyBox_hrpc2_13",ao="_shake_hrpc2_1",no="_energyCore_hrpc2_20",ro="_energyPulse_hrpc2_1",oo="_energyRing_hrpc2_33",io="_ringExpand_hrpc2_1",lo="_ring1_hrpc2_42",co="_ring2_hrpc2_47",uo="_ring3_hrpc2_52",po="_lightning_hrpc2_58",ho="_lightning1_hrpc2_66",mo="_lightning2_hrpc2_71",_o="_lightning3_hrpc2_76",xo="_lightning4_hrpc2_81",go="_evolutionText_hrpc2_87",fo="_textFlash_hrpc2_1",yo="_explosionContainer_hrpc2_96",jo="_explosionFlash_hrpc2_108",vo="_flash_hrpc2_1",So="_explosionCore_hrpc2_118",bo="_coreExplosion_hrpc2_1",Co="_explosionRing_hrpc2_131",wo="_ring4_hrpc2_156",ko="_explosionText_hrpc2_162",No="_textBounce_hrpc2_1",R={evolutionContainer:to,energyBox:so,shake:ao,energyCore:no,energyPulse:ro,energyRing:oo,ringExpand:io,ring1:lo,ring2:co,ring3:uo,lightning:po,lightning1:ho,lightning2:mo,lightning3:_o,lightning4:xo,evolutionText:go,textFlash:fo,explosionContainer:yo,explosionFlash:jo,flash:vo,explosionCore:So,coreExplosion:bo,explosionRing:Co,ring4:wo,explosionText:ko,textBounce:No},Io=({nextPet:t,onComplete:s})=>{const[n,r]=o.useState("charging");return o.useEffect(()=>{const a=setTimeout(()=>{r("explosion")},2e3),i=setTimeout(()=>{r("complete"),s&&s("complete")},3500);return()=>{clearTimeout(a),clearTimeout(i)}},[s]),n==="charging"?e.jsxs("div",{className:R.evolutionContainer,children:[e.jsxs("div",{className:R.energyBox,children:[e.jsx("div",{className:R.energyCore}),e.jsx("div",{className:`${R.energyRing} ${R.ring1}`}),e.jsx("div",{className:`${R.energyRing} ${R.ring2}`}),e.jsx("div",{className:`${R.energyRing} ${R.ring3}`}),e.jsx("div",{className:`${R.lightning} ${R.lightning1}`}),e.jsx("div",{className:`${R.lightning} ${R.lightning2}`}),e.jsx("div",{className:`${R.lightning} ${R.lightning3}`}),e.jsx("div",{className:`${R.lightning} ${R.lightning4}`})]}),e.jsx("div",{className:R.evolutionText,children:"EVOLVING..."})]}):n==="explosion"?e.jsxs("div",{className:R.explosionContainer,children:[e.jsx("div",{className:R.explosionFlash}),e.jsx("div",{className:R.explosionCore}),e.jsx("div",{className:`${R.explosionRing} ${R.ring1}`}),e.jsx("div",{className:`${R.explosionRing} ${R.ring2}`}),e.jsx("div",{className:`${R.explosionRing} ${R.ring3}`}),e.jsx("div",{className:`${R.explosionRing} ${R.ring4}`}),e.jsx("div",{className:R.explosionText,children:"EVOLUTION COMPLETE!"})]}):null};function To(t){if(!t)return!1;const s=t.pet.currentPet,n=t.pet.level,r=Ue[s];if(!r)return!1;const a=dt[s];if(!a)return!1;const i=Lo(r)[a];return n>=i}function Te(t){const s=Ue[t];return s?Bo(s)[t]??null:null}function Bo(t){return t==="canine"?dt:Jr}function Lo(t){return t==="canine"?Qr:Zr}const Ue={puppy:"canine",fox:"canine",wolf:"canine",werewolf:"canine",cerberus:"canine",kitten:"feline","egyptian cat":"feline","astronaut cat":"feline","pirate cat":"feline","superhero cat":"feline"},Fo=()=>{var j,I;const{userData:t,setUserData:s}=U(),[n,r]=o.useState(0),[a,i]=o.useState([]),[h,l]=o.useState(!1);o.useEffect(()=>{var k,v,b;const y=Intl.DateTimeFormat().resolvedOptions().timeZone,A=new Date().toLocaleDateString("sv-SE",{timeZone:y}),E=((k=t==null?void 0:t.goal)==null?void 0:k.dailyCurrencyTotal)??0,g=((b=(v=t==null?void 0:t.goal)==null?void 0:v.dailyCurrencyUsed)==null?void 0:b[A])??0,x=E-g;r(x);const B=Array(E).fill(!1).map((c,d)=>d>=x);i(B)},[t]);function u(){console.log("evolving!!!!"),l(!0)}console.log("userData",t);const p=Ue[(t==null?void 0:t.pet.currentPet)??""],_=p==="canine"?e.jsx(Kr,{currentPet:(t==null?void 0:t.pet.currentPet)??""}):e.jsx(Yr,{currentPet:(t==null?void 0:t.pet.currentPet)??""});return e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(W,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(D,{align:"center",style:{flexShrink:0},children:e.jsx(S,{styleAs:"h1",className:Ne.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(D,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(qr,{userArchetype:p,count:((j=t==null?void 0:t.goal)==null?void 0:j.dailyCurrencyTotal)??0,consumedCurrency:a})}),e.jsx(D,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:h?e.jsx(Io,{nextPet:Te((t==null?void 0:t.pet.currentPet)??""),onComplete:async y=>{if(y==="complete"){const A=Te((t==null?void 0:t.pet.currentPet)??"");if(A&&(t!=null&&t._id))try{const{data:E}=await z.post("/users/update",{_id:t._id,pet:{...t.pet,currentPet:A}});s(E),l(!1),eo()}catch(E){console.error("Failed to update pet evolution:",E)}}}}):_})}),e.jsxs(D,{className:Ne.statusSection,style:{flexShrink:0},children:[e.jsx(Dr,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0}),To(t)&&e.jsxs(X,{className:Ne.evolveButton,onClick:u,children:["Evolve to ",(I=Te((t==null?void 0:t.pet.currentPet)??""))==null?void 0:I.toUpperCase(),"!"]})]})]})})},Ao=({content:t})=>{const[s,n]=o.useState(null),r=h=>{n(h.currentTarget)},a=()=>{n(null)},i=!!s;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:r,style:{cursor:"pointer",marginLeft:4},children:e.jsx($,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(ts,{open:i,anchorEl:s,onClose:a,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Po=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],Eo=()=>{const{userData:t}=U();if(!t)return null;const{pet:s}=t;return e.jsxs(W,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(W,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx($,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(S,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Po.map(n=>e.jsx(Ee,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(W,{justify:"space-between",align:"center",children:[e.jsxs(W,{align:"center",gap:1,children:[e.jsx($,{symbol:n.emoji,size:20}),e.jsx(S,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:n.label}),e.jsx(Ao,{content:n.description})]}),e.jsxs(S,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",s[n.key]]})]})},n.key))]})},Be=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],Le=({name:t,description:s,progress:n})=>e.jsxs(Ee,{style:{width:"100%"},children:[e.jsx(S,{styleAs:"h4",children:t}),e.jsx(S,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:s}),e.jsx(as,{value:n}),e.jsxs(S,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[n,"% complete"]})]}),Wo=()=>{const t=Be.filter(r=>r.status==="inProgress"),s=Be.filter(r=>r.status==="notStarted"),n=Be.filter(r=>r.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(S,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(ss,{children:[e.jsxs(Se,{value:"",children:[e.jsx(be,{children:"In Progress"}),e.jsx(Ce,{children:e.jsx(W,{direction:"column",gap:2,children:t.map(r=>e.jsx(Le,{...r},r.name))})})]}),e.jsxs(Se,{value:"",children:[e.jsx(be,{children:"Not Started"}),e.jsx(Ce,{children:e.jsx(W,{direction:"column",gap:2,children:s.map(r=>e.jsx(Le,{...r},r.name))})})]}),e.jsxs(Se,{value:"",children:[e.jsx(be,{children:"Completed"}),e.jsx(Ce,{children:e.jsx(W,{direction:"column",gap:2,children:n.map(r=>e.jsx(Le,{...r},r.name))})})]})]})]})},Ro="_container_132oe_1",Mo="_tabList_132oe_11",$o="_tabButton_132oe_18",zo="_routineCreatedText_132oe_34",Ho="_active_132oe_39",Oo="_borderGlow_132oe_1",Do="_form_132oe_55",Uo="_heroSection_132oe_105",Go="_heroList_132oe_112",qo="_hero_132oe_105",Vo="_selected_132oe_143",Ko="_disclosureButton_132oe_156",Xo="_chevron_132oe_174",Yo="_rotate_132oe_179",Qo="_equipmentSection_132oe_183",Jo="_equipmentList_132oe_191",Zo="_equipment_132oe_183",G={container:Ro,tabList:Mo,tabButton:$o,routineCreatedText:zo,active:Ho,borderGlow:Oo,form:Do,heroSection:Uo,heroList:Go,hero:qo,selected:Vo,disclosureButton:Ko,chevron:Xo,rotate:Yo,equipmentSection:Qo,equipmentList:Jo,equipment:Zo},ei="_puppySpinner_qnb89_1",ti="_loadingText_qnb89_9",si="_puppy_qnb89_1",ai="_run_qnb89_1",ni="_treadmillBelt_qnb89_19",Fe={puppySpinner:ei,loadingText:ti,puppy:si,run:ai,treadmillBelt:ni,"belt-move":"_belt-move_qnb89_1"};function ve({scale:t=1}){const s=150*t;return e.jsxs("div",{className:Fe.puppySpinner,style:{width:`${s}px`,height:`${s}px`},children:[e.jsx("div",{className:Fe.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:Fe.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const ri=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],oi=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function ii(){const{userData:t}=U(),[s,n]=o.useState("Max Muscle"),[r,a]=o.useState(""),[i,h]=o.useState("beginner"),[l,u]=o.useState(3),[p,_]=o.useState([]),[j,I]=o.useState(""),[y,A]=o.useState(""),[E,g]=o.useState(""),[x,B]=o.useState(""),[k,v]=o.useState(15),[b,c]=o.useState(!1),[d,m]=o.useState(!1),{addToast:P}=Oe(),L=N=>{N.preventDefault(),c(!0);const F={goal:s,sport:s==="Sport Specific"?r:null,experience:i,days:l,equipment:p.join(", "),include:j,exclude:y,considerations:E,sessionDurationMinutes:k,petCoach:x,userId:t==null?void 0:t.uid};z.post("/workout/routine/createRoutine",F,{timeout:5e4}).then(H=>{console.log("Routine Created:",H.data),m(!0),setTimeout(()=>{m(!1)},3e3)}).catch(H=>{console.error(H)}).finally(()=>c(!1))};return d?e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:"0 12px",display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:22,textAlign:"center",padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx($,{size:32,symbol:"âšâ–ˆâ•â•â–ˆâš"}),e.jsx("div",{className:G.routineCreatedText,children:"Routine Created!"}),e.jsx("div",{className:G.routineCreatedText,children:'Check it out in "My Routines"!'})]})}):b?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ve,{scale:2})}):e.jsxs("form",{className:G.form,onSubmit:L,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:s,onChange:N=>n(N.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),s==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:r,onChange:N=>a(N.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:i,onChange:N=>h(N.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:l,onChange:N=>u(Number(N.target.value)),children:[...Array(7)].map((N,F)=>e.jsxs("option",{value:F+1,children:[F+1," ",F===0?"day":"days"]},F+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:k,onChange:N=>v(Number(N.target.value)),children:[...Array(12)].map((N,F)=>{const H=(F+1)*15,q=Math.floor(H/60),Y=H%60,Q=q>0?`${q}h${Y>0?` ${Y}m`:""}`:`${Y} minutes`;return e.jsx("option",{value:H,children:Q},H)})})]}),e.jsxs("div",{className:G.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:G.equipmentList,children:oi.map(N=>e.jsx(X,{type:"button",onClick:()=>_(F=>F.includes(N)?F.filter(H=>H!==N):[...F,N]),className:`${G.equipment} ${p.includes(N)?G.selected:""}`,children:N},N))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:j,onChange:N=>I(N.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:y,onChange:N=>A(N.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:E,onChange:N=>g(N.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(Me,{children:({open:N})=>e.jsxs("div",{className:G.heroSection,children:[e.jsxs($e,{className:G.disclosureButton,children:["Let one of our XPets train you!",e.jsx(ze,{className:`${G.chevron} ${N?G.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(He,{className:G.heroList,children:ri.map(F=>e.jsx(X,{type:"button",onClick:()=>B(F.name),className:`${G.hero} ${x===F.name?G.selected:""}`,style:{borderColor:typeof F.color=="string"&&F.color.includes("linear")?void 0:F.color,borderImage:F.color.includes("linear")?F.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:F.name},F.name))})]})}),e.jsx(X,{type:"submit",children:"Generate Routine"})]})}function ut({routine:t,setRoutines:s,menuOptions:n,onStartWorkout:r}){const{userData:a}=U();if(!t||t.length===0)return null;const i=u=>{console.log("Delete",u),z.delete(`/routines/delete/${u}`).then(()=>{s(p=>p==null?void 0:p.filter(_=>_._id!==u))}).catch(p=>{console.error("Failed to delete routine: ",p)})},h=u=>{z.post(`/routines/share/${u._id}`).then(()=>{console.log("Routine shared to community.")}).catch(p=>{console.error("Failed to share routine: ",p)})},l=u=>{z.post(`/routines/copy/${u._id}`,{userId:a==null?void 0:a.uid}).then(p=>{console.log("Copied routine:",p.data.routine),s==null||s(_=>[..._||[],p.data.routine])}).catch(p=>{console.error("Failed to copy routine:",p)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((u,p)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(Me,{children:({open:_})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs($e,{className:"accordion-trigger",children:[e.jsx(ze,{size:32,className:`chevron ${_?"open":""}`}),e.jsx("span",{className:"routine-title",children:u.routineName})]}),e.jsxs(ns,{as:"div",className:"menu-wrapper",children:[e.jsx(rs,{className:"menu-button",onClick:j=>j.stopPropagation(),children:e.jsx(os,{size:20})}),e.jsxs(is,{className:"menu-dropdown",children:[n.includes("Share")&&e.jsx(we,{children:e.jsx(X,{onClick:()=>h(u),className:"menu-item",children:"Share"})}),n.includes("Delete")&&e.jsx(we,{children:e.jsx(X,{onClick:()=>i(u._id),className:"menu-item",children:"Delete"})}),n.includes("Copy")&&e.jsx(we,{children:e.jsx(X,{onClick:()=>l(u),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(He,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:u.weeklySchedule.map((j,I)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:j.dayName}),e.jsx("div",{className:"day-exercises",children:j.exercises.map(y=>y.exercise).join(", ")}),j.exercises.length>0&&e.jsx(X,{className:"start-button",onClick:()=>r!==void 0?r(j):void 0,children:"START WORKOUT"})]},j.dayName+I))})})]})})},u.routineName+p))})}const li="_fullScreenWrapper_117p9_2",ci="_timer_117p9_18",di="_deckContainer_117p9_28",ui="_card_117p9_39",pi="_exerciseTitle_117p9_56",hi="_repRange_117p9_64",mi="_setGrid_117p9_72",_i="_setRow_117p9_80",xi="_setLabel_117p9_85",gi="_inputLabel_117p9_93",fi="_checkboxLabel_117p9_94",yi="_compactInput_117p9_99",ji="_setHeaderRow_117p9_124",vi="_finishButton_117p9_151",Si="_setCheckbox_117p9_170",bi="_checked_117p9_192",Ci="_cardSuitTop_117p9_197",wi="_cardSuitBottom_117p9_198",O={fullScreenWrapper:li,timer:ci,deckContainer:di,card:ui,exerciseTitle:pi,repRange:hi,setGrid:mi,setRow:_i,setLabel:xi,inputLabel:gi,checkboxLabel:fi,compactInput:yi,setHeaderRow:ji,finishButton:vi,setCheckbox:Si,checked:bi,cardSuitTop:Ci,cardSuitBottom:wi},ki=({startTime:t})=>{const[s,n]=o.useState(0);o.useEffect(()=>{const a=setInterval(()=>{n(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(a)},[t]);const r=a=>{const i=Math.floor(a/60),h=a%60;return`${String(i).padStart(2,"0")}:${String(h).padStart(2,"0")}`};return e.jsx("div",{style:{fontSize:"1.5rem"},children:r(s)})},Ni=({exercises:t,onFinish:s})=>{const[n]=o.useState(Date.now()),[r,a]=o.useState(t.map((v,b)=>({...v,cardId:`${v.exercise}-${b}`}))),[i,h]=o.useState(0),[l,u]=o.useState(0),[p,_]=o.useState(null),[j,I]=o.useState(.4),y=(v,b)=>{const d=Math.abs(v)/1e3,m=Math.abs(b)/300;return Math.max(.2,Math.min(.6,.4-d*.15+m*.1))},A=(v,b)=>{const c=g()[0];if(c){const d=y(v,b);I(d),_(c.cardId),setTimeout(()=>{a(m=>{const[P,...L]=m;return[...L,P]}),u(m=>m+1),_(null)},d*1e3)}},E=(v,b,c,d)=>{a(m=>m.map(L=>{if(L.cardId===v){const N=L.sets.map((F,H)=>H===b?{...F,[c]:d}:F);return{...L,sets:N}}return L}))},g=()=>{const v=r.length;if(v===0)return[];const b=l%v,c=[];for(let d=0;d<3;d++){const m=(b+d)%v;r[m]&&c.push({...r[m],displayIndex:d,originalIndex:m})}return c},x=[e.jsx(us,{size:32,color:"#ff4d4d"}),e.jsx(ps,{size:32,color:"#ff4d4d"}),e.jsx(hs,{size:32,color:"#ff4d4d"}),e.jsx(ms,{size:32,color:"#ff4d4d"})],k=(()=>{const v=Math.floor(Math.random()*x.length);return x[v]})();return e.jsxs("div",{className:O.fullScreenWrapper,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",fontSize:"19px",gap:"16px",alignItems:"center"},children:[e.jsx("div",{children:t[0].dayName}),e.jsx("div",{className:O.timer,children:e.jsx(ki,{startTime:n})})]}),e.jsx("div",{className:O.deckContainer,children:e.jsx(ls,{initial:!1,children:g().map((v,b)=>{const c=b===0,d=v.cardId===p;return e.jsxs(cs.div,{className:O.card,initial:{x:0,y:b*20,zIndex:100-b},animate:{x:0,scale:1-b*.02,y:b*20,zIndex:100-b},exit:{y:-400,opacity:0,zIndex:100-b,transition:{duration:j,ease:"easeOut"}},transition:{duration:.3},drag:c&&!d?"y":!1,dragElastic:.2,whileTap:{scale:.98},dragConstraints:{top:-400,bottom:0},onDragEnd:(m,P)=>{P.offset.y<-100&&!d&&A(P.velocity.y,P.offset.y)},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("span",{className:O.cardSuitTop,children:k})}),e.jsx("div",{className:O.exerciseTitle,children:v.exercise}),e.jsxs("div",{className:O.repRange,children:["Target: ",v.repRange," reps"]})]}),e.jsxs("div",{className:O.setGrid,children:[e.jsxs("div",{className:O.setHeaderRow,children:[e.jsx("span",{className:O.setLabel,children:"Set"}),e.jsx("span",{className:O.inputLabel,children:"Weight"}),e.jsx("span",{className:O.inputLabel,children:"Reps"}),e.jsx("span",{className:O.checkboxLabel,children:"âœ”"})]}),v.sets.map((m,P)=>e.jsxs("div",{className:O.setRow,children:[e.jsx("span",{className:O.setLabel,children:P+1}),e.jsx(ye,{type:"number",value:m.weight===0?"":m.weight,placeholder:"Weight",className:O.compactInput,onChange:L=>E(v.cardId,P,"weight",Number(L.target.value))}),e.jsx(ye,{type:"number",value:m.reps===0?"":m.reps,placeholder:"Reps",className:O.compactInput,onChange:L=>E(v.cardId,P,"reps",Number(L.target.value))}),e.jsx(ds,{checked:m.completed??!1,onChange:L=>{E(v.cardId,P,"completed",L)},className:({checked:L})=>`${O.setCheckbox} ${L?O.checked:""}`,children:e.jsx("span",{"aria-hidden":"true",children:m.completed?"âœ”":""})})]},P)),e.jsx("span",{className:O.cardSuitBottom,children:k})]})]},`${v.cardId}-cycle-${l}-${b}`)})})}),e.jsx("button",{className:O.finishButton,onClick:()=>s({duration:i,exercises:r}),children:"Finish Workout"})]})};function Ii(){const[t,s]=o.useState(),[n,r]=o.useState(!0),{userData:a}=U(),[i,h]=o.useState(null),l=p=>{const _=p.exercises.map(j=>({dayName:p.dayName,exercise:j.exercise,repRange:j.repRange,sets:Array(Number(j.sets)).fill({weight:0,reps:0})}));h(_)},u=p=>{console.log("Workout complete:",p),h(null)};return o.useEffect(()=>{z.get(`/routines?uid=${a==null?void 0:a.uid}`).then(p=>{s(p.data.routines)}).catch(p=>{console.error(p)}).finally(()=>r(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):n?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ve,{scale:2})}):e.jsxs("div",{style:{display:"flex",width:"100%"},children:[i&&e.jsx(Ni,{exercises:i,onFinish:u}),e.jsx(ut,{routine:t,setRoutines:s,menuOptions:["Share","Delete"],onStartWorkout:l})]})}function Ti(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ve,{scale:2})})}function Bi(){const[t,s]=o.useState(),[n,r]=o.useState(!0);return U(),o.useEffect(()=>{z.get("/routines?communityRoutine=true").then(a=>{s(a.data.routines)}).catch(a=>{console.error(a)}).finally(()=>r(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):n?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ve,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(ut,{routine:t,setRoutines:s,menuOptions:["Copy"]})})}function Li(){return e.jsx("div",{className:G.container,children:e.jsxs(We,{children:[e.jsx(Re,{className:G.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(ce,{className:({selected:s})=>`${G.tabButton} ${s?G.active:""}`,children:t},t))}),e.jsxs(rt,{children:[e.jsx(le,{children:e.jsx(Ii,{})}),e.jsx(le,{children:e.jsx(ii,{})}),e.jsx(le,{children:e.jsx(Ti,{})}),e.jsx(le,{children:e.jsx(Bi,{})})]})]})})}const Fi="_bossArena_1e27v_1",Ai="_header_1e27v_11",Pi="_title_1e27v_16",Ei="_subtitle_1e27v_29",Wi="_tabList_1e27v_36",Ri="_tab_1e27v_36",Mi="_tabSelected_1e27v_76",$i="_tabUnselected_1e27v_83",zi="_tabPanels_1e27v_92",Hi="_tabPanel_1e27v_92",ee={bossArena:Fi,header:Ai,title:Pi,subtitle:Ei,tabList:Wi,tab:Ri,tabSelected:Mi,tabUnselected:$i,tabPanels:zi,tabPanel:Hi},Oi="_campaignBosses_xuzyk_1",Di="_chapterSelector_xuzyk_6",Ui="_chapterLabel_xuzyk_14",Gi="_chapterSelect_xuzyk_6",qi="_carouselContainer_xuzyk_47",Vi="_embla_xuzyk_53",Ki="_emblaContainer_xuzyk_58",Xi="_emblaSlide_xuzyk_64",Yi="_carouselControls_xuzyk_69",Qi="_carouselBtn_xuzyk_76",Ji="_bossCard_xuzyk_105",Zi="_bossSprite_xuzyk_138",el="_spriteContainer_xuzyk_143",tl="_bossInfo_xuzyk_156",sl="_bossName_xuzyk_165",al="_bossNumber_xuzyk_174",nl="_bossStats_xuzyk_183",rl="_statItem_xuzyk_189",ol="_statLabel_xuzyk_197",il="_statValue_xuzyk_202",ll="_rewards_xuzyk_207",cl="_rewardIcon_xuzyk_217",dl="_rewardList_xuzyk_223",ul="_fightButton_xuzyk_231",pl="_fightIcon_xuzyk_270",hl="_noBosses_xuzyk_275",ml="_sprite_xuzyk_143",_l="_defeatedOverlay_xuzyk_317",M={campaignBosses:Oi,chapterSelector:Di,chapterLabel:Ui,chapterSelect:Gi,carouselContainer:qi,embla:Vi,emblaContainer:Ki,emblaSlide:Xi,carouselControls:Yi,carouselBtn:Qi,bossCard:Ji,bossSprite:Zi,spriteContainer:el,bossInfo:tl,bossName:sl,bossNumber:al,bossStats:nl,statItem:rl,statLabel:ol,statValue:il,rewards:ll,rewardIcon:cl,rewardList:dl,fightButton:ul,fightIcon:pl,noBosses:hl,sprite:ml,defeatedOverlay:_l},xl=t=>Promise.all(t.map(s=>new Promise(n=>{const r=new Image;r.src=s,r.onload=()=>n(),r.onerror=()=>n()}))).then(()=>{}),gl=({bossKey:t,animations:s,isDead:n})=>{const r=o.useMemo(()=>s[t]??[],[t,s]),[a,i]=o.useState(r[0]),[h,l]=o.useState(!1);return o.useEffect(()=>{const u=Array.from(new Set(r.map(p=>p.spriteSrc)));xl(u).then(()=>l(!0))},[r]),o.useEffect(()=>{if(!h||r.length===0)return;if(n){const _=r.find(j=>j.name==="death");_&&i(_);return}let u;const p=()=>{const _=r.filter(I=>I.name!=="death"),j=_[Math.floor(Math.random()*_.length)];i(j),u=setTimeout(p,j.frameCount/j.fps*1e3*2)};return p(),()=>clearTimeout(u)},[h,r,n]),!h||!a?e.jsx("div",{children:"Loading boss..."}):e.jsx(De,{spriteSrc:a.spriteSrc,backgroundSrc:"/assets/backgrounds/grass.png",frameWidth:a.frameWidth,frameHeight:a.frameHeight,frameCount:a.frameCount,frameIndex:a.startFrame,fps:a.fps,columns:a.columns,scale:a.scale,animated:a.fps>0,overrideScale:!0})},fl={"dwarf-warrior":[{name:"idle",spriteSrc:"/assets/sprites/bosses/dwarf/IDLE.png",startFrame:0,frameCount:3,fps:3,columns:3,frameWidth:100,frameHeight:100,scale:1.5},{name:"attack",spriteSrc:"/assets/sprites/bosses/dwarf/ATTACK.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:100,frameHeight:100,scale:1.5},{name:"death",spriteSrc:"/assets/sprites/bosses/dwarf/DEATH.png",startFrame:5,frameCount:6,fps:0,columns:6,frameWidth:100,frameHeight:100,scale:1.5}],witch:[{name:"attack",spriteSrc:"/assets/sprites/bosses/witch/ATTACK.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:125,frameHeight:125,scale:1.3},{name:"idle",spriteSrc:"/assets/sprites/bosses/witch/IDLE.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:125,frameHeight:125,scale:1.3}],"headless-horseman":[{name:"idle",spriteSrc:"/assets/sprites/bosses/headless-horseman/IDLE.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:150,frameHeight:150,scale:1},{name:"attack",spriteSrc:"/assets/sprites/bosses/headless-horseman/ATTACK.png",startFrame:0,frameCount:8,fps:4,columns:8,frameWidth:150,frameHeight:150,scale:1}]},yl=t=>t?Object.entries(t).filter(([s])=>!["name","currentPet","xp"].includes(s)).reduce((s,[,n])=>s+(typeof n=="number"?n:0),0):0,jl=({bosses:t=[],onFightBoss:s})=>{const{userData:n,setUserData:r}=U(),[a,i]=o.useState(1),[h,l]=_s({loop:!1,align:"start",skipSnaps:!1,dragFree:!1}),u=[...new Set(t.map(g=>g.chapter))].sort((g,x)=>g-x);t.filter(g=>g.chapter===(n==null?void 0:n.currentChapter)).sort((g,x)=>g.bossNumber-x.bossNumber),o.useEffect(()=>{u.length>0&&!u.includes(a)&&i(u[0])},[u,a]),o.useCallback(()=>{l&&l.scrollPrev()},[l]),o.useCallback(()=>{l&&l.scrollNext()},[l]);const[p,_]=o.useState(!0),[j,I]=o.useState(!0),y=o.useCallback(g=>{_(!g.canScrollPrev()),I(!g.canScrollNext())},[]);o.useEffect(()=>{l&&(y(l),l.on("reInit",y),l.on("select",y))},[l,y]);const A=g=>{const x=yl(n==null?void 0:n.pet);if(console.log("stats : "+x),!((n==null?void 0:n.currentChapter)===g.chapter&&(n==null?void 0:n.currentBossNumber)===g.bossNumber)){alert("You must defeat earlier bosses before this one!");return}x>=g.requiredSkillTotal?(alert(`Victory! You defeated ${g.name}.`),z.post(`/miniboss/defeatBoss/${n==null?void 0:n.uid}`).then(k=>{alert(`Victory! You defeated ${g.name}.`),r(k.data.updatedUser)}).catch(k=>{console.log(k)}),t.filter(k=>k.chapter===g.chapter).length,g.bossNumber):alert("You lost! Train your pet more before trying again.")},E=({boss:g})=>{const x=(n==null?void 0:n.currentChapter)===g.chapter&&n.currentBossNumber===g.bossNumber,B=n==null?void 0:n.defeatedBosses.some(k=>k.chapter===g.chapter&&k.bossNumber===g.bossNumber);return e.jsxs("div",{className:M.bossCard,children:[B&&e.jsx("div",{className:M.defeatedOverlay,children:e.jsx(xs,{})}),e.jsx("div",{className:M.bossNumber,children:g.bossNumber}),e.jsx("div",{className:M.bossSprite,children:e.jsx("div",{className:M.spriteContainer,children:e.jsx(gl,{bossKey:g.name.toLowerCase().replace(/\s+/g,"-"),animations:fl,isDead:B})})}),e.jsxs("div",{className:M.bossInfo,children:[e.jsx("h3",{className:M.bossName,children:g.name}),e.jsx("div",{className:M.bossStats,children:g.weakness&&e.jsxs("div",{className:M.statItem,children:[e.jsx("span",{className:M.statLabel,children:"Weakness:"}),e.jsx("span",{className:M.statValue,children:g.weakness})]})}),(g.reward.xp||g.reward.item)&&e.jsxs("div",{className:M.rewards,children:[e.jsx(gs,{className:M.rewardIcon}),e.jsxs("div",{className:M.rewardList,children:[g.reward.xp&&e.jsxs("span",{children:[g.reward.xp," XP"]}),g.reward.item&&e.jsx("span",{children:g.reward.item})]})]}),!B&&e.jsxs("button",{className:M.fightButton,onClick:()=>A(g),disabled:!x,children:[x?e.jsx(fs,{className:M.fightIcon}):e.jsx(ys,{className:M.fightIcon}),x?"Fight Boss":"Locked"]})]})]})};return u.length===0?e.jsx("div",{className:M.campaignBosses,children:e.jsx("div",{className:M.noBosses,children:e.jsx("p",{children:"No campaign bosses available"})})}):e.jsxs("div",{className:M.campaignBosses,children:[e.jsxs("div",{className:M.chapterSelector,children:[e.jsx("label",{className:M.chapterLabel,children:"Select Chapter"}),e.jsx("select",{value:a,onChange:g=>i(Number(g.target.value)),className:M.chapterSelect,children:u.map(g=>e.jsxs("option",{value:g,children:["Chapter ",g]},g))})]}),t.length>0?e.jsx("div",{className:M.carouselContainer,children:e.jsx("div",{className:M.embla,ref:h,children:e.jsx("div",{className:M.emblaContainer,children:t.map(g=>e.jsx("div",{className:M.emblaSlide,children:e.jsx(E,{boss:g})},g._id))})})}):e.jsx("div",{className:M.noBosses,children:e.jsxs("p",{children:["No bosses available for Chapter ",a]})})]})},vl=({})=>{const{userData:t}=U(),[s,n]=o.useState();return o.useEffect(()=>{z.get(`/miniboss/${t==null?void 0:t.uid}`).then(r=>{n(r.data.bosses)}).catch(r=>{console.log(r)})},[t]),e.jsxs("div",{className:ee.bossArena,children:[e.jsx("div",{className:ee.header,children:e.jsx("h1",{className:ee.title,children:"Boss Arena"})}),e.jsxs(We,{children:[e.jsxs(Re,{className:ee.tabList,children:[e.jsx(ce,{className:({selected:r})=>`${ee.tab} ${r?ee.tabSelected:ee.tabUnselected}`,children:"Campaign"}),e.jsx(ce,{className:({selected:r})=>`${ee.tab} ${r?ee.tabSelected:ee.tabUnselected}`,children:"Community"})]}),e.jsxs(rt,{className:ee.tabPanels,children:[e.jsx(le,{className:ee.tabPanel,children:e.jsx(jl,{bosses:s??[]})}),e.jsx(ce.Panel,{className:ee.tabPanel})]})]})]})},Sl=[{path:"/",name:"Pet",element:e.jsx(Fo,{})},{path:"/skills",name:"Skills",element:e.jsx(Eo,{})},{path:"/quests",name:"Quests",element:e.jsx(Wo,{})},{path:"/routines",name:"Routines",element:e.jsx(Li,{})},{path:"/BossArena",name:"BossArena",element:e.jsx(vl,{})},{path:"*",name:"NotFound",element:e.jsx(js,{to:"/",replace:!0})}],bl="_myBackground_1pm88_1",Cl="_loginScreen_1pm88_13",wl="_overlay_1pm88_29",kl="_loginContainer_1pm88_39",Nl="_googleButton_1pm88_49",Ae={myBackground:bl,loginScreen:Cl,overlay:wl,loginContainer:kl,googleButton:Nl};function Il(){const{setUserData:t}=U(),[s,n]=o.useState(!1),r=async()=>{n(!0),console.log("Attempting to log in with Google...");try{const i=await(await vs(je,As)).user.getIdToken(),{data:h}=await z.post("/auth/google",{token:i}),u=(await z.get(`/users/${h.uid}`)).data;t(u),console.log("User saved or retrieved from DB:",h)}catch(a){console.error(a)}n(!0)};return e.jsx("div",{className:Ae.loginScreen,children:e.jsx("div",{className:Ae.loginContainer,children:s?e.jsx(st,{size:"large","aria-label":"loading",role:"status"}):e.jsx(oe,{className:Ae.googleButton,onClick:r,children:"Embark with Google"})})})}const Tl=()=>{const{userData:t,setUserData:s}=U();if(!t)return e.jsx(S,{children:"Loading..."});const[n,r]=o.useState(0),[a,i]=o.useState(t),[h,l]=o.useState(1),[u,p]=o.useState(1.2),[_,j]=o.useState(0),[I,y]=o.useState(Math.floor(a.bodyStats.height/12)),[A,E]=o.useState(a.bodyStats.height%12);if(!t||!a)return e.jsx(S,{children:"Loading..."});o.useEffect(()=>{const d=I*12+A;console.log("total inches : ",d),i(m=>({...m,bodyStats:{...m.bodyStats,height:d}}))},[I,A]);const g=d=>{const{weight:m,height:P,age:L,sex:N}=d;return N==="male"?10*(m/2.205)+6.25*(P*2.54)-5*L+5:10*(m/2.205)+6.25*(P*2.54)-5*L-161},x=d=>{const m=u+_;return d*m},B=async d=>{d.preventDefault();const m=a.bodyStats.weight,P={userId:t.uid,date:new Date,weight:m},L=g(a.bodyStats),N=x(L),F=a.goal.goalType==="weight_loss"?N-h*3500/7:a.goal.goalType==="muscle_gain"?N+300:N,H=Math.round(F/100),q={...a,bodyStats:{...a.bodyStats,bmr:L,tdee:N,weight:m},goal:{...a.goal,dailyCalorieGoal:F,dailyCurrencyTotal:H,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",q);try{const{data:Y}=await z.post("/users/update",{...q});s(Y)}catch(Y){console.error("Error updating user data:",Y)}try{await z.post("/weightLogs/addWeightLog",P)}catch(Y){console.error(Y)}},k=(d,m,P)=>{const{name:L,value:N}=d.target;i({...a,[m]:{...a[m],[P||L]:N}})},v=(d,m,P)=>{i({...a,[d]:{...a[d],[m]:P}})},b=()=>{if(n===0){const{weight:d,height:m,age:P,sex:L}=a.bodyStats;return d>0&&m>0&&P>0&&["male","female"].includes(L)}if(n===1)return["weight_loss","muscle_gain","maintenance"].includes(a.goal.goalType);if(n===2){const{name:d,currentPet:m}=a.pet;return d.trim()!==""&&["puppy","kitten","bird"].includes(m)}return!0},c=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(W,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(D,{grow:1,children:e.jsxs(K,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(D,{children:e.jsx(S,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(D,{children:e.jsx(Ss,{children:c.map((d,m)=>e.jsx(bs,{label:d,stage:n===m?"active":m<n?"completed":"pending"},m))})}),e.jsxs("form",{onSubmit:B,children:[n===0&&e.jsxs(K,{align:"stretch",gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Body Stats"}),e.jsxs(se,{children:[e.jsx(ne,{children:"Weight (lbs)"}),e.jsx(_e,{value:a.bodyStats.weight===0?"":a.bodyStats.weight,onChange:d=>k(d,"bodyStats","weight")})]}),e.jsxs(se,{children:[e.jsx(ne,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(ge,{value:I.toString()+" ft",onSelectionChange:(d,m)=>y(Number(m)),children:[2,3,4,5,6,7,8,9].map(d=>e.jsxs(fe,{value:d.toString(),children:[d," ft"]},d))}),e.jsx(ge,{value:A.toString()+" in",onSelectionChange:(d,m)=>E(Number(m)),children:Array.from({length:12},(d,m)=>e.jsxs(fe,{value:m.toString(),children:[m," in"]},m))})]})]}),e.jsxs(se,{children:[e.jsx(ne,{children:"Sex"}),e.jsxs(W,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(W,{direction:"column",align:"center",gap:1,children:[e.jsx($,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(S,{children:"Male"})]})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:a.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(W,{direction:"column",align:"center",gap:1,children:[e.jsx($,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(S,{children:"Female"})]})})})]})]}),e.jsxs(se,{children:[e.jsx(ne,{children:"Age (years)"}),e.jsx(_e,{value:a.bodyStats.age===0?"":a.bodyStats.age,onChange:d=>k(d,"bodyStats","age")})]})]}),n===1&&e.jsxs(K,{gap:2,children:[e.jsx(S,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(W,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(W,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx($,{symbol:"ðŸ”¥",size:24}),e.jsx(S,{children:"Weight Loss"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(W,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx($,{symbol:a.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(S,{children:"Muscle Gain"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(W,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx($,{symbol:"ðŸ› ï¸",size:24}),e.jsx(S,{children:"Maintenance"})]})})})})]}),a.goal.goalType==="weight_loss"&&e.jsxs(se,{children:[e.jsx(S,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Cs,{max:2,min:.5,step:.25,value:h,onChange:(d,m)=>l(m),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(K,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(W,{direction:"column",gap:1,children:[e.jsx(V,{onClick:()=>p(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ’»",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(V,{onClick:()=>p(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(V,{onClick:()=>p(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(V,{onClick:()=>p(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:u===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(K,{gap:1,children:[e.jsx(S,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(S,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(W,{direction:"column",gap:1,children:[e.jsx(V,{onClick:()=>j(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Sedentary"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(V,{onClick:()=>j(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Lightly Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(V,{onClick:()=>j(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Moderately Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(V,{onClick:()=>j(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Very Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(V,{onClick:()=>j(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(W,{direction:"row",align:"center",gap:2,children:[e.jsx($,{symbol:"ðŸ’ª",size:30}),e.jsxs(K,{gap:0,children:[e.jsx(S,{styleAs:"h2",children:"Extremely Active"}),e.jsx(S,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),n===2&&e.jsxs(K,{gap:2,children:[e.jsx(S,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(se,{children:[e.jsx(ne,{children:"Pet Name"}),e.jsx(_e,{value:a.pet.name,onChange:d=>k(d,"pet","name")})]}),e.jsxs(se,{children:[e.jsx(ne,{children:"Pet Type"}),e.jsxs(W,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(W,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx($,{symbol:"ðŸ¶",size:24}),e.jsx(S,{children:"Dog"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>v("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:a.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(W,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx($,{symbol:"ðŸ±",size:24}),e.jsx(S,{children:"Cat"})]})})})})]})]})]}),e.jsx(D,{style:{paddingTop:"20px"},children:e.jsxs(W,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[n>0&&e.jsx(oe,{sentiment:"neutral",appearance:"solid",onClick:()=>r(n-1),children:"Previous"}),n<c.length-1&&e.jsx(oe,{sentiment:"accented",appearance:"solid",disabled:!b(),onClick:()=>r(n+1),children:"Next"}),n===c.length-1&&e.jsx(oe,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!b(),onClick:B,children:"Start Your Adventure!"})]})})]})]})})})},Bl="_prompt_1kskd_1",Ll="_fadeInUp_1kskd_1",Fl="_text_1kskd_21",Al="_shareIcon_1kskd_26",Pl="_dismiss_1kskd_31",Pe={prompt:Bl,fadeInUp:Ll,text:Fl,shareIcon:Al,dismiss:Pl},El=()=>/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),Wl=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;function Rl(){const[t,s]=o.useState(!1);o.useEffect(()=>{const r=localStorage.getItem("pwaPromptSeen");El()&&!Wl()&&!r&&s(!0)},[]);const n=()=>{s(!1),localStorage.setItem("pwaPromptSeen","true")};return t?e.jsxs("div",{className:Pe.prompt,children:[e.jsxs("div",{className:Pe.text,children:[e.jsx("strong",{children:"XPets is best when used as an app!"}),e.jsx("br",{}),e.jsx("strong",{children:"Install XPets: HealthQuest"}),e.jsx("br",{}),"On Safari, tap the â€œShareâ€ button (square with arrow â†‘) then â€œAdd to Home Screenâ€ to install the app."]}),e.jsx("button",{className:Pe.dismiss,onClick:n,children:"âœ•"})]}):null}const Ml="_overlay_1ingo_2",$l="_splashBox_1ingo_18",zl="_titleBar_1ingo_46",Hl="_title_1ingo_46",Ol="_titleDecoration_1ingo_62",Dl="_petAffects_1ingo_70",Ul="_petHeader_1ingo_79",Gl="_petIcon_1ingo_87",ql="_statsGrid_1ingo_101",Vl="_statItem_1ingo_107",Kl="_shine_1ingo_1",Xl="_petXp_1ingo_127",Yl="_strength_1ingo_132",Ql="_agility_1ingo_137",Jl="_statLabel_1ingo_142",Zl="_statValue_1ingo_151",ec="_workoutsTitle_1ingo_172",tc="_disclosures_1ingo_182",sc="_disclosure_1ingo_182",ac="_chevron_1ingo_190",nc="_rotate_1ingo_194",rc="_disclosureHeader_1ingo_198",oc="_disclosureBody_1ingo_223",ic="_singleWorkout_1ingo_233",lc="_workoutHeader_1ingo_241",cc="_workoutDate_1ingo_256",dc="_workoutDescription_1ingo_262",uc="_exerciseList_1ingo_268",pc="_exerciseItem_1ingo_274",hc="_exerciseName_1ingo_290",mc="_exerciseSets_1ingo_295",_c="_closeBtn_1ingo_301",T={overlay:Ml,splashBox:$l,titleBar:zl,title:Hl,titleDecoration:Ol,petAffects:Dl,petHeader:Ul,petIcon:Gl,statsGrid:ql,statItem:Vl,shine:Kl,petXp:Xl,strength:Yl,agility:Ql,statLabel:Jl,statValue:Zl,"stat-value":"_stat-value_1ingo_160",workoutsTitle:ec,disclosures:tc,disclosure:sc,chevron:ac,rotate:nc,disclosureHeader:rc,disclosureBody:oc,singleWorkout:ic,workoutHeader:lc,workoutDate:cc,workoutDescription:dc,exerciseList:uc,exerciseItem:pc,exerciseName:hc,exerciseSets:mc,closeBtn:_c};function xc({workouts:t,onClose:s}){const n=t.length>1,r=t.reduce((a,i)=>(a.strength+=i.petAffects.strength||0,a.agility+=i.petAffects.agility||0,a.pet+=i.petAffects.pet||0,a),{strength:0,agility:0,pet:0});return e.jsx("div",{className:T.overlay,children:e.jsxs("div",{className:T.splashBox,children:[e.jsxs("div",{className:T.titleBar,children:[e.jsxs("div",{children:[e.jsx($,{symbol:"ðŸ‹ï¸",size:32}),e.jsx("h2",{className:T.title,children:"HEVY WORKOUT SYNC"})]}),e.jsx("div",{className:T.titleDecoration})]}),e.jsxs("div",{className:T.petAffects,children:[e.jsxs("div",{className:T.petHeader,children:[e.jsx("span",{className:T.petIcon,children:"ðŸ¾"}),e.jsx("h3",{children:"YOUR PET GREW STRONGER!"})]}),e.jsxs("div",{className:T.statsGrid,children:[e.jsxs("div",{className:`${T.statItem} ${T.petXp}`,children:[e.jsx("span",{className:T.statLabel,children:"PET XP"}),e.jsxs("span",{className:T.statValue,children:["+",r.pet]})]}),e.jsxs("div",{className:`${T.statItem} ${T.strength}`,children:[e.jsx("span",{className:T.statLabel,children:"STRENGTH"}),e.jsxs("span",{className:T.statValue,children:["+",r.strength]})]}),e.jsxs("div",{className:`${T.statItem} ${T.agility}`,children:[e.jsx("span",{className:T.statLabel,children:"AGILITY"}),e.jsxs("span",{className:T.statValue,children:["+",r.agility]})]})]})]}),n?e.jsxs("div",{className:T.disclosures,children:[e.jsx("h4",{className:T.workoutsTitle,children:"WORKOUT DETAILS"}),t.map((a,i)=>e.jsx(Me,{as:"div",className:T.disclosure,children:({open:h})=>e.jsxs(e.Fragment,{children:[e.jsxs($e,{className:T.disclosureHeader,children:[a.title||`Workout ${i+1}`," â€” ",new Date(a.startTime).toLocaleDateString(),e.jsx(ze,{className:`${T.chevron} ${h?T.rotate:""}`,"aria-hidden":"true"})]}),e.jsxs(He,{className:T.disclosureBody,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",a.description||"No notes provided"]}),e.jsx("div",{className:T.exerciseList,children:a.exercises.map((l,u)=>e.jsxs("div",{className:T.exerciseItem,children:[e.jsx("span",{className:T.exerciseName,children:l.title}),e.jsxs("span",{className:T.exerciseSets,children:[l.sets.length," sets"]})]},u))})]})]})},a.hevyWorkoutId))]}):e.jsxs("div",{className:T.singleWorkout,children:[e.jsxs("div",{className:T.workoutHeader,children:[e.jsx("h3",{children:t[0].title}),e.jsx("div",{className:T.workoutDate,children:new Date(t[0].startTime).toLocaleDateString()})]}),e.jsx("p",{className:T.workoutDescription,children:t[0].description}),e.jsx("div",{className:T.exerciseList,children:t[0].exercises.map((a,i)=>e.jsxs("div",{className:T.exerciseItem,children:[e.jsx("span",{className:T.exerciseName,children:a.title}),e.jsxs("span",{className:T.exerciseSets,children:[a.sets.length," sets"]})]},i))})]}),e.jsx("button",{onClick:s,className:T.closeBtn,children:"CONTINUE"})]})})}o.createContext({});function gc({children:t}){const{userData:s}=U(),[n,r]=o.useState(null);async function a(){await z.post("/hevy/markSeen",{workoutIds:n==null?void 0:n.map(i=>i.hevyWorkoutId),uid:s==null?void 0:s.uid}),r(null)}return o.useEffect(()=>{if(!(s!=null&&s.uid))return;async function i(){try{const l=(await z.get(`/hevy/unseen/${s==null?void 0:s.uid}`)).data.newHevyWorkouts;l!=null&&l.length&&r(l)}catch(h){console.error("Error fetching unseen Hevy workout:",h)}}i()},[s==null?void 0:s.uid]),e.jsxs(e.Fragment,{children:[n&&e.jsx(xc,{workouts:n,onClose:()=>a()}),t]})}function fc(){const[t,s]=o.useState(null),[n,r]=o.useState(!0),{userData:a,setUserData:i}=U(),[h,l]=o.useState(0);return o.useEffect(()=>{const u=ws.throttle(()=>{console.log("Fetching user object..."),z.get(`/users/${a==null?void 0:a.uid}`).then(_=>{i(_.data),console.log("User data synced:",_.data)}).catch(_=>{console.error("Failed to fetch user:",_)})},1e4),p=()=>{console.log("User came back!"),u()};return a&&window.addEventListener("focus",p),()=>{a&&(window.removeEventListener("focus",p),u.cancel())}},[]),o.useEffect(()=>{const u=ks(je,p=>{console.log("Auth state changed:",p),console.log("User Data in App useEffect:",a),s(p),r(!1);const _=localStorage.getItem("userData");_&&i(JSON.parse(_))});return()=>u()},[]),console.log("App render - Loading:",n,"User:",t,"UserData:",a),n?e.jsx(pe,{mode:"dark",children:e.jsx("div",{children:"Loading in app.tsx..."})}):!t||!a?e.jsx(pe,{mode:"dark",children:e.jsx(Il,{})}):a.bodyStats.weight===0?e.jsx(pe,{mode:"dark",children:e.jsx(Tl,{})}):e.jsx(pe,{mode:"dark",children:e.jsxs(gc,{children:[e.jsx(Rl,{}),e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"env(safe-area-inset-top) env(safe-area-inset-right) 0 env(safe-area-inset-left)"}}),e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",minHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",height:"calc(100dvh - 76px - env(safe-area-inset-bottom))",display:"flex",flexDirection:"column",paddingBottom:"14px",overflow:"hidden"},children:e.jsx(Ns,{children:Sl.map(u=>e.jsx(Is,{path:u.path,element:u.element},u.path))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,minHeight:"76px"},children:e.jsx(br,{})})]})]})})}"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then(t=>{for(const s of t)s.unregister()}),caches.keys().then(t=>{t.forEach(s=>{caches.delete(s)})}));Ts.createRoot(document.getElementById("root")).render(e.jsx(Bs.StrictMode,{children:e.jsx(Ls,{children:e.jsx(Es,{children:e.jsx(Hs,{children:e.jsx(Qs,{children:e.jsx(fc,{})})})})})}));
