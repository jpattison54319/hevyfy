import{r as o,j as e,T as d,F as j,a as N,C as Be,B as Pe,O as Me,u as ze,P as Oe,b as ue,A as Ee,c as oe,d as le,e as ie,L as Re,i as De,g as We,f as Ue,s as He,G as Ge,h as $e,k as qe,l as Ve,m as H,n as ge,S as ke,o as me,p as _e,I as ee,q as L,D as se,t as ae,U as fe,v as Ye,w as Xe,x as Ke,R as Je,y as Qe,z as Ze,E as et,H as tt,J as st,K as te,M as at,N as rt,Q as nt,X as ot,V as ye,Y as lt,W as it,Z as ct,_ as dt,$ as pt,a0 as ht,a1 as xt,a2 as je,a3 as ve,a4 as ut,a5 as be,a6 as $,a7 as gt,a8 as mt,a9 as _t,aa as ft,ab as yt,ac as jt,ad as vt,ae as G,af as q,ag as F,ah as bt,ai as St,aj as kt,ak as ce,al as Ct,am as wt,an as Tt,ao as At,ap as It}from"./vendor-C-vUkgHl.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();const Nt="_homePage_rxrt2_1",Lt="_homePageTitle_rxrt2_6",Ft="_statusSection_rxrt2_24",Bt="_levelText_rxrt2_29",Pt="_xpBarWrapper_rxrt2_35",Mt="_xpBarFill_rxrt2_44",Se={homePage:Nt,homePageTitle:Lt,"card-links":"_card-links_rxrt2_10","card-image":"_card-image_rxrt2_19",statusSection:Ft,levelText:Bt,xpBarWrapper:Pt,xpBarFill:Mt},Ce=o.createContext(void 0),zt=({children:t})=>{const[a,r]=o.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),n=s=>{r(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(Ce.Provider,{value:{userData:a,setUserData:n},children:t})},R=()=>{const t=o.useContext(Ce);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=t,n=o.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:n}},Ot="_xpBarWrapper_sqxxw_1",Et="_xpBarFill_sqxxw_12",Rt="_pixelGlow_sqxxw_1",Dt="_xpText_sqxxw_33",Wt="_levelText_sqxxw_59",Z={xpBarWrapper:Ot,xpBarFill:Et,pixelGlow:Rt,xpText:Dt,levelText:Wt};function Ut(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function de(t,a){const r=Ut(a);return{progress:Math.min(Math.max(t/r*100,0),100),xpNeeded:r}}const Ht=({currentXp:t,level:a})=>{const[r,n]=o.useState(()=>de(t,a).progress),s=o.useRef(t),{xpNeeded:l}=de(t,a);return o.useEffect(()=>{const h=de(t,a).progress,c=s.current;t>c,n(h),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(d,{className:Z.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:Z.xpBarWrapper,children:[e.jsx("div",{className:Z.xpBarFill,style:{width:`${r}%`}}),e.jsxs(d,{className:Z.xpText,styleAs:"label",children:[" ",t," / ",l]})]})]})},Gt=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:n?0:1}})},$t=({consumed:t=!1,size:a=48,className:r})=>{const[n,s]=o.useState(!1);return o.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:n?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:n?0:1}})},qt=({count:t,consumedCurrency:a,userArchetype:r})=>{const n=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[n," / ",t," ",r==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,l)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(Gt,{consumed:a[l]??!1}):e.jsx($t,{consumed:a[l]??!1})},l))})]})},Vt=()=>{var y;const{userData:t}=R(),[a,r]=o.useState(""),[n,s]=o.useState(0),[l,h]=o.useState([]);let c=!1;const g={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};o.useEffect(()=>{var v;r(g[((v=t==null?void 0:t.pet)==null?void 0:v.currentPet)??"puppy"]),c=a==null?void 0:a.includes("kitten")},[t]),o.useEffect(()=>{var P,x,S;const v=new Date().toISOString().slice(0,10),u=((P=t==null?void 0:t.goal)==null?void 0:P.dailyCurrencyTotal)??0,T=((S=(x=t==null?void 0:t.goal)==null?void 0:x.dailyCurrencyUsed)==null?void 0:S[v])??0,A=u-T;s(A);const w=Array(u).fill(!1).map((b,C)=>C>=A);h(w)},[t]),console.log("Model Path:",a);function f({url:v,scale:u=2,position:T=[0,-2,0],rotation:A=[0,0,0]}){const w=ze(v);if(!w||!w.scene)return null;const P=o.useMemo(()=>w.scene.clone(),[w.scene]);return e.jsx("primitive",{object:P,scale:u,position:T,rotation:A})}return console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(j,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(N,{align:"center",style:{flexShrink:0},children:e.jsx(d,{styleAs:"h1",className:Se.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(N,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(qt,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((y=t==null?void 0:t.goal)==null?void 0:y.dailyCurrencyTotal)??0,consumedCurrency:l})}),e.jsx(N,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(Be,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(o.Suspense,{children:e.jsx(Pe,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(f,{url:a,scale:.8,position:c?[0,-3,0]:[0,-2,0],rotation:c?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(Me,{})]})})}),e.jsx(N,{className:Se.statusSection,style:{flexShrink:0},children:e.jsx(Ht,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},I=({symbol:t,label:a="",className:r="",style:n={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...n},children:t}),Yt=({content:t})=>{const[a,r]=o.useState(null),n=h=>{r(h.currentTarget)},s=()=>{r(null)},l=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:n,style:{cursor:"pointer",marginLeft:4},children:e.jsx(I,{symbol:"ℹ️",label:"info",size:14})}),e.jsx(Oe,{open:l,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Xt=[{label:"Strength",key:"strength",emoji:"💪",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"🛡️",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"🤸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"🧠",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"🪖",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"💨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"🤗",description:"Calorie goal adherence"}],Kt=()=>{const{userData:t}=R();if(!t)return null;const{pet:a}=t;return e.jsxs(j,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(j,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(I,{style:{alignItems:"center"},symbol:"🎮",size:30}),e.jsx(d,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Xt.map(r=>e.jsx(ue,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(j,{justify:"space-between",align:"center",children:[e.jsxs(j,{align:"center",gap:1,children:[e.jsx(I,{symbol:r.emoji,size:20}),e.jsx(d,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(Yt,{content:r.description})]}),e.jsxs(d,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},pe=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],he=({name:t,description:a,progress:r})=>e.jsxs(ue,{style:{width:"100%"},children:[e.jsx(d,{styleAs:"h4",children:t}),e.jsx(d,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Re,{value:r}),e.jsxs(d,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),Jt=()=>{const t=pe.filter(n=>n.status==="inProgress"),a=pe.filter(n=>n.status==="notStarted"),r=pe.filter(n=>n.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(d,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Ee,{children:[e.jsxs(oe,{value:"",children:[e.jsx(le,{children:"In Progress"}),e.jsx(ie,{children:e.jsx(j,{direction:"column",gap:2,children:t.map(n=>e.jsx(he,{...n},n.name))})})]}),e.jsxs(oe,{value:"",children:[e.jsx(le,{children:"Not Started"}),e.jsx(ie,{children:e.jsx(j,{direction:"column",gap:2,children:a.map(n=>e.jsx(he,{...n},n.name))})})]}),e.jsxs(oe,{value:"",children:[e.jsx(le,{children:"Completed"}),e.jsx(ie,{children:e.jsx(j,{direction:"column",gap:2,children:r.map(n=>e.jsx(he,{...n},n.name))})})]})]})]})},we=[{path:"/",name:"Character",element:e.jsx(Vt,{})},{path:"/skills",name:"Skills",element:e.jsx(Kt,{})},{path:"/quests",name:"Quests",element:e.jsx(Jt,{})}],Qt={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Te=De(Qt);We(Te);const re=Ue(Te);He(re,$e).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const Zt=new Ge;function es(){qe(re).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const W=Ve.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),ts=()=>{const{userData:t,setUserData:a}=R(),r=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[n,s]=o.useState(""),[l,h]=o.useState(null),[c,g]=o.useState(!1),[f,y]=o.useState(null),[v,u]=o.useState(null),[T,A]=o.useState(!1),w=async()=>{var S,b;if(n.trim()){g(!0),y(null),h(null);try{const{data:C}=await W.post("/chatnutrition",{message:n}),k={...C,description:n};console.log(k),u(k),A(!0)}catch(C){const k=C,M=(S=k.response)==null?void 0:S.data;((b=k.response)==null?void 0:b.status)===400?y((M==null?void 0:M.suggestion)||"Please describe a specific food item or meal"):y("Failed to get nutrition info. Try again.")}finally{g(!1)}}},P=async()=>{if(v){g(!0),y(null);try{const S=await W.post(`/chatnutrition/${t==null?void 0:t.uid}/addMeal`,v),{mealAffects:b,updatedUser:C}=S.data;a(C);const k=[];b.currency&&k.push(`🦴 This meal cost ${b.currency} bone${b.currency>1?"s":""}!`),b.armorIncrease&&k.push(`🛡️ +${b.armorIncrease.toFixed(1)} Armor from protein`),b.defenseIncrease&&k.push(`🧱 +${b.defenseIncrease.toFixed(1)} Defense from fiber`),b.speedIncrease&&k.push(`💨 +${b.speedIncrease.toFixed(1)} Speed from hydration`),b.intelligenceIncrease&&k.push(`🧠 +${b.intelligenceIncrease} Intelligence from fruits & vegetables`),k.length===0&&k.push("Seems like this meal didnt contain any sustenance!"),h(k.join(`
`))}catch{y("Failed to confirm meal. Try again.")}finally{g(!1),u(null),A(!1),s("")}}},x=()=>{u(null),A(!1),h(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"🍎 FOOD LOGGER v2.0 🍎"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:n,onChange:S=>s(S.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),T?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[r==="bones"?"🦴":"🐟"," COST: ",Math.round(v.calories/100)," ",r]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:P,disabled:c,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:c?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:c?"PROCESSING...":"✓ CONFIRM"}),e.jsx("button",{onClick:x,disabled:c,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:c?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"✗ CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:w,disabled:c||!n.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:c||!n.trim()?"#332200":"#1a1100",color:c||!n.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:c||!n.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:c||!n.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:c?"⚡ ANALYZING...":"🚀 ANALYZE FOOD"})}),f&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["⚠️ ERROR: ",f]})}),l&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:l})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINE™"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},ss={puppy:[{rpe:1,emoji:"🐾",text:"Sniffed around the park"},{rpe:2,emoji:"🐕",text:"Chased tail"},{rpe:3,emoji:"🐺",text:"Chased squirrel"},{rpe:4,emoji:"🔥🐺",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"💤",text:"Big stretch under a tree"},{rpe:2,emoji:"🐱",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"🐯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"🔥🐯",text:"Celestial lion battle in the astral jungle"}]},as=({petType:t,selectedRpe:a,onChange:r})=>{const n=ss[t],s=l=>{r(l)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:n.map(l=>e.jsxs(ue,{onClick:()=>s(l.rpe),style:{cursor:"pointer",border:a===l.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===l.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(I,{size:32,symbol:l.emoji}),e.jsx(d,{style:{fontSize:12,marginTop:8},children:l.rpe}),e.jsx(d,{style:{fontSize:14,marginTop:6},children:l.text})]},l.rpe))})},rs=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(I,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained ⚡ | Pet stronger 🐾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"✖"})]}):null,Ae=o.createContext(void 0),ns=()=>{const t=o.useContext(Ae);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let os=0;const ls=({children:t})=>{const[a,r]=o.useState([]),[n,s]=o.useState(null);o.useEffect(()=>{!n&&a.length>0&&(s(a[0]),r(c=>c.slice(1)))},[a,n]),o.useEffect(()=>{if(!n)return;const c=n.duration??3e3,g=setTimeout(()=>{s(null)},c);return()=>clearTimeout(g)},[n]);const l=o.useCallback(c=>{const g=++os;r(f=>[...f,{id:g,...c}])},[]),h=o.useCallback(()=>{s(null)},[]);return e.jsxs(Ae.Provider,{value:{addToast:l,removeToast:h},children:[t,n&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:n.content},n.id)})]})},is="_levelUpContainer_vq3kq_1",cs="_levelUpPulse_vq3kq_1",ds="_shimmer_vq3kq_1",ps="_emoji_vq3kq_32",hs="_bounce_vq3kq_1",xs="_levelText_vq3kq_41",us="_levelNumber_vq3kq_54",gs="_celebration_vq3kq_67",ms="_fadeInUp_vq3kq_1",X={levelUpContainer:is,levelUpPulse:cs,shimmer:ds,emoji:ps,bounce:hs,levelText:xs,levelNumber:us,celebration:gs,fadeInUp:ms},Ie=o.createContext(void 0),_s=({children:t})=>{const[a,r]=o.useState(null),[n,s]=o.useState(void 0),l=({content:c,style:g})=>{r(c),s(g)},h=()=>{r(null),s(void 0)};return e.jsxs(Ie.Provider,{value:{showSplash:l,hideSplash:h},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...n},onClick:h,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(H,{onClick:h,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},fs=()=>{const t=o.useContext(Ie);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},ys={1:.5,2:1,3:1.5,4:2.2},js=({setDrawerView:t})=>{const{userData:a,setUserData:r}=R(),{addToast:n}=ns(),{showSplash:s}=fs(),[l,h]=o.useState(!1),[c,g]=o.useState("WEIGHTS"),[f,y]=o.useState("DURATION"),[v,u]=o.useState(""),[T,A]=o.useState(""),[w,P]=o.useState(""),[x,S]=o.useState(null),[b,C]=o.useState(""),k=["WEIGHTS","CARDIO","MOBILITY","SPORT"],M=["DURATION","DISTANCE"],[m,_]=o.useState(!1),z=Array.from({length:12},(p,O)=>O),E=Array.from({length:60},(p,O)=>O),[D,K]=o.useState({strength:0,agility:0,pet:0});console.log(T),console.log(x);function ne(){const p=(Number(T)||0)*60+(Number(w)||0);console.log("totalDuration ",p);const O=ys[x??2];let B=0;p>0?B=Math.round(p*10*O):Number(v)>0&&(B=Math.round(Number(v)*125*O)),console.log("totalXp ",B);let J=0,Q=0;switch(c){case"WEIGHTS":J=Math.round(B/100);break;case"CARDIO":Q=Math.round(B/100);break;case"MOBILITY":case"SPORT":const Le=B/2/100,Fe=B/2/100;J=Math.round(Le),Q=Math.round(Fe);break}return console.log("final ",{strength:J,agility:Q,pet:B}),{strength:J,agility:Q,pet:B}}const U=k.includes(c)&&M.includes(f)&&(v!==""||T!==""||w!=="")&&x!==null;function Y(){u(""),A(""),P(""),S(null),C(""),g("WEIGHTS"),y("DURATION")}const Ne=async()=>{const p=ne();if(K(p),!a||!a.uid){alert("User not loaded properly.");return}const O=f==="DURATION"?(Number(T)||0)*60+(Number(w)||0):0;try{const{data:B}=await W.post(`/users/${a.uid}/addWorkout`,{workoutType:c,cardioMode:f,duration:O,distance:f==="DISTANCE"&&Number(v)||0,rpe:x,notes:b,workoutXp:p});r(B.updatedUser),Y(),n({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(I,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.pet," PET XP"]}),p.strength>0&&p.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.agility," AGILITY"]})]}):p.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{B.levelUp&&s({content:e.jsxs("div",{className:X.levelUpContainer,children:[e.jsx("div",{className:X.emoji,children:"🎉✨🎊✨🎉"}),e.jsx("div",{className:X.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:X.levelNumber,children:["LEVEL ",B.updatedUser.pet.level]}),e.jsx("div",{className:X.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(B){console.error(B),alert("There was an error logging your workout.")}};return l?e.jsx(ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(ke,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(rs,{open:m,onClose:()=>_(!1)}),e.jsx(d,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(d,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(me,{value:c??"",onChange:p=>g(p.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:k.map(p=>e.jsx(_e,{value:p,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:p},p))}),c==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(me,{value:f??"",onChange:p=>{y(p.currentTarget.value),u(""),A(""),P("")},style:{marginBottom:16},children:M.map(p=>e.jsx(_e,{value:p,appearance:p==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:p},p))})]}),f==="DISTANCE"&&c==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(d,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(ee,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:v,onChange:p=>u(p.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(d,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(L,{direction:"row",gap:2,children:[e.jsx(se,{value:T+" hr(s)",onSelectionChange:(p,O)=>A(O[0]??""),placeholder:"Hours",children:z.map(p=>e.jsxs(ae,{value:String(p),children:[p," hr"]},p))}),e.jsx(se,{value:w+" min(s)",onSelectionChange:(p,O)=>P(O[0]??""),placeholder:"Minutes",children:E.map(p=>e.jsxs(ae,{value:String(p),children:[p<10?`0${p}`:p," min"]},p))})]})]}),e.jsx(d,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(as,{selectedRpe:x,onChange:p=>S(p),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(d,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:b,onChange:p=>C(p.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(H,{onClick:Ne,disabled:!U,style:{opacity:U?1:.4,cursor:U?"pointer":"not-allowed",color:U?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:U?"#ff9900":void 0},children:"LOG WORKOUT"})]})},vs="_backdrop_1mk9a_9",bs="_drawer_1mk9a_17",Ss="_drawer__header_1mk9a_34",ks="_drawer__headerContent_1mk9a_41",Cs="_drawer__headerIcon_1mk9a_46",ws="_drawer__title_1mk9a_49",Ts="_drawer__closeButton_1mk9a_55",As="_drawer__content_1mk9a_67",Is="_mealCard_1mk9a_73",Ns="_mealCard__header_1mk9a_85",Ls="_mealCard__info_1mk9a_91",Fs="_mealCard__title_1mk9a_94",Bs="_mealCard__timestamp_1mk9a_100",Ps="_mealCard__calories_1mk9a_105",Ms="_mealCard__caloriesValue_1mk9a_108",zs="_mealCard__caloriesLabel_1mk9a_115",Os="_mealCard__macros_1mk9a_119",Es="_mealCard__additionalStats_1mk9a_125",Rs="_mealCard__statBoosts_1mk9a_131",Ds="_mealCard__statBoostsTitle_1mk9a_135",Ws="_mealCard__statBoostsGrid_1mk9a_141",Us="_mealCard__currency_1mk9a_146",Hs="_mealCard__currencyText_1mk9a_150",Gs="_macroItem_1mk9a_156",$s="_macroItem__value_1mk9a_162",qs="_macroItem__label_1mk9a_168",Vs="_additionalStat_1mk9a_182",Ys="_additionalStat__icon_1mk9a_190",Xs="_additionalStat__content_1mk9a_193",Ks="_additionalStat__value_1mk9a_196",Js="_additionalStat__label_1mk9a_203",Qs="_statBoost_1mk9a_212",Zs="_statBoost__icon_1mk9a_221",ea="_statBoost__label_1mk9a_236",ta="_statBoost__value_1mk9a_239",sa="_loadingState_1mk9a_244",aa="_loadingState__content_1mk9a_248",ra="_pulse_1mk9a_1",na="_loadingState__text_1mk9a_251",oa="_loadingState__subtext_1mk9a_255",la="_loadingMore_1mk9a_260",ia="_loadingMore__content_1mk9a_264",ca="_loadingMore__text_1mk9a_267",da="_loadingMore__subtext_1mk9a_271",pa="_emptyState_1mk9a_276",ha="_emptyState__icon_1mk9a_280",xa="_emptyState__text_1mk9a_284",ua="_emptyState__subtext_1mk9a_288",ga="_endOfList_1mk9a_293",ma="_endOfList__text_1mk9a_298",_a="_endOfList__subtext_1mk9a_303",fa="_mealsList_1mk9a_308",ya="_demoApp_1mk9a_314",ja="_demoApp__container_1mk9a_319",va="_demoApp__title_1mk9a_323",ba="_demoApp__button_1mk9a_330",i={backdrop:vs,drawer:bs,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:Ss,drawer__headerContent:ks,drawer__headerIcon:Cs,drawer__title:ws,drawer__closeButton:Ts,drawer__content:As,mealCard:Is,mealCard__header:Ns,mealCard__info:Ls,mealCard__title:Fs,mealCard__timestamp:Bs,mealCard__calories:Ps,mealCard__caloriesValue:Ms,mealCard__caloriesLabel:zs,mealCard__macros:Os,mealCard__additionalStats:Es,mealCard__statBoosts:Rs,mealCard__statBoostsTitle:Ds,mealCard__statBoostsGrid:Ws,mealCard__currency:Us,mealCard__currencyText:Hs,macroItem:Gs,macroItem__value:$s,macroItem__label:qs,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:Vs,additionalStat__icon:Ys,additionalStat__content:Xs,additionalStat__value:Ks,additionalStat__label:Js,statBoost:Qs,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:Zs,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:ea,statBoost__value:ta,loadingState:sa,loadingState__content:aa,pulse:ra,loadingState__text:na,loadingState__subtext:oa,loadingMore:la,loadingMore__content:ia,loadingMore__text:ca,loadingMore__subtext:da,emptyState:pa,emptyState__icon:ha,emptyState__text:xa,emptyState__subtext:ua,endOfList:ga,endOfList__text:ma,endOfList__subtext:_a,mealsList:fa,demoApp:ya,demoApp__container:ja,demoApp__title:va,demoApp__button:ba},Sa=()=>{const{userData:t}=R(),[a,r]=o.useState([]),[n,s]=o.useState(!1),[l,h]=o.useState(!1),[c,g]=o.useState(!0),[f,y]=o.useState(0),v=o.useRef(null),u=10,T=async(x=f,S=!1)=>{S?s(!0):h(!0);try{const C=(await W.get(`/users/${t==null?void 0:t.uid}/meals?limit=${u}&offset=${x}`)).data,k=C.meals||[];r(S?k:_=>[..._,...k]);const M=C.total||0,m=x+k.length;g(m<M),y(x+k.length)}catch(b){console.error("Error fetching meals:",b)}s(!1),h(!1)};o.useEffect(()=>{T(0,!0)},[]),o.useEffect(()=>{const x=()=>{const b=document.querySelector(".saltDrawer");if(!b)return;const{scrollTop:C,scrollHeight:k,clientHeight:M}=b;k-C<=M+100&&c&&!l&&T(f,!1)},S=document.querySelector(".saltDrawer");return S&&S.addEventListener("scroll",x),()=>{S&&S.removeEventListener("scroll",x)}},[f,c,l]);const A=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=({icon:x,label:S,value:b,color:C})=>e.jsxs("div",{className:`${i.statBoost} ${i[`statBoost--${C}`]}`,children:[e.jsx(x,{size:12,className:i.statBoost__icon}),e.jsx("span",{className:i.statBoost__label,children:S}),e.jsxs("span",{className:i.statBoost__value,children:["+",b]})]}),P=({meal:x})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:i.mealCard,children:[e.jsxs("div",{className:i.mealCard__header,children:[e.jsxs("div",{className:i.mealCard__info,children:[e.jsx("h3",{className:i.mealCard__title,children:x.description}),e.jsx("p",{className:i.mealCard__timestamp,children:A(x.timestamp)})]}),e.jsxs("div",{className:i.mealCard__calories,children:[e.jsx("div",{className:i.mealCard__caloriesValue,children:x.calories}),e.jsx("div",{className:i.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:i.mealCard__macros,children:[e.jsxs("div",{className:`${i.macroItem} ${i["macroItem--protein"]}`,children:[e.jsxs("div",{className:i.macroItem__value,children:[x.protein,"g"]}),e.jsx("div",{className:i.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${i.macroItem} ${i["macroItem--carbs"]}`,children:[e.jsxs("div",{className:i.macroItem__value,children:[x.carbs,"g"]}),e.jsx("div",{className:i.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${i.macroItem} ${i["macroItem--fat"]}`,children:[e.jsxs("div",{className:i.macroItem__value,children:[x.fat,"g"]}),e.jsx("div",{className:i.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:i.mealCard__additionalStats,children:[e.jsxs("div",{className:i.additionalStat,children:[e.jsx(Ye,{size:16,className:i.additionalStat__icon}),e.jsxs("div",{className:i.additionalStat__content,children:[e.jsxs("div",{className:i.additionalStat__value,children:[x.fluid_intake_ml,"ml"]}),e.jsx("div",{className:i.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:i.additionalStat,children:[e.jsx(Xe,{size:16,className:i.additionalStat__icon}),e.jsxs("div",{className:i.additionalStat__content,children:[e.jsx("div",{className:i.additionalStat__value,children:x.servings_of_fruits_vegetables}),e.jsx("div",{className:i.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:i.mealCard__statBoosts,children:[e.jsx("div",{className:i.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:i.mealCard__statBoostsGrid,children:[x.mealAffects.armorIncrease>0&&e.jsx(w,{icon:Ke,label:"ARM",value:x.mealAffects.armorIncrease,color:"blue"}),x.mealAffects.speedIncrease>0&&e.jsx(w,{icon:Je,label:"SPD",value:x.mealAffects.speedIncrease,color:"yellow"}),x.mealAffects.intelligenceIncrease>0&&e.jsx(w,{icon:Qe,label:"INT",value:x.mealAffects.intelligenceIncrease,color:"pink"}),x.mealAffects.defenseIncrease>0&&e.jsx(w,{icon:Ze,label:"DEF",value:x.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:i.mealCard__currency,children:e.jsxs("span",{className:i.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(et,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(tt,{size:15,style:{verticalAlign:"middle"}})})," "+x.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:i.drawer__header,children:e.jsxs("div",{className:i.drawer__headerContent,children:[e.jsx(fe,{className:i.drawer__headerIcon,size:32}),e.jsx("h2",{className:i.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:v,children:n?e.jsx("div",{className:i.loadingState,children:e.jsxs("div",{className:i.loadingState__content,children:[e.jsx("div",{className:i.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:i.loadingState__subtext,children:"📖 Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:i.emptyState,children:[e.jsx(fe,{className:i.emptyState__icon,size:48}),e.jsx("div",{className:i.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:i.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:i.mealsList,children:[a.map((x,S)=>e.jsx(P,{meal:x},`${x.id}-${S}`)),l&&e.jsx("div",{className:i.loadingMore,children:e.jsxs("div",{className:i.loadingMore__content,children:[e.jsx("div",{className:i.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:i.loadingMore__subtext,children:"⚡ Fetching next batch"})]})}),!c&&a.length>0&&e.jsxs("div",{className:i.endOfList,children:[e.jsx("div",{className:i.endOfList__text,children:"🎯 You've reached the end of your meal log!"}),e.jsxs("div",{className:i.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},ka="_container_1chaz_4",Ca="_heading_1chaz_10",wa="_rangeButtons_1chaz_16",Ta="_button_1chaz_23",Aa="_activeButton_1chaz_37",Ia="_checkmarkPath_1chaz_53",V={container:ka,heading:Ca,rangeButtons:wa,button:Ta,activeButton:Aa,checkmarkPath:Ia,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Na=({onWeightChange:t})=>{var c,g;const{userData:a}=R(),r=()=>{var y,v;const f=(y=a==null?void 0:a.bodyStats)==null?void 0:y.weightLogs;if(Array.isArray(f)&&f.length>0){const u=[...f].sort((T,A)=>new Date(T.date).getTime()-new Date(A.date).getTime());return u[u.length-1].weight}return((v=a==null?void 0:a.bodyStats)==null?void 0:v.weight)??150},[n,s]=o.useState(r());o.useEffect(()=>{s(r())},[(c=a==null?void 0:a.bodyStats)==null?void 0:c.weightLogs,(g=a==null?void 0:a.bodyStats)==null?void 0:g.weight]);const l=f=>{const y=parseFloat((n+f).toFixed(1));y>=0&&s(y)},h=()=>{t(n)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(st,{id:"current-weight",type:"number",step:.1,value:n,onChange:f=>{const y=parseFloat(f.target.value);!isNaN(y)&&y>=0?s(y):f.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(te,{onClick:()=>l(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"▲"}),e.jsx(te,{onClick:()=>l(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"▼"})]}),e.jsx(te,{onClick:h,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},La={week:7,month:30,threeMonths:90,all:1/0},Fa=t=>t<=7?0:t<=30?4:t<=90?15:30,Ba=()=>{var v;const[t,a]=o.useState(!1),{userData:r,setUserData:n}=R(),[s,l]=o.useState("week"),c=[...((v=r==null?void 0:r.bodyStats)==null?void 0:v.weightLogs)??[]].sort((u,T)=>new Date(u.date).getTime()-new Date(T.date).getTime()).map(u=>({date:typeof u.date=="string"?u.date.slice(0,10):u.date instanceof Date?u.date.toISOString().slice(0,10):"",weight:u.weight})),g=s==="all"?c:c.slice(-La[s]),f=Fa(g.length),y=async u=>{if(!r)return;const T={date:new Date().toISOString(),weight:u},A={...r,bodyStats:{...r.bodyStats,weight:u,weightLogs:[...r.bodyStats.weightLogs??[],T]}};try{const{data:w}=await W.post("users/update",A);n(w),a(!0),setTimeout(()=>a(!1),1500)}catch(w){console.error(w)}};return e.jsxs("div",{className:V.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:V.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:V.heading,children:"Log Your Weight"}),e.jsx("div",{className:V.rangeButtons,children:["week","month","threeMonths","all"].map(u=>e.jsx(te,{className:s===u?V.activeButton:V.button,onClick:()=>l(u),children:u==="week"?"1W":u==="month"?"1M":u==="threeMonths"?"3M":"ALL"},u))}),e.jsx(at,{width:"100%",height:300,children:e.jsxs(rt,{data:g,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(nt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(ot,{dataKey:"date",tickFormatter:u=>ye(new Date(u),"MM/dd"),stroke:"#ff9900",interval:f,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(lt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(it,{labelFormatter:u=>ye(new Date(u),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(ct,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Na,{onWeightChange:y})})]})},Pa=o.forwardRef(function({onClick:a,to:r,...n},s){const l=dt(r),h=pt(r);return e.jsx(ht,{...n,href:l,onClick:c=>{a==null||a(c),c.defaultPrevented||h(c)},ref:s})}),Ma=()=>{const[t,a]=o.useState("none"),{pathname:r}=xt();return e.jsxs("div",{className:"app-header",children:[e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(H,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(ut,{"aria-hidden":!0})})}),e.jsxs(be,{children:[e.jsx($,{onClick:()=>a("logWeight"),children:"Log Weight"}),e.jsx($,{onClick:()=>a("logFood"),children:"Log Food"}),e.jsx($,{onClick:()=>a("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(e.Fragment,{children:e.jsx("nav",{children:e.jsx(L,{direction:"row",gap:1,role:"list",children:we.map(n=>e.jsx("div",{role:"listitem",children:e.jsx(Pa,{active:r===n.path,to:n.path,children:n.name})},n.name))})})}),e.jsx(e.Fragment,{children:e.jsx(gt,{placement:"top",content:"User Settings",children:e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(H,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(mt,{"aria-hidden":!0})})}),e.jsxs(be,{children:[e.jsx($,{onClick:()=>a("mealHist"),children:"View Meals"}),e.jsx($,{onClick:()=>a("workoutHist"),children:"View Workouts"}),e.jsx($,{onClick:es,children:"Logout"})]})]})})}),e.jsxs(_t,{open:t!=="none",onOpenChange:()=>a("none"),position:"bottom",children:[e.jsx(ft,{onClick:()=>a("none")}),t==="logFood"&&e.jsx(ts,{}),t==="logWorkout"&&e.jsx(js,{setDrawerView:a}),t==="mealHist"&&e.jsx(Sa,{}),t==="logWeight"&&e.jsx(Ba,{})]})]})},za="_myBackground_1pm88_1",Oa="_loginScreen_1pm88_13",Ea="_overlay_1pm88_29",Ra="_loginContainer_1pm88_39",Da="_googleButton_1pm88_49",xe={myBackground:za,loginScreen:Oa,overlay:Ea,loginContainer:Ra,googleButton:Da};function Wa(){const{setUserData:t}=R(),[a,r]=o.useState(!1),n=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const l=await(await yt(re,Zt)).user.getIdToken(),{data:h}=await W.post("/auth/google",{token:l}),g=(await W.get(`/users/${h.uid}`)).data;t(g),console.log("User saved or retrieved from DB:",h)}catch(s){console.error(s)}r(!0)};return e.jsx("div",{className:xe.loginScreen,children:e.jsx("div",{className:xe.loginContainer,children:a?e.jsx(ke,{size:"large","aria-label":"loading",role:"status"}):e.jsx(H,{className:xe.googleButton,onClick:n,children:"Embark with Google"})})})}const Ua=()=>{const{userData:t,setUserData:a}=R();if(!t)return e.jsx(d,{children:"Loading..."});const[r,n]=o.useState(0),[s,l]=o.useState(t),[h,c]=o.useState(1),[g,f]=o.useState(1.2),[y,v]=o.useState(0),[u,T]=o.useState(Math.floor(s.bodyStats.height/12)),[A,w]=o.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(d,{children:"Loading..."});o.useEffect(()=>{const m=u*12+A;console.log("total inches : ",m),l(_=>({..._,bodyStats:{..._.bodyStats,height:m}}))},[u,A]);const P=m=>{const{weight:_,height:z,age:E,sex:D}=m;return D==="male"?10*(_/2.205)+6.25*(z*2.54)-5*E+5:10*(_/2.205)+6.25*(z*2.54)-5*E-161},x=m=>{const _=g+y;return m*_},S=async m=>{m.preventDefault();const _=s.bodyStats.weight,z={date:new Date,weight:_},E=P(s.bodyStats),D=x(E),K=s.goal.goalType==="weight_loss"?D-h*3500/7:s.goal.goalType==="muscle_gain"?D+300:D,ne=Math.round(K/100),U={...s,bodyStats:{...s.bodyStats,bmr:E,tdee:D,weightLogs:[...s.bodyStats.weightLogs??[],z]},goal:{...s.goal,dailyCalorieGoal:K,dailyCurrencyTotal:ne,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",U);try{const{data:Y}=await W.post("/users/update",{...U});a(Y)}catch(Y){console.error("Error updating user data:",Y)}},b=(m,_,z)=>{const{name:E,value:D}=m.target;l({...s,[_]:{...s[_],[z||E]:D}})},C=(m,_,z)=>{l({...s,[m]:{...s[m],[_]:z}})},k=()=>{if(r===0){const{weight:m,height:_,age:z,sex:E}=s.bodyStats;return m>0&&_>0&&z>0&&["male","female"].includes(E)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(r===2){const{name:m,currentPet:_}=s.pet;return m.trim()!==""&&["puppy","kitten","bird"].includes(_)}return!0},M=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(j,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(N,{grow:1,children:e.jsxs(L,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(N,{children:e.jsx(d,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(N,{children:e.jsx(jt,{children:M.map((m,_)=>e.jsx(vt,{label:m,stage:r===_?"active":_<r?"completed":"pending"},_))})}),e.jsxs("form",{onSubmit:S,children:[r===0&&e.jsxs(L,{align:"stretch",gap:2,children:[e.jsx(d,{styleAs:"h2",children:"Body Stats"}),e.jsxs(G,{children:[e.jsx(q,{children:"Weight (lbs)"}),e.jsx(ee,{value:s.bodyStats.weight,onChange:m=>b(m,"bodyStats","weight")})]}),e.jsxs(G,{children:[e.jsx(q,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(se,{value:u.toString()+" ft",onSelectionChange:(m,_)=>T(Number(_)),children:[2,3,4,5,6,7,8,9].map(m=>e.jsxs(ae,{value:m.toString(),children:[m," ft"]},m))}),e.jsx(se,{value:A.toString()+" ft",onSelectionChange:(m,_)=>w(Number(_)),children:Array.from({length:12},(m,_)=>e.jsxs(ae,{value:_.toString(),children:[_," in"]},_))})]})]}),e.jsxs(G,{children:[e.jsx(q,{children:"Sex"}),e.jsxs(j,{direction:"row",gap:2,children:[e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(j,{direction:"column",align:"center",gap:1,children:[e.jsx(I,{symbol:"🙎🏻‍♂️",size:32}),e.jsx(d,{children:"Male"})]})})}),e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(j,{direction:"column",align:"center",gap:1,children:[e.jsx(I,{symbol:"🙎🏻‍♀️",size:32}),e.jsx(d,{children:"Female"})]})})})]})]}),e.jsxs(G,{children:[e.jsx(q,{children:"Age (years)"}),e.jsx(ee,{value:s.bodyStats.age,onChange:m=>b(m,"bodyStats","age")})]})]}),r===1&&e.jsxs(L,{gap:2,children:[e.jsx(d,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(j,{direction:"row",gap:2,children:[e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(j,{direction:"column",align:"center",gap:1,children:e.jsxs(N,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(I,{symbol:"🔥",size:24}),e.jsx(d,{children:"Weight Loss"})]})})})}),e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(j,{direction:"column",align:"center",gap:1,children:e.jsxs(N,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(I,{symbol:s.bodyStats.sex==="male"?"🏋️‍♂️":"🏋🏽‍♀️",size:24}),e.jsx(d,{children:"Muscle Gain"})]})})})}),e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(j,{direction:"column",align:"center",gap:1,children:e.jsxs(N,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(I,{symbol:"🛠️",size:24}),e.jsx(d,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(G,{children:[e.jsx(d,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(bt,{max:2,min:.5,step:.25,value:h,onChange:(m,_)=>c(_),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(L,{gap:1,children:[e.jsx(d,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(d,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(j,{direction:"column",gap:1,children:[e.jsx(F,{onClick:()=>f(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"💻",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(F,{onClick:()=>f(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"👩‍🏫",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(F,{onClick:()=>f(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"👩‍⚕️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(F,{onClick:()=>f(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"👷‍♂️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(L,{gap:1,children:[e.jsx(d,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(d,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(j,{direction:"column",gap:1,children:[e.jsx(F,{onClick:()=>v(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"🛋️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Sedentary"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(F,{onClick:()=>v(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"🚶‍♀️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Lightly Active"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(F,{onClick:()=>v(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"🏃‍♂️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Moderately Active"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(F,{onClick:()=>v(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"🏋️‍♀️",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Very Active"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(F,{onClick:()=>v(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:y===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(j,{direction:"row",align:"center",gap:2,children:[e.jsx(I,{symbol:"💪",size:30}),e.jsxs(L,{gap:0,children:[e.jsx(d,{styleAs:"h2",children:"Extremely Active"}),e.jsx(d,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(L,{gap:2,children:[e.jsx(d,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(G,{children:[e.jsx(q,{children:"Pet Name"}),e.jsx(ee,{value:s.pet.name,onChange:m=>b(m,"pet","name")})]}),e.jsxs(G,{children:[e.jsx(q,{children:"Pet Type"}),e.jsxs(j,{direction:"row",gap:2,children:[e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(j,{direction:"column",align:"center",gap:1,children:e.jsxs(N,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(I,{symbol:"🐶",size:24}),e.jsx(d,{children:"Dog"})]})})})}),e.jsx(N,{grow:1,children:e.jsx(F,{onClick:()=>C("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(j,{direction:"column",align:"center",gap:1,children:e.jsxs(N,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(I,{symbol:"🐱",size:24}),e.jsx(d,{children:"Cat"})]})})})})]})]})]}),e.jsx(N,{style:{paddingTop:"20px"},children:e.jsxs(j,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(H,{sentiment:"neutral",appearance:"solid",onClick:()=>n(r-1),children:"Previous"}),r<M.length-1&&e.jsx(H,{sentiment:"accented",appearance:"solid",disabled:!k(),onClick:()=>n(r+1),children:"Next"}),r===M.length-1&&e.jsx(H,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!k(),onClick:S,children:"Start Your Adventure!"})]})})]})]})})})};function Ha(){const[t,a]=o.useState(null),[r,n]=o.useState(!0),{userData:s,setUserData:l}=R();return o.useEffect(()=>{const h=St.throttle(()=>{console.log("Fetching user object..."),W.get(`/users/${s==null?void 0:s.uid}`).then(g=>{l(g.data),console.log("User data synced:",g.data)}).catch(g=>{console.error("Failed to fetch user:",g)})},1e4),c=()=>{console.log("User came back!"),h()};return s&&window.addEventListener("focus",c),()=>{s&&(window.removeEventListener("focus",c),h.cancel())}},[]),o.useEffect(()=>{const h=kt(re,c=>{console.log("Auth state changed:",c),console.log("User Data in App useEffect:",s),a(c),n(!1);const g=localStorage.getItem("userData");g&&l(JSON.parse(g))});return()=>h()},[]),console.log("App render - Loading:",r,"User:",t,"UserData:",s),r?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(ce,{mode:"dark",children:e.jsx(Wa,{})}):s.bodyStats.weight===0?e.jsx(ce,{mode:"dark",children:e.jsx(Ua,{})}):e.jsx(ce,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:e.jsx(Ct,{children:we.map(h=>e.jsx(wt,{path:h.path,element:h.element},h.name))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(Ma,{})})]})})}Tt.createRoot(document.getElementById("root")).render(e.jsx(At.StrictMode,{children:e.jsx(It,{children:e.jsx(zt,{children:e.jsx(ls,{children:e.jsx(_s,{children:e.jsx(Ha,{})})})})})}));
