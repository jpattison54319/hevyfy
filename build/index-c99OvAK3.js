import{i as ct,g as dt,a as pt,s as ut,G as ht,b as mt,c as _t,d as xt,r,j as e,C as Be,T as v,B as ae,P as Re,S as Xe,e as $e,f as Oe,I as ue,h as X,D as he,O as me,U as We,k as gt,A as ft,l as yt,R as Ke,m as Ye,n as jt,o as vt,F as St,p as _e,H as K,q as bt,L as Ct,t as wt,X as kt,u as ze,Y as Nt,v as It,w as Tt,x as fe,y as Lt,Z as Bt,z as Ft,E as At,J as Pt,N as Et,K as Mt,M as He,Q as De,V as Rt,W as Ue,_ as Z,$ as Qe,a0 as Je,a1 as Ze,a2 as $t,a3 as Ot,a4 as Wt,a5 as zt,a6 as Ht,a7 as A,a8 as D,a9 as Dt,aa as Ut,ab as ee,ac as se,ad as V,ae as Gt,af as qt,ag as Vt,ah as Xt,ai as Ge,aj as Kt,ak as Yt,al as Qt,am as ye,an as je,ao as ve,ap as Jt,aq as Fe,ar as Ae,as as Pe,at as Ee,au as Zt,av as es,aw as ts,ax as ss,ay as Se,az as ns,aA as as,aB as os,aC as rs,aD as is,aE as ls,aF as cs,aG as ds,aH as le,aI as ps,aJ as us,aK as ce,aL as hs,aM as ms,aN as _s}from"./vendor-BMoyuBP8.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const xs={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},et=ct(xs);dt(et);const xe=pt(et);ut(xe,mt).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const gs=new ht;function fs(){_t(xe).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const W=xt.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),tt=r.createContext(void 0),ys=({children:t})=>{const[n,o]=r.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),a=s=>{o(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(tt.Provider,{value:{userData:n,setUserData:a},children:t})},G=()=>{const t=r.useContext(tt);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:n,setUserData:o}=t,a=r.useMemo(()=>{if(n)return Math.floor(n.goal.dailyCalorieGoal/100)},[n]);return{userData:n,setUserData:o,dailyCurrency:a}},js=()=>{const{userData:t,setUserData:n}=G(),o=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[a,s]=r.useState(""),[i,h]=r.useState(null),[d,m]=r.useState(!1),[u,_]=r.useState(null),[g,M]=r.useState(null),[S,F]=r.useState(!1),P=async()=>{var B,k;if(a.trim()){m(!0),_(null),h(null);try{const{data:y}=await W.post("/chatnutrition",{message:a}),j=new Date().toISOString(),l=Intl.DateTimeFormat().resolvedOptions().timeZone,c={...y,description:a,userId:t==null?void 0:t.uid,fullTimeStamp:j,userTimeZone:l};console.log(c),M(c),F(!0)}catch(y){const j=y,l=(B=j.response)==null?void 0:B.data;((k=j.response)==null?void 0:k.status)===400?_((l==null?void 0:l.suggestion)||"Please describe a specific food item or meal"):_("Failed to get nutrition info. Try again.")}finally{m(!1)}}},z=async()=>{if(g){m(!0),_(null);try{const B=await W.post("/meal/addMeal",g),{mealAffects:k,updatedUser:y}=B.data;n(y);const j=[];k.currency&&j.push(`ðŸ¦´ This meal cost ${k.currency} ${o}!`),k.armorIncrease&&j.push(`ðŸ›¡ï¸ +${k.armorIncrease.toFixed(1)} Armor from protein`),k.defenseIncrease&&j.push(`ðŸ§± +${k.defenseIncrease.toFixed(1)} Defense from fiber`),k.speedIncrease&&j.push(`ðŸ’¨ +${k.speedIncrease.toFixed(1)} Speed from hydration`),k.intelligenceIncrease&&j.push(`ðŸ§  +${k.intelligenceIncrease} Intelligence from fruits & vegetables`),j.length===0&&j.push("Seems like this meal didnt contain any sustenance!"),h(j.join(`
`))}catch{_("Failed to confirm meal. Try again.")}finally{m(!1),M(null),F(!1),s("")}}},f=()=>{M(null),F(!1),h(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:a,onChange:B=>s(B.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),S?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[o==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(g.calories/100)," ",o]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:z,disabled:d,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:d?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:d?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:d?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:f,disabled:d,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:d?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:d?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:P,disabled:d||!a.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:d||!a.trim()?"#332200":"#1a1100",color:d||!a.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:d||!a.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:d||!a.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:d?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),u&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",u]})}),i&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:i})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},R=({symbol:t,label:n="",className:o="",style:a={},size:s=24})=>e.jsx("span",{role:"img","aria-label":n||void 0,"aria-hidden":n?"false":"true",className:o,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...a},children:t}),vs={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},Ss=({petType:t,selectedRpe:n,onChange:o})=>{const a=vs[t],s=i=>{o(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:a.map(i=>e.jsxs(Be,{onClick:()=>s(i.rpe),style:{cursor:"pointer",border:n===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:n===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(R,{size:32,symbol:i.emoji}),e.jsx(v,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(v,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},bs=({open:t,onClose:n})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(R,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:n,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,st=r.createContext(void 0),Me=()=>{const t=r.useContext(st);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let Cs=0;const ws=({children:t})=>{const[n,o]=r.useState([]),[a,s]=r.useState(null);r.useEffect(()=>{!a&&n.length>0&&(s(n[0]),o(d=>d.slice(1)))},[n,a]),r.useEffect(()=>{if(!a)return;const d=a.duration??3e3,m=setTimeout(()=>{s(null)},d);return()=>clearTimeout(m)},[a]);const i=r.useCallback(d=>{const m=++Cs;o(u=>[...u,{id:m,...d}])},[]),h=r.useCallback(()=>{s(null)},[]);return e.jsxs(st.Provider,{value:{addToast:i,removeToast:h},children:[t,a&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:a.content},a.id)})]})},ks="_levelUpContainer_vq3kq_1",Ns="_levelUpPulse_vq3kq_1",Is="_shimmer_vq3kq_1",Ts="_emoji_vq3kq_32",Ls="_bounce_vq3kq_1",Bs="_levelText_vq3kq_41",Fs="_levelNumber_vq3kq_54",As="_celebration_vq3kq_67",Ps="_fadeInUp_vq3kq_1",oe={levelUpContainer:ks,levelUpPulse:Ns,shimmer:Is,emoji:Ts,bounce:Ls,levelText:Bs,levelNumber:Fs,celebration:As,fadeInUp:Ps},nt=r.createContext(void 0),Es=({children:t})=>{const[n,o]=r.useState(null),[a,s]=r.useState(void 0),i=({content:d,style:m})=>{o(d),s(m)},h=()=>{o(null),s(void 0)};return e.jsxs(nt.Provider,{value:{showSplash:i,hideSplash:h},children:[t,n&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...a},onClick:h,children:[n,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(ae,{onClick:h,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Ms=()=>{const t=r.useContext(nt);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},Rs={1:.5,2:1,3:1.5,4:2.2},$s=({setDrawerView:t})=>{const{userData:n,setUserData:o}=G(),{addToast:a}=Me(),{showSplash:s}=Ms(),[i,h]=r.useState(!1),[d,m]=r.useState("WEIGHTS"),[u,_]=r.useState("DURATION"),[g,M]=r.useState(""),[S,F]=r.useState(""),[P,z]=r.useState(""),[f,B]=r.useState(null),[k,y]=r.useState(""),j=["WEIGHTS","CARDIO","MOBILITY","SPORT"],l=["DURATION","DISTANCE"],[c,p]=r.useState(!1),I=Array.from({length:12},(w,Q)=>Q),N=Array.from({length:60},(w,Q)=>Q),[C,L]=r.useState({strength:0,agility:0,pet:0});console.log(S),console.log(f);function $(){const w=(Number(S)||0)*60+(Number(P)||0);console.log("totalDuration ",w);const Q=Rs[f??2];let Y=0;w>0?Y=Math.round(w*10*Q):Number(g)>0&&(Y=Math.round(Number(g)*125*Q)),console.log("totalXp ",Y);let re=0,ie=0;switch(d){case"WEIGHTS":re=Math.round(Y/100);break;case"CARDIO":ie=Math.round(Y/100);break;case"MOBILITY":case"SPORT":const it=Y/2/100,lt=Y/2/100;re=Math.round(it),ie=Math.round(lt);break}return console.log("final ",{strength:re,agility:ie,pet:Y}),{strength:re,agility:ie,pet:Y}}const q=j.includes(d)&&l.includes(u)&&(g!==""||S!==""||P!=="")&&f!==null;function O(){M(""),F(""),z(""),B(null),y(""),m("WEIGHTS"),_("DURATION")}const J=async()=>{const w=$();if(L(w),!n||!n.uid){alert("User not loaded properly.");return}const Q=u==="DURATION"?(Number(S)||0)*60+(Number(P)||0):0;try{const{data:Y}=await W.post("/workout/logWorkout",{userId:n.uid,logType:"manual",workoutType:d,cardioMode:u,duration:Q,distance:u==="DISTANCE"&&Number(g)||0,rpe:f,notes:k,workoutXp:w});o(Y.updatedUser),O(),a({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(R,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.pet," PET XP"]}),w.strength>0&&w.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]}):w.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",w.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{Y.levelUp&&s({content:e.jsxs("div",{className:oe.levelUpContainer,children:[e.jsx("div",{className:oe.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:oe.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:oe.levelNumber,children:["LEVEL ",Y.updatedUser.pet.level]}),e.jsx("div",{className:oe.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(Y){console.error(Y),alert("There was an error logging your workout.")}};return i?e.jsx(Re,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(Xe,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Re,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(bs,{open:c,onClose:()=>p(!1)}),e.jsx(v,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(v,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx($e,{value:d??"",onChange:w=>m(w.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:j.map(w=>e.jsx(Oe,{value:w,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:w},w))}),d==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx($e,{value:u??"",onChange:w=>{_(w.currentTarget.value),M(""),F(""),z("")},style:{marginBottom:16},children:l.map(w=>e.jsx(Oe,{value:w,appearance:w==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:w},w))})]}),u==="DISTANCE"&&d==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(v,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(ue,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:g,onChange:w=>M(w.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(v,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(X,{direction:"row",gap:2,children:[e.jsx(he,{value:S+" hr(s)",onSelectionChange:(w,Q)=>F(Q[0]??""),placeholder:"Hours",children:I.map(w=>e.jsxs(me,{value:String(w),children:[w," hr"]},w))}),e.jsx(he,{value:P+" min(s)",onSelectionChange:(w,Q)=>z(Q[0]??""),placeholder:"Minutes",children:N.map(w=>e.jsxs(me,{value:String(w),children:[w<10?`0${w}`:w," min"]},w))})]})]}),e.jsx(v,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(Ss,{selectedRpe:f,onChange:w=>B(w),petType:(n==null?void 0:n.pet.currentPet)??"puppy"})}),e.jsx(v,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:k,onChange:w=>y(w.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(ae,{onClick:J,disabled:!q,style:{opacity:q?1:.4,cursor:q?"pointer":"not-allowed",color:q?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:q?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Os="_backdrop_1mk9a_9",Ws="_drawer_1mk9a_17",zs="_drawer__header_1mk9a_34",Hs="_drawer__headerContent_1mk9a_41",Ds="_drawer__headerIcon_1mk9a_46",Us="_drawer__title_1mk9a_49",Gs="_drawer__closeButton_1mk9a_55",qs="_drawer__content_1mk9a_67",Vs="_mealCard_1mk9a_73",Xs="_mealCard__header_1mk9a_85",Ks="_mealCard__info_1mk9a_91",Ys="_mealCard__title_1mk9a_94",Qs="_mealCard__timestamp_1mk9a_100",Js="_mealCard__calories_1mk9a_105",Zs="_mealCard__caloriesValue_1mk9a_108",en="_mealCard__caloriesLabel_1mk9a_115",tn="_mealCard__macros_1mk9a_119",sn="_mealCard__additionalStats_1mk9a_125",nn="_mealCard__statBoosts_1mk9a_131",an="_mealCard__statBoostsTitle_1mk9a_135",on="_mealCard__statBoostsGrid_1mk9a_141",rn="_mealCard__currency_1mk9a_146",ln="_mealCard__currencyText_1mk9a_150",cn="_macroItem_1mk9a_156",dn="_macroItem__value_1mk9a_162",pn="_macroItem__label_1mk9a_168",un="_additionalStat_1mk9a_182",hn="_additionalStat__icon_1mk9a_190",mn="_additionalStat__content_1mk9a_193",_n="_additionalStat__value_1mk9a_196",xn="_additionalStat__label_1mk9a_203",gn="_statBoost_1mk9a_212",fn="_statBoost__icon_1mk9a_221",yn="_statBoost__label_1mk9a_236",jn="_statBoost__value_1mk9a_239",vn="_loadingState_1mk9a_244",Sn="_loadingState__content_1mk9a_248",bn="_pulse_1mk9a_1",Cn="_loadingState__text_1mk9a_251",wn="_loadingState__subtext_1mk9a_255",kn="_loadingMore_1mk9a_260",Nn="_loadingMore__content_1mk9a_264",In="_loadingMore__text_1mk9a_267",Tn="_loadingMore__subtext_1mk9a_271",Ln="_emptyState_1mk9a_276",Bn="_emptyState__icon_1mk9a_280",Fn="_emptyState__text_1mk9a_284",An="_emptyState__subtext_1mk9a_288",Pn="_endOfList_1mk9a_293",En="_endOfList__text_1mk9a_298",Mn="_endOfList__subtext_1mk9a_303",Rn="_mealsList_1mk9a_308",$n="_demoApp_1mk9a_314",On="_demoApp__container_1mk9a_319",Wn="_demoApp__title_1mk9a_323",zn="_demoApp__button_1mk9a_330",x={backdrop:Os,drawer:Ws,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:zs,drawer__headerContent:Hs,drawer__headerIcon:Ds,drawer__title:Us,drawer__closeButton:Gs,drawer__content:qs,mealCard:Vs,mealCard__header:Xs,mealCard__info:Ks,mealCard__title:Ys,mealCard__timestamp:Qs,mealCard__calories:Js,mealCard__caloriesValue:Zs,mealCard__caloriesLabel:en,mealCard__macros:tn,mealCard__additionalStats:sn,mealCard__statBoosts:nn,mealCard__statBoostsTitle:an,mealCard__statBoostsGrid:on,mealCard__currency:rn,mealCard__currencyText:ln,macroItem:cn,macroItem__value:dn,macroItem__label:pn,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:un,additionalStat__icon:hn,additionalStat__content:mn,additionalStat__value:_n,additionalStat__label:xn,statBoost:gn,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:fn,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:yn,statBoost__value:jn,loadingState:vn,loadingState__content:Sn,pulse:bn,loadingState__text:Cn,loadingState__subtext:wn,loadingMore:kn,loadingMore__content:Nn,loadingMore__text:In,loadingMore__subtext:Tn,emptyState:Ln,emptyState__icon:Bn,emptyState__text:Fn,emptyState__subtext:An,endOfList:Pn,endOfList__text:En,endOfList__subtext:Mn,mealsList:Rn,demoApp:$n,demoApp__container:On,demoApp__title:Wn,demoApp__button:zn},Hn=()=>{const{userData:t}=G(),[n,o]=r.useState([]),[a,s]=r.useState(!1),[i,h]=r.useState(!1),[d,m]=r.useState(!0),[u,_]=r.useState(0),g=r.useRef(null),M=10,S=async(f=u,B=!1)=>{B?s(!0):h(!0);try{const y=(await W.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${M}&offset=${f}`)).data,j=y.meals||[];o(B?j:p=>[...p,...j]);const l=y.total||0,c=f+j.length;m(c<l),_(f+j.length)}catch(k){console.error("Error fetching meals:",k)}s(!1),h(!1)};r.useEffect(()=>{S(0,!0)},[]),r.useEffect(()=>{const f=()=>{const k=document.querySelector(".saltDrawer");if(!k)return;const{scrollTop:y,scrollHeight:j,clientHeight:l}=k;j-y<=l+100&&d&&!i&&S(u,!1)},B=document.querySelector(".saltDrawer");return B&&B.addEventListener("scroll",f),()=>{B&&B.removeEventListener("scroll",f)}},[u,d,i]);const F=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=({icon:f,label:B,value:k,color:y})=>e.jsxs("div",{className:`${x.statBoost} ${x[`statBoost--${y}`]}`,children:[e.jsx(f,{size:12,className:x.statBoost__icon}),e.jsx("span",{className:x.statBoost__label,children:B}),e.jsxs("span",{className:x.statBoost__value,children:["+",k]})]}),z=({meal:f})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:x.mealCard,children:[e.jsxs("div",{className:x.mealCard__header,children:[e.jsxs("div",{className:x.mealCard__info,children:[e.jsx("h3",{className:x.mealCard__title,children:f.description}),e.jsx("p",{className:x.mealCard__timestamp,children:F(f.timestamp)})]}),e.jsxs("div",{className:x.mealCard__calories,children:[e.jsx("div",{className:x.mealCard__caloriesValue,children:f.calories}),e.jsx("div",{className:x.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:x.mealCard__macros,children:[e.jsxs("div",{className:`${x.macroItem} ${x["macroItem--protein"]}`,children:[e.jsxs("div",{className:x.macroItem__value,children:[f.protein,"g"]}),e.jsx("div",{className:x.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${x.macroItem} ${x["macroItem--carbs"]}`,children:[e.jsxs("div",{className:x.macroItem__value,children:[f.carbs,"g"]}),e.jsx("div",{className:x.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${x.macroItem} ${x["macroItem--fat"]}`,children:[e.jsxs("div",{className:x.macroItem__value,children:[f.fat,"g"]}),e.jsx("div",{className:x.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:x.mealCard__additionalStats,children:[e.jsxs("div",{className:x.additionalStat,children:[e.jsx(gt,{size:16,className:x.additionalStat__icon}),e.jsxs("div",{className:x.additionalStat__content,children:[e.jsxs("div",{className:x.additionalStat__value,children:[f.fluid_intake_ml,"ml"]}),e.jsx("div",{className:x.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:x.additionalStat,children:[e.jsx(ft,{size:16,className:x.additionalStat__icon}),e.jsxs("div",{className:x.additionalStat__content,children:[e.jsx("div",{className:x.additionalStat__value,children:f.servings_of_fruits_vegetables}),e.jsx("div",{className:x.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:x.mealCard__statBoosts,children:[e.jsx("div",{className:x.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:x.mealCard__statBoostsGrid,children:[f.mealAffects.armorIncrease>0&&e.jsx(P,{icon:yt,label:"ARM",value:f.mealAffects.armorIncrease,color:"blue"}),f.mealAffects.speedIncrease>0&&e.jsx(P,{icon:Ke,label:"SPD",value:f.mealAffects.speedIncrease,color:"yellow"}),f.mealAffects.intelligenceIncrease>0&&e.jsx(P,{icon:Ye,label:"INT",value:f.mealAffects.intelligenceIncrease,color:"pink"}),f.mealAffects.defenseIncrease>0&&e.jsx(P,{icon:jt,label:"DEF",value:f.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:x.mealCard__currency,children:e.jsxs("span",{className:x.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(vt,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(St,{size:15,style:{verticalAlign:"middle"}})})," "+f.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x.drawer__header,children:e.jsxs("div",{className:x.drawer__headerContent,children:[e.jsx(We,{className:x.drawer__headerIcon,size:32}),e.jsx("h2",{className:x.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:g,children:a?e.jsx("div",{className:x.loadingState,children:e.jsxs("div",{className:x.loadingState__content,children:[e.jsx("div",{className:x.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:x.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):n.length===0?e.jsxs("div",{className:x.emptyState,children:[e.jsx(We,{className:x.emptyState__icon,size:48}),e.jsx("div",{className:x.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:x.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:x.mealsList,children:[n.map((f,B)=>e.jsx(z,{meal:f},`${f.id}-${B}`)),i&&e.jsx("div",{className:x.loadingMore,children:e.jsxs("div",{className:x.loadingMore__content,children:[e.jsx("div",{className:x.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:x.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!d&&n.length>0&&e.jsxs("div",{className:x.endOfList,children:[e.jsx("div",{className:x.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:x.endOfList__subtext,children:["Total meals loaded: ",n.length]})]})]})})]})},Dn="_container_1chaz_4",Un="_heading_1chaz_10",Gn="_rangeButtons_1chaz_16",qn="_button_1chaz_23",Vn="_activeButton_1chaz_37",Xn="_checkmarkPath_1chaz_53",ne={container:Dn,heading:Un,rangeButtons:Gn,button:qn,activeButton:Vn,checkmarkPath:Xn,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Kn=({onWeightChange:t})=>{var d,m;const{userData:n}=G(),o=()=>{var _,g;const u=(_=n==null?void 0:n.bodyStats)==null?void 0:_.weightLogs;if(Array.isArray(u)&&u.length>0){const M=[...u].sort((S,F)=>new Date(S.date).getTime()-new Date(F.date).getTime());return M[M.length-1].weight}return((g=n==null?void 0:n.bodyStats)==null?void 0:g.weight)??150},[a,s]=r.useState(o());r.useEffect(()=>{s(o())},[(d=n==null?void 0:n.bodyStats)==null?void 0:d.weightLogs,(m=n==null?void 0:n.bodyStats)==null?void 0:m.weight]);const i=u=>{const _=parseFloat((a+u).toFixed(1));_>=0&&s(_)},h=()=>{t(a)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(_e,{id:"current-weight",type:"number",step:.1,value:a,onChange:u=>{const _=parseFloat(u.target.value);!isNaN(_)&&_>=0?s(_):u.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(K,{onClick:()=>i(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(K,{onClick:()=>i(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(K,{onClick:h,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Yn={week:7,month:30,threeMonths:90,all:1/0},Qn=t=>t<=7?0:t<=30?4:t<=90?15:30,Jn=()=>{const[t,n]=r.useState(!1),{userData:o}=G(),[a,s]=r.useState("week"),[i,h]=r.useState([]),[d,m]=r.useState(!0);r.useEffect(()=>{(t||d)&&W.get(`/weightLogs/${o==null?void 0:o.uid}`).then(S=>{h(S.data.weightLogs)}).catch(S=>{console.log(S)}),m(!1)},[t]);const u=[...i].sort((S,F)=>new Date(S.date).getTime()-new Date(F.date).getTime()).map(S=>({date:typeof S.date=="string"?S.date.slice(0,10):S.date instanceof Date?S.date.toISOString().slice(0,10):"",weight:S.weight})),_=a==="all"?u:u.slice(-Yn[a]),g=Qn(_.length),M=async S=>{if(!o)return;const F={date:new Date().toISOString(),weight:S,userId:o.uid};try{const{data:P}=await W.post("weightLogs/addWeightLog",F);n(!0),setTimeout(()=>n(!1),1500)}catch(P){console.error(P)}};return e.jsxs("div",{className:ne.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:ne.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:ne.heading,children:"Log Your Weight"}),e.jsx("div",{className:ne.rangeButtons,children:["week","month","threeMonths","all"].map(S=>e.jsx(K,{className:a===S?ne.activeButton:ne.button,onClick:()=>s(S),children:S==="week"?"1W":S==="month"?"1M":S==="threeMonths"?"3M":"ALL"},S))}),e.jsx(bt,{width:"100%",height:300,children:e.jsxs(Ct,{data:_,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(wt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(kt,{dataKey:"date",tickFormatter:S=>{const F=new Date(S);return isNaN(F.getTime())?"":ze(F,"MM/dd")},stroke:"#ff9900",interval:g,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(Nt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(It,{labelFormatter:S=>ze(new Date(S),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(Tt,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Kn,{onWeightChange:M})})]})},Zn="_drawer__header_eofhi_2",ea="_drawer__headerContent_eofhi_24",ta="_drawer__headerIcon_eofhi_32",sa="_drawer__title_eofhi_37",na="_drawer__content_eofhi_47",aa="_loadingState_eofhi_68",oa="_emptyState_eofhi_69",ra="_loadingState__content_eofhi_82",ia="_emptyState__content_eofhi_83",la="_loadingState__spinner_eofhi_90",ca="_spin_eofhi_1",da="_loadingState__text_eofhi_107",pa="_emptyState__text_eofhi_108",ua="_loadingState__subtext_eofhi_117",ha="_emptyState__subtext_eofhi_118",ma="_emptyState__icon_eofhi_127",_a="_workoutsList_eofhi_136",xa="_workoutCard_eofhi_143",ga="_workoutCard__header_eofhi_162",fa="_workoutCard__info_eofhi_171",ya="_workoutCard__title_eofhi_175",ja="_workoutCard__timestamp_eofhi_182",va="_workoutCard__timestampIcon_eofhi_194",Sa="_workoutCard__xp_eofhi_198",ba="_workoutCard__xpValue_eofhi_210",Ca="_workoutCard__xpLabel_eofhi_217",wa="_workoutCard__sectionTitle_eofhi_222",ka="_workoutCard__exercises_eofhi_239",Na="_workoutCard__exercisesList_eofhi_243",Ia="_exerciseItem_eofhi_249",Ta="_exerciseItem__name_eofhi_258",La="_exerciseItem__sets_eofhi_265",Ba="_setCard_eofhi_272",Fa="_setCard__data_eofhi_304",Aa="_exerciseItem__set_eofhi_265",Pa="_exerciseItem__notes_eofhi_320",Ea="_workoutCard__statBoosts_eofhi_329",Ma="_workoutCard__statBoostsGrid_eofhi_338",Ra="_statBoost_eofhi_344",$a="_statBoost__icon_eofhi_376",Oa="_statBoost__label_eofhi_380",Wa="_statBoost__value_eofhi_384",za="_workoutCard__notes_eofhi_389",Ha="_workoutCard__notesText_eofhi_396",Da="_loadingMore_eofhi_404",Ua="_endOfList_eofhi_405",Ga="_loadingMore__content_eofhi_420",qa="_loadingMore__spinner_eofhi_426",Va="_loadingMore__text_eofhi_434",Xa="_loadingMore__subtext_eofhi_442",Ka="_endOfList__content_eofhi_456",Ya="_endOfList__text_eofhi_462",Qa="_endOfList__subtext_eofhi_470",b={drawer__header:Zn,drawer__headerContent:ea,drawer__headerIcon:ta,drawer__title:sa,drawer__content:na,loadingState:aa,emptyState:oa,loadingState__content:ra,emptyState__content:ia,loadingState__spinner:la,spin:ca,loadingState__text:da,emptyState__text:pa,loadingState__subtext:ua,emptyState__subtext:ha,emptyState__icon:ma,workoutsList:_a,workoutCard:xa,workoutCard__header:ga,workoutCard__info:fa,workoutCard__title:ya,workoutCard__timestamp:ja,workoutCard__timestampIcon:va,workoutCard__xp:Sa,workoutCard__xpValue:ba,workoutCard__xpLabel:Ca,workoutCard__sectionTitle:wa,workoutCard__exercises:ka,workoutCard__exercisesList:Na,exerciseItem:Ia,exerciseItem__name:Ta,exerciseItem__sets:La,setCard:Ba,setCard__data:Fa,exerciseItem__set:Aa,exerciseItem__notes:Pa,workoutCard__statBoosts:Ea,workoutCard__statBoostsGrid:Ma,statBoost:Ra,"statBoost--red":"_statBoost--red_eofhi_358","statBoost--yellow":"_statBoost--yellow_eofhi_364","statBoost--pink":"_statBoost--pink_eofhi_370",statBoost__icon:$a,statBoost__label:Oa,statBoost__value:Wa,workoutCard__notes:za,workoutCard__notesText:Ha,loadingMore:Da,endOfList:Ua,loadingMore__content:Ga,loadingMore__spinner:qa,loadingMore__text:Va,loadingMore__subtext:Xa,endOfList__content:Ka,endOfList__text:Ya,endOfList__subtext:Qa},Ja=()=>{const{userData:t}=G(),[n,o]=r.useState([]),[a,s]=r.useState(!1),[i,h]=r.useState(!1),[d,m]=r.useState(!0),[u,_]=r.useState(0),g=r.useRef(null),M=10,S=async(l=u,c=!1)=>{c?s(!0):h(!0);try{const I=(await W.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${M}&offset=${l}`)).data,N=I.workouts||[];o(c?N:$=>[...$,...N]);const C=I.total||0,L=l+N.length;m(L<C),_(l+N.length)}catch(p){console.error("Error fetching workouts:",p)}s(!1),h(!1)};r.useEffect(()=>{S(0,!0)},[]),r.useEffect(()=>{const l=()=>{const p=document.querySelector(".saltDrawer");if(!p)return;const{scrollTop:I,scrollHeight:N,clientHeight:C}=p;N-I<=C+100&&d&&!i&&S(u,!1)},c=document.querySelector(".saltDrawer");return c&&c.addEventListener("scroll",l),()=>{c&&c.removeEventListener("scroll",l)}},[u,d,i]);const F=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=l=>{const c=l*2.20462;return Math.round(c*2)/2},z=l=>{const c=P(l);return c%1===0?`${c}`:`${c.toFixed(1)}`},f=l=>{const c=Math.floor(l/60),p=l%60;return c>0?`${c}m ${p}s`:`${p}s`},B=l=>l>=1e3?`${(l/1e3).toFixed(2)}km`:`${l}m`,k=l=>{const c=[];if(l.weight_kg||l.weightKg){const p=l.weight_kg||l.weightKg;c.push(`${z(p)}lbs`)}return l.reps&&c.push(`Ã— ${l.reps}`),l.distance_meters&&!l.reps&&c.push(B(l.distance_meters)),l.duration_seconds&&!l.reps&&c.push(f(l.duration_seconds)),c.length===0?"â€”":c.join(" ")},y=({icon:l,label:c,value:p,color:I})=>e.jsxs("div",{className:`${b.statBoost} ${b[`statBoost--${I}`]}`,children:[e.jsx(l,{size:16,className:b.statBoost__icon}),e.jsx("span",{className:b.statBoost__label,children:c}),e.jsxs("span",{className:b.statBoost__value,children:["+",p]})]}),j=({workout:l})=>{var N,C;l.logType;const c=l.logType==="routine",p=l.logType==="hevy",I=p?l.petAffects.pet:l.workoutXp.pet;return e.jsxs("div",{className:b.workoutCard,children:[e.jsxs("div",{className:b.workoutCard__header,children:[e.jsxs("div",{className:b.workoutCard__info,children:[e.jsx("h3",{className:b.workoutCard__title,children:c?`${l.routineDay} ROUTINE`:p?`${((N=l.title)==null?void 0:N.toUpperCase())||"HEVY WORKOUT"}`:`${(C=l==null?void 0:l.workoutType)==null?void 0:C.toUpperCase()} SESSION`}),e.jsxs("p",{className:b.workoutCard__timestamp,children:[e.jsx(Lt,{size:12,className:b.workoutCard__timestampIcon}),F(p?l.startTime:l.timestamp)]})]}),e.jsxs("div",{className:b.workoutCard__xp,children:[e.jsx("div",{className:b.workoutCard__xpValue,children:I}),e.jsx("div",{className:b.workoutCard__xpLabel,children:"XP"})]})]}),p&&e.jsxs("div",{className:b.workoutCard__exercises,children:[e.jsxs("div",{className:b.workoutCard__sectionTitle,children:[e.jsx(fe,{size:14}),"EXERCISES"]}),e.jsx("div",{className:b.workoutCard__exercisesList,children:l.exercises.map((L,$)=>{var q;return e.jsxs("div",{className:b.exerciseItem,children:[e.jsx("div",{className:b.exerciseItem__name,children:(q=L.title)==null?void 0:q.toUpperCase()}),e.jsx("div",{className:b.exerciseItem__sets,children:L.sets.map((O,J)=>e.jsx("div",{className:b.setCard,"data-set-number":J+1,children:e.jsx("div",{className:b.setCard__data,children:k(O)})},J))}),L.notes&&e.jsxs("div",{className:b.exerciseItem__notes,children:['"',L.notes,'"']})]},$)})})]}),e.jsxs("div",{className:b.workoutCard__statBoosts,children:[e.jsxs("div",{className:b.workoutCard__sectionTitle,children:[e.jsx(Bt,{size:14}),"Skills GAINED"]}),e.jsxs("div",{className:b.workoutCard__statBoostsGrid,children:[(p?l.petAffects.strength:l.workoutXp.strength)>0&&e.jsx(y,{icon:Ft,label:"STR",value:p?l.petAffects.strength:l.workoutXp.strength,color:"red"}),(p?l.petAffects.agility:l.workoutXp.agility)>0&&e.jsx(y,{icon:Ke,label:"AGI",value:p?l.petAffects.agility:l.workoutXp.agility,color:"yellow"})]})]}),l.notes&&e.jsxs("div",{className:b.workoutCard__notes,children:[e.jsxs("div",{className:b.workoutCard__sectionTitle,children:[e.jsx(Ye,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:b.workoutCard__notesText,children:['"',l.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:b.drawer__header,children:e.jsxs("div",{className:b.drawer__headerContent,children:[e.jsx(fe,{className:b.drawer__headerIcon,size:28}),e.jsx("h2",{className:b.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:b.drawer__content,ref:g,children:a?e.jsx("div",{className:b.loadingState,children:e.jsxs("div",{className:b.loadingState__content,children:[e.jsx("div",{className:b.loadingState__spinner}),e.jsx("div",{className:b.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:b.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):n.length===0?e.jsx("div",{className:b.emptyState,children:e.jsxs("div",{className:b.emptyState__content,children:[e.jsx(fe,{className:b.emptyState__icon,size:40}),e.jsx("div",{className:b.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:b.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:b.workoutsList,children:[n.map((l,c)=>e.jsx(j,{workout:l},`${l._id}-${c}`)),i&&e.jsx("div",{className:b.loadingMore,children:e.jsxs("div",{className:b.loadingMore__content,children:[e.jsx("div",{className:b.loadingMore__spinner}),e.jsx("div",{className:b.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:b.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!d&&n.length>0&&e.jsx("div",{className:b.endOfList,children:e.jsxs("div",{className:b.endOfList__content,children:[e.jsx("div",{className:b.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:b.endOfList__subtext,children:["TOTAL WORKOUTS: ",n.length]})]})})]})})]})},Za="_container_1y1su_2",eo="_heading_1y1su_9",to="_optionButton_1y1su_15",so="_integrationSection_1y1su_30",no="_label_1y1su_51",ao="_input_1y1su_57",oo="_saveButton_1y1su_67",te={container:Za,heading:eo,optionButton:to,integrationSection:so,label:no,input:ao,saveButton:oo};function ro(){const[t,n]=r.useState(!1),[o,a]=r.useState(""),{userData:s,setUserData:i}=G(),[h,d]=r.useState(!1),{addToast:m}=Me();function u(){console.log("saving key"),W.post("/users/hevy/saveKey",{hevyKey:o,uid:s==null?void 0:s.uid}).then(_=>{console.log(_),i(_.data.updatedUser),m({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(R,{size:32,symbol:"ðŸ‹ðŸ½ðŸ”¥ðŸ’ªðŸ¼ðŸŽ§"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"Success!"}),e.jsx("div",{style:{marginBottom:4},children:"Integrated with Hevy!"})]})]}),duration:2e3})}).catch(_=>{console.error(_)})}return r.useEffect(()=>{d(!!(s!=null&&s.hevyKey))},[s]),e.jsxs("div",{className:te.container,children:[e.jsx("h2",{className:te.heading,children:"User Settings"}),e.jsx(K,{className:te.optionButton,onClick:()=>n(_=>!_),children:"Hevy Integration"}),t&&e.jsxs("div",{className:te.integrationSection,children:[e.jsx("h3",{children:"Connect to Hevy"}),h?e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"green"},children:"âœ… Already integrated with Hevy."}),e.jsx("p",{children:"Your workouts will automatically sync from Hevy."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"red"},children:"Prerequisite: Must be a Hevy Pro member!"}),e.jsx("p",{children:"Integrate your Hevy account to automatically sync workouts logged there into this app to help your pet evolve!"}),e.jsx("p",{children:"To get your API key, go to hevy.com, log in, click 'Settings' â†’ 'Developer', generate and copy your API key, then paste it below."}),e.jsx("label",{className:te.label,htmlFor:"hevyKey",children:"Hevy API Key"}),e.jsx(_e,{id:"hevyKey",type:"text",className:te.input,placeholder:"Enter your API key",value:o,onChange:_=>a(_.target.value)}),e.jsx(K,{className:te.saveButton,onClick:u,children:"Integrate with Hevy!"})]})]})]})}r.forwardRef(function({onClick:n,to:o,...a},s){const i=At(o),h=Pt(o);return e.jsx(Et,{...a,href:i,onClick:d=>{n==null||n(d),d.defaultPrevented||h(d)},ref:s})});const io=["Pet","Skills","Quests","Routines"],lo=({selectedIndex:t,setSelectedIndex:n})=>{const[o,a]=r.useState("none"),{pathname:s}=Mt();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(He,{children:[e.jsx(De,{children:e.jsx(K,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Rt,{"aria-hidden":!0})})}),e.jsxs(Ue,{children:[e.jsx(Z,{onClick:()=>a("logWeight"),children:"Log Weight"}),e.jsx(Z,{onClick:()=>a("logFood"),children:"Log Food"}),e.jsx(Z,{onClick:()=>a("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(Qe,{selectedIndex:t,onChange:n,children:e.jsx(Je,{className:"tab-nav",children:io.map((i,h)=>e.jsx(Ze,{className:({selected:d})=>`tab-button ${d?"tab-selected":""}`,children:i},i))})}),e.jsx("div",{children:e.jsx($t,{placement:"top",content:"User Settings",children:e.jsxs(He,{children:[e.jsx(De,{children:e.jsx(K,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Ot,{"aria-hidden":!0})})}),e.jsxs(Ue,{children:[e.jsx(Z,{onClick:()=>a("mealHist"),children:"View Meals"}),e.jsx(Z,{onClick:()=>a("workoutHist"),children:"View Workouts"}),e.jsx(Z,{onClick:()=>a("settings"),children:"Settings"}),e.jsx(Z,{onClick:fs,children:"Logout"})]})]})})}),e.jsxs(Wt,{open:o!=="none",onOpenChange:()=>a("none"),position:"bottom",children:[e.jsx(zt,{onClick:()=>a("none")}),o==="logFood"&&e.jsx(js,{}),o==="logWorkout"&&e.jsx($s,{setDrawerView:a}),o==="mealHist"&&e.jsx(Hn,{}),o==="workoutHist"&&e.jsx(Ja,{}),o==="logWeight"&&e.jsx(Jn,{}),o==="settings"&&e.jsx(ro,{})]})]})},co="_myBackground_1pm88_1",po="_loginScreen_1pm88_13",uo="_overlay_1pm88_29",ho="_loginContainer_1pm88_39",mo="_googleButton_1pm88_49",be={myBackground:co,loginScreen:po,overlay:uo,loginContainer:ho,googleButton:mo};function _o(){const{setUserData:t}=G(),[n,o]=r.useState(!1),a=async()=>{o(!0),console.log("Attempting to log in with Google...");try{const i=await(await Ht(xe,gs)).user.getIdToken(),{data:h}=await W.post("/auth/google",{token:i}),m=(await W.get(`/users/${h.uid}`)).data;t(m),console.log("User saved or retrieved from DB:",h)}catch(s){console.error(s)}o(!0)};return e.jsx("div",{className:be.loginScreen,children:e.jsx("div",{className:be.loginContainer,children:n?e.jsx(Xe,{size:"large","aria-label":"loading",role:"status"}):e.jsx(ae,{className:be.googleButton,onClick:a,children:"Embark with Google"})})})}const xo=()=>{const{userData:t,setUserData:n}=G();if(!t)return e.jsx(v,{children:"Loading..."});const[o,a]=r.useState(0),[s,i]=r.useState(t),[h,d]=r.useState(1),[m,u]=r.useState(1.2),[_,g]=r.useState(0),[M,S]=r.useState(Math.floor(s.bodyStats.height/12)),[F,P]=r.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(v,{children:"Loading..."});r.useEffect(()=>{const c=M*12+F;console.log("total inches : ",c),i(p=>({...p,bodyStats:{...p.bodyStats,height:c}}))},[M,F]);const z=c=>{const{weight:p,height:I,age:N,sex:C}=c;return C==="male"?10*(p/2.205)+6.25*(I*2.54)-5*N+5:10*(p/2.205)+6.25*(I*2.54)-5*N-161},f=c=>{const p=m+_;return c*p},B=async c=>{c.preventDefault();const p=s.bodyStats.weight,I={userId:t.uid,date:new Date,weight:p},N=z(s.bodyStats),C=f(N),L=s.goal.goalType==="weight_loss"?C-h*3500/7:s.goal.goalType==="muscle_gain"?C+300:C,$=Math.round(L/100),q={...s,bodyStats:{...s.bodyStats,bmr:N,tdee:C,weight:p},goal:{...s.goal,dailyCalorieGoal:L,dailyCurrencyTotal:$,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",q);try{const{data:O}=await W.post("/users/update",{...q});n(O)}catch(O){console.error("Error updating user data:",O)}try{await W.post("/weightLogs/addWeightLog",I)}catch(O){console.error(O)}},k=(c,p,I)=>{const{name:N,value:C}=c.target;i({...s,[p]:{...s[p],[I||N]:C}})},y=(c,p,I)=>{i({...s,[c]:{...s[c],[p]:I}})},j=()=>{if(o===0){const{weight:c,height:p,age:I,sex:N}=s.bodyStats;return c>0&&p>0&&I>0&&["male","female"].includes(N)}if(o===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(o===2){const{name:c,currentPet:p}=s.pet;return c.trim()!==""&&["puppy","kitten","bird"].includes(p)}return!0},l=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(A,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(D,{grow:1,children:e.jsxs(X,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(D,{children:e.jsx(v,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(D,{children:e.jsx(Dt,{children:l.map((c,p)=>e.jsx(Ut,{label:c,stage:o===p?"active":p<o?"completed":"pending"},p))})}),e.jsxs("form",{onSubmit:B,children:[o===0&&e.jsxs(X,{align:"stretch",gap:2,children:[e.jsx(v,{styleAs:"h2",children:"Body Stats"}),e.jsxs(ee,{children:[e.jsx(se,{children:"Weight (lbs)"}),e.jsx(ue,{value:s.bodyStats.weight===0?"":s.bodyStats.weight,onChange:c=>k(c,"bodyStats","weight")})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(he,{value:M.toString()+" ft",onSelectionChange:(c,p)=>S(Number(p)),children:[2,3,4,5,6,7,8,9].map(c=>e.jsxs(me,{value:c.toString(),children:[c," ft"]},c))}),e.jsx(he,{value:F.toString()+" in",onSelectionChange:(c,p)=>P(Number(p)),children:Array.from({length:12},(c,p)=>e.jsxs(me,{value:p.toString(),children:[p," in"]},p))})]})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Sex"}),e.jsxs(A,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(A,{direction:"column",align:"center",gap:1,children:[e.jsx(R,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(v,{children:"Male"})]})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(A,{direction:"column",align:"center",gap:1,children:[e.jsx(R,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(v,{children:"Female"})]})})})]})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Age (years)"}),e.jsx(ue,{value:s.bodyStats.age===0?"":s.bodyStats.age,onChange:c=>k(c,"bodyStats","age")})]})]}),o===1&&e.jsxs(X,{gap:2,children:[e.jsx(v,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(A,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(A,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(R,{symbol:"ðŸ”¥",size:24}),e.jsx(v,{children:"Weight Loss"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(A,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(R,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(v,{children:"Muscle Gain"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(A,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(R,{symbol:"ðŸ› ï¸",size:24}),e.jsx(v,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(ee,{children:[e.jsx(v,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Gt,{max:2,min:.5,step:.25,value:h,onChange:(c,p)=>d(p),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(X,{gap:1,children:[e.jsx(v,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(v,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(A,{direction:"column",gap:1,children:[e.jsx(V,{onClick:()=>u(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ’»",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(V,{onClick:()=>u(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(V,{onClick:()=>u(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(V,{onClick:()=>u(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(X,{gap:1,children:[e.jsx(v,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(v,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(A,{direction:"column",gap:1,children:[e.jsx(V,{onClick:()=>g(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Sedentary"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(V,{onClick:()=>g(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Lightly Active"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(V,{onClick:()=>g(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Moderately Active"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(V,{onClick:()=>g(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Very Active"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(V,{onClick:()=>g(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:_===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(A,{direction:"row",align:"center",gap:2,children:[e.jsx(R,{symbol:"ðŸ’ª",size:30}),e.jsxs(X,{gap:0,children:[e.jsx(v,{styleAs:"h2",children:"Extremely Active"}),e.jsx(v,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),o===2&&e.jsxs(X,{gap:2,children:[e.jsx(v,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(ee,{children:[e.jsx(se,{children:"Pet Name"}),e.jsx(ue,{value:s.pet.name,onChange:c=>k(c,"pet","name")})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Pet Type"}),e.jsxs(A,{direction:"row",gap:2,children:[e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(A,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(R,{symbol:"ðŸ¶",size:24}),e.jsx(v,{children:"Dog"})]})})})}),e.jsx(D,{grow:1,children:e.jsx(V,{onClick:()=>y("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(A,{direction:"column",align:"center",gap:1,children:e.jsxs(D,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(R,{symbol:"ðŸ±",size:24}),e.jsx(v,{children:"Cat"})]})})})})]})]})]}),e.jsx(D,{style:{paddingTop:"20px"},children:e.jsxs(A,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[o>0&&e.jsx(ae,{sentiment:"neutral",appearance:"solid",onClick:()=>a(o-1),children:"Previous"}),o<l.length-1&&e.jsx(ae,{sentiment:"accented",appearance:"solid",disabled:!j(),onClick:()=>a(o+1),children:"Next"}),o===l.length-1&&e.jsx(ae,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!j(),onClick:B,children:"Start Your Adventure!"})]})})]})]})})})},go="_homePage_10zjh_2",fo="_homePageTitle_10zjh_7",yo="_statusSection_10zjh_25",jo="_evolveButton_10zjh_33",vo="_energyPulse_10zjh_1",So="_rainbowBorder_10zjh_1",bo="_sparkle_10zjh_1",Co="_buttonGlow_10zjh_1",wo="_evolutionFlash_10zjh_1",ko="_levelText_10zjh_136",No="_xpBarWrapper_10zjh_142",Io="_xpBarFill_10zjh_151",To="_pixelBorder_10zjh_157",Ce={homePage:go,homePageTitle:fo,"card-links":"_card-links_10zjh_11","card-image":"_card-image_10zjh_20",statusSection:yo,evolveButton:jo,energyPulse:vo,rainbowBorder:So,sparkle:bo,buttonGlow:Co,evolutionFlash:wo,levelText:ko,xpBarWrapper:No,xpBarFill:Io,pixelBorder:To},Lo="_xpBarWrapper_sqxxw_1",Bo="_xpBarFill_sqxxw_12",Fo="_pixelGlow_sqxxw_1",Ao="_xpText_sqxxw_33",Po="_levelText_sqxxw_59",de={xpBarWrapper:Lo,xpBarFill:Bo,pixelGlow:Fo,xpText:Ao,levelText:Po};function Eo(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function we(t,n){const o=Eo(n);return{progress:Math.min(Math.max(t/o*100,0),100),xpNeeded:o}}const Mo=({currentXp:t,level:n})=>{const[o,a]=r.useState(()=>we(t,n).progress),s=r.useRef(t),{xpNeeded:i}=we(t,n);return r.useEffect(()=>{const h=we(t,n).progress,d=s.current;t>d,a(h),s.current=t},[t,n]),e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:de.levelText,styleAs:"display4",children:["Level ",n]}),e.jsxs("div",{className:de.xpBarWrapper,children:[e.jsx("div",{className:de.xpBarFill,style:{width:`${o}%`}}),e.jsxs(v,{className:de.xpText,styleAs:"label",children:[" ",t," / ",i]})]})]})},Ro=({consumed:t=!1,size:n=48,className:o})=>{const[a,s]=r.useState(!1);return r.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:a?0:1}})},$o=({consumed:t=!1,size:n=48,className:o})=>{const[a,s]=r.useState(!1);return r.useEffect(()=>{if(t){const i=setTimeout(()=>s(!0),20);return()=>clearTimeout(i)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:a?0:1}})},Oo=({count:t,consumedCurrency:n,userArchetype:o})=>{const a=t-n.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[a," / ",t," ",o==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,i)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:o==="puppy"?e.jsx(Ro,{consumed:n[i]??!1}):e.jsx($o,{consumed:n[i]??!1})},i))})]})},at=({spriteSrc:t,backgroundSrc:n,frameWidth:o,frameHeight:a,frameCount:s=1,frameIndex:i=0,fps:h=8,scale:d=1,animated:m=!1,columns:u=4})=>{const _=r.useRef(null),[g,M]=r.useState({width:300,height:300}),[S,F]=r.useState(null),[P,z]=r.useState(i),[f]=qt(n||"");r.useEffect(()=>{const O=new Image;O.src=t,O.onload=()=>F(O)},[t]),r.useEffect(()=>{if(!m||s<=1)return;const O=setInterval(()=>{z(J=>(J+1)%s)},1e3/h);return()=>clearInterval(O)},[m,s,h]),r.useEffect(()=>{const O=()=>{_.current&&M({width:_.current.clientWidth,height:_.current.clientHeight})};O();const J=new ResizeObserver(O);return _.current&&J.observe(_.current),()=>J.disconnect()},[]);const B=m?P:i,k=B%u*o,y=Math.floor(B/u)*a,j=20,l=g.width-j*2,c=g.height-j*2,p=l/o,I=c/a,N=Math.min(d,p,I),C=o*N,L=a*N,$=(g.width-C)/2,q=(g.height-L)/2;return e.jsx("div",{ref:_,style:{width:"100%",height:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsx(Vt,{width:g.width,height:g.height,style:{imageRendering:"pixelated",position:"absolute",top:0,left:0},children:e.jsxs(Xt,{children:[f&&e.jsx(Ge,{image:f,x:0,y:0,width:g.width,height:g.height,listening:!1}),S&&e.jsx(Ge,{image:S,crop:{x:k,y,width:o,height:a},x:$,y:q,width:C,height:L,perfectDrawEnabled:!1,listening:!1,filters:[],shadowForStrokeEnabled:!1,globalCompositeOperation:"source-over"})]})})})},qe={puppy:[{name:"sit",spriteSrc:"/assets/sprites/canine/dog/HuskySitting.png",startFrame:0,frameCount:8,fps:5,columns:8,frameWidth:64,frameHeight:64},{name:"run",spriteSrc:"/assets/sprites/canine/dog/HuskyRun.png",startFrame:0,frameCount:6,fps:3,columns:6,frameWidth:64,frameHeight:64},{name:"sniff",spriteSrc:"/assets/sprites/canine/dog/HuskySniff.png",startFrame:0,frameCount:24,fps:12,columns:24,frameWidth:64,frameHeight:64},{name:"attack",spriteSrc:"/assets/sprites/canine/dog/HuskyAttack.png",startFrame:0,frameCount:15,fps:5,columns:15,frameWidth:64,frameHeight:64},{name:"bark",spriteSrc:"/assets/sprites/canine/dog/HuskyBark.png",startFrame:0,frameCount:10,fps:5,columns:10,frameWidth:64,frameHeight:64},{name:"die",spriteSrc:"/assets/sprites/canine/dog/HuskyDie.png",startFrame:0,frameCount:18,fps:5,columns:18,frameWidth:64,frameHeight:64},{name:"liedown",spriteSrc:"/assets/sprites/canine/dog/HuskyLieDown.png",startFrame:0,frameCount:12,fps:4,columns:12,frameWidth:64,frameHeight:64},{name:"sleep",spriteSrc:"/assets/sprites/canine/dog/HuskySleep.png",startFrame:0,frameCount:8,fps:4,columns:8,frameWidth:64,frameHeight:64},{name:"idle",spriteSrc:"/assets/sprites/canine/dog/HuskyIdle.png",startFrame:0,frameCount:6,fps:2,columns:6,frameWidth:64,frameHeight:64}],fox:[{name:"attack",spriteSrc:"/assets/sprites/canine/fox/FoxAttack.png",startFrame:0,frameCount:8,fps:5,columns:8,frameWidth:32,frameHeight:32},{name:"die",spriteSrc:"/assets/sprites/canine/fox/FoxDie.png",startFrame:0,frameCount:5,fps:5,columns:5,frameWidth:32,frameHeight:32},{name:"jump",spriteSrc:"/assets/sprites/canine/fox/FoxJump.png",startFrame:0,frameCount:10,fps:5,columns:10,frameWidth:32,frameHeight:32},{name:"sitting",spriteSrc:"/assets/sprites/canine/fox/FoxSitting.png",startFrame:0,frameCount:2,fps:2,columns:2,frameWidth:32,frameHeight:32},{name:"sleep",spriteSrc:"/assets/sprites/canine/fox/FoxSleep.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"walking",spriteSrc:"/assets/sprites/canine/fox/FixWalking.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/canine/fox/FoxIdle.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/canine/fox/FoxIdle.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32}],wolf:[],werewolf:[],cerberus:[]},Wo=t=>Promise.all(t.map(n=>new Promise(o=>{const a=new Image;a.src=n,a.onload=()=>o(),a.onerror=()=>o()}))).then(()=>{}),zo=({currentPet:t})=>{const n=r.useMemo(()=>qe[t]??qe.puppy,[t]),[o,a]=r.useState(n[0]),[s,i]=r.useState(!1);return r.useEffect(()=>{const h=Array.from(new Set(n.map(d=>d.spriteSrc)));Wo(h).then(()=>{i(!0)})},[]),r.useEffect(()=>{if(!s)return;let h;const d=()=>{const m=n[Math.floor(Math.random()*n.length)];a(m);const u=m.frameCount/m.fps*1e3*2;h=setTimeout(d,u)};return d(),()=>clearTimeout(h)},[s]),s?e.jsx(at,{spriteSrc:o.spriteSrc,backgroundSrc:"/assets/backgrounds/grass.png",frameWidth:o.frameWidth,frameHeight:o.frameHeight,frameCount:o.frameCount,fps:o.fps,columns:o.columns,scale:4,animated:!0}):e.jsx("div",{children:"Loading..."})},pe=[{name:"box",spriteSrc:"/assets/sprites/feline/cat/Box2.png",startFrame:0,frameCount:12,fps:2,columns:12,frameWidth:32,frameHeight:32},{name:"excited",spriteSrc:"/assets/sprites/feline/cat/Excited.png",startFrame:0,frameCount:12,fps:6,columns:12,frameWidth:32,frameHeight:32},{name:"dance",spriteSrc:"/assets/sprites/feline/cat/Dance.png",startFrame:0,frameCount:4,fps:2,columns:4,frameWidth:32,frameHeight:32},{name:"eating",spriteSrc:"/assets/sprites/feline/cat/Eating.png",startFrame:0,frameCount:15,fps:5,columns:15,frameWidth:32,frameHeight:32},{name:"sleepy",spriteSrc:"/assets/sprites/feline/cat/Sleepy.png",startFrame:0,frameCount:8,fps:2,columns:8,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:1,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32},{name:"idle",spriteSrc:"/assets/sprites/feline/cat/Idle.png",startFrame:0,frameCount:10,fps:8,columns:10,frameWidth:32,frameHeight:32}],Ho=t=>Promise.all(t.map(n=>new Promise(o=>{const a=new Image;a.src=n,a.onload=()=>o(),a.onerror=()=>o()}))).then(()=>{}),Do=({currentPet:t})=>{const[n,o]=r.useState(pe[0]),[a,s]=r.useState(!1);return r.useEffect(()=>{const i=Array.from(new Set(pe.map(h=>h.spriteSrc)));Ho(i).then(()=>s(!0))},[]),r.useEffect(()=>{if(!a)return;let i;const h=()=>{const d=pe[Math.floor(Math.random()*pe.length)];o(d);const m=d.frameCount/d.fps*1e3*2;i=setTimeout(h,m)};return h(),()=>clearTimeout(i)},[a]),a?e.jsx(at,{spriteSrc:n.spriteSrc,backgroundSrc:"/assets/backgrounds/grass.png",frameWidth:n.frameWidth,frameHeight:n.frameHeight,frameCount:n.frameCount,fps:n.fps,animated:!0,columns:n.columns,scale:4}):e.jsx("div",{children:"Loading..."})},ot={puppy:"fox",fox:"wolf",wolf:"werewolf",werewolf:"cerberus",cerberus:null},Uo={puppy:1,fox:10,wolf:25,werewolf:45,cerberus:70},Go=()=>{const n=Date.now()+3e3,o={startVelocity:30,spread:360,ticks:60,zIndex:9999},a=setInterval(()=>{const s=n-Date.now();if(s<=0){clearInterval(a);return}const i=500*(s/3e3);Kt({...o,particleCount:i,origin:{x:Math.random(),y:Math.random()*.5}})},250)},qo="_evolutionContainer_hrpc2_1",Vo="_energyBox_hrpc2_13",Xo="_shake_hrpc2_1",Ko="_energyCore_hrpc2_20",Yo="_energyPulse_hrpc2_1",Qo="_energyRing_hrpc2_33",Jo="_ringExpand_hrpc2_1",Zo="_ring1_hrpc2_42",er="_ring2_hrpc2_47",tr="_ring3_hrpc2_52",sr="_lightning_hrpc2_58",nr="_lightning1_hrpc2_66",ar="_lightning2_hrpc2_71",or="_lightning3_hrpc2_76",rr="_lightning4_hrpc2_81",ir="_evolutionText_hrpc2_87",lr="_textFlash_hrpc2_1",cr="_explosionContainer_hrpc2_96",dr="_explosionFlash_hrpc2_108",pr="_flash_hrpc2_1",ur="_explosionCore_hrpc2_118",hr="_coreExplosion_hrpc2_1",mr="_explosionRing_hrpc2_131",_r="_ring4_hrpc2_156",xr="_explosionText_hrpc2_162",gr="_textBounce_hrpc2_1",E={evolutionContainer:qo,energyBox:Vo,shake:Xo,energyCore:Ko,energyPulse:Yo,energyRing:Qo,ringExpand:Jo,ring1:Zo,ring2:er,ring3:tr,lightning:sr,lightning1:nr,lightning2:ar,lightning3:or,lightning4:rr,evolutionText:ir,textFlash:lr,explosionContainer:cr,explosionFlash:dr,flash:pr,explosionCore:ur,coreExplosion:hr,explosionRing:mr,ring4:_r,explosionText:xr,textBounce:gr},fr=({nextPet:t,onComplete:n})=>{const[o,a]=r.useState("charging");return r.useEffect(()=>{const s=setTimeout(()=>{a("explosion")},2e3),i=setTimeout(()=>{a("complete"),n&&n("complete")},3500);return()=>{clearTimeout(s),clearTimeout(i)}},[n]),o==="charging"?e.jsxs("div",{className:E.evolutionContainer,children:[e.jsxs("div",{className:E.energyBox,children:[e.jsx("div",{className:E.energyCore}),e.jsx("div",{className:`${E.energyRing} ${E.ring1}`}),e.jsx("div",{className:`${E.energyRing} ${E.ring2}`}),e.jsx("div",{className:`${E.energyRing} ${E.ring3}`}),e.jsx("div",{className:`${E.lightning} ${E.lightning1}`}),e.jsx("div",{className:`${E.lightning} ${E.lightning2}`}),e.jsx("div",{className:`${E.lightning} ${E.lightning3}`}),e.jsx("div",{className:`${E.lightning} ${E.lightning4}`})]}),e.jsx("div",{className:E.evolutionText,children:"EVOLVING..."})]}):o==="explosion"?e.jsxs("div",{className:E.explosionContainer,children:[e.jsx("div",{className:E.explosionFlash}),e.jsx("div",{className:E.explosionCore}),e.jsx("div",{className:`${E.explosionRing} ${E.ring1}`}),e.jsx("div",{className:`${E.explosionRing} ${E.ring2}`}),e.jsx("div",{className:`${E.explosionRing} ${E.ring3}`}),e.jsx("div",{className:`${E.explosionRing} ${E.ring4}`}),e.jsx("div",{className:E.explosionText,children:"EVOLUTION COMPLETE!"})]}):null};function yr(t){if(!t)return!1;const n=t.pet.currentPet,o=t.pet.level,a=ot[n];if(!a)return!1;const s=Uo[a];return o>=s}function ke(t){return ot[t]}const jr={puppy:"canine",fox:"canine",wolf:"canine",werewolf:"canine",cerberus:"canine",kitten:"feline"},Ve=()=>{var F,P,z;const{userData:t,setUserData:n}=G(),[o,a]=r.useState(0),[s,i]=r.useState([]);r.useRef(null);const[h,d]=r.useState(!1),m={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"},u=((F=t==null?void 0:t.pet)==null?void 0:F.currentPet)??"puppy",_=r.useMemo(()=>m[u],[u]);r.useEffect(()=>{var c,p,I;const f=Intl.DateTimeFormat().resolvedOptions().timeZone,B=new Date().toLocaleDateString("sv-SE",{timeZone:f}),k=((c=t==null?void 0:t.goal)==null?void 0:c.dailyCurrencyTotal)??0,y=((I=(p=t==null?void 0:t.goal)==null?void 0:p.dailyCurrencyUsed)==null?void 0:I[B])??0,j=k-y;a(j);const l=Array(k).fill(!1).map((N,C)=>C>=j);i(l)},[t]);function g(){console.log("evolving!!!!"),d(!0)}console.log("Model Path:",_),console.log("userData",t);const S=jr[(t==null?void 0:t.pet.currentPet)??""]==="canine"?e.jsx(zo,{currentPet:(t==null?void 0:t.pet.currentPet)??""}):e.jsx(Do,{currentPet:(t==null?void 0:t.pet.currentPet)??""});return e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(A,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(D,{align:"center",style:{flexShrink:0},children:e.jsx(v,{styleAs:"h1",className:Ce.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(D,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(Oo,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((P=t==null?void 0:t.goal)==null?void 0:P.dailyCurrencyTotal)??0,consumedCurrency:s})}),e.jsx(D,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:h?e.jsx(fr,{nextPet:ke((t==null?void 0:t.pet.currentPet)??""),onComplete:async f=>{if(f==="complete"){const B=ke((t==null?void 0:t.pet.currentPet)??"");if(B&&(t!=null&&t._id))try{const{data:k}=await W.post("/users/update",{_id:t._id,pet:{...t.pet,currentPet:B}});n(k),d(!1),Go()}catch(k){console.error("Failed to update pet evolution:",k)}}}}):S})}),e.jsxs(D,{className:Ce.statusSection,style:{flexShrink:0},children:[e.jsx(Mo,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0}),yr(t)&&e.jsxs(K,{className:Ce.evolveButton,onClick:g,children:["Evolve to ",(z=ke((t==null?void 0:t.pet.currentPet)??""))==null?void 0:z.toUpperCase(),"!"]})]})]})})},vr=({content:t})=>{const[n,o]=r.useState(null),a=h=>{o(h.currentTarget)},s=()=>{o(null)},i=!!n;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:a,style:{cursor:"pointer",marginLeft:4},children:e.jsx(R,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(Yt,{open:i,anchorEl:n,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Sr=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],br=()=>{const{userData:t}=G();if(!t)return null;const{pet:n}=t;return e.jsxs(A,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(A,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(R,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(v,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Sr.map(o=>e.jsx(Be,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(A,{justify:"space-between",align:"center",children:[e.jsxs(A,{align:"center",gap:1,children:[e.jsx(R,{symbol:o.emoji,size:20}),e.jsx(v,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:o.label}),e.jsx(vr,{content:o.description})]}),e.jsxs(v,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",n[o.key]]})]})},o.key))]})},Ne=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],Ie=({name:t,description:n,progress:o})=>e.jsxs(Be,{style:{width:"100%"},children:[e.jsx(v,{styleAs:"h4",children:t}),e.jsx(v,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:n}),e.jsx(Jt,{value:o}),e.jsxs(v,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[o,"% complete"]})]}),Cr=()=>{const t=Ne.filter(a=>a.status==="inProgress"),n=Ne.filter(a=>a.status==="notStarted"),o=Ne.filter(a=>a.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(v,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Qt,{children:[e.jsxs(ye,{value:"",children:[e.jsx(je,{children:"In Progress"}),e.jsx(ve,{children:e.jsx(A,{direction:"column",gap:2,children:t.map(a=>e.jsx(Ie,{...a},a.name))})})]}),e.jsxs(ye,{value:"",children:[e.jsx(je,{children:"Not Started"}),e.jsx(ve,{children:e.jsx(A,{direction:"column",gap:2,children:n.map(a=>e.jsx(Ie,{...a},a.name))})})]}),e.jsxs(ye,{value:"",children:[e.jsx(je,{children:"Completed"}),e.jsx(ve,{children:e.jsx(A,{direction:"column",gap:2,children:o.map(a=>e.jsx(Ie,{...a},a.name))})})]})]})]})},wr="_container_132oe_1",kr="_tabList_132oe_11",Nr="_tabButton_132oe_18",Ir="_routineCreatedText_132oe_34",Tr="_active_132oe_39",Lr="_borderGlow_132oe_1",Br="_form_132oe_55",Fr="_heroSection_132oe_105",Ar="_heroList_132oe_112",Pr="_hero_132oe_105",Er="_selected_132oe_143",Mr="_disclosureButton_132oe_156",Rr="_chevron_132oe_174",$r="_rotate_132oe_179",Or="_equipmentSection_132oe_183",Wr="_equipmentList_132oe_191",zr="_equipment_132oe_183",U={container:wr,tabList:kr,tabButton:Nr,routineCreatedText:Ir,active:Tr,borderGlow:Lr,form:Br,heroSection:Fr,heroList:Ar,hero:Pr,selected:Er,disclosureButton:Mr,chevron:Rr,rotate:$r,equipmentSection:Or,equipmentList:Wr,equipment:zr},Hr="_puppySpinner_qnb89_1",Dr="_loadingText_qnb89_9",Ur="_puppy_qnb89_1",Gr="_run_qnb89_1",qr="_treadmillBelt_qnb89_19",Te={puppySpinner:Hr,loadingText:Dr,puppy:Ur,run:Gr,treadmillBelt:qr,"belt-move":"_belt-move_qnb89_1"};function ge({scale:t=1}){const n=150*t;return e.jsxs("div",{className:Te.puppySpinner,style:{width:`${n}px`,height:`${n}px`},children:[e.jsx("div",{className:Te.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:Te.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const Vr=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],Xr=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function Kr(){const{userData:t}=G(),[n,o]=r.useState("Max Muscle"),[a,s]=r.useState(""),[i,h]=r.useState("beginner"),[d,m]=r.useState(3),[u,_]=r.useState([]),[g,M]=r.useState(""),[S,F]=r.useState(""),[P,z]=r.useState(""),[f,B]=r.useState(""),[k,y]=r.useState(15),[j,l]=r.useState(!1),[c,p]=r.useState(!1),{addToast:I}=Me(),N=C=>{C.preventDefault(),l(!0);const L={goal:n,sport:n==="Sport Specific"?a:null,experience:i,days:d,equipment:u.join(", "),include:g,exclude:S,considerations:P,sessionDurationMinutes:k,petCoach:f,userId:t==null?void 0:t.uid};W.post("/workout/routine/createRoutine",L,{timeout:5e4}).then($=>{console.log("Routine Created:",$.data),p(!0),setTimeout(()=>{p(!1)},3e3)}).catch($=>{console.error($)}).finally(()=>l(!1))};return c?e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:"0 12px",display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:22,textAlign:"center",padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(R,{size:32,symbol:"âšâ–ˆâ•â•â–ˆâš"}),e.jsx("div",{className:U.routineCreatedText,children:"Routine Created!"}),e.jsx("div",{className:U.routineCreatedText,children:'Check it out in "My Routines"!'})]})}):j?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ge,{scale:2})}):e.jsxs("form",{className:U.form,onSubmit:N,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:n,onChange:C=>o(C.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),n==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:a,onChange:C=>s(C.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:i,onChange:C=>h(C.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:d,onChange:C=>m(Number(C.target.value)),children:[...Array(7)].map((C,L)=>e.jsxs("option",{value:L+1,children:[L+1," ",L===0?"day":"days"]},L+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:k,onChange:C=>y(Number(C.target.value)),children:[...Array(12)].map((C,L)=>{const $=(L+1)*15,q=Math.floor($/60),O=$%60,J=q>0?`${q}h${O>0?` ${O}m`:""}`:`${O} minutes`;return e.jsx("option",{value:$,children:J},$)})})]}),e.jsxs("div",{className:U.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:U.equipmentList,children:Xr.map(C=>e.jsx(K,{type:"button",onClick:()=>_(L=>L.includes(C)?L.filter($=>$!==C):[...L,C]),className:`${U.equipment} ${u.includes(C)?U.selected:""}`,children:C},C))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:g,onChange:C=>M(C.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:S,onChange:C=>F(C.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:P,onChange:C=>z(C.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(Fe,{children:({open:C})=>e.jsxs("div",{className:U.heroSection,children:[e.jsxs(Ae,{className:U.disclosureButton,children:["Let one of our XPets train you!",e.jsx(Pe,{className:`${U.chevron} ${C?U.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(Ee,{className:U.heroList,children:Vr.map(L=>e.jsx(K,{type:"button",onClick:()=>B(L.name),className:`${U.hero} ${f===L.name?U.selected:""}`,style:{borderColor:typeof L.color=="string"&&L.color.includes("linear")?void 0:L.color,borderImage:L.color.includes("linear")?L.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:L.name},L.name))})]})}),e.jsx(K,{type:"submit",children:"Generate Routine"})]})}function rt({routine:t,setRoutines:n,menuOptions:o,onStartWorkout:a}){const{userData:s}=G();if(!t||t.length===0)return null;const i=m=>{console.log("Delete",m),W.delete(`/routines/delete/${m}`).then(()=>{n(u=>u==null?void 0:u.filter(_=>_._id!==m))}).catch(u=>{console.error("Failed to delete routine: ",u)})},h=m=>{W.post(`/routines/share/${m._id}`).then(()=>{console.log("Routine shared to community.")}).catch(u=>{console.error("Failed to share routine: ",u)})},d=m=>{W.post(`/routines/copy/${m._id}`,{userId:s==null?void 0:s.uid}).then(u=>{console.log("Copied routine:",u.data.routine),n==null||n(_=>[..._||[],u.data.routine])}).catch(u=>{console.error("Failed to copy routine:",u)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((m,u)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(Fe,{children:({open:_})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(Ae,{className:"accordion-trigger",children:[e.jsx(Pe,{size:32,className:`chevron ${_?"open":""}`}),e.jsx("span",{className:"routine-title",children:m.routineName})]}),e.jsxs(Zt,{as:"div",className:"menu-wrapper",children:[e.jsx(es,{className:"menu-button",onClick:g=>g.stopPropagation(),children:e.jsx(ts,{size:20})}),e.jsxs(ss,{className:"menu-dropdown",children:[o.includes("Share")&&e.jsx(Se,{children:e.jsx(K,{onClick:()=>h(m),className:"menu-item",children:"Share"})}),o.includes("Delete")&&e.jsx(Se,{children:e.jsx(K,{onClick:()=>i(m._id),className:"menu-item",children:"Delete"})}),o.includes("Copy")&&e.jsx(Se,{children:e.jsx(K,{onClick:()=>d(m),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(Ee,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:m.weeklySchedule.map((g,M)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:g.dayName}),e.jsx("div",{className:"day-exercises",children:g.exercises.map(S=>S.exercise).join(", ")}),g.exercises.length>0&&e.jsx(K,{className:"start-button",onClick:()=>a!==void 0?a(g):void 0,children:"START WORKOUT"})]},g.dayName+M))})})]})})},m.routineName+u))})}const Yr="_fullScreenWrapper_117p9_2",Qr="_timer_117p9_18",Jr="_deckContainer_117p9_28",Zr="_card_117p9_39",ei="_exerciseTitle_117p9_56",ti="_repRange_117p9_64",si="_setGrid_117p9_72",ni="_setRow_117p9_80",ai="_setLabel_117p9_85",oi="_inputLabel_117p9_93",ri="_checkboxLabel_117p9_94",ii="_compactInput_117p9_99",li="_setHeaderRow_117p9_124",ci="_finishButton_117p9_151",di="_setCheckbox_117p9_170",pi="_checked_117p9_192",ui="_cardSuitTop_117p9_197",hi="_cardSuitBottom_117p9_198",H={fullScreenWrapper:Yr,timer:Qr,deckContainer:Jr,card:Zr,exerciseTitle:ei,repRange:ti,setGrid:si,setRow:ni,setLabel:ai,inputLabel:oi,checkboxLabel:ri,compactInput:ii,setHeaderRow:li,finishButton:ci,setCheckbox:di,checked:pi,cardSuitTop:ui,cardSuitBottom:hi},mi=({startTime:t})=>{const[n,o]=r.useState(0);r.useEffect(()=>{const s=setInterval(()=>{o(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(s)},[t]);const a=s=>{const i=Math.floor(s/60),h=s%60;return`${String(i).padStart(2,"0")}:${String(h).padStart(2,"0")}`};return e.jsx("div",{style:{fontSize:"1.5rem"},children:a(n)})},_i=({exercises:t,onFinish:n})=>{const[o]=r.useState(Date.now()),[a,s]=r.useState(t.map((y,j)=>({...y,cardId:`${y.exercise}-${j}`}))),[i,h]=r.useState(0),[d,m]=r.useState(0),[u,_]=r.useState(null),[g,M]=r.useState(.4),S=(y,j)=>{const c=Math.abs(y)/1e3,p=Math.abs(j)/300;return Math.max(.2,Math.min(.6,.4-c*.15+p*.1))},F=(y,j)=>{const l=z()[0];if(l){const c=S(y,j);M(c),_(l.cardId),setTimeout(()=>{s(p=>{const[I,...N]=p;return[...N,I]}),m(p=>p+1),_(null)},c*1e3)}},P=(y,j,l,c)=>{s(p=>p.map(N=>{if(N.cardId===y){const C=N.sets.map((L,$)=>$===j?{...L,[l]:c}:L);return{...N,sets:C}}return N}))},z=()=>{const y=a.length;if(y===0)return[];const j=d%y,l=[];for(let c=0;c<3;c++){const p=(j+c)%y;a[p]&&l.push({...a[p],displayIndex:c,originalIndex:p})}return l},f=[e.jsx(rs,{size:32,color:"#ff4d4d"}),e.jsx(is,{size:32,color:"#ff4d4d"}),e.jsx(ls,{size:32,color:"#ff4d4d"}),e.jsx(cs,{size:32,color:"#ff4d4d"})],k=(()=>{const y=Math.floor(Math.random()*f.length);return f[y]})();return e.jsxs("div",{className:H.fullScreenWrapper,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",fontSize:"19px",gap:"16px",alignItems:"center"},children:[e.jsx("div",{children:t[0].dayName}),e.jsx("div",{className:H.timer,children:e.jsx(mi,{startTime:o})})]}),e.jsx("div",{className:H.deckContainer,children:e.jsx(ns,{initial:!1,children:z().map((y,j)=>{const l=j===0,c=y.cardId===u;return e.jsxs(as.div,{className:H.card,initial:{x:0,y:j*20,zIndex:100-j},animate:{x:0,scale:1-j*.02,y:j*20,zIndex:100-j},exit:{y:-400,opacity:0,zIndex:100-j,transition:{duration:g,ease:"easeOut"}},transition:{duration:.3},drag:l&&!c?"y":!1,dragElastic:.2,whileTap:{scale:.98},dragConstraints:{top:-400,bottom:0},onDragEnd:(p,I)=>{I.offset.y<-100&&!c&&F(I.velocity.y,I.offset.y)},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("span",{className:H.cardSuitTop,children:k})}),e.jsx("div",{className:H.exerciseTitle,children:y.exercise}),e.jsxs("div",{className:H.repRange,children:["Target: ",y.repRange," reps"]})]}),e.jsxs("div",{className:H.setGrid,children:[e.jsxs("div",{className:H.setHeaderRow,children:[e.jsx("span",{className:H.setLabel,children:"Set"}),e.jsx("span",{className:H.inputLabel,children:"Weight"}),e.jsx("span",{className:H.inputLabel,children:"Reps"}),e.jsx("span",{className:H.checkboxLabel,children:"âœ”"})]}),y.sets.map((p,I)=>e.jsxs("div",{className:H.setRow,children:[e.jsx("span",{className:H.setLabel,children:I+1}),e.jsx(_e,{type:"number",value:p.weight===0?"":p.weight,placeholder:"Weight",className:H.compactInput,onChange:N=>P(y.cardId,I,"weight",Number(N.target.value))}),e.jsx(_e,{type:"number",value:p.reps===0?"":p.reps,placeholder:"Reps",className:H.compactInput,onChange:N=>P(y.cardId,I,"reps",Number(N.target.value))}),e.jsx(os,{checked:p.completed??!1,onChange:N=>{P(y.cardId,I,"completed",N)},className:({checked:N})=>`${H.setCheckbox} ${N?H.checked:""}`,children:e.jsx("span",{"aria-hidden":"true",children:p.completed?"âœ”":""})})]},I)),e.jsx("span",{className:H.cardSuitBottom,children:k})]})]},`${y.cardId}-cycle-${d}-${j}`)})})}),e.jsx("button",{className:H.finishButton,onClick:()=>n({duration:i,exercises:a}),children:"Finish Workout"})]})};function xi(){const[t,n]=r.useState(),[o,a]=r.useState(!0),{userData:s}=G(),[i,h]=r.useState(null),d=u=>{const _=u.exercises.map(g=>({dayName:u.dayName,exercise:g.exercise,repRange:g.repRange,sets:Array(Number(g.sets)).fill({weight:0,reps:0})}));h(_)},m=u=>{console.log("Workout complete:",u),h(null)};return r.useEffect(()=>{W.get(`/routines?uid=${s==null?void 0:s.uid}`).then(u=>{n(u.data.routines)}).catch(u=>{console.error(u)}).finally(()=>a(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):o?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ge,{scale:2})}):e.jsxs("div",{style:{display:"flex",width:"100%"},children:[i&&e.jsx(_i,{exercises:i,onFinish:m}),e.jsx(rt,{routine:t,setRoutines:n,menuOptions:["Share","Delete"],onStartWorkout:d})]})}function gi(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ge,{scale:2})})}function fi(){const[t,n]=r.useState(),[o,a]=r.useState(!0);return G(),r.useEffect(()=>{W.get("/routines?communityRoutine=true").then(s=>{n(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>a(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):o?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ge,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(rt,{routine:t,setRoutines:n,menuOptions:["Copy"]})})}function yi(){return e.jsx("div",{className:U.container,children:e.jsxs(Qe,{children:[e.jsx(Je,{className:U.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(Ze,{className:({selected:n})=>`${U.tabButton} ${n?U.active:""}`,children:t},t))}),e.jsxs(ds,{children:[e.jsx(le,{children:e.jsx(xi,{})}),e.jsx(le,{children:e.jsx(Kr,{})}),e.jsx(le,{children:e.jsx(gi,{})}),e.jsx(le,{children:e.jsx(fi,{})})]})]})})}const ji="_prompt_1kskd_1",vi="_fadeInUp_1kskd_1",Si="_text_1kskd_21",bi="_shareIcon_1kskd_26",Ci="_dismiss_1kskd_31",Le={prompt:ji,fadeInUp:vi,text:Si,shareIcon:bi,dismiss:Ci},wi=()=>/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),ki=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;function Ni(){const[t,n]=r.useState(!1);r.useEffect(()=>{const a=localStorage.getItem("pwaPromptSeen");wi()&&!ki()&&!a&&n(!0)},[]);const o=()=>{n(!1),localStorage.setItem("pwaPromptSeen","true")};return t?e.jsxs("div",{className:Le.prompt,children:[e.jsxs("div",{className:Le.text,children:[e.jsx("strong",{children:"XPets is best when used as an app!"}),e.jsx("br",{}),e.jsx("strong",{children:"Install XPets: HealthQuest"}),e.jsx("br",{}),"On Safari, tap the â€œShareâ€ button (square with arrow â†‘) then â€œAdd to Home Screenâ€ to install the app."]}),e.jsx("button",{className:Le.dismiss,onClick:o,children:"âœ•"})]}):null}const Ii="_overlay_1ingo_2",Ti="_splashBox_1ingo_18",Li="_titleBar_1ingo_46",Bi="_title_1ingo_46",Fi="_titleDecoration_1ingo_62",Ai="_petAffects_1ingo_70",Pi="_petHeader_1ingo_79",Ei="_petIcon_1ingo_87",Mi="_statsGrid_1ingo_101",Ri="_statItem_1ingo_107",$i="_shine_1ingo_1",Oi="_petXp_1ingo_127",Wi="_strength_1ingo_132",zi="_agility_1ingo_137",Hi="_statLabel_1ingo_142",Di="_statValue_1ingo_151",Ui="_workoutsTitle_1ingo_172",Gi="_disclosures_1ingo_182",qi="_disclosure_1ingo_182",Vi="_chevron_1ingo_190",Xi="_rotate_1ingo_194",Ki="_disclosureHeader_1ingo_198",Yi="_disclosureBody_1ingo_223",Qi="_singleWorkout_1ingo_233",Ji="_workoutHeader_1ingo_241",Zi="_workoutDate_1ingo_256",el="_workoutDescription_1ingo_262",tl="_exerciseList_1ingo_268",sl="_exerciseItem_1ingo_274",nl="_exerciseName_1ingo_290",al="_exerciseSets_1ingo_295",ol="_closeBtn_1ingo_301",T={overlay:Ii,splashBox:Ti,titleBar:Li,title:Bi,titleDecoration:Fi,petAffects:Ai,petHeader:Pi,petIcon:Ei,statsGrid:Mi,statItem:Ri,shine:$i,petXp:Oi,strength:Wi,agility:zi,statLabel:Hi,statValue:Di,"stat-value":"_stat-value_1ingo_160",workoutsTitle:Ui,disclosures:Gi,disclosure:qi,chevron:Vi,rotate:Xi,disclosureHeader:Ki,disclosureBody:Yi,singleWorkout:Qi,workoutHeader:Ji,workoutDate:Zi,workoutDescription:el,exerciseList:tl,exerciseItem:sl,exerciseName:nl,exerciseSets:al,closeBtn:ol};function rl({workouts:t,onClose:n}){const o=t.length>1,a=t.reduce((s,i)=>(s.strength+=i.petAffects.strength||0,s.agility+=i.petAffects.agility||0,s.pet+=i.petAffects.pet||0,s),{strength:0,agility:0,pet:0});return e.jsx("div",{className:T.overlay,children:e.jsxs("div",{className:T.splashBox,children:[e.jsxs("div",{className:T.titleBar,children:[e.jsxs("div",{children:[e.jsx(R,{symbol:"ðŸ‹ï¸",size:32}),e.jsx("h2",{className:T.title,children:"HEVY WORKOUT SYNC"})]}),e.jsx("div",{className:T.titleDecoration})]}),e.jsxs("div",{className:T.petAffects,children:[e.jsxs("div",{className:T.petHeader,children:[e.jsx("span",{className:T.petIcon,children:"ðŸ¾"}),e.jsx("h3",{children:"YOUR PET GREW STRONGER!"})]}),e.jsxs("div",{className:T.statsGrid,children:[e.jsxs("div",{className:`${T.statItem} ${T.petXp}`,children:[e.jsx("span",{className:T.statLabel,children:"PET XP"}),e.jsxs("span",{className:T.statValue,children:["+",a.pet]})]}),e.jsxs("div",{className:`${T.statItem} ${T.strength}`,children:[e.jsx("span",{className:T.statLabel,children:"STRENGTH"}),e.jsxs("span",{className:T.statValue,children:["+",a.strength]})]}),e.jsxs("div",{className:`${T.statItem} ${T.agility}`,children:[e.jsx("span",{className:T.statLabel,children:"AGILITY"}),e.jsxs("span",{className:T.statValue,children:["+",a.agility]})]})]})]}),o?e.jsxs("div",{className:T.disclosures,children:[e.jsx("h4",{className:T.workoutsTitle,children:"WORKOUT DETAILS"}),t.map((s,i)=>e.jsx(Fe,{as:"div",className:T.disclosure,children:({open:h})=>e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{className:T.disclosureHeader,children:[s.title||`Workout ${i+1}`," â€” ",new Date(s.startTime).toLocaleDateString(),e.jsx(Pe,{className:`${T.chevron} ${h?T.rotate:""}`,"aria-hidden":"true"})]}),e.jsxs(Ee,{className:T.disclosureBody,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",s.description||"No notes provided"]}),e.jsx("div",{className:T.exerciseList,children:s.exercises.map((d,m)=>e.jsxs("div",{className:T.exerciseItem,children:[e.jsx("span",{className:T.exerciseName,children:d.title}),e.jsxs("span",{className:T.exerciseSets,children:[d.sets.length," sets"]})]},m))})]})]})},s.hevyWorkoutId))]}):e.jsxs("div",{className:T.singleWorkout,children:[e.jsxs("div",{className:T.workoutHeader,children:[e.jsx("h3",{children:t[0].title}),e.jsx("div",{className:T.workoutDate,children:new Date(t[0].startTime).toLocaleDateString()})]}),e.jsx("p",{className:T.workoutDescription,children:t[0].description}),e.jsx("div",{className:T.exerciseList,children:t[0].exercises.map((s,i)=>e.jsxs("div",{className:T.exerciseItem,children:[e.jsx("span",{className:T.exerciseName,children:s.title}),e.jsxs("span",{className:T.exerciseSets,children:[s.sets.length," sets"]})]},i))})]}),e.jsx("button",{onClick:n,className:T.closeBtn,children:"CONTINUE"})]})})}r.createContext({});function il({children:t}){const{userData:n}=G(),[o,a]=r.useState(null);async function s(){await W.post("/hevy/markSeen",{workoutIds:o==null?void 0:o.map(i=>i.hevyWorkoutId),uid:n==null?void 0:n.uid}),a(null)}return r.useEffect(()=>{if(!(n!=null&&n.uid))return;async function i(){try{const d=(await W.get(`/hevy/unseen/${n==null?void 0:n.uid}`)).data.newHevyWorkouts;d!=null&&d.length&&a(d)}catch(h){console.error("Error fetching unseen Hevy workout:",h)}}i()},[n==null?void 0:n.uid]),e.jsxs(e.Fragment,{children:[o&&e.jsx(rl,{workouts:o,onClose:()=>s()}),t]})}const ll=["Pet","Skills","Quests","Routines"];function cl(){const[t,n]=r.useState(null),[o,a]=r.useState(!0),{userData:s,setUserData:i}=G(),[h,d]=r.useState(0),m=u=>{switch(ll[u]){case"Pet":return e.jsx(Ve,{});case"Skills":return e.jsx(br,{});case"Quests":return e.jsx(Cr,{});case"Routines":return e.jsx(yi,{});default:return e.jsx(Ve,{})}};return r.useEffect(()=>{const u=ps.throttle(()=>{console.log("Fetching user object..."),W.get(`/users/${s==null?void 0:s.uid}`).then(g=>{i(g.data),console.log("User data synced:",g.data)}).catch(g=>{console.error("Failed to fetch user:",g)})},1e4),_=()=>{console.log("User came back!"),u()};return s&&window.addEventListener("focus",_),()=>{s&&(window.removeEventListener("focus",_),u.cancel())}},[]),r.useEffect(()=>{const u=us(xe,_=>{console.log("Auth state changed:",_),console.log("User Data in App useEffect:",s),n(_),a(!1);const g=localStorage.getItem("userData");g&&i(JSON.parse(g))});return()=>u()},[]),console.log("App render - Loading:",o,"User:",t,"UserData:",s),o?e.jsx(ce,{mode:"dark",children:e.jsx("div",{children:"Loading in app.tsx..."})}):!t||!s?e.jsx(ce,{mode:"dark",children:e.jsx(_o,{})}):s.bodyStats.weight===0?e.jsx(ce,{mode:"dark",children:e.jsx(xo,{})}):e.jsx(ce,{mode:"dark",children:e.jsxs(il,{children:[e.jsx(Ni,{}),e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"env(safe-area-inset-top) env(safe-area-inset-right) 0 env(safe-area-inset-left)"}}),e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",minHeight:"calc(100dvh - 76px - env(safe-area-inset-bottom))",height:"calc(100dvh - 76px - env(safe-area-inset-bottom))",display:"flex",flexDirection:"column",paddingBottom:"14px",overflow:"hidden"},children:m(h)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,minHeight:"76px"},children:e.jsx(lo,{selectedIndex:h,setSelectedIndex:d})})]})]})})}"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then(t=>{for(const n of t)n.unregister()}),caches.keys().then(t=>{t.forEach(n=>{caches.delete(n)})}));hs.createRoot(document.getElementById("root")).render(e.jsx(ms.StrictMode,{children:e.jsx(_s,{children:e.jsx(ys,{children:e.jsx(ws,{children:e.jsx(Es,{children:e.jsx(cl,{})})})})})}));
