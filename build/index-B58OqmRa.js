import{r as n,j as e,T as p,F as k,a as B,C as Ee,B as Re,O as ze,u as De,P as We,b as he,A as $e,c as le,d as ie,e as ce,L as Ue,i as Ge,g as He,f as qe,s as Ve,G as Xe,h as Ye,k as Ke,l as Je,m as G,n as ge,S as ke,o as fe,p as ye,I as te,q as M,D as ae,t as oe,U as je,v as Qe,w as Ze,x as et,R as Ne,y as Ie,z as tt,E as st,H as at,J as ot,K as se,M as rt,N as nt,Q as lt,X as it,V as ve,Y as ct,W as dt,Z as _t,_ as de,$ as pt,a0 as ut,a1 as mt,a2 as xt,a3 as ht,a4 as gt,a5 as ft,a6 as yt,a7 as jt,a8 as Se,a9 as we,aa as vt,ab as be,ac as V,ad as St,ae as wt,af as bt,ag as Ct,ah as kt,ai as Nt,aj as It,ak as q,al as X,am as P,an as Tt,ao as Lt,ap as At,aq as _e,ar as Bt,as as Ot,at as Ft,au as Mt,av as Pt}from"./vendor-pHQ0_10S.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const Et="_homePage_rxrt2_1",Rt="_homePageTitle_rxrt2_6",zt="_statusSection_rxrt2_24",Dt="_levelText_rxrt2_29",Wt="_xpBarWrapper_rxrt2_35",$t="_xpBarFill_rxrt2_44",Ce={homePage:Et,homePageTitle:Rt,"card-links":"_card-links_rxrt2_10","card-image":"_card-image_rxrt2_19",statusSection:zt,levelText:Dt,xpBarWrapper:Wt,xpBarFill:$t},Te=n.createContext(void 0),Ut=({children:t})=>{const[a,r]=n.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),o=s=>{r(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(Te.Provider,{value:{userData:a,setUserData:o},children:t})},W=()=>{const t=n.useContext(Te);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=t,o=n.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:o}},Gt="_xpBarWrapper_sqxxw_1",Ht="_xpBarFill_sqxxw_12",qt="_pixelGlow_sqxxw_1",Vt="_xpText_sqxxw_33",Xt="_levelText_sqxxw_59",ee={xpBarWrapper:Gt,xpBarFill:Ht,pixelGlow:qt,xpText:Vt,levelText:Xt};function Yt(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function pe(t,a){const r=Yt(a);return{progress:Math.min(Math.max(t/r*100,0),100),xpNeeded:r}}const Kt=({currentXp:t,level:a})=>{const[r,o]=n.useState(()=>pe(t,a).progress),s=n.useRef(t),{xpNeeded:c}=pe(t,a);return n.useEffect(()=>{const u=pe(t,a).progress,_=s.current;t>_,o(u),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(p,{className:ee.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:ee.xpBarWrapper,children:[e.jsx("div",{className:ee.xpBarFill,style:{width:`${r}%`}}),e.jsxs(p,{className:ee.xpText,styleAs:"label",children:[" ",t," / ",c]})]})]})},Jt=({consumed:t=!1,size:a=48,className:r})=>{const[o,s]=n.useState(!1);return n.useEffect(()=>{if(t){const c=setTimeout(()=>s(!0),20);return()=>clearTimeout(c)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:o?0:1}})},Qt=({consumed:t=!1,size:a=48,className:r})=>{const[o,s]=n.useState(!1);return n.useEffect(()=>{if(t){const c=setTimeout(()=>s(!0),20);return()=>clearTimeout(c)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:o?0:1}})},Zt=({count:t,consumedCurrency:a,userArchetype:r})=>{const o=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[o," / ",t," ",r==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,c)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(Jt,{consumed:a[c]??!1}):e.jsx(Qt,{consumed:a[c]??!1})},c))})]})},es=()=>{var b;const{userData:t}=W(),[a,r]=n.useState(""),[o,s]=n.useState(0),[c,u]=n.useState([]);let _=!1;const j={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};n.useEffect(()=>{var C;r(j[((C=t==null?void 0:t.pet)==null?void 0:C.currentPet)??"puppy"]),_=a==null?void 0:a.includes("kitten")},[t]),n.useEffect(()=>{var O,g,i;const C=new Date().toISOString().slice(0,10),I=((O=t==null?void 0:t.goal)==null?void 0:O.dailyCurrencyTotal)??0,h=((i=(g=t==null?void 0:t.goal)==null?void 0:g.dailyCurrencyUsed)==null?void 0:i[C])??0,N=I-h;s(N);const T=Array(I).fill(!1).map((m,v)=>v>=N);u(T)},[t]),console.log("Model Path:",a);function S({url:C,scale:I=2,position:h=[0,-2,0],rotation:N=[0,0,0]}){const T=De(C);if(!T||!T.scene)return null;const O=n.useMemo(()=>T.scene.clone(),[T.scene]);return e.jsx("primitive",{object:O,scale:I,position:h,rotation:N})}return console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(k,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(B,{align:"center",style:{flexShrink:0},children:e.jsx(p,{styleAs:"h1",className:Ce.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(B,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(Zt,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((b=t==null?void 0:t.goal)==null?void 0:b.dailyCurrencyTotal)??0,consumedCurrency:c})}),e.jsx(B,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(Ee,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(n.Suspense,{children:e.jsx(Re,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(S,{url:a,scale:.8,position:_?[0,-3,0]:[0,-2,0],rotation:_?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(ze,{})]})})}),e.jsx(B,{className:Ce.statusSection,style:{flexShrink:0},children:e.jsx(Kt,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},A=({symbol:t,label:a="",className:r="",style:o={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...o},children:t}),ts=({content:t})=>{const[a,r]=n.useState(null),o=u=>{r(u.currentTarget)},s=()=>{r(null)},c=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:o,style:{cursor:"pointer",marginLeft:4},children:e.jsx(A,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(We,{open:c,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},ss=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],as=()=>{const{userData:t}=W();if(!t)return null;const{pet:a}=t;return e.jsxs(k,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(k,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(A,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(p,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),ss.map(r=>e.jsx(he,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(k,{justify:"space-between",align:"center",children:[e.jsxs(k,{align:"center",gap:1,children:[e.jsx(A,{symbol:r.emoji,size:20}),e.jsx(p,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(ts,{content:r.description})]}),e.jsxs(p,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},ue=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],me=({name:t,description:a,progress:r})=>e.jsxs(he,{style:{width:"100%"},children:[e.jsx(p,{styleAs:"h4",children:t}),e.jsx(p,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Ue,{value:r}),e.jsxs(p,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),os=()=>{const t=ue.filter(o=>o.status==="inProgress"),a=ue.filter(o=>o.status==="notStarted"),r=ue.filter(o=>o.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(p,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs($e,{children:[e.jsxs(le,{value:"",children:[e.jsx(ie,{children:"In Progress"}),e.jsx(ce,{children:e.jsx(k,{direction:"column",gap:2,children:t.map(o=>e.jsx(me,{...o},o.name))})})]}),e.jsxs(le,{value:"",children:[e.jsx(ie,{children:"Not Started"}),e.jsx(ce,{children:e.jsx(k,{direction:"column",gap:2,children:a.map(o=>e.jsx(me,{...o},o.name))})})]}),e.jsxs(le,{value:"",children:[e.jsx(ie,{children:"Completed"}),e.jsx(ce,{children:e.jsx(k,{direction:"column",gap:2,children:r.map(o=>e.jsx(me,{...o},o.name))})})]})]})]})},Le=[{path:"/",name:"Character",element:e.jsx(es,{})},{path:"/skills",name:"Skills",element:e.jsx(as,{})},{path:"/quests",name:"Quests",element:e.jsx(os,{})}],rs={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Ae=Ge(rs);He(Ae);const re=qe(Ae);Ve(re,Ye).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const ns=new Xe;function ls(){Ke(re).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const D=Je.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),is=()=>{const{userData:t,setUserData:a}=W(),r=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[o,s]=n.useState(""),[c,u]=n.useState(null),[_,j]=n.useState(!1),[S,b]=n.useState(null),[C,I]=n.useState(null),[h,N]=n.useState(!1),T=async()=>{var i,m;if(o.trim()){j(!0),b(null),u(null);try{const{data:v}=await D.post("/chatnutrition",{message:o}),w={...v,description:o,userId:t==null?void 0:t.uid};console.log(w),I(w),N(!0)}catch(v){const w=v,L=(i=w.response)==null?void 0:i.data;((m=w.response)==null?void 0:m.status)===400?b((L==null?void 0:L.suggestion)||"Please describe a specific food item or meal"):b("Failed to get nutrition info. Try again.")}finally{j(!1)}}},O=async()=>{if(C){j(!0),b(null);try{const i=await D.post("/meal/addMeal",C),{mealAffects:m,updatedUser:v}=i.data;a(v);const w=[];m.currency&&w.push(`ðŸ¦´ This meal cost ${m.currency} bone${m.currency>1?"s":""}!`),m.armorIncrease&&w.push(`ðŸ›¡ï¸ +${m.armorIncrease.toFixed(1)} Armor from protein`),m.defenseIncrease&&w.push(`ðŸ§± +${m.defenseIncrease.toFixed(1)} Defense from fiber`),m.speedIncrease&&w.push(`ðŸ’¨ +${m.speedIncrease.toFixed(1)} Speed from hydration`),m.intelligenceIncrease&&w.push(`ðŸ§  +${m.intelligenceIncrease} Intelligence from fruits & vegetables`),w.length===0&&w.push("Seems like this meal didnt contain any sustenance!"),u(w.join(`
`))}catch{b("Failed to confirm meal. Try again.")}finally{j(!1),I(null),N(!1),s("")}}},g=()=>{I(null),N(!1),u(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"ðŸŽ FOOD LOGGER v2.0 ðŸŽ"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:o,onChange:i=>s(i.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),h?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[r==="bones"?"ðŸ¦´":"ðŸŸ"," COST: ",Math.round(C.calories/100)," ",r]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:O,disabled:_,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:_?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:_?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:_?"PROCESSING...":"âœ“ CONFIRM"}),e.jsx("button",{onClick:g,disabled:_,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:_?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:_?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"âœ— CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:T,disabled:_||!o.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:_||!o.trim()?"#332200":"#1a1100",color:_||!o.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:_||!o.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:_||!o.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:_?"âš¡ ANALYZING...":"ðŸš€ ANALYZE FOOD"})}),S&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["âš ï¸ ERROR: ",S]})}),c&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:c})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINEâ„¢"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},cs={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},ds=({petType:t,selectedRpe:a,onChange:r})=>{const o=cs[t],s=c=>{r(c)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:o.map(c=>e.jsxs(he,{onClick:()=>s(c.rpe),style:{cursor:"pointer",border:a===c.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===c.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(A,{size:32,symbol:c.emoji}),e.jsx(p,{style:{fontSize:12,marginTop:8},children:c.rpe}),e.jsx(p,{style:{fontSize:14,marginTop:6},children:c.text})]},c.rpe))})},_s=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(A,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,Be=n.createContext(void 0),ps=()=>{const t=n.useContext(Be);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let us=0;const ms=({children:t})=>{const[a,r]=n.useState([]),[o,s]=n.useState(null);n.useEffect(()=>{!o&&a.length>0&&(s(a[0]),r(_=>_.slice(1)))},[a,o]),n.useEffect(()=>{if(!o)return;const _=o.duration??3e3,j=setTimeout(()=>{s(null)},_);return()=>clearTimeout(j)},[o]);const c=n.useCallback(_=>{const j=++us;r(S=>[...S,{id:j,..._}])},[]),u=n.useCallback(()=>{s(null)},[]);return e.jsxs(Be.Provider,{value:{addToast:c,removeToast:u},children:[t,o&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:o.content},o.id)})]})},xs="_levelUpContainer_vq3kq_1",hs="_levelUpPulse_vq3kq_1",gs="_shimmer_vq3kq_1",fs="_emoji_vq3kq_32",ys="_bounce_vq3kq_1",js="_levelText_vq3kq_41",vs="_levelNumber_vq3kq_54",Ss="_celebration_vq3kq_67",ws="_fadeInUp_vq3kq_1",K={levelUpContainer:xs,levelUpPulse:hs,shimmer:gs,emoji:fs,bounce:ys,levelText:js,levelNumber:vs,celebration:Ss,fadeInUp:ws},Oe=n.createContext(void 0),bs=({children:t})=>{const[a,r]=n.useState(null),[o,s]=n.useState(void 0),c=({content:_,style:j})=>{r(_),s(j)},u=()=>{r(null),s(void 0)};return e.jsxs(Oe.Provider,{value:{showSplash:c,hideSplash:u},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...o},onClick:u,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(G,{onClick:u,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},Cs=()=>{const t=n.useContext(Oe);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},ks={1:.5,2:1,3:1.5,4:2.2},Ns=({setDrawerView:t})=>{const{userData:a,setUserData:r}=W(),{addToast:o}=ps(),{showSplash:s}=Cs(),[c,u]=n.useState(!1),[_,j]=n.useState("WEIGHTS"),[S,b]=n.useState("DURATION"),[C,I]=n.useState(""),[h,N]=n.useState(""),[T,O]=n.useState(""),[g,i]=n.useState(null),[m,v]=n.useState(""),w=["WEIGHTS","CARDIO","MOBILITY","SPORT"],L=["DURATION","DISTANCE"],[f,y]=n.useState(!1),F=Array.from({length:12},(x,z)=>z),R=Array.from({length:60},(x,z)=>z),[$,J]=n.useState({strength:0,agility:0,pet:0});console.log(h),console.log(g);function ne(){const x=(Number(h)||0)*60+(Number(T)||0);console.log("totalDuration ",x);const z=ks[g??2];let E=0;x>0?E=Math.round(x*10*z):Number(C)>0&&(E=Math.round(Number(C)*125*z)),console.log("totalXp ",E);let Q=0,Z=0;switch(_){case"WEIGHTS":Q=Math.round(E/100);break;case"CARDIO":Z=Math.round(E/100);break;case"MOBILITY":case"SPORT":const Me=E/2/100,Pe=E/2/100;Q=Math.round(Me),Z=Math.round(Pe);break}return console.log("final ",{strength:Q,agility:Z,pet:E}),{strength:Q,agility:Z,pet:E}}const U=w.includes(_)&&L.includes(S)&&(C!==""||h!==""||T!=="")&&g!==null;function H(){I(""),N(""),O(""),i(null),v(""),j("WEIGHTS"),b("DURATION")}const Fe=async()=>{const x=ne();if(J(x),!a||!a.uid){alert("User not loaded properly.");return}const z=S==="DURATION"?(Number(h)||0)*60+(Number(T)||0):0;try{const{data:E}=await D.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:_,cardioMode:S,duration:z,distance:S==="DISTANCE"&&Number(C)||0,rpe:g,notes:m,workoutXp:x});r(E.updatedUser),H(),o({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(A,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",x.pet," PET XP"]}),x.strength>0&&x.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",x.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",x.agility," AGILITY"]})]}):x.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",x.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",x.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{E.levelUp&&s({content:e.jsxs("div",{className:K.levelUpContainer,children:[e.jsx("div",{className:K.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:K.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:K.levelNumber,children:["LEVEL ",E.updatedUser.pet.level]}),e.jsx("div",{className:K.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(E){console.error(E),alert("There was an error logging your workout.")}};return c?e.jsx(ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(ke,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(ge,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(_s,{open:f,onClose:()=>y(!1)}),e.jsx(p,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(p,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(fe,{value:_??"",onChange:x=>j(x.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:w.map(x=>e.jsx(ye,{value:x,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:x},x))}),_==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(fe,{value:S??"",onChange:x=>{b(x.currentTarget.value),I(""),N(""),O("")},style:{marginBottom:16},children:L.map(x=>e.jsx(ye,{value:x,appearance:x==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:x},x))})]}),S==="DISTANCE"&&_==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(p,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(te,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:C,onChange:x=>I(x.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(p,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(M,{direction:"row",gap:2,children:[e.jsx(ae,{value:h+" hr(s)",onSelectionChange:(x,z)=>N(z[0]??""),placeholder:"Hours",children:F.map(x=>e.jsxs(oe,{value:String(x),children:[x," hr"]},x))}),e.jsx(ae,{value:T+" min(s)",onSelectionChange:(x,z)=>O(z[0]??""),placeholder:"Minutes",children:R.map(x=>e.jsxs(oe,{value:String(x),children:[x<10?`0${x}`:x," min"]},x))})]})]}),e.jsx(p,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(ds,{selectedRpe:g,onChange:x=>i(x),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(p,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:m,onChange:x=>v(x.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(G,{onClick:Fe,disabled:!U,style:{opacity:U?1:.4,cursor:U?"pointer":"not-allowed",color:U?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:U?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Is="_backdrop_1mk9a_9",Ts="_drawer_1mk9a_17",Ls="_drawer__header_1mk9a_34",As="_drawer__headerContent_1mk9a_41",Bs="_drawer__headerIcon_1mk9a_46",Os="_drawer__title_1mk9a_49",Fs="_drawer__closeButton_1mk9a_55",Ms="_drawer__content_1mk9a_67",Ps="_mealCard_1mk9a_73",Es="_mealCard__header_1mk9a_85",Rs="_mealCard__info_1mk9a_91",zs="_mealCard__title_1mk9a_94",Ds="_mealCard__timestamp_1mk9a_100",Ws="_mealCard__calories_1mk9a_105",$s="_mealCard__caloriesValue_1mk9a_108",Us="_mealCard__caloriesLabel_1mk9a_115",Gs="_mealCard__macros_1mk9a_119",Hs="_mealCard__additionalStats_1mk9a_125",qs="_mealCard__statBoosts_1mk9a_131",Vs="_mealCard__statBoostsTitle_1mk9a_135",Xs="_mealCard__statBoostsGrid_1mk9a_141",Ys="_mealCard__currency_1mk9a_146",Ks="_mealCard__currencyText_1mk9a_150",Js="_macroItem_1mk9a_156",Qs="_macroItem__value_1mk9a_162",Zs="_macroItem__label_1mk9a_168",ea="_additionalStat_1mk9a_182",ta="_additionalStat__icon_1mk9a_190",sa="_additionalStat__content_1mk9a_193",aa="_additionalStat__value_1mk9a_196",oa="_additionalStat__label_1mk9a_203",ra="_statBoost_1mk9a_212",na="_statBoost__icon_1mk9a_221",la="_statBoost__label_1mk9a_236",ia="_statBoost__value_1mk9a_239",ca="_loadingState_1mk9a_244",da="_loadingState__content_1mk9a_248",_a="_pulse_1mk9a_1",pa="_loadingState__text_1mk9a_251",ua="_loadingState__subtext_1mk9a_255",ma="_loadingMore_1mk9a_260",xa="_loadingMore__content_1mk9a_264",ha="_loadingMore__text_1mk9a_267",ga="_loadingMore__subtext_1mk9a_271",fa="_emptyState_1mk9a_276",ya="_emptyState__icon_1mk9a_280",ja="_emptyState__text_1mk9a_284",va="_emptyState__subtext_1mk9a_288",Sa="_endOfList_1mk9a_293",wa="_endOfList__text_1mk9a_298",ba="_endOfList__subtext_1mk9a_303",Ca="_mealsList_1mk9a_308",ka="_demoApp_1mk9a_314",Na="_demoApp__container_1mk9a_319",Ia="_demoApp__title_1mk9a_323",Ta="_demoApp__button_1mk9a_330",d={backdrop:Is,drawer:Ts,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:Ls,drawer__headerContent:As,drawer__headerIcon:Bs,drawer__title:Os,drawer__closeButton:Fs,drawer__content:Ms,mealCard:Ps,mealCard__header:Es,mealCard__info:Rs,mealCard__title:zs,mealCard__timestamp:Ds,mealCard__calories:Ws,mealCard__caloriesValue:$s,mealCard__caloriesLabel:Us,mealCard__macros:Gs,mealCard__additionalStats:Hs,mealCard__statBoosts:qs,mealCard__statBoostsTitle:Vs,mealCard__statBoostsGrid:Xs,mealCard__currency:Ys,mealCard__currencyText:Ks,macroItem:Js,macroItem__value:Qs,macroItem__label:Zs,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:ea,additionalStat__icon:ta,additionalStat__content:sa,additionalStat__value:aa,additionalStat__label:oa,statBoost:ra,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:na,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:la,statBoost__value:ia,loadingState:ca,loadingState__content:da,pulse:_a,loadingState__text:pa,loadingState__subtext:ua,loadingMore:ma,loadingMore__content:xa,loadingMore__text:ha,loadingMore__subtext:ga,emptyState:fa,emptyState__icon:ya,emptyState__text:ja,emptyState__subtext:va,endOfList:Sa,endOfList__text:wa,endOfList__subtext:ba,mealsList:Ca,demoApp:ka,demoApp__container:Na,demoApp__title:Ia,demoApp__button:Ta},La=()=>{const{userData:t}=W(),[a,r]=n.useState([]),[o,s]=n.useState(!1),[c,u]=n.useState(!1),[_,j]=n.useState(!0),[S,b]=n.useState(0),C=n.useRef(null),I=10,h=async(g=S,i=!1)=>{i?s(!0):u(!0);try{const v=(await D.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${I}&offset=${g}`)).data,w=v.meals||[];r(i?w:y=>[...y,...w]);const L=v.total||0,f=g+w.length;j(f<L),b(g+w.length)}catch(m){console.error("Error fetching meals:",m)}s(!1),u(!1)};n.useEffect(()=>{h(0,!0)},[]),n.useEffect(()=>{const g=()=>{const m=document.querySelector(".saltDrawer");if(!m)return;const{scrollTop:v,scrollHeight:w,clientHeight:L}=m;w-v<=L+100&&_&&!c&&h(S,!1)},i=document.querySelector(".saltDrawer");return i&&i.addEventListener("scroll",g),()=>{i&&i.removeEventListener("scroll",g)}},[S,_,c]);const N=g=>new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=({icon:g,label:i,value:m,color:v})=>e.jsxs("div",{className:`${d.statBoost} ${d[`statBoost--${v}`]}`,children:[e.jsx(g,{size:12,className:d.statBoost__icon}),e.jsx("span",{className:d.statBoost__label,children:i}),e.jsxs("span",{className:d.statBoost__value,children:["+",m]})]}),O=({meal:g})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.mealCard,children:[e.jsxs("div",{className:d.mealCard__header,children:[e.jsxs("div",{className:d.mealCard__info,children:[e.jsx("h3",{className:d.mealCard__title,children:g.description}),e.jsx("p",{className:d.mealCard__timestamp,children:N(g.timestamp)})]}),e.jsxs("div",{className:d.mealCard__calories,children:[e.jsx("div",{className:d.mealCard__caloriesValue,children:g.calories}),e.jsx("div",{className:d.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:d.mealCard__macros,children:[e.jsxs("div",{className:`${d.macroItem} ${d["macroItem--protein"]}`,children:[e.jsxs("div",{className:d.macroItem__value,children:[g.protein,"g"]}),e.jsx("div",{className:d.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${d.macroItem} ${d["macroItem--carbs"]}`,children:[e.jsxs("div",{className:d.macroItem__value,children:[g.carbs,"g"]}),e.jsx("div",{className:d.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${d.macroItem} ${d["macroItem--fat"]}`,children:[e.jsxs("div",{className:d.macroItem__value,children:[g.fat,"g"]}),e.jsx("div",{className:d.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:d.mealCard__additionalStats,children:[e.jsxs("div",{className:d.additionalStat,children:[e.jsx(Qe,{size:16,className:d.additionalStat__icon}),e.jsxs("div",{className:d.additionalStat__content,children:[e.jsxs("div",{className:d.additionalStat__value,children:[g.fluid_intake_ml,"ml"]}),e.jsx("div",{className:d.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:d.additionalStat,children:[e.jsx(Ze,{size:16,className:d.additionalStat__icon}),e.jsxs("div",{className:d.additionalStat__content,children:[e.jsx("div",{className:d.additionalStat__value,children:g.servings_of_fruits_vegetables}),e.jsx("div",{className:d.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:d.mealCard__statBoosts,children:[e.jsx("div",{className:d.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:d.mealCard__statBoostsGrid,children:[g.mealAffects.armorIncrease>0&&e.jsx(T,{icon:et,label:"ARM",value:g.mealAffects.armorIncrease,color:"blue"}),g.mealAffects.speedIncrease>0&&e.jsx(T,{icon:Ne,label:"SPD",value:g.mealAffects.speedIncrease,color:"yellow"}),g.mealAffects.intelligenceIncrease>0&&e.jsx(T,{icon:Ie,label:"INT",value:g.mealAffects.intelligenceIncrease,color:"pink"}),g.mealAffects.defenseIncrease>0&&e.jsx(T,{icon:tt,label:"DEF",value:g.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:d.mealCard__currency,children:e.jsxs("span",{className:d.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(st,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(at,{size:15,style:{verticalAlign:"middle"}})})," "+g.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:d.drawer__header,children:e.jsxs("div",{className:d.drawer__headerContent,children:[e.jsx(je,{className:d.drawer__headerIcon,size:32}),e.jsx("h2",{className:d.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:C,children:o?e.jsx("div",{className:d.loadingState,children:e.jsxs("div",{className:d.loadingState__content,children:[e.jsx("div",{className:d.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:d.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:d.emptyState,children:[e.jsx(je,{className:d.emptyState__icon,size:48}),e.jsx("div",{className:d.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:d.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:d.mealsList,children:[a.map((g,i)=>e.jsx(O,{meal:g},`${g.id}-${i}`)),c&&e.jsx("div",{className:d.loadingMore,children:e.jsxs("div",{className:d.loadingMore__content,children:[e.jsx("div",{className:d.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:d.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!_&&a.length>0&&e.jsxs("div",{className:d.endOfList,children:[e.jsx("div",{className:d.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:d.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},Aa="_container_1chaz_4",Ba="_heading_1chaz_10",Oa="_rangeButtons_1chaz_16",Fa="_button_1chaz_23",Ma="_activeButton_1chaz_37",Pa="_checkmarkPath_1chaz_53",Y={container:Aa,heading:Ba,rangeButtons:Oa,button:Fa,activeButton:Ma,checkmarkPath:Pa,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Ea=({onWeightChange:t})=>{var _,j;const{userData:a}=W(),r=()=>{var b,C;const S=(b=a==null?void 0:a.bodyStats)==null?void 0:b.weightLogs;if(Array.isArray(S)&&S.length>0){const I=[...S].sort((h,N)=>new Date(h.date).getTime()-new Date(N.date).getTime());return I[I.length-1].weight}return((C=a==null?void 0:a.bodyStats)==null?void 0:C.weight)??150},[o,s]=n.useState(r());n.useEffect(()=>{s(r())},[(_=a==null?void 0:a.bodyStats)==null?void 0:_.weightLogs,(j=a==null?void 0:a.bodyStats)==null?void 0:j.weight]);const c=S=>{const b=parseFloat((o+S).toFixed(1));b>=0&&s(b)},u=()=>{t(o)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(ot,{id:"current-weight",type:"number",step:.1,value:o,onChange:S=>{const b=parseFloat(S.target.value);!isNaN(b)&&b>=0?s(b):S.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(se,{onClick:()=>c(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"â–²"}),e.jsx(se,{onClick:()=>c(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"â–¼"})]}),e.jsx(se,{onClick:u,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Ra={week:7,month:30,threeMonths:90,all:1/0},za=t=>t<=7?0:t<=30?4:t<=90?15:30,Da=()=>{const[t,a]=n.useState(!1),{userData:r}=W(),[o,s]=n.useState("week"),[c,u]=n.useState([]),[_,j]=n.useState(!0);n.useEffect(()=>{(t||_)&&D.get(`/weightLogs/${r==null?void 0:r.uid}`).then(h=>{u(h.data.weightLogs)}).catch(h=>{console.log(h)}),j(!1)},[t]);const S=[...c].sort((h,N)=>new Date(h.date).getTime()-new Date(N.date).getTime()).map(h=>({date:typeof h.date=="string"?h.date.slice(0,10):h.date instanceof Date?h.date.toISOString().slice(0,10):"",weight:h.weight})),b=o==="all"?S:S.slice(-Ra[o]),C=za(b.length),I=async h=>{if(!r)return;const N={date:new Date().toISOString(),weight:h,userId:r.uid};try{const{data:T}=await D.post("weightLogs/addWeightLog",N);a(!0),setTimeout(()=>a(!1),1500)}catch(T){console.error(T)}};return e.jsxs("div",{className:Y.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:Y.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:Y.heading,children:"Log Your Weight"}),e.jsx("div",{className:Y.rangeButtons,children:["week","month","threeMonths","all"].map(h=>e.jsx(se,{className:o===h?Y.activeButton:Y.button,onClick:()=>s(h),children:h==="week"?"1W":h==="month"?"1M":h==="threeMonths"?"3M":"ALL"},h))}),e.jsx(rt,{width:"100%",height:300,children:e.jsxs(nt,{data:b,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(lt,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(it,{dataKey:"date",tickFormatter:h=>{const N=new Date(h);return isNaN(N.getTime())?"":ve(N,"MM/dd")},stroke:"#ff9900",interval:C,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(ct,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(dt,{labelFormatter:h=>ve(new Date(h),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(_t,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Ea,{onWeightChange:I})})]})},Wa="_drawer__header_1wo3n_2",$a="_drawer__headerContent_1wo3n_24",Ua="_drawer__headerIcon_1wo3n_32",Ga="_drawer__title_1wo3n_46",Ha="_drawer__content_1wo3n_56",qa="_loadingState_1wo3n_77",Va="_emptyState_1wo3n_78",Xa="_loadingState__content_1wo3n_90",Ya="_emptyState__content_1wo3n_91",Ka="_loadingState__spinner_1wo3n_98",Ja="_loadingState__text_1wo3n_115",Qa="_emptyState__text_1wo3n_116",Za="_loadingState__subtext_1wo3n_125",eo="_emptyState__subtext_1wo3n_126",to="_emptyState__icon_1wo3n_135",so="_workoutsList_1wo3n_143",ao="_workoutCard_1wo3n_149",oo="_workoutCard__border_1wo3n_185",ro="_workoutCard__header_1wo3n_196",no="_workoutCard__info_1wo3n_205",lo="_workoutCard__title_1wo3n_209",io="_workoutCard__timestamp_1wo3n_216",co="_workoutCard__timestampIcon_1wo3n_228",_o="_workoutCard__xp_1wo3n_232",po="_workoutCard__xpValue_1wo3n_243",uo="_workoutCard__xpLabel_1wo3n_250",mo="_workoutCard__stats_1wo3n_255",xo="_statItem_1wo3n_262",ho="_statItem__value_1wo3n_303",go="_statItem__label_1wo3n_310",fo="_workoutCard__sectionTitle_1wo3n_316",yo="_workoutCard__manualStats_1wo3n_334",jo="_workoutCard__manualGrid_1wo3n_338",vo="_manualStat_1wo3n_344",So="_manualStat__icon_1wo3n_355",wo="_manualStat__content_1wo3n_360",bo="_manualStat__value_1wo3n_366",Co="_manualStat__label_1wo3n_374",ko="_workoutCard__exercises_1wo3n_380",No="_workoutCard__exercisesList_1wo3n_384",Io="_exerciseItem_1wo3n_390",To="_exerciseItem__name_1wo3n_408",Lo="_exerciseItem__sets_1wo3n_415",Ao="_exerciseItem__set_1wo3n_415",Bo="_exerciseItem__notes_1wo3n_431",Oo="_workoutCard__statBoosts_1wo3n_440",Fo="_workoutCard__statBoostsGrid_1wo3n_450",Mo="_statBoost_1wo3n_456",Po="_statBoost__icon_1wo3n_497",Eo="_statBoost__label_1wo3n_501",Ro="_statBoost__value_1wo3n_505",zo="_workoutCard__notes_1wo3n_510",Do="_workoutCard__notesText_1wo3n_514",Wo="_loadingMore_1wo3n_536",$o="_endOfList_1wo3n_537",Uo="_loadingMore__content_1wo3n_551",Go="_loadingMore__spinner_1wo3n_557",Ho="_loadingMore__text_1wo3n_565",qo="_loadingMore__subtext_1wo3n_573",Vo="_endOfList__content_1wo3n_587",Xo="_endOfList__text_1wo3n_593",Yo="_endOfList__subtext_1wo3n_601",l={drawer__header:Wa,drawer__headerContent:$a,drawer__headerIcon:Ua,"pulse-glow":"_pulse-glow_1wo3n_1",drawer__title:Ga,drawer__content:Ha,loadingState:qa,emptyState:Va,loadingState__content:Xa,emptyState__content:Ya,loadingState__spinner:Ka,"pixel-spin":"_pixel-spin_1wo3n_1",loadingState__text:Ja,emptyState__text:Qa,loadingState__subtext:Za,emptyState__subtext:eo,emptyState__icon:to,workoutsList:so,workoutCard:ao,"scan-line":"_scan-line_1wo3n_1",workoutCard__border:oo,workoutCard__header:ro,workoutCard__info:no,workoutCard__title:lo,workoutCard__timestamp:io,workoutCard__timestampIcon:co,workoutCard__xp:_o,workoutCard__xpValue:po,workoutCard__xpLabel:uo,workoutCard__stats:mo,statItem:xo,"statItem--type":"_statItem--type_1wo3n_285","statItem--logtype":"_statItem--logtype_1wo3n_291","statItem--rpe":"_statItem--rpe_1wo3n_297",statItem__value:ho,statItem__label:go,workoutCard__sectionTitle:fo,workoutCard__manualStats:yo,workoutCard__manualGrid:jo,manualStat:vo,manualStat__icon:So,manualStat__content:wo,manualStat__value:bo,manualStat__label:Co,workoutCard__exercises:ko,workoutCard__exercisesList:No,exerciseItem:Io,exerciseItem__name:To,exerciseItem__sets:Lo,exerciseItem__set:Ao,exerciseItem__notes:Bo,workoutCard__statBoosts:Oo,workoutCard__statBoostsGrid:Fo,statBoost:Mo,"statBoost--red":"_statBoost--red_1wo3n_479","statBoost--yellow":"_statBoost--yellow_1wo3n_485","statBoost--pink":"_statBoost--pink_1wo3n_491",statBoost__icon:Po,statBoost__label:Eo,statBoost__value:Ro,workoutCard__notes:zo,workoutCard__notesText:Do,loadingMore:Wo,endOfList:$o,loadingMore__content:Uo,loadingMore__spinner:Go,loadingMore__text:Ho,loadingMore__subtext:qo,endOfList__content:Vo,endOfList__text:Xo,endOfList__subtext:Yo},Ko=()=>{const{userData:t}=W(),[a,r]=n.useState([]),[o,s]=n.useState(!1),[c,u]=n.useState(!1),[_,j]=n.useState(!0),[S,b]=n.useState(0),C=n.useRef(null),I=10,h=async(i=S,m=!1)=>{m?s(!0):u(!0);try{const w=(await D.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${I}&offset=${i}`)).data,L=w.workouts||[];r(m?L:F=>[...F,...L]);const f=w.total||0,y=i+L.length;j(y<f),b(i+L.length)}catch(v){console.error("Error fetching workouts:",v)}s(!1),u(!1)};n.useEffect(()=>{h(0,!0)},[]),n.useEffect(()=>{const i=()=>{const v=document.querySelector(".saltDrawer");if(!v)return;const{scrollTop:w,scrollHeight:L,clientHeight:f}=v;L-w<=f+100&&_&&!c&&h(S,!1)},m=document.querySelector(".saltDrawer");return m&&m.addEventListener("scroll",i),()=>{m&&m.removeEventListener("scroll",i)}},[S,_,c]);const N=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=i=>{const m=Math.floor(i/60),v=i%60;return m>0?`${m}h ${v}m`:`${v}m`},O=({icon:i,label:m,value:v,color:w})=>e.jsxs("div",{className:`${l.statBoost} ${l[`statBoost--${w}`]}`,children:[e.jsx(i,{size:17,className:l.statBoost__icon}),e.jsx("span",{className:l.statBoost__label,children:m}),e.jsxs("span",{className:l.statBoost__value,children:["+",v]})]}),g=({workout:i})=>{var L;const m=i.logType==="manual",v=i.logType==="routine",w=i.workoutXp.pet;return e.jsxs("div",{className:l.workoutCard,children:[e.jsx("div",{className:l.workoutCard__border}),e.jsxs("div",{className:l.workoutCard__header,children:[e.jsxs("div",{className:l.workoutCard__info,children:[e.jsx("h3",{className:l.workoutCard__title,children:v?`${i.routineDay} ROUTINE`:`${(L=i==null?void 0:i.workoutType)==null?void 0:L.toUpperCase()} SESSION`}),e.jsxs("p",{className:l.workoutCard__timestamp,children:[e.jsx(pt,{size:12,className:l.workoutCard__timestampIcon}),N(i.timestamp)]})]}),e.jsxs("div",{className:l.workoutCard__xp,children:[e.jsx("div",{className:l.workoutCard__xpValue,children:w}),e.jsx("div",{className:l.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:l.workoutCard__stats,children:i.rpe&&e.jsxs("div",{className:`${l.statItem} ${l["statItem--rpe"]}`,children:[e.jsxs("div",{className:l.statItem__value,children:[i.rpe,"/10"]}),e.jsx("div",{className:l.statItem__label,children:"RPE"})]})}),m&&e.jsx("div",{className:l.workoutCard__manualStats,children:e.jsxs("div",{className:l.workoutCard__manualGrid,children:[i.duration&&e.jsxs("div",{className:l.manualStat,children:[e.jsx(ut,{size:25,className:l.manualStat__icon}),e.jsxs("div",{className:l.manualStat__content,children:[e.jsx("div",{className:l.manualStat__value,children:T(i.duration)}),e.jsx("div",{className:l.manualStat__label,children:"DURATION"})]})]}),i.distance!=0&&e.jsxs("div",{className:l.manualStat,children:[e.jsx(mt,{size:16,className:l.manualStat__icon}),e.jsxs("div",{className:l.manualStat__content,children:[e.jsxs("div",{className:l.manualStat__value,children:[i.distance," KM"]}),e.jsx("div",{className:l.manualStat__label,children:"DISTANCE"})]})]})]})}),v&&i.performedExercises&&i.performedExercises.length>0&&e.jsxs("div",{className:l.workoutCard__exercises,children:[e.jsxs("div",{className:l.workoutCard__sectionTitle,children:[e.jsx(de,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:l.workoutCard__exercisesList,children:i.performedExercises.map((f,y)=>e.jsxs("div",{className:l.exerciseItem,children:[e.jsx("div",{className:l.exerciseItem__name,children:f.name.toUpperCase()}),e.jsx("div",{className:l.exerciseItem__sets,children:f.sets.map((F,R)=>e.jsxs("span",{className:l.exerciseItem__set,children:[F.weight,"KG Ã— ",F.reps]},R))}),f.notes&&e.jsxs("div",{className:l.exerciseItem__notes,children:['"',f.notes,'"']})]},y))})]}),e.jsxs("div",{className:l.workoutCard__statBoosts,children:[e.jsxs("div",{className:l.workoutCard__sectionTitle,children:[e.jsx(xt,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:l.workoutCard__statBoostsGrid,children:[i.workoutXp.strength>0&&e.jsx(O,{icon:ht,label:"STR",value:i.workoutXp.strength,color:"red"}),i.workoutXp.agility>0&&e.jsx(O,{icon:Ne,label:"AGI",value:i.workoutXp.agility,color:"yellow"})]})]}),i.notes&&e.jsxs("div",{className:l.workoutCard__notes,children:[e.jsxs("div",{className:l.workoutCard__sectionTitle,children:[e.jsx(Ie,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:l.workoutCard__notesText,children:['"',i.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.drawer__header,children:e.jsxs("div",{className:l.drawer__headerContent,children:[e.jsx(de,{className:l.drawer__headerIcon,size:32}),e.jsx("h2",{className:l.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:l.drawer__content,ref:C,children:o?e.jsx("div",{className:l.loadingState,children:e.jsxs("div",{className:l.loadingState__content,children:[e.jsx("div",{className:l.loadingState__spinner}),e.jsx("div",{className:l.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:l.loadingState__subtext,children:"ðŸ’ª FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:l.emptyState,children:e.jsxs("div",{className:l.emptyState__content,children:[e.jsx(de,{className:l.emptyState__icon,size:48}),e.jsx("div",{className:l.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:l.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:l.workoutsList,children:[a.map((i,m)=>e.jsx(g,{workout:i},`${i._id}-${m}`)),c&&e.jsx("div",{className:l.loadingMore,children:e.jsxs("div",{className:l.loadingMore__content,children:[e.jsx("div",{className:l.loadingMore__spinner}),e.jsx("div",{className:l.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:l.loadingMore__subtext,children:"âš¡ FETCHING NEXT BATCH"})]})}),!_&&a.length>0&&e.jsx("div",{className:l.endOfList,children:e.jsxs("div",{className:l.endOfList__content,children:[e.jsx("div",{className:l.endOfList__text,children:"ðŸŽ¯ END OF WORKOUT LOG"}),e.jsxs("div",{className:l.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})},Jo=n.forwardRef(function({onClick:a,to:r,...o},s){const c=gt(r),u=ft(r);return e.jsx(yt,{...o,href:c,onClick:_=>{a==null||a(_),_.defaultPrevented||u(_)},ref:s})}),Qo=()=>{const[t,a]=n.useState("none"),{pathname:r}=jt();return e.jsxs("div",{className:"app-header",children:[e.jsx(e.Fragment,{children:e.jsxs(Se,{children:[e.jsx(we,{children:e.jsx(G,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(vt,{"aria-hidden":!0})})}),e.jsxs(be,{children:[e.jsx(V,{onClick:()=>a("logWeight"),children:"Log Weight"}),e.jsx(V,{onClick:()=>a("logFood"),children:"Log Food"}),e.jsx(V,{onClick:()=>a("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(e.Fragment,{children:e.jsx("nav",{children:e.jsx(M,{direction:"row",gap:1,role:"list",children:Le.map(o=>e.jsx("div",{role:"listitem",children:e.jsx(Jo,{active:r===o.path,to:o.path,children:o.name})},o.name))})})}),e.jsx(e.Fragment,{children:e.jsx(St,{placement:"top",content:"User Settings",children:e.jsxs(Se,{children:[e.jsx(we,{children:e.jsx(G,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(wt,{"aria-hidden":!0})})}),e.jsxs(be,{children:[e.jsx(V,{onClick:()=>a("mealHist"),children:"View Meals"}),e.jsx(V,{onClick:()=>a("workoutHist"),children:"View Workouts"}),e.jsx(V,{onClick:ls,children:"Logout"})]})]})})}),e.jsxs(bt,{open:t!=="none",onOpenChange:()=>a("none"),position:"bottom",children:[e.jsx(Ct,{onClick:()=>a("none")}),t==="logFood"&&e.jsx(is,{}),t==="logWorkout"&&e.jsx(Ns,{setDrawerView:a}),t==="mealHist"&&e.jsx(La,{}),t==="workoutHist"&&e.jsx(Ko,{}),t==="logWeight"&&e.jsx(Da,{})]})]})},Zo="_myBackground_1pm88_1",er="_loginScreen_1pm88_13",tr="_overlay_1pm88_29",sr="_loginContainer_1pm88_39",ar="_googleButton_1pm88_49",xe={myBackground:Zo,loginScreen:er,overlay:tr,loginContainer:sr,googleButton:ar};function or(){const{setUserData:t}=W(),[a,r]=n.useState(!1),o=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const c=await(await kt(re,ns)).user.getIdToken(),{data:u}=await D.post("/auth/google",{token:c}),j=(await D.get(`/users/${u.uid}`)).data;t(j),console.log("User saved or retrieved from DB:",u)}catch(s){console.error(s)}r(!0)};return e.jsx("div",{className:xe.loginScreen,children:e.jsx("div",{className:xe.loginContainer,children:a?e.jsx(ke,{size:"large","aria-label":"loading",role:"status"}):e.jsx(G,{className:xe.googleButton,onClick:o,children:"Embark with Google"})})})}const rr=()=>{const{userData:t,setUserData:a}=W();if(!t)return e.jsx(p,{children:"Loading..."});const[r,o]=n.useState(0),[s,c]=n.useState(t),[u,_]=n.useState(1),[j,S]=n.useState(1.2),[b,C]=n.useState(0),[I,h]=n.useState(Math.floor(s.bodyStats.height/12)),[N,T]=n.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(p,{children:"Loading..."});n.useEffect(()=>{const f=I*12+N;console.log("total inches : ",f),c(y=>({...y,bodyStats:{...y.bodyStats,height:f}}))},[I,N]);const O=f=>{const{weight:y,height:F,age:R,sex:$}=f;return $==="male"?10*(y/2.205)+6.25*(F*2.54)-5*R+5:10*(y/2.205)+6.25*(F*2.54)-5*R-161},g=f=>{const y=j+b;return f*y},i=async f=>{f.preventDefault();const y=s.bodyStats.weight,F={userId:t.uid,date:new Date,weight:y},R=O(s.bodyStats),$=g(R),J=s.goal.goalType==="weight_loss"?$-u*3500/7:s.goal.goalType==="muscle_gain"?$+300:$,ne=Math.round(J/100),U={...s,bodyStats:{...s.bodyStats,bmr:R,tdee:$,weight:y},goal:{...s.goal,dailyCalorieGoal:J,dailyCurrencyTotal:ne,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",U);try{const{data:H}=await D.post("/users/update",{...U});a(H)}catch(H){console.error("Error updating user data:",H)}try{await D.post("/weightLogs/addWeightLog",F)}catch(H){console.error(H)}},m=(f,y,F)=>{const{name:R,value:$}=f.target;c({...s,[y]:{...s[y],[F||R]:$}})},v=(f,y,F)=>{c({...s,[f]:{...s[f],[y]:F}})},w=()=>{if(r===0){const{weight:f,height:y,age:F,sex:R}=s.bodyStats;return f>0&&y>0&&F>0&&["male","female"].includes(R)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(r===2){const{name:f,currentPet:y}=s.pet;return f.trim()!==""&&["puppy","kitten","bird"].includes(y)}return!0},L=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(k,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(B,{grow:1,children:e.jsxs(M,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(B,{children:e.jsx(p,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(B,{children:e.jsx(Nt,{children:L.map((f,y)=>e.jsx(It,{label:f,stage:r===y?"active":y<r?"completed":"pending"},y))})}),e.jsxs("form",{onSubmit:i,children:[r===0&&e.jsxs(M,{align:"stretch",gap:2,children:[e.jsx(p,{styleAs:"h2",children:"Body Stats"}),e.jsxs(q,{children:[e.jsx(X,{children:"Weight (lbs)"}),e.jsx(te,{value:s.bodyStats.weight,onChange:f=>m(f,"bodyStats","weight")})]}),e.jsxs(q,{children:[e.jsx(X,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(ae,{value:I.toString()+" ft",onSelectionChange:(f,y)=>h(Number(y)),children:[2,3,4,5,6,7,8,9].map(f=>e.jsxs(oe,{value:f.toString(),children:[f," ft"]},f))}),e.jsx(ae,{value:N.toString()+" in",onSelectionChange:(f,y)=>T(Number(y)),children:Array.from({length:12},(f,y)=>e.jsxs(oe,{value:y.toString(),children:[y," in"]},y))})]})]}),e.jsxs(q,{children:[e.jsx(X,{children:"Sex"}),e.jsxs(k,{direction:"row",gap:2,children:[e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(k,{direction:"column",align:"center",gap:1,children:[e.jsx(A,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(p,{children:"Male"})]})})}),e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(k,{direction:"column",align:"center",gap:1,children:[e.jsx(A,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(p,{children:"Female"})]})})})]})]}),e.jsxs(q,{children:[e.jsx(X,{children:"Age (years)"}),e.jsx(te,{value:s.bodyStats.age,onChange:f=>m(f,"bodyStats","age")})]})]}),r===1&&e.jsxs(M,{gap:2,children:[e.jsx(p,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(k,{direction:"row",gap:2,children:[e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(k,{direction:"column",align:"center",gap:1,children:e.jsxs(B,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(A,{symbol:"ðŸ”¥",size:24}),e.jsx(p,{children:"Weight Loss"})]})})})}),e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(k,{direction:"column",align:"center",gap:1,children:e.jsxs(B,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(A,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(p,{children:"Muscle Gain"})]})})})}),e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(k,{direction:"column",align:"center",gap:1,children:e.jsxs(B,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(A,{symbol:"ðŸ› ï¸",size:24}),e.jsx(p,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(q,{children:[e.jsx(p,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Tt,{max:2,min:.5,step:.25,value:u,onChange:(f,y)=>_(y),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(M,{gap:1,children:[e.jsx(p,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(p,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(k,{direction:"column",gap:1,children:[e.jsx(P,{onClick:()=>S(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:j===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ’»",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(P,{onClick:()=>S(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:j===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(P,{onClick:()=>S(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:j===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(P,{onClick:()=>S(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:j===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(M,{gap:1,children:[e.jsx(p,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(p,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(k,{direction:"column",gap:1,children:[e.jsx(P,{onClick:()=>C(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:b===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Sedentary"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(P,{onClick:()=>C(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:b===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Lightly Active"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(P,{onClick:()=>C(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:b===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Moderately Active"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(P,{onClick:()=>C(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:b===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Very Active"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(P,{onClick:()=>C(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:b===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(k,{direction:"row",align:"center",gap:2,children:[e.jsx(A,{symbol:"ðŸ’ª",size:30}),e.jsxs(M,{gap:0,children:[e.jsx(p,{styleAs:"h2",children:"Extremely Active"}),e.jsx(p,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(M,{gap:2,children:[e.jsx(p,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(q,{children:[e.jsx(X,{children:"Pet Name"}),e.jsx(te,{value:s.pet.name,onChange:f=>m(f,"pet","name")})]}),e.jsxs(q,{children:[e.jsx(X,{children:"Pet Type"}),e.jsxs(k,{direction:"row",gap:2,children:[e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(k,{direction:"column",align:"center",gap:1,children:e.jsxs(B,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(A,{symbol:"ðŸ¶",size:24}),e.jsx(p,{children:"Dog"})]})})})}),e.jsx(B,{grow:1,children:e.jsx(P,{onClick:()=>v("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(k,{direction:"column",align:"center",gap:1,children:e.jsxs(B,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(A,{symbol:"ðŸ±",size:24}),e.jsx(p,{children:"Cat"})]})})})})]})]})]}),e.jsx(B,{style:{paddingTop:"20px"},children:e.jsxs(k,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(G,{sentiment:"neutral",appearance:"solid",onClick:()=>o(r-1),children:"Previous"}),r<L.length-1&&e.jsx(G,{sentiment:"accented",appearance:"solid",disabled:!w(),onClick:()=>o(r+1),children:"Next"}),r===L.length-1&&e.jsx(G,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!w(),onClick:i,children:"Start Your Adventure!"})]})})]})]})})})};function nr(){const[t,a]=n.useState(null),[r,o]=n.useState(!0),{userData:s,setUserData:c}=W();return n.useEffect(()=>{const u=Lt.throttle(()=>{console.log("Fetching user object..."),D.get(`/users/${s==null?void 0:s.uid}`).then(j=>{c(j.data),console.log("User data synced:",j.data)}).catch(j=>{console.error("Failed to fetch user:",j)})},1e4),_=()=>{console.log("User came back!"),u()};return s&&window.addEventListener("focus",_),()=>{s&&(window.removeEventListener("focus",_),u.cancel())}},[]),n.useEffect(()=>{const u=At(re,_=>{console.log("Auth state changed:",_),console.log("User Data in App useEffect:",s),a(_),o(!1);const j=localStorage.getItem("userData");j&&c(JSON.parse(j))});return()=>u()},[]),console.log("App render - Loading:",r,"User:",t,"UserData:",s),r?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(_e,{mode:"dark",children:e.jsx(or,{})}):s.bodyStats.weight===0?e.jsx(_e,{mode:"dark",children:e.jsx(rr,{})}):e.jsx(_e,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:e.jsx(Bt,{children:Le.map(u=>e.jsx(Ot,{path:u.path,element:u.element},u.name))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(Qo,{})})]})})}Ft.createRoot(document.getElementById("root")).render(e.jsx(Mt.StrictMode,{children:e.jsx(Pt,{children:e.jsx(Ut,{children:e.jsx(ms,{children:e.jsx(bs,{children:e.jsx(nr,{})})})})})}));
