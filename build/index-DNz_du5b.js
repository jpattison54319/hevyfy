import{r as o,j as e,T as i,F as f,a as S,C as Ie,B as Ne,O as Pe,u as Fe,P as Le,b as xe,A as Be,c as ae,d as ne,e as oe,L as Me,i as Oe,g as Re,f as De,s as Ee,G as Ue,h as We,k as He,l as Ge,m as ue,n as D,S as ee,o as he,p as me,I as Z,q as N,D as te,t as se,U as ge,v as $e,w as qe,x as Ve,R as Xe,y as Ye,z as Ke,E as Je,H as Qe,J as Ze,K as et,N as tt,M as st,Q as _e,V as fe,W as rt,X as ye,Y as V,Z as at,_ as nt,$ as ot,a0 as lt,a1 as it,a2 as ct,a3 as W,a4 as G,a5 as F,a6 as dt,a7 as pt,a8 as ut,a9 as le,aa as xt,ab as ht,ac as mt,ad as gt,ae as _t}from"./vendor-CQb7Y_be.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const x of c.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const ft="_homePage_rxrt2_1",yt="_homePageTitle_rxrt2_6",jt="_statusSection_rxrt2_24",vt="_levelText_rxrt2_29",bt="_xpBarWrapper_rxrt2_35",St="_xpBarFill_rxrt2_44",je={homePage:ft,homePageTitle:yt,"card-links":"_card-links_rxrt2_10","card-image":"_card-image_rxrt2_19",statusSection:jt,levelText:vt,xpBarWrapper:bt,xpBarFill:St},ve=o.createContext(void 0),Ct=({children:t})=>{const[r,n]=o.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),a=s=>{n(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(ve.Provider,{value:{userData:r,setUserData:a},children:t})},U=()=>{const t=o.useContext(ve);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:r,setUserData:n}=t,a=o.useMemo(()=>{if(r)return Math.floor(r.goal.dailyCalorieGoal/100)},[r]);return{userData:r,setUserData:n,dailyCurrency:a}},wt="_xpBarWrapper_sqxxw_1",kt="_xpBarFill_sqxxw_12",Tt="_pixelGlow_sqxxw_1",zt="_xpText_sqxxw_33",At="_levelText_sqxxw_59",Q={xpBarWrapper:wt,xpBarFill:kt,pixelGlow:Tt,xpText:zt,levelText:At};function It(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function ie(t,r){const n=It(r);return{progress:Math.min(Math.max(t/n*100,0),100),xpNeeded:n}}const Nt=({currentXp:t,level:r})=>{const[n,a]=o.useState(()=>ie(t,r).progress),s=o.useRef(t),{xpNeeded:c}=ie(t,r);return o.useEffect(()=>{const x=ie(t,r).progress,u=s.current;t>u,a(x),s.current=t},[t,r]),e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:Q.levelText,styleAs:"display4",children:["Level ",r]}),e.jsxs("div",{className:Q.xpBarWrapper,children:[e.jsx("div",{className:Q.xpBarFill,style:{width:`${n}%`}}),e.jsxs(i,{className:Q.xpText,styleAs:"label",children:[" ",t," / ",c]})]})]})},Pt=({consumed:t=!1,size:r=48,className:n})=>{const[a,s]=o.useState(!1);return o.useEffect(()=>{if(t){const c=setTimeout(()=>s(!0),20);return()=>clearTimeout(c)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:a?0:1}})},Ft=({consumed:t=!1,size:r=48,className:n})=>{const[a,s]=o.useState(!1);return o.useEffect(()=>{if(t){const c=setTimeout(()=>s(!0),20);return()=>clearTimeout(c)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:a?0:1}})},Lt=({count:t,consumedCurrency:r,userArchetype:n})=>e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden"},children:[...Array(t)].map((a,s)=>e.jsx("div",{style:{flex:`1 0 ${100/t}%`,maxWidth:`${100/t}%`,display:"flex",justifyContent:"center"},children:n==="puppy"?e.jsx(Pt,{consumed:r[s]??!1}):e.jsx(Ft,{consumed:r[s]??!1})},s))}),Bt=()=>{var C;const{userData:t}=U(),[r,n]=o.useState(""),[a,s]=o.useState(0),[c,x]=o.useState([]);let u=!1;const g={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};o.useEffect(()=>{var y;n(g[((y=t==null?void 0:t.pet)==null?void 0:y.currentPet)??"puppy"]),u=r==null?void 0:r.includes("kitten")},[t]),o.useEffect(()=>{var A,B,d;const y=new Date().toISOString().slice(0,10),k=((A=t==null?void 0:t.goal)==null?void 0:A.dailyCurrencyTotal)??0,P=((d=(B=t==null?void 0:t.goal)==null?void 0:B.dailyCurrencyUsed)==null?void 0:d[y])??0,T=k-P;s(T);const z=Array(k).fill(!1).map((_,b)=>b>=T);x(z)},[t]),console.log("Model Path:",r);function v({url:y,scale:k=2,position:P=[0,-2,0],rotation:T=[0,0,0]}){const z=Fe(y);if(!z||!z.scene)return null;const A=o.useMemo(()=>z.scene.clone(),[z.scene]);return e.jsx("primitive",{object:A,scale:k,position:P,rotation:T})}return console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(f,{style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(S,{align:"center",style:{flexShrink:0},children:e.jsx(i,{styleAs:"h1",className:je.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(S,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(Lt,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((C=t==null?void 0:t.goal)==null?void 0:C.dailyCurrencyTotal)??0,consumedCurrency:c})}),e.jsx(S,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(Ie,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(o.Suspense,{children:e.jsx(Ne,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(v,{url:r,scale:.8,position:u?[0,-3,0]:[0,-2,0],rotation:u?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(Pe,{})]})})}),e.jsx(S,{className:je.statusSection,style:{flexShrink:0},children:e.jsx(Nt,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},j=({symbol:t,label:r="",className:n="",style:a={},size:s=24})=>e.jsx("span",{role:"img","aria-label":r||void 0,"aria-hidden":r?"false":"true",className:n,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...a},children:t}),Mt=({content:t})=>{const[r,n]=o.useState(null),a=x=>{n(x.currentTarget)},s=()=>{n(null)},c=!!r;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:a,style:{cursor:"pointer",marginLeft:4},children:e.jsx(j,{symbol:"â„¹ï¸",label:"info",size:14})}),e.jsx(Le,{open:c,anchorEl:r,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},Ot=[{label:"Strength",key:"strength",emoji:"ðŸ’ª",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"ðŸ›¡ï¸",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"ðŸ¤¸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"ðŸ§ ",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"ðŸª–",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"ðŸ’¨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"ðŸ¤—",description:"Calorie goal adherence"}],Rt=()=>{const{userData:t}=U();if(!t)return null;const{pet:r}=t;return e.jsxs(f,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(f,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(j,{style:{alignItems:"center"},symbol:"ðŸŽ®",size:30}),e.jsx(i,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),Ot.map(n=>e.jsx(xe,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(f,{justify:"space-between",align:"center",children:[e.jsxs(f,{align:"center",gap:1,children:[e.jsx(j,{symbol:n.emoji,size:20}),e.jsx(i,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:n.label}),e.jsx(Mt,{content:n.description})]}),e.jsxs(i,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",r[n.key]]})]})},n.key))]})},ce=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],de=({name:t,description:r,progress:n})=>e.jsxs(xe,{style:{width:"100%"},children:[e.jsx(i,{styleAs:"h4",children:t}),e.jsx(i,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:r}),e.jsx(Me,{value:n}),e.jsxs(i,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[n,"% complete"]})]}),Dt=()=>{const t=ce.filter(a=>a.status==="inProgress"),r=ce.filter(a=>a.status==="notStarted"),n=ce.filter(a=>a.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(i,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(Be,{children:[e.jsxs(ae,{value:"",children:[e.jsx(ne,{children:"In Progress"}),e.jsx(oe,{children:e.jsx(f,{direction:"column",gap:2,children:t.map(a=>e.jsx(de,{...a},a.name))})})]}),e.jsxs(ae,{value:"",children:[e.jsx(ne,{children:"Not Started"}),e.jsx(oe,{children:e.jsx(f,{direction:"column",gap:2,children:r.map(a=>e.jsx(de,{...a},a.name))})})]}),e.jsxs(ae,{value:"",children:[e.jsx(ne,{children:"Completed"}),e.jsx(oe,{children:e.jsx(f,{direction:"column",gap:2,children:n.map(a=>e.jsx(de,{...a},a.name))})})]})]})]})},be=[{path:"/",name:"Character",element:e.jsx(Bt,{})},{path:"/skills",name:"Skills",element:e.jsx(Rt,{})},{path:"/quests",name:"Quests",element:e.jsx(Dt,{})}],Et={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},Se=Oe(Et);Re(Se);const re=De(Se);Ee(re,We).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const Ut=new Ue;function Wt(){He(re).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const E=Ge.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),Ht=()=>{const{userData:t,setUserData:r}=U(),n=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[a,s]=o.useState(""),[c,x]=o.useState(null),[u,g]=o.useState(!1),[v,C]=o.useState(null),[y,k]=o.useState(null),[P,T]=o.useState(!1),z=async()=>{if(a.trim()){g(!0),C(null),x(null);try{const{data:d}=await E.post("/chatnutrition",{message:a}),_={...d,description:a};console.log(_),k(_),T(!0)}catch{C("Failed to get nutrition info. Try again.")}finally{g(!1)}}},A=async()=>{if(y){g(!0),C(null);try{const d=await E.post(`/chatnutrition/${t==null?void 0:t.uid}/addMeal`,y),{mealAffects:_,updatedUser:b}=d.data;r(b);const w=[];_.currency&&w.push(`ðŸ¦´ This meal cost ${_.currency} bone${_.currency>1?"s":""}!`),_.armorIncrease&&w.push(`ðŸ›¡ï¸ +${_.armorIncrease.toFixed(1)} Armor from protein`),_.defenseIncrease&&w.push(`ðŸ§± +${_.defenseIncrease.toFixed(1)} Defense from fiber`),_.speedIncrease&&w.push(`ðŸ’¨ +${_.speedIncrease.toFixed(1)} Speed from hydration`),_.intelligenceIncrease&&w.push(`ðŸ§  +${_.intelligenceIncrease} Intelligence from fruits & vegetables`),x(w.join(`
`))}catch{C("Failed to confirm meal. Try again.")}finally{g(!1),k(null),T(!1),s("")}}},B=()=>{k(null),T(!1),x(null)};return e.jsxs(ue,{style:{maxWidth:480,margin:"auto",padding:16},children:[e.jsx(i,{styleAs:"h2",style:{marginBottom:12},children:"Log Your Food"}),e.jsx("textarea",{value:a,onChange:d=>s(d.target.value),placeholder:"Describe what you ate today...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:5,style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--salt-palette-neutral-300)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}}),P?e.jsxs(e.Fragment,{children:[e.jsxs(i,{styleAs:"h2",children:["ðŸ¦´ This meal will cost ",Math.round(y.calories/100)," ",n,". Proceed?"]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[e.jsx(D,{onClick:A,sentiment:"positive",disabled:u,children:u?e.jsx(ee,{size:"small"}):"Confirm"}),e.jsx(D,{onClick:B,sentiment:"neutral",disabled:u,children:"Cancel"})]})]}):e.jsx(D,{appearance:"solid",sentiment:"accented",onClick:z,disabled:u||!a.trim(),style:{marginTop:12},children:u?e.jsx(ee,{size:"small"}):"Send"}),v&&e.jsx(i,{styleAs:"display2",style:{color:"var(--salt-error-text-color)",marginTop:12},children:v}),c&&e.jsx("pre",{style:{marginTop:16,backgroundColor:"var(--salt-gray-50)",padding:12,borderRadius:6,whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:14},children:e.jsxs(i,{style:{lineHeight:"33px"},styleAs:"h3",children:[" ",c]})})]})},Gt={puppy:[{rpe:1,emoji:"ðŸ¾",text:"Sniffed around the park"},{rpe:2,emoji:"ðŸ•",text:"Chased tail"},{rpe:3,emoji:"ðŸº",text:"Chased squirrel"},{rpe:4,emoji:"ðŸ”¥ðŸº",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"ðŸ’¤",text:"Big stretch under a tree"},{rpe:2,emoji:"ðŸ±",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"ðŸ¯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"ðŸ”¥ðŸ¯",text:"Celestial lion battle in the astral jungle"}]},$t=({petType:t,selectedRpe:r,onChange:n})=>{const a=Gt[t],s=c=>{n(c)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:a.map(c=>e.jsxs(xe,{onClick:()=>s(c.rpe),style:{cursor:"pointer",border:r===c.rpe?"2px solid #ffa640":"1px solid #ccc",background:r===c.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(j,{size:32,symbol:c.emoji}),e.jsx(i,{style:{fontSize:12,marginTop:8},children:c.rpe}),e.jsx(i,{style:{fontSize:14,marginTop:6},children:c.text})]},c.rpe))})},qt=({open:t,onClose:r})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(j,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained âš¡ | Pet stronger ðŸ¾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:r,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"âœ–"})]}):null,Ce=o.createContext(void 0),Vt=()=>{const t=o.useContext(Ce);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let Xt=0;const Yt=({children:t})=>{const[r,n]=o.useState([]),[a,s]=o.useState(null);o.useEffect(()=>{!a&&r.length>0&&(s(r[0]),n(u=>u.slice(1)))},[r,a]),o.useEffect(()=>{if(!a)return;const u=a.duration??3e3,g=setTimeout(()=>{s(null)},u);return()=>clearTimeout(g)},[a]);const c=o.useCallback(u=>{const g=++Xt;n(v=>[...v,{id:g,...u}])},[]),x=o.useCallback(()=>{s(null)},[]);return e.jsxs(Ce.Provider,{value:{addToast:c,removeToast:x},children:[t,a&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:a.content},a.id)})]})},Kt="_levelUpContainer_vq3kq_1",Jt="_levelUpPulse_vq3kq_1",Qt="_shimmer_vq3kq_1",Zt="_emoji_vq3kq_32",es="_bounce_vq3kq_1",ts="_levelText_vq3kq_41",ss="_levelNumber_vq3kq_54",rs="_celebration_vq3kq_67",as="_fadeInUp_vq3kq_1",X={levelUpContainer:Kt,levelUpPulse:Jt,shimmer:Qt,emoji:Zt,bounce:es,levelText:ts,levelNumber:ss,celebration:rs,fadeInUp:as},we=o.createContext(void 0),ns=({children:t})=>{const[r,n]=o.useState(null),[a,s]=o.useState(void 0),c=({content:u,style:g})=>{n(u),s(g)},x=()=>{n(null),s(void 0)};return e.jsxs(we.Provider,{value:{showSplash:c,hideSplash:x},children:[t,r&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...a},onClick:x,children:[r,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(D,{onClick:x,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},os=()=>{const t=o.useContext(we);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},ls={1:.5,2:1,3:1.5,4:2.2},is=({setDrawerView:t})=>{const{userData:r,setUserData:n}=U(),{addToast:a}=Vt(),{showSplash:s}=os(),[c,x]=o.useState(!1),[u,g]=o.useState("WEIGHTS"),[v,C]=o.useState("DURATION"),[y,k]=o.useState(""),[P,T]=o.useState(""),[z,A]=o.useState(""),[B,d]=o.useState(null),[_,b]=o.useState(""),w=["WEIGHTS","CARDIO","MOBILITY","SPORT"],O=["DURATION","DISTANCE"],[h,m]=o.useState(!1),I=Array.from({length:12},(p,M)=>M),R=Array.from({length:60},(p,M)=>M),[H,Y]=o.useState({strength:0,agility:0,pet:0});console.log(P),console.log(B);function $(){const p=(Number(P)||0)*60+(Number(z)||0);console.log("totalDuration ",p);const M=ls[B??2];let L=0;p>0?L=Math.round(p*10*M):Number(y)>0&&(L=Math.round(Number(y)*125*M)),console.log("totalXp ",L);let K=0,J=0;switch(u){case"WEIGHTS":K=Math.round(L/100);break;case"CARDIO":J=Math.round(L/100);break;case"MOBILITY":case"SPORT":const ze=L/2/100,Ae=L/2/100;K=Math.round(ze),J=Math.round(Ae);break}return console.log("final ",{strength:K,agility:J,pet:L}),{strength:K,agility:J,pet:L}}const q=w.includes(u)&&O.includes(v)&&(y!==""||P!==""||z!=="")&&B!==null;function ke(){k(""),T(""),A(""),d(null),b(""),g("WEIGHTS"),C("DURATION")}const Te=async()=>{const p=$();if(Y(p),!r||!r.uid){alert("User not loaded properly.");return}const M=v==="DURATION"?(Number(P)||0)*60+(Number(z)||0):0;try{const{data:L}=await E.post(`/users/${r.uid}/addWorkout`,{workoutType:u,cardioMode:v,duration:M,distance:v==="DISTANCE"&&Number(y)||0,rpe:B,notes:_,workoutXp:p});n(L.updatedUser),ke(),a({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(j,{size:32,symbol:"ðŸ‹ï¸â€â™‚ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.pet," PET XP"]}),p.strength>0&&p.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.agility," AGILITY"]})]}):p.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",p.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{L.levelUp&&s({content:e.jsxs("div",{className:X.levelUpContainer,children:[e.jsx("div",{className:X.emoji,children:"ðŸŽ‰âœ¨ðŸŽŠâœ¨ðŸŽ‰"}),e.jsx("div",{className:X.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:X.levelNumber,children:["LEVEL ",L.updatedUser.pet.level]}),e.jsx("div",{className:X.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(L){console.error(L),alert("There was an error logging your workout.")}};return c?e.jsx(ue,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(ee,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(ue,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(qt,{open:h,onClose:()=>m(!1)}),e.jsx(i,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(i,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(he,{value:u??"",onChange:p=>g(p.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:w.map(p=>e.jsx(me,{value:p,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:p},p))}),u==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(he,{value:v??"",onChange:p=>{C(p.currentTarget.value),k(""),T(""),A("")},style:{marginBottom:16},children:O.map(p=>e.jsx(me,{value:p,appearance:p==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:p},p))})]}),v==="DISTANCE"&&u==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(i,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(Z,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:y,onChange:p=>k(p.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(i,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(N,{direction:"row",gap:2,children:[e.jsx(te,{value:P+" hr(s)",onSelectionChange:(p,M)=>T(M[0]??""),placeholder:"Hours",children:I.map(p=>e.jsxs(se,{value:String(p),children:[p," hr"]},p))}),e.jsx(te,{value:z+" min(s)",onSelectionChange:(p,M)=>A(M[0]??""),placeholder:"Minutes",children:R.map(p=>e.jsxs(se,{value:String(p),children:[p<10?`0${p}`:p," min"]},p))})]})]}),e.jsx(i,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx($t,{selectedRpe:B,onChange:p=>d(p),petType:(r==null?void 0:r.pet.currentPet)??"puppy"})}),e.jsx(i,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:_,onChange:p=>b(p.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(D,{onClick:Te,disabled:!q,style:{opacity:q?1:.4,cursor:q?"pointer":"not-allowed",color:q?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:q?"#ff9900":void 0},children:"LOG WORKOUT"})]})},cs="_backdrop_1fnrz_9",ds="_drawer_1fnrz_17",ps="_drawer__header_1fnrz_34",us="_drawer__headerContent_1fnrz_41",xs="_drawer__headerIcon_1fnrz_46",hs="_drawer__title_1fnrz_49",ms="_drawer__closeButton_1fnrz_55",gs="_drawer__content_1fnrz_67",_s="_mealCard_1fnrz_73",fs="_mealCard__header_1fnrz_85",ys="_mealCard__info_1fnrz_91",js="_mealCard__title_1fnrz_94",vs="_mealCard__timestamp_1fnrz_100",bs="_mealCard__calories_1fnrz_105",Ss="_mealCard__caloriesValue_1fnrz_108",Cs="_mealCard__caloriesLabel_1fnrz_115",ws="_mealCard__macros_1fnrz_119",ks="_mealCard__additionalStats_1fnrz_125",Ts="_mealCard__statBoosts_1fnrz_131",zs="_mealCard__statBoostsTitle_1fnrz_135",As="_mealCard__statBoostsGrid_1fnrz_141",Is="_mealCard__currency_1fnrz_146",Ns="_mealCard__currencyText_1fnrz_150",Ps="_macroItem_1fnrz_156",Fs="_macroItem__value_1fnrz_162",Ls="_macroItem__label_1fnrz_168",Bs="_additionalStat_1fnrz_182",Ms="_additionalStat__icon_1fnrz_190",Os="_additionalStat__content_1fnrz_193",Rs="_additionalStat__value_1fnrz_196",Ds="_additionalStat__label_1fnrz_203",Es="_statBoost_1fnrz_212",Us="_statBoost__icon_1fnrz_221",Ws="_statBoost__label_1fnrz_236",Hs="_statBoost__value_1fnrz_239",Gs="_loadingState_1fnrz_244",$s="_loadingState__content_1fnrz_248",qs="_pulse_1fnrz_1",Vs="_loadingState__text_1fnrz_251",Xs="_loadingState__subtext_1fnrz_255",Ys="_loadingMore_1fnrz_260",Ks="_loadingMore__content_1fnrz_264",Js="_loadingMore__text_1fnrz_267",Qs="_loadingMore__subtext_1fnrz_271",Zs="_emptyState_1fnrz_276",er="_emptyState__icon_1fnrz_280",tr="_emptyState__text_1fnrz_284",sr="_emptyState__subtext_1fnrz_288",rr="_endOfList_1fnrz_293",ar="_endOfList__text_1fnrz_298",nr="_endOfList__subtext_1fnrz_303",or="_mealsList_1fnrz_308",lr="_demoApp_1fnrz_314",ir="_demoApp__container_1fnrz_319",cr="_demoApp__title_1fnrz_323",dr="_demoApp__button_1fnrz_330",l={backdrop:cs,drawer:ds,"drawer--open":"_drawer--open_1fnrz_31",drawer__header:ps,drawer__headerContent:us,drawer__headerIcon:xs,drawer__title:hs,drawer__closeButton:ms,drawer__content:gs,mealCard:_s,mealCard__header:fs,mealCard__info:ys,mealCard__title:js,mealCard__timestamp:vs,mealCard__calories:bs,mealCard__caloriesValue:Ss,mealCard__caloriesLabel:Cs,mealCard__macros:ws,mealCard__additionalStats:ks,mealCard__statBoosts:Ts,mealCard__statBoostsTitle:zs,mealCard__statBoostsGrid:As,mealCard__currency:Is,mealCard__currencyText:Ns,macroItem:Ps,macroItem__value:Fs,macroItem__label:Ls,"macroItem--protein":"_macroItem--protein_1fnrz_172","macroItem--carbs":"_macroItem--carbs_1fnrz_175","macroItem--fat":"_macroItem--fat_1fnrz_178",additionalStat:Bs,additionalStat__icon:Ms,additionalStat__content:Os,additionalStat__value:Rs,additionalStat__label:Ds,statBoost:Es,"statBoost--red":"_statBoost--red_1fnrz_221",statBoost__icon:Us,"statBoost--blue":"_statBoost--blue_1fnrz_224","statBoost--yellow":"_statBoost--yellow_1fnrz_227","statBoost--green":"_statBoost--green_1fnrz_230","statBoost--purple":"_statBoost--purple_1fnrz_233",statBoost__label:Ws,statBoost__value:Hs,loadingState:Gs,loadingState__content:$s,pulse:qs,loadingState__text:Vs,loadingState__subtext:Xs,loadingMore:Ys,loadingMore__content:Ks,loadingMore__text:Js,loadingMore__subtext:Qs,emptyState:Zs,emptyState__icon:er,emptyState__text:tr,emptyState__subtext:sr,endOfList:rr,endOfList__text:ar,endOfList__subtext:nr,mealsList:or,demoApp:lr,demoApp__container:ir,demoApp__title:cr,demoApp__button:dr},pr=()=>{const{userData:t}=U(),[r,n]=o.useState([]),[a,s]=o.useState(!1),[c,x]=o.useState(!1),[u,g]=o.useState(!0),[v,C]=o.useState(0),y=o.useRef(null),k=10,P=async(d=v,_=!1)=>{_?s(!0):x(!0);try{const w=(await E.get(`/users/${t==null?void 0:t.uid}/meals?limit=${k}&offset=${d}`)).data,O=w.meals||[];n(_?O:I=>[...I,...O]);const h=w.total||0,m=d+O.length;g(m<h),C(d+O.length)}catch(b){console.error("Error fetching meals:",b)}s(!1),x(!1)};o.useEffect(()=>{P(0,!0)},[]);const T=d=>{const{scrollTop:_,scrollHeight:b,clientHeight:w}=d.currentTarget;b-_<=w+100&&u&&!c&&P(v,!1)},z=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=({icon:d,label:_,value:b,color:w})=>e.jsxs("div",{className:`${l.statBoost} ${l[`statBoost--${w}`]}`,children:[e.jsx(d,{size:12,className:l.statBoost__icon}),e.jsx("span",{className:l.statBoost__label,children:_}),e.jsxs("span",{className:l.statBoost__value,children:["+",b]})]}),B=({meal:d})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:l.mealCard,children:[e.jsxs("div",{className:l.mealCard__header,children:[e.jsxs("div",{className:l.mealCard__info,children:[e.jsx("h3",{className:l.mealCard__title,children:d.description}),e.jsx("p",{className:l.mealCard__timestamp,children:z(d.timestamp)})]}),e.jsxs("div",{className:l.mealCard__calories,children:[e.jsx("div",{className:l.mealCard__caloriesValue,children:d.calories}),e.jsx("div",{className:l.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:l.mealCard__macros,children:[e.jsxs("div",{className:`${l.macroItem} ${l["macroItem--protein"]}`,children:[e.jsxs("div",{className:l.macroItem__value,children:[d.protein,"g"]}),e.jsx("div",{className:l.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${l.macroItem} ${l["macroItem--carbs"]}`,children:[e.jsxs("div",{className:l.macroItem__value,children:[d.carbs,"g"]}),e.jsx("div",{className:l.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${l.macroItem} ${l["macroItem--fat"]}`,children:[e.jsxs("div",{className:l.macroItem__value,children:[d.fat,"g"]}),e.jsx("div",{className:l.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:l.mealCard__additionalStats,children:[e.jsxs("div",{className:l.additionalStat,children:[e.jsx($e,{size:16,className:l.additionalStat__icon}),e.jsxs("div",{className:l.additionalStat__content,children:[e.jsxs("div",{className:l.additionalStat__value,children:[d.fluid_intake_ml,"ml"]}),e.jsx("div",{className:l.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:l.additionalStat,children:[e.jsx(qe,{size:16,className:l.additionalStat__icon}),e.jsxs("div",{className:l.additionalStat__content,children:[e.jsx("div",{className:l.additionalStat__value,children:d.servings_of_fruits_vegetables}),e.jsx("div",{className:l.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:l.mealCard__statBoosts,children:[e.jsx("div",{className:l.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:l.mealCard__statBoostsGrid,children:[d.mealAffects.armorIncrease>0&&e.jsx(A,{icon:Ve,label:"ARM",value:d.mealAffects.armorIncrease,color:"blue"}),d.mealAffects.speedIncrease>0&&e.jsx(A,{icon:Xe,label:"SPD",value:d.mealAffects.speedIncrease,color:"yellow"}),d.mealAffects.intelligenceIncrease>0&&e.jsx(A,{icon:Ye,label:"INT",value:d.mealAffects.intelligenceIncrease,color:"pink"}),d.mealAffects.defenseIncrease>0&&e.jsx(A,{icon:Ke,label:"DEF",value:d.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:l.mealCard__currency,children:e.jsxs("span",{className:l.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(Je,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(Qe,{size:15,style:{verticalAlign:"middle"}})})," "+d.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.drawer__header,children:e.jsxs("div",{className:l.drawer__headerContent,children:[e.jsx(ge,{className:l.drawer__headerIcon,size:32}),e.jsx("h2",{className:l.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},onScroll:T,ref:y,children:a?e.jsx("div",{className:l.loadingState,children:e.jsxs("div",{className:l.loadingState__content,children:[e.jsx("div",{className:l.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:l.loadingState__subtext,children:"ðŸ“– Fetching your meal history"})]})}):r.length===0?e.jsxs("div",{className:l.emptyState,children:[e.jsx(ge,{className:l.emptyState__icon,size:48}),e.jsx("div",{className:l.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:l.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:l.mealsList,children:[r.map((d,_)=>e.jsx(B,{meal:d},`${d.id}-${_}`)),c&&e.jsx("div",{className:l.loadingMore,children:e.jsxs("div",{className:l.loadingMore__content,children:[e.jsx("div",{className:l.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:l.loadingMore__subtext,children:"âš¡ Fetching next batch"})]})}),!u&&r.length>0&&e.jsxs("div",{className:l.endOfList,children:[e.jsx("div",{className:l.endOfList__text,children:"ðŸŽ¯ You've reached the end of your meal log!"}),e.jsxs("div",{className:l.endOfList__subtext,children:["Total meals loaded: ",r.length]})]})]})})]})},ur=o.forwardRef(function({onClick:r,to:n,...a},s){const c=Ze(n),x=et(n);return e.jsx(tt,{...a,href:c,onClick:u=>{r==null||r(u),u.defaultPrevented||x(u)},ref:s})}),xr=()=>{const[t,r]=o.useState("none"),{pathname:n}=st();return e.jsxs("div",{className:"app-header",children:[e.jsx(e.Fragment,{children:e.jsxs(_e,{children:[e.jsx(fe,{children:e.jsx(D,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(rt,{"aria-hidden":!0})})}),e.jsxs(ye,{children:[e.jsx(V,{onClick:()=>r("logFood"),children:"Log Food"}),e.jsx(V,{onClick:()=>r("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(e.Fragment,{children:e.jsx("nav",{children:e.jsx(N,{direction:"row",gap:1,role:"list",children:be.map(a=>e.jsx("div",{role:"listitem",children:e.jsx(ur,{active:n===a.path,to:a.path,children:a.name})},a.name))})})}),e.jsx(e.Fragment,{children:e.jsx(at,{placement:"top",content:"User Settings",children:e.jsxs(_e,{children:[e.jsx(fe,{children:e.jsx(D,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(nt,{"aria-hidden":!0})})}),e.jsxs(ye,{children:[e.jsx(V,{onClick:()=>r("mealHist"),children:"View Meals"}),e.jsx(V,{onClick:()=>r("workoutHist"),children:"View Workouts"}),e.jsx(V,{onClick:Wt,children:"Logout"})]})]})})}),e.jsxs(ot,{open:t!=="none",onOpenChange:()=>r("none"),position:"bottom",children:[t==="logFood"&&e.jsx(Ht,{}),t==="logWorkout"&&e.jsx(is,{setDrawerView:r}),t==="mealHist"&&e.jsx(pr,{})]})]})},hr="_myBackground_1pm88_1",mr="_loginScreen_1pm88_13",gr="_overlay_1pm88_29",_r="_loginContainer_1pm88_39",fr="_googleButton_1pm88_49",pe={myBackground:hr,loginScreen:mr,overlay:gr,loginContainer:_r,googleButton:fr};function yr(){const{setUserData:t}=U(),[r,n]=o.useState(!1),a=async()=>{n(!0),console.log("Attempting to log in with Google...");try{const c=await(await lt(re,Ut)).user.getIdToken(),{data:x}=await E.post("/auth/google",{token:c}),g=(await E.get(`/users/${x.uid}`)).data;t(g),console.log("User saved or retrieved from DB:",x)}catch(s){console.error(s)}n(!0)};return e.jsx("div",{className:pe.loginScreen,children:e.jsx("div",{className:pe.loginContainer,children:r?e.jsx(ee,{size:"large","aria-label":"loading",role:"status"}):e.jsx(D,{className:pe.googleButton,onClick:a,children:"Embark with Google"})})})}const jr=()=>{const{userData:t,setUserData:r}=U();if(!t)return e.jsx(i,{children:"Loading..."});const[n,a]=o.useState(0),[s,c]=o.useState(t),[x,u]=o.useState(1),[g,v]=o.useState(1.2),[C,y]=o.useState(0),[k,P]=o.useState(Math.floor(s.bodyStats.height/12)),[T,z]=o.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(i,{children:"Loading..."});o.useEffect(()=>{const h=k*12+T;console.log("total inches : ",h),c(m=>({...m,bodyStats:{...m.bodyStats,height:h}}))},[k,T]);const A=h=>{const{weight:m,height:I,age:R,sex:H}=h;return H==="male"?10*(m/2.205)+6.25*(I*2.54)-5*R+5:10*(m/2.205)+6.25*(I*2.54)-5*R-161},B=h=>{const m=g+C;return h*m},d=async h=>{h.preventDefault();const m=A(s.bodyStats),I=B(m),R=s.goal.goalType==="weight_loss"?I-x*3500/7:s.goal.goalType==="muscle_gain"?I+300:I,H=Math.round(R/100),Y={...s,bodyStats:{...s.bodyStats,bmr:m,tdee:I},goal:{...s.goal,dailyCalorieGoal:R,dailyCurrencyTotal:H,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",Y);try{const{data:$}=await E.post("/users/update",{...Y});r($)}catch($){console.error("Error updating user data:",$)}},_=(h,m,I)=>{const{name:R,value:H}=h.target;c({...s,[m]:{...s[m],[I||R]:H}})},b=(h,m,I)=>{c({...s,[h]:{...s[h],[m]:I}})},w=()=>{if(n===0){const{weight:h,height:m,age:I,sex:R}=s.bodyStats;return h>0&&m>0&&I>0&&["male","female"].includes(R)}if(n===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(n===2){const{name:h,currentPet:m}=s.pet;return h.trim()!==""&&["puppy","kitten","bird"].includes(m)}return!0},O=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(f,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(S,{grow:1,children:e.jsxs(N,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(S,{children:e.jsx(i,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(S,{children:e.jsx(it,{children:O.map((h,m)=>e.jsx(ct,{label:h,stage:n===m?"active":m<n?"completed":"pending"},m))})}),e.jsxs("form",{onSubmit:d,children:[n===0&&e.jsxs(N,{align:"stretch",gap:2,children:[e.jsx(i,{styleAs:"h2",children:"Body Stats"}),e.jsxs(W,{children:[e.jsx(G,{children:"Weight (lbs)"}),e.jsx(Z,{value:s.bodyStats.weight,onChange:h=>_(h,"bodyStats","weight")})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(te,{value:k.toString()+" ft",onSelectionChange:(h,m)=>P(Number(m)),children:[2,3,4,5,6,7,8,9].map(h=>e.jsxs(se,{value:h.toString(),children:[h," ft"]},h))}),e.jsx(te,{value:T.toString()+" in",onSelectionChange:(h,m)=>z(Number(m)),children:Array.from({length:12},(h,m)=>e.jsxs(se,{value:m.toString(),children:[m," in"]},m))})]})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Sex"}),e.jsxs(f,{direction:"row",gap:2,children:[e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(f,{direction:"column",align:"center",gap:1,children:[e.jsx(j,{symbol:"ðŸ™ŽðŸ»â€â™‚ï¸",size:32}),e.jsx(i,{children:"Male"})]})})}),e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(f,{direction:"column",align:"center",gap:1,children:[e.jsx(j,{symbol:"ðŸ™ŽðŸ»â€â™€ï¸",size:32}),e.jsx(i,{children:"Female"})]})})})]})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Age (years)"}),e.jsx(Z,{value:s.bodyStats.age,onChange:h=>_(h,"bodyStats","age")})]})]}),n===1&&e.jsxs(N,{gap:2,children:[e.jsx(i,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(f,{direction:"row",gap:2,children:[e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(f,{direction:"column",align:"center",gap:1,children:e.jsxs(S,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"ðŸ”¥",size:24}),e.jsx(i,{children:"Weight Loss"})]})})})}),e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(f,{direction:"column",align:"center",gap:1,children:e.jsxs(S,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:s.bodyStats.sex==="male"?"ðŸ‹ï¸â€â™‚ï¸":"ðŸ‹ðŸ½â€â™€ï¸",size:24}),e.jsx(i,{children:"Muscle Gain"})]})})})}),e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(f,{direction:"column",align:"center",gap:1,children:e.jsxs(S,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"ðŸ› ï¸",size:24}),e.jsx(i,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(W,{children:[e.jsx(i,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(dt,{max:2,min:.5,step:.25,value:x,onChange:(h,m)=>u(m),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(N,{gap:1,children:[e.jsx(i,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(i,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(f,{direction:"column",gap:1,children:[e.jsx(F,{onClick:()=>v(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ’»",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(F,{onClick:()=>v(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ‘©â€ðŸ«",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(F,{onClick:()=>v(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ‘©â€âš•ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(F,{onClick:()=>v(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ‘·â€â™‚ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(N,{gap:1,children:[e.jsx(i,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(i,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(f,{direction:"column",gap:1,children:[e.jsx(F,{onClick:()=>y(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:C===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ›‹ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Sedentary"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(F,{onClick:()=>y(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:C===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸš¶â€â™€ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Lightly Active"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(F,{onClick:()=>y(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:C===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸƒâ€â™‚ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Moderately Active"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(F,{onClick:()=>y(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:C===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ‹ï¸â€â™€ï¸",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Very Active"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(F,{onClick:()=>y(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:C===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(f,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"ðŸ’ª",size:30}),e.jsxs(N,{gap:0,children:[e.jsx(i,{styleAs:"h2",children:"Extremely Active"}),e.jsx(i,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),n===2&&e.jsxs(N,{gap:2,children:[e.jsx(i,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(W,{children:[e.jsx(G,{children:"Pet Name"}),e.jsx(Z,{value:s.pet.name,onChange:h=>_(h,"pet","name")})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Pet Type"}),e.jsxs(f,{direction:"row",gap:2,children:[e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(f,{direction:"column",align:"center",gap:1,children:e.jsxs(S,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"ðŸ¶",size:24}),e.jsx(i,{children:"Dog"})]})})})}),e.jsx(S,{grow:1,children:e.jsx(F,{onClick:()=>b("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(f,{direction:"column",align:"center",gap:1,children:e.jsxs(S,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"ðŸ±",size:24}),e.jsx(i,{children:"Cat"})]})})})})]})]})]}),e.jsx(S,{style:{paddingTop:"20px"},children:e.jsxs(f,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[n>0&&e.jsx(D,{sentiment:"neutral",appearance:"solid",onClick:()=>a(n-1),children:"Previous"}),n<O.length-1&&e.jsx(D,{sentiment:"accented",appearance:"solid",disabled:!w(),onClick:()=>a(n+1),children:"Next"}),n===O.length-1&&e.jsx(D,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!w(),onClick:d,children:"Start Your Adventure!"})]})})]})]})})})};function vr(){const[t,r]=o.useState(null),[n,a]=o.useState(!0),{userData:s,setUserData:c}=U();return o.useEffect(()=>{const x=pt.throttle(()=>{console.log("Fetching user object..."),E.get(`/users/${s==null?void 0:s.uid}`).then(g=>{c(g.data),console.log("User data synced:",g.data)}).catch(g=>{console.error("Failed to fetch user:",g)})},1e4),u=()=>{console.log("User came back!"),x()};return s&&window.addEventListener("focus",u),()=>{s&&(window.removeEventListener("focus",u),x.cancel())}},[]),o.useEffect(()=>{const x=ut(re,u=>{console.log("Auth state changed:",u),console.log("User Data in App useEffect:",s),r(u),a(!1);const g=localStorage.getItem("userData");g&&c(JSON.parse(g))});return()=>x()},[]),console.log("App render - Loading:",n,"User:",t,"UserData:",s),n?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(le,{mode:"dark",children:e.jsx(yr,{})}):s.bodyStats.weight===0?e.jsx(le,{mode:"dark",children:e.jsx(jr,{})}):e.jsx(le,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:e.jsx(xt,{children:be.map(x=>e.jsx(ht,{path:x.path,element:x.element},x.name))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(xr,{})})]})})}mt.createRoot(document.getElementById("root")).render(e.jsx(gt.StrictMode,{children:e.jsx(_t,{children:e.jsx(Ct,{children:e.jsx(Yt,{children:e.jsx(ns,{children:e.jsx(vr,{})})})})})}));
