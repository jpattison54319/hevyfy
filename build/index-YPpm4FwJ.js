import{r as c,j as e,T as o,F as h,a as y,C as he,B as xe,O as ge,u as ye,P as me,b as re,A as je,c as V,d as Y,e as K,L as fe,i as ve,g as be,f as Se,s as Ce,G as ke,h as we,k as Ae,l as Te,m as ce,n as R,S as te,o as ne,p as ae,I as H,q as S,D as E,t as U,v as Fe,w as Pe,N as Le,x as Ie,M as _e,y as Re,z as Be,E as De,H as oe,J as Oe,U as ze,K as Me,Q as We,R as Ne,V as He,W as O,X as W,Y as C,Z as Ee,_ as Ue,$ as Ge,a0 as J,a1 as $e,a2 as Ve,a3 as Ye,a4 as Ke,a5 as Je}from"./vendor-Dc5eH1Dw.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(r){if(r.ep)return;r.ep=!0;const d=s(r);fetch(r.href,d)}})();const Xe="_homePage_rxrt2_1",qe="_homePageTitle_rxrt2_6",Qe="_statusSection_rxrt2_24",Ze="_levelText_rxrt2_29",et="_xpBarWrapper_rxrt2_35",tt="_xpBarFill_rxrt2_44",le={homePage:Xe,homePageTitle:qe,"card-links":"_card-links_rxrt2_10","card-image":"_card-image_rxrt2_19",statusSection:Qe,levelText:Ze,xpBarWrapper:et,xpBarFill:tt},de=c.createContext(void 0),rt=({children:t})=>{const[n,s]=c.useState(()=>{const r=localStorage.getItem("userData");return r?JSON.parse(r):null}),a=r=>{s(r),r?localStorage.setItem("userData",JSON.stringify(r)):localStorage.removeItem("userData")};return e.jsx(de.Provider,{value:{userData:n,setUserData:a},children:t})},M=()=>{const t=c.useContext(de);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:n,setUserData:s}=t,a=c.useMemo(()=>{if(n)return Math.floor(n.goal.dailyCalorieGoal/100)},[n]);return{userData:n,setUserData:s,dailyCurrency:a}},st="_xpBarWrapper_rtmpn_1",nt="_xpBarFill_rtmpn_11",at="_xpText_rtmpn_18",X={xpBarWrapper:st,xpBarFill:nt,xpText:at};function ie(t){return 100+t*50}function q(t,n){let s=0;for(let i=1;i<n;i++)s+=ie(i);const a=t-s,r=ie(n);return{progress:Math.min(Math.max(a/r*100,0),100),currentLevelXp:a,xpNeeded:r}}const ot=({currentXp:t,level:n})=>{const[s,a]=c.useState(()=>q(t,n).progress),r=c.useRef(t),{currentLevelXp:d,xpNeeded:i}=q(t,n);return c.useEffect(()=>{const x=q(t,n).progress,g=r.current;t>g,a(x),r.current=t},[t,n]),e.jsxs(e.Fragment,{children:[e.jsxs(o,{styleAs:"display4",children:["Level ",n]}),e.jsxs("div",{className:X.xpBarWrapper,children:[e.jsx("div",{className:X.xpBarFill,style:{width:`${s}%`}}),e.jsxs(o,{className:X.xpText,styleAs:"label",children:[" ",d," / ",i]})]})]})},lt=({consumed:t=!1,size:n=48,className:s})=>{const[a,r]=c.useState(!1);return c.useEffect(()=>{if(t){const d=setTimeout(()=>r(!0),20);return()=>clearTimeout(d)}else r(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:a?0:1}})},it=({consumed:t=!1,size:n=48,className:s})=>{const[a,r]=c.useState(!1);return c.useEffect(()=>{if(t){const d=setTimeout(()=>r(!0),20);return()=>clearTimeout(d)}else r(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:a?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:a?0:1}})},ct=({count:t,consumedCurrency:n,userArchetype:s})=>e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden"},children:[...Array(t)].map((a,r)=>e.jsx("div",{style:{flex:`1 0 ${100/t}%`,maxWidth:`${100/t}%`,display:"flex",justifyContent:"center"},children:s==="puppy"?e.jsx(lt,{consumed:n[r]??!1}):e.jsx(it,{consumed:n[r]??!1})},r))}),dt=()=>{var v;const{userData:t}=M(),[n,s]=c.useState(""),[a,r]=c.useState(0),[d,i]=c.useState([]);let x=!1;const g={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};c.useEffect(()=>{var f;s(g[((f=t==null?void 0:t.pet)==null?void 0:f.currentPet)??"puppy"]),x=n==null?void 0:n.includes("kitten")},[t]),c.useEffect(()=>{var L,B,A;const f=new Date().toISOString().slice(0,10),k=((L=t==null?void 0:t.goal)==null?void 0:L.dailyCurrencyTotal)??0,_=((A=(B=t==null?void 0:t.goal)==null?void 0:B.dailyCurrencyUsed)==null?void 0:A[f])??0,w=k-_;r(w);const F=Array(k).fill(!1).map((m,P)=>P>=w);i(F)},[t]),console.log("Model Path:",n);function T({url:f,scale:k=2,position:_=[0,-2,0],rotation:w=[0,0,0]}){const F=ye(f);if(!F||!F.scene)return null;const L=c.useMemo(()=>F.scene.clone(),[F.scene]);return e.jsx("primitive",{object:L,scale:k,position:_,rotation:w})}return console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(h,{style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(y,{align:"center",style:{flexShrink:0},children:e.jsx(o,{styleAs:"h1",className:le.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(y,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(ct,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((v=t==null?void 0:t.goal)==null?void 0:v.dailyCurrencyTotal)??0,consumedCurrency:d})}),e.jsx(y,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(he,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(c.Suspense,{children:e.jsx(xe,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(T,{url:n,scale:.8,position:x?[0,-3,0]:[0,-2,0],rotation:x?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(ge,{})]})})}),e.jsx(y,{className:le.statusSection,style:{flexShrink:0},children:e.jsx(ot,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},j=({symbol:t,label:n="",className:s="",style:a={},size:r=24})=>e.jsx("span",{role:"img","aria-label":n||void 0,"aria-hidden":n?"false":"true",className:s,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof r=="number"?`${r}px`:r,lineHeight:1,...a},children:t}),pt=({content:t})=>{const[n,s]=c.useState(null),a=i=>{s(i.currentTarget)},r=()=>{s(null)},d=!!n;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:a,style:{cursor:"pointer",marginLeft:4},children:e.jsx(j,{symbol:"ℹ️",label:"info",size:14})}),e.jsx(me,{open:d,anchorEl:n,onClose:r,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},ut=[{label:"Strength",key:"strength",emoji:"💪",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"🛡️",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"🤸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"🧠",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"🪖",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"💨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"🤗",description:"Calorie goal adherence"}],ht=()=>{const{userData:t}=M();if(!t)return null;const{pet:n}=t;return e.jsxs(h,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(h,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(j,{style:{alignItems:"center"},symbol:"🎮",size:30}),e.jsx(o,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),ut.map(s=>e.jsx(re,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(h,{justify:"space-between",align:"center",children:[e.jsxs(h,{align:"center",gap:1,children:[e.jsx(j,{symbol:s.emoji,size:20}),e.jsx(o,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:s.label}),e.jsx(pt,{content:s.description})]}),e.jsxs(o,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",n[s.key]]})]})},s.key))]})},Q=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],Z=({name:t,description:n,progress:s})=>e.jsxs(re,{style:{width:"100%"},children:[e.jsx(o,{styleAs:"h4",children:t}),e.jsx(o,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:n}),e.jsx(fe,{value:s}),e.jsxs(o,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[s,"% complete"]})]}),xt=()=>{const t=Q.filter(a=>a.status==="inProgress"),n=Q.filter(a=>a.status==="notStarted"),s=Q.filter(a=>a.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(o,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs(je,{children:[e.jsxs(V,{value:"",children:[e.jsx(Y,{children:"In Progress"}),e.jsx(K,{children:e.jsx(h,{direction:"column",gap:2,children:t.map(a=>e.jsx(Z,{...a},a.name))})})]}),e.jsxs(V,{value:"",children:[e.jsx(Y,{children:"Not Started"}),e.jsx(K,{children:e.jsx(h,{direction:"column",gap:2,children:n.map(a=>e.jsx(Z,{...a},a.name))})})]}),e.jsxs(V,{value:"",children:[e.jsx(Y,{children:"Completed"}),e.jsx(K,{children:e.jsx(h,{direction:"column",gap:2,children:s.map(a=>e.jsx(Z,{...a},a.name))})})]})]})]})},pe=[{path:"/",name:"Character",element:e.jsx(dt,{})},{path:"/skills",name:"Skills",element:e.jsx(ht,{})},{path:"/quests",name:"Quests",element:e.jsx(xt,{})}],gt={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},ue=ve(gt);be(ue);const G=Se(ue);Ce(G,we).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const yt=new ke;function mt(){Ae(G).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const z=Te.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),jt=()=>{const{userData:t,setUserData:n}=M(),s=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[a,r]=c.useState(""),[d,i]=c.useState(null),[x,g]=c.useState(!1),[T,v]=c.useState(null),[f,k]=c.useState(null),[_,w]=c.useState(!1),F=async()=>{if(a.trim()){g(!0),v(null),i(null);try{const{data:A}=await z.post("/chatnutrition",{message:a}),m={...A,description:a};console.log(m),k(m),w(!0)}catch{v("Failed to get nutrition info. Try again.")}finally{g(!1)}}},L=async()=>{if(f){g(!0),v(null);try{const A=await z.post(`/chatnutrition/${t==null?void 0:t.uid}/addMeal`,f),{mealAffects:m,updatedUser:P}=A.data;n(P);const I=[];m.currency&&I.push(`🦴 This meal cost ${m.currency} bone${m.currency>1?"s":""}!`),m.armorIncrease&&I.push(`🛡️ +${m.armorIncrease.toFixed(1)} Armor from protein`),m.defenseIncrease&&I.push(`🧱 +${m.defenseIncrease.toFixed(1)} Defense from fiber`),m.speedIncrease&&I.push(`💨 +${m.speedIncrease.toFixed(1)} Speed from hydration`),m.intelligenceIncrease&&I.push(`🧠 +${m.intelligenceIncrease} Intelligence from fruits & vegetables`),i(I.join(`
`))}catch{v("Failed to confirm meal. Try again.")}finally{g(!1),k(null),w(!1),r("")}}},B=()=>{k(null),w(!1),i(null)};return e.jsxs(ce,{style:{maxWidth:480,margin:"auto",padding:16},children:[e.jsx(o,{styleAs:"h2",style:{marginBottom:12},children:"Log Your Food"}),e.jsx("textarea",{value:a,onChange:A=>r(A.target.value),placeholder:"Describe what you ate today...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:5,style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--salt-palette-neutral-300)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}}),_?e.jsxs(e.Fragment,{children:[e.jsxs(o,{styleAs:"h2",children:["🦴 This meal will cost ",Math.round(f.calories/100)," ",s,". Proceed?"]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[e.jsx(R,{onClick:L,sentiment:"positive",disabled:x,children:x?e.jsx(te,{size:"small"}):"Confirm"}),e.jsx(R,{onClick:B,sentiment:"neutral",disabled:x,children:"Cancel"})]})]}):e.jsx(R,{appearance:"solid",sentiment:"accented",onClick:F,disabled:x||!a.trim(),style:{marginTop:12},children:x?e.jsx(te,{size:"small"}):"Send"}),T&&e.jsx(o,{styleAs:"display2",style:{color:"var(--salt-error-text-color)",marginTop:12},children:T}),d&&e.jsx("pre",{style:{marginTop:16,backgroundColor:"var(--salt-gray-50)",padding:12,borderRadius:6,whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:14},children:e.jsxs(o,{style:{lineHeight:"33px"},styleAs:"h3",children:[" ",d]})})]})},ft={puppy:[{rpe:1,emoji:"🐾",text:"Sniffed around the park"},{rpe:2,emoji:"🐕",text:"Chased tail"},{rpe:3,emoji:"🐺",text:"Chased squirrel"},{rpe:4,emoji:"🔥🐺",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"💤",text:"Big stretch under a tree"},{rpe:2,emoji:"🐱",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"🐯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"🔥🐯",text:"Celestial lion battle in the astral jungle"}]},vt=({petType:t,onChange:n})=>{const s=ft[t],[a,r]=c.useState(null),d=i=>{r(i),n&&n(i)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:s.map(i=>e.jsxs(re,{onClick:()=>d(i.rpe),style:{cursor:"pointer",border:a===i.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===i.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(j,{size:32,symbol:i.emoji}),e.jsx(o,{style:{fontSize:12,marginTop:8},children:i.rpe}),e.jsx(o,{style:{fontSize:14,marginTop:6},children:i.text})]},i.rpe))})},bt=({open:t,onClose:n})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(j,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained ⚡ | Pet stronger 🐾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:n,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"✖"})]}):null,St=()=>{const{userData:t,setUserData:n}=M(),[s,a]=c.useState("WEIGHTS"),[r,d]=c.useState("DURATION"),[i,x]=c.useState(""),[g,T]=c.useState(""),[v,f]=c.useState(""),[k,_]=c.useState(null),[w,F]=c.useState(""),L=["WEIGHTS","CARDIO","MOBILITY","SPORT"],B=["DURATION","DISTANCE"],[A,m]=c.useState(!1),P=Array.from({length:12},(l,b)=>b),I=Array.from({length:60},(l,b)=>b),D=L.includes(s)&&B.includes(r)&&(i!==""||g!==""||v!=="")&&k!==null;function p(){x(""),T(""),f(""),_(null),F(""),a("WEIGHTS"),d("DURATION")}const u=async()=>{if(!t||!t.uid){alert("User not loaded properly.");return}const l=r==="DURATION"?(Number(g)||0)*60+(Number(v)||0):0;try{const{data:b}=await z.post(`/users/${t.uid}/addWorkout`,{workoutType:s,cardioMode:r,duration:l,distance:r==="DISTANCE"&&Number(i)||0,rpe:k,notes:w});n(b.updatedUser),p(),m(!0)}catch(b){console.error(b),alert("There was an error logging your workout.")}};return e.jsxs(ce,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(bt,{open:A,onClose:()=>m(!1)}),e.jsx(o,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(o,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(ne,{value:s??"",onChange:l=>a(l.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:L.map(l=>e.jsx(ae,{value:l,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:l},l))}),s==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(ne,{value:r??"",onChange:l=>{d(l.currentTarget.value),x(""),T(""),f("")},style:{marginBottom:16},children:B.map(l=>e.jsx(ae,{value:l,appearance:l==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:l},l))})]}),r==="DISTANCE"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(o,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(H,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:i,onChange:l=>x(l.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(o,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(S,{direction:"row",gap:2,children:[e.jsx(E,{value:g,onSelectionChange:l=>T(l.target.value),placeholder:"Hours",children:P.map(l=>e.jsxs(U,{value:String(l),children:[l," hr"]},l))}),e.jsx(E,{value:v,onSelectionChange:l=>f(l.target.value),placeholder:"Minutes",children:I.map(l=>e.jsxs(U,{value:String(l),children:[l<10?`0${l}`:l," min"]},l))})]})]}),e.jsx(o,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(vt,{onChange:l=>_(l),petType:(t==null?void 0:t.pet.currentPet)??"puppy"})}),e.jsx(o,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:w,onChange:l=>F(l.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(R,{onClick:u,disabled:!D,style:{opacity:D?1:.4,cursor:D?"pointer":"not-allowed",color:D?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:D?"#ff9900":void 0},children:"LOG WORKOUT"})]})},Ct=c.forwardRef(function({onClick:n,to:s,...a},r){const d=Fe(s),i=Pe(s);return e.jsx(Le,{...a,href:d,onClick:x=>{n==null||n(x),x.defaultPrevented||i(x)},ref:r})}),kt=()=>{const[t,n]=c.useState("none"),{pathname:s}=Ie();return e.jsxs(h,{as:"header",justify:"space-between",align:"center",className:"app-header",children:[e.jsx(y,{children:e.jsxs(_e,{children:[e.jsx(Re,{children:e.jsx(R,{appearance:"bordered",sentiment:"accented","aria-label":"Open Menu",children:e.jsx(Be,{"aria-hidden":!0})})}),e.jsxs(De,{children:[e.jsx(oe,{onClick:()=>n("logFood"),children:"Log Food"}),e.jsx(oe,{onClick:()=>n("logWorkout"),children:"Log Manual Workout"})]})]})}),e.jsx(y,{children:e.jsx("nav",{children:e.jsx(S,{direction:"row",gap:1,role:"list",children:pe.map(a=>e.jsx("div",{role:"listitem",children:e.jsx(Ct,{active:s===a.path,to:a.path,children:a.name})},a.name))})})}),e.jsx(y,{children:e.jsx(Oe,{placement:"top",content:"User Settings",children:e.jsx(R,{appearance:"bordered",sentiment:"accented","aria-label":"User Settings",onClick:mt,children:e.jsx(ze,{})})})}),e.jsxs(Me,{open:t!=="none",onOpenChange:()=>n("none"),position:"bottom",children:[t==="logFood"&&e.jsx(jt,{}),t==="logWorkout"&&e.jsx(St,{})]})]})},wt="_myBackground_1pm88_1",At="_loginScreen_1pm88_13",Tt="_overlay_1pm88_29",Ft="_loginContainer_1pm88_39",Pt="_googleButton_1pm88_49",ee={myBackground:wt,loginScreen:At,overlay:Tt,loginContainer:Ft,googleButton:Pt};function Lt(){const{setUserData:t}=M(),[n,s]=c.useState(!1),a=async()=>{s(!0),console.log("Attempting to log in with Google...");try{const d=await(await We(G,yt)).user.getIdToken(),{data:i}=await z.post("/auth/google",{token:d}),g=(await z.get(`/users/${i.uid}`)).data;t(g),console.log("User saved or retrieved from DB:",i)}catch(r){console.error(r)}s(!0)};return e.jsx("div",{className:ee.loginScreen,children:e.jsx("div",{className:ee.loginContainer,children:n?e.jsx(te,{size:"large","aria-label":"loading",role:"status"}):e.jsx(R,{className:ee.googleButton,onClick:a,children:"Embark with Google"})})})}const It=()=>{const{userData:t,setUserData:n}=M();if(!t)return e.jsx(o,{children:"Loading..."});const[s,a]=c.useState(0),[r,d]=c.useState(t),[i,x]=c.useState(1),[g,T]=c.useState(1.2),[v,f]=c.useState(0),[k,_]=c.useState(Math.floor(r.bodyStats.height/12)),[w,F]=c.useState(r.bodyStats.height%12);if(!t||!r)return e.jsx(o,{children:"Loading..."});c.useEffect(()=>{const p=k*12+w;console.log("total inches : ",p),d(u=>({...u,bodyStats:{...u.bodyStats,height:p}}))},[k,w]);const L=p=>{const{weight:u,height:l,age:b,sex:N}=p;return N==="male"?10*(u/2.205)+6.25*(l*2.54)-5*b+5:10*(u/2.205)+6.25*(l*2.54)-5*b-161},B=p=>{const u=g+v;return p*u},A=async p=>{p.preventDefault();const u=L(r.bodyStats),l=B(u),b=r.goal.goalType==="weight_loss"?l-i*3500/7:r.goal.goalType==="muscle_gain"?l+300:l,N=Math.round(b/100),se={...r,bodyStats:{...r.bodyStats,bmr:u,tdee:l},goal:{...r.goal,dailyCalorieGoal:b,dailyCurrencyTotal:N,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",se);try{const{data:$}=await z.post("/users/update",{...se});n($)}catch($){console.error("Error updating user data:",$)}},m=(p,u,l)=>{const{name:b,value:N}=p.target;d({...r,[u]:{...r[u],[l||b]:N}})},P=(p,u,l)=>{d({...r,[p]:{...r[p],[u]:l}})},I=()=>{if(s===0){const{weight:p,height:u,age:l,sex:b}=r.bodyStats;return p>0&&u>0&&l>0&&["male","female"].includes(b)}if(s===1)return["weight_loss","muscle_gain","maintenance"].includes(r.goal.goalType);if(s===2){const{name:p,currentPet:u}=r.pet;return p.trim()!==""&&["puppy","kitten","bird"].includes(u)}return!0},D=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(h,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(y,{grow:1,children:e.jsxs(S,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(y,{children:e.jsx(o,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(y,{children:e.jsx(Ne,{children:D.map((p,u)=>e.jsx(He,{label:p,stage:s===u?"active":u<s?"completed":"pending"},u))})}),e.jsxs("form",{onSubmit:A,children:[s===0&&e.jsxs(S,{align:"stretch",gap:2,children:[e.jsx(o,{styleAs:"h2",children:"Body Stats"}),e.jsxs(O,{children:[e.jsx(W,{children:"Weight (lbs)"}),e.jsx(H,{value:r.bodyStats.weight,onChange:p=>m(p,"bodyStats","weight")})]}),e.jsxs(O,{children:[e.jsx(W,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(E,{value:k.toString()+" ft",onSelectionChange:(p,u)=>_(Number(u)),children:[2,3,4,5,6,7,8,9].map(p=>e.jsxs(U,{value:p.toString(),children:[p," ft"]},p))}),e.jsx(E,{value:w.toString()+" in",onSelectionChange:(p,u)=>F(Number(u)),children:Array.from({length:12},(p,u)=>e.jsxs(U,{value:u.toString(),children:[u," in"]},u))})]})]}),e.jsxs(O,{children:[e.jsx(W,{children:"Sex"}),e.jsxs(h,{direction:"row",gap:2,children:[e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(h,{direction:"column",align:"center",gap:1,children:[e.jsx(j,{symbol:"🙎🏻‍♂️",size:32}),e.jsx(o,{children:"Male"})]})})}),e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:r.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(h,{direction:"column",align:"center",gap:1,children:[e.jsx(j,{symbol:"🙎🏻‍♀️",size:32}),e.jsx(o,{children:"Female"})]})})})]})]}),e.jsxs(O,{children:[e.jsx(W,{children:"Age (years)"}),e.jsx(H,{value:r.bodyStats.age,onChange:p=>m(p,"bodyStats","age")})]})]}),s===1&&e.jsxs(S,{gap:2,children:[e.jsx(o,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(h,{direction:"row",gap:2,children:[e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(h,{direction:"column",align:"center",gap:1,children:e.jsxs(y,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"🔥",size:24}),e.jsx(o,{children:"Weight Loss"})]})})})}),e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(h,{direction:"column",align:"center",gap:1,children:e.jsxs(y,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:r.bodyStats.sex==="male"?"🏋️‍♂️":"🏋🏽‍♀️",size:24}),e.jsx(o,{children:"Muscle Gain"})]})})})}),e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(h,{direction:"column",align:"center",gap:1,children:e.jsxs(y,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"🛠️",size:24}),e.jsx(o,{children:"Maintenance"})]})})})})]}),r.goal.goalType==="weight_loss"&&e.jsxs(O,{children:[e.jsx(o,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Ee,{max:2,min:.5,step:.25,value:i,onChange:(p,u)=>x(u),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(S,{gap:1,children:[e.jsx(o,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(o,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(h,{direction:"column",gap:1,children:[e.jsx(C,{onClick:()=>T(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"💻",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(C,{onClick:()=>T(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"👩‍🏫",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(C,{onClick:()=>T(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"👩‍⚕️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(C,{onClick:()=>T(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:g===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"👷‍♂️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(S,{gap:1,children:[e.jsx(o,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(o,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(h,{direction:"column",gap:1,children:[e.jsx(C,{onClick:()=>f(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"🛋️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Sedentary"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(C,{onClick:()=>f(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"🚶‍♀️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Lightly Active"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(C,{onClick:()=>f(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"🏃‍♂️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Moderately Active"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(C,{onClick:()=>f(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"🏋️‍♀️",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Very Active"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(C,{onClick:()=>f(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:v===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(h,{direction:"row",align:"center",gap:2,children:[e.jsx(j,{symbol:"💪",size:30}),e.jsxs(S,{gap:0,children:[e.jsx(o,{styleAs:"h2",children:"Extremely Active"}),e.jsx(o,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),s===2&&e.jsxs(S,{gap:2,children:[e.jsx(o,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(O,{children:[e.jsx(W,{children:"Pet Name"}),e.jsx(H,{value:r.pet.name,onChange:p=>m(p,"pet","name")})]}),e.jsxs(O,{children:[e.jsx(W,{children:"Pet Type"}),e.jsxs(h,{direction:"row",gap:2,children:[e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(h,{direction:"column",align:"center",gap:1,children:e.jsxs(y,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"🐶",size:24}),e.jsx(o,{children:"Dog"})]})})})}),e.jsx(y,{grow:1,children:e.jsx(C,{onClick:()=>P("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:r.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(h,{direction:"column",align:"center",gap:1,children:e.jsxs(y,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(j,{symbol:"🐱",size:24}),e.jsx(o,{children:"Cat"})]})})})})]})]})]}),e.jsx(y,{style:{paddingTop:"20px"},children:e.jsxs(h,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[s>0&&e.jsx(R,{sentiment:"neutral",appearance:"solid",onClick:()=>a(s-1),children:"Previous"}),s<D.length-1&&e.jsx(R,{sentiment:"accented",appearance:"solid",disabled:!I(),onClick:()=>a(s+1),children:"Next"}),s===D.length-1&&e.jsx(R,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!I(),onClick:A,children:"Start Your Adventure!"})]})})]})]})})})};function _t(){const[t,n]=c.useState(null),[s,a]=c.useState(!0),{userData:r,setUserData:d}=M();return c.useEffect(()=>{const i=Ue.throttle(()=>{console.log("Fetching user object..."),z.get(`/users/${r==null?void 0:r.uid}`).then(g=>{d(g.data),console.log("User data synced:",g.data)}).catch(g=>{console.error("Failed to fetch user:",g)})},1e4),x=()=>{console.log("User came back!"),i()};return r&&window.addEventListener("focus",x),()=>{r&&(window.removeEventListener("focus",x),i.cancel())}},[]),c.useEffect(()=>{const i=Ge(G,x=>{console.log("Auth state changed:",x),console.log("User Data in App useEffect:",r),n(x),a(!1);const g=localStorage.getItem("userData");g&&d(JSON.parse(g))});return()=>i()},[]),console.log("App render - Loading:",s,"User:",t,"UserData:",r),s?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!r?e.jsx(J,{mode:"dark",children:e.jsx(Lt,{})}):r.bodyStats.weight===0?e.jsx(J,{mode:"dark",children:e.jsx(It,{})}):e.jsx(J,{mode:"dark",children:e.jsxs("div",{style:{maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:e.jsx($e,{children:pe.map(i=>e.jsx(Ve,{path:i.path,element:i.element},i.name))})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(kt,{})})]})})}Ye.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(Je,{children:e.jsx(rt,{children:e.jsx(_t,{})})})}));
