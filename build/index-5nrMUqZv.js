import{i as Qe,g as Je,a as Ze,s as et,G as tt,b as st,c as at,d as ot,r as n,j as e,C as ve,T as x,B as Z,P as Se,S as Ae,e as be,f as Ce,I as ne,h as D,D as re,O as le,U as we,k as nt,A as rt,l as lt,R as Me,m as Fe,n as it,o as ct,F as dt,p as _t,H as G,q as ut,L as xt,t as ht,X as pt,u as ke,Y as mt,v as gt,w as ft,x as de,y as jt,z as yt,M as vt,Z as St,E as bt,J as Ct,K as wt,N as kt,Q as Nt,V as Ne,W as Ie,_ as It,$ as Te,a0 as K,a1 as Oe,a2 as Pe,a3 as Ee,a4 as Tt,a5 as Lt,a6 as Bt,a7 as At,a8 as Mt,a9 as T,aa as O,ab as Ft,ac as Ot,ad as Y,ae as Q,af as q,ag as Pt,ah as Et,ai as Rt,aj as qt,ak as Dt,al as zt,am as $t,an as _e,ao as ue,ap as xe,aq as Wt,ar as Re,as as qe,at as De,au as ze,av as Ut,aw as Gt,ax as Ht,ay as Vt,az as he,aA as Xt,aB as ae,aC as Yt,aD as Kt,aE as pe,aF as Qt,aG as Jt,aH as Zt}from"./vendor-Cg1ucw5Y.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();const es={apiKey:"AIzaSyBSPzfe-fIq_T5YiH_K3CGFjkXuVtXh_s4",authDomain:"xpetshealth.quest",projectId:"workoutrpg-14ea8",storageBucket:"workoutrpg-14ea8.firebasestorage.app",messagingSenderId:"365189784249",appId:"1:365189784249:web:711c00340542c7b238f168",measurementId:"G-YMB052NVCF"},$e=Qe(es);Je($e);const ie=Ze($e);et(ie,st).then(()=>{}).catch(t=>{console.error("Failed to set persistence:",t)});const ts=new tt;function ss(){at(ie).then(()=>{console.log("Signed out!")}).catch(t=>{console.error("Sign out error:",t)})}const E=ot.create({baseURL:"https://api-wosc6bjdaa-uc.a.run.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),We=n.createContext(void 0),as=({children:t})=>{const[a,r]=n.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):null}),o=s=>{r(s),s?localStorage.setItem("userData",JSON.stringify(s)):localStorage.removeItem("userData")};return e.jsx(We.Provider,{value:{userData:a,setUserData:o},children:t})},$=()=>{const t=n.useContext(We);if(!t)throw new Error("useUser must be used within a UserProvider");const{userData:a,setUserData:r}=t,o=n.useMemo(()=>{if(a)return Math.floor(a.goal.dailyCalorieGoal/100)},[a]);return{userData:a,setUserData:r,dailyCurrency:o}},os=()=>{const{userData:t,setUserData:a}=$(),r=(t==null?void 0:t.pet.currentPet)==="puppy"?"bones":"fish",[o,s]=n.useState(""),[l,y]=n.useState(null),[i,h]=n.useState(!1),[u,m]=n.useState(null),[b,L]=n.useState(null),[g,I]=n.useState(!1),B=async()=>{var c,p;if(o.trim()){h(!0),m(null),y(null);try{const{data:w}=await E.post("/chatnutrition",{message:o}),k={...w,description:o,userId:t==null?void 0:t.uid};console.log(k),L(k),I(!0)}catch(w){const k=w,A=(c=k.response)==null?void 0:c.data;((p=k.response)==null?void 0:p.status)===400?m((A==null?void 0:A.suggestion)||"Please describe a specific food item or meal"):m("Failed to get nutrition info. Try again.")}finally{h(!1)}}},P=async()=>{if(b){h(!0),m(null);try{const c=await E.post("/meal/addMeal",b),{mealAffects:p,updatedUser:w}=c.data;a(w);const k=[];p.currency&&k.push(`🦴 This meal cost ${p.currency} bone${p.currency>1?"s":""}!`),p.armorIncrease&&k.push(`🛡️ +${p.armorIncrease.toFixed(1)} Armor from protein`),p.defenseIncrease&&k.push(`🧱 +${p.defenseIncrease.toFixed(1)} Defense from fiber`),p.speedIncrease&&k.push(`💨 +${p.speedIncrease.toFixed(1)} Speed from hydration`),p.intelligenceIncrease&&k.push(`🧠 +${p.intelligenceIncrease} Intelligence from fruits & vegetables`),k.length===0&&k.push("Seems like this meal didnt contain any sustenance!"),y(k.join(`
`))}catch{m("Failed to confirm meal. Try again.")}finally{h(!1),L(null),I(!1),s("")}}},f=()=>{L(null),I(!1),y(null)};return e.jsxs("div",{style:{padding:0,fontFamily:"'Courier New', monospace",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2520 100%)",border:"4px solid #ff9900",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 153, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)",color:"#f5f5dc",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(245, 245, 220, 0.02) 2px, rgba(245, 245, 220, 0.02) 4px)",pointerEvents:"none",zIndex:1}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:20,padding:"10px 0",border:"2px solid #4a9660",backgroundColor:"rgba(74, 150, 96, 0.1)",textShadow:"0 0 10px #4a9660"},children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:"bold",letterSpacing:"2px",color:"#4a9660"},children:"🍎 FOOD LOGGER v2.0 🍎"}),e.jsx("div",{style:{fontSize:"14px",color:"#f5f5dc",marginTop:4},children:"[NUTRITIONAL ANALYSIS SYSTEM]"})]}),e.jsxs("div",{style:{marginBottom:20,border:"2px solid #f5f5dc",padding:15,backgroundColor:"rgba(245, 245, 220, 0.05)"},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"#f5f5dc",textTransform:"uppercase",letterSpacing:"1px"},children:"> ENTER FOOD DATA:"}),e.jsx("textarea",{value:o,onChange:c=>s(c.target.value),placeholder:"DESCRIBE CONSUMED ITEMS...",onBlur:()=>{window.scrollTo(0,window.scrollY)},rows:4,style:{width:"100%",padding:"12px",border:"2px solid #4a9660",borderRadius:"0",fontSize:"16px",fontFamily:"'Courier New', monospace",backgroundColor:"#0a0a0a",color:"#f5f5dc",resize:"none",outline:"none",boxSizing:"border-box"}})]}),g?e.jsxs("div",{style:{border:"3px solid #ff6600",padding:20,backgroundColor:"rgba(255, 102, 0, 0.1)",textAlign:"center",marginBottom:20},children:[e.jsxs("div",{style:{fontSize:"18px",color:"#ff6600",marginBottom:15,textShadow:"0 0 8px #ff6600"},children:[r==="bones"?"🦴":"🐟"," COST: ",Math.round(b.calories/100)," ",r]}),e.jsx("div",{style:{fontSize:"14px",color:"#ff9900",marginBottom:15},children:"PROCEED WITH TRANSACTION?"}),e.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[e.jsx("button",{onClick:P,disabled:i,style:{padding:"10px 20px",border:"2px solid #ff9900",backgroundColor:i?"#332200":"#1a1100",color:"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:i?"PROCESSING...":"✓ CONFIRM"}),e.jsx("button",{onClick:f,disabled:i,style:{padding:"10px 20px",border:"2px solid #ff6600",backgroundColor:i?"#331100":"#1a0800",color:"#ff6600",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s"},children:"✗ CANCEL"})]})]}):e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsx("button",{onClick:B,disabled:i||!o.trim(),style:{padding:"15px 30px",border:"3px solid #ff9900",backgroundColor:i||!o.trim()?"#332200":"#1a1100",color:i||!o.trim()?"#996600":"#ff9900",fontFamily:"'Courier New', monospace",fontSize:"14px",cursor:i||!o.trim()?"not-allowed":"pointer",textTransform:"uppercase",letterSpacing:"2px",fontWeight:"bold",textShadow:i||!o.trim()?"none":"0 0 8px #ff9900",transition:"all 0.3s",width:"100%"},children:i?"⚡ ANALYZING...":"🚀 ANALYZE FOOD"})}),u&&e.jsx("div",{style:{border:"2px solid #ff3300",padding:15,backgroundColor:"rgba(255, 51, 0, 0.1)",marginBottom:20,textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"14px",color:"#ff3300",textShadow:"0 0 8px #ff3300",textTransform:"uppercase"},children:["⚠️ ERROR: ",u]})}),l&&e.jsx("div",{style:{border:"3px solid #ff9900",padding:20,backgroundColor:"rgba(255, 153, 0, 0.1)",textAlign:"center",animation:"pulse 2s infinite"},children:e.jsx("div",{style:{fontSize:"18px",color:"#ff9900",textShadow:"0 0 12px #ff9900",fontWeight:"bold",whiteSpace:"pre-wrap",lineHeight:1.75},children:l})}),e.jsx("div",{style:{textAlign:"center",marginTop:20,fontSize:"12px",color:"#f5f5dc",opacity:.7},children:"POWERED BY XPETS-GPT ENGINE™"})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}})]})},M=({symbol:t,label:a="",className:r="",style:o={},size:s=24})=>e.jsx("span",{role:"img","aria-label":a||void 0,"aria-hidden":a?"false":"true",className:r,style:{display:"inline-block",verticalAlign:"middle",fontSize:typeof s=="number"?`${s}px`:s,lineHeight:1,...o},children:t}),ns={puppy:[{rpe:1,emoji:"🐾",text:"Sniffed around the park"},{rpe:2,emoji:"🐕",text:"Chased tail"},{rpe:3,emoji:"🐺",text:"Chased squirrel"},{rpe:4,emoji:"🔥🐺",text:"Life or death fight with a bear"}],kitten:[{rpe:1,emoji:"💤",text:"Big stretch under a tree"},{rpe:2,emoji:"🐱",text:"Thunder? Nope, Midnight zoomies"},{rpe:3,emoji:"🐯",text:"Climbed the tallest tree in the realm"},{rpe:4,emoji:"🔥🐯",text:"Celestial lion battle in the astral jungle"}]},rs=({petType:t,selectedRpe:a,onChange:r})=>{const o=ns[t],s=l=>{r(l)};return e.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center"},children:o.map(l=>e.jsxs(ve,{onClick:()=>s(l.rpe),style:{cursor:"pointer",border:a===l.rpe?"2px solid #ffa640":"1px solid #ccc",background:a===l.rpe?"#222":"#1d1d1d",width:140,textAlign:"center",padding:8},children:[e.jsx(M,{size:32,symbol:l.emoji}),e.jsx(x,{style:{fontSize:12,marginTop:8},children:l.rpe}),e.jsx(x,{style:{fontSize:14,marginTop:6},children:l.text})]},l.rpe))})},ls=({open:t,onClose:a})=>t?e.jsxs("div",{role:"alert","aria-live":"assertive",style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:12,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8,top:0,left:0,right:0},children:[e.jsx(M,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsx("div",{style:{fontSize:10,color:"#ccc"},children:"+XP gained ⚡ | Pet stronger 🐾"})]}),e.jsx("button",{"aria-label":"Close notification",onClick:a,style:{background:"transparent",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",border:"none",cursor:"pointer",fontSize:14,padding:0,lineHeight:1},children:"✖"})]}):null,Ue=n.createContext(void 0),Ge=()=>{const t=n.useContext(Ue);if(!t)throw new Error("useToast must be used within ToastProvider");return t};let is=0;const cs=({children:t})=>{const[a,r]=n.useState([]),[o,s]=n.useState(null);n.useEffect(()=>{!o&&a.length>0&&(s(a[0]),r(i=>i.slice(1)))},[a,o]),n.useEffect(()=>{if(!o)return;const i=o.duration??3e3,h=setTimeout(()=>{s(null)},i);return()=>clearTimeout(h)},[o]);const l=n.useCallback(i=>{const h=++is;r(u=>[...u,{id:h,...i}])},[]),y=n.useCallback(()=>{s(null)},[]);return e.jsxs(Ue.Provider,{value:{addToast:l,removeToast:y},children:[t,o&&e.jsx("div",{role:"alert","aria-live":"assertive",style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:8},children:e.jsx("div",{children:o.content},o.id)})]})},ds="_levelUpContainer_vq3kq_1",_s="_levelUpPulse_vq3kq_1",us="_shimmer_vq3kq_1",xs="_emoji_vq3kq_32",hs="_bounce_vq3kq_1",ps="_levelText_vq3kq_41",ms="_levelNumber_vq3kq_54",gs="_celebration_vq3kq_67",fs="_fadeInUp_vq3kq_1",ee={levelUpContainer:ds,levelUpPulse:_s,shimmer:us,emoji:xs,bounce:hs,levelText:ps,levelNumber:ms,celebration:gs,fadeInUp:fs},He=n.createContext(void 0),js=({children:t})=>{const[a,r]=n.useState(null),[o,s]=n.useState(void 0),l=({content:i,style:h})=>{r(i),s(h)},y=()=>{r(null),s(void 0)};return e.jsxs(He.Provider,{value:{showSplash:l,hideSplash:y},children:[t,a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",...o},onClick:y,children:[a,e.jsx("div",{style:{padding:"17px 0px"},children:e.jsx(Z,{onClick:y,style:{marginTop:24,padding:"17px 24px",lineHeight:"20px",fontFamily:"'Press Start 2P', Pixelify Sans",fontSize:"17px",color:"#fff",backgroundColor:"#ff9900",border:"none",borderRadius:"14px",cursor:"pointer"},children:"Dismiss"})})]})]})},ys=()=>{const t=n.useContext(He);if(!t)throw new Error("useSplashScreen must be used within a SplashScreenProvider");return t},vs={1:.5,2:1,3:1.5,4:2.2},Ss=({setDrawerView:t})=>{const{userData:a,setUserData:r}=$(),{addToast:o}=Ge(),{showSplash:s}=ys(),[l,y]=n.useState(!1),[i,h]=n.useState("WEIGHTS"),[u,m]=n.useState("DURATION"),[b,L]=n.useState(""),[g,I]=n.useState(""),[B,P]=n.useState(""),[f,c]=n.useState(null),[p,w]=n.useState(""),k=["WEIGHTS","CARDIO","MOBILITY","SPORT"],A=["DURATION","DISTANCE"],[j,C]=n.useState(!1),S=Array.from({length:12},(v,W)=>W),N=Array.from({length:60},(v,W)=>W),[F,H]=n.useState({strength:0,agility:0,pet:0});console.log(g),console.log(f);function V(){const v=(Number(g)||0)*60+(Number(B)||0);console.log("totalDuration ",v);const W=vs[f??2];let z=0;v>0?z=Math.round(v*10*W):Number(b)>0&&(z=Math.round(Number(b)*125*W)),console.log("totalXp ",z);let te=0,se=0;switch(i){case"WEIGHTS":te=Math.round(z/100);break;case"CARDIO":se=Math.round(z/100);break;case"MOBILITY":case"SPORT":const Ye=z/2/100,Ke=z/2/100;te=Math.round(Ye),se=Math.round(Ke);break}return console.log("final ",{strength:te,agility:se,pet:z}),{strength:te,agility:se,pet:z}}const U=k.includes(i)&&A.includes(u)&&(b!==""||g!==""||B!=="")&&f!==null;function X(){L(""),I(""),P(""),c(null),w(""),h("WEIGHTS"),m("DURATION")}const Xe=async()=>{const v=V();if(H(v),!a||!a.uid){alert("User not loaded properly.");return}const W=u==="DURATION"?(Number(g)||0)*60+(Number(B)||0):0;try{const{data:z}=await E.post("/workout/logWorkout",{userId:a.uid,logType:"manual",workoutType:i,cardioMode:u,duration:W,distance:u==="DISTANCE"&&Number(b)||0,rpe:f,notes:p,workoutXp:v});r(z.updatedUser),X(),o({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"🏋️‍♂️"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{marginBottom:4},children:"WORKOUT LOGGED!"}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",v.pet," PET XP"]}),v.strength>0&&v.agility>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",v.strength," STRENGTH"]}),e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",v.agility," AGILITY"]})]}):v.strength>0?e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",v.strength," STRENGTH"]}):e.jsxs("div",{style:{fontSize:15,color:"#ccc"},children:["+",v.agility," AGILITY"]})]})]}),duration:5e3}),t("none"),setTimeout(()=>{z.levelUp&&s({content:e.jsxs("div",{className:ee.levelUpContainer,children:[e.jsx("div",{className:ee.emoji,children:"🎉✨🎊✨🎉"}),e.jsx("div",{className:ee.levelText,children:"LEVEL UP!"}),e.jsxs("div",{className:ee.levelNumber,children:["LEVEL ",z.updatedUser.pet.level]}),e.jsx("div",{className:ee.celebration,children:"Amazing Progress!"})]}),style:{background:"radial-gradient(circle at 25% 25%, #1a1a2e 0%, #16213e 50%, #0f0f23 100%),repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.03) 2px,rgba(0,255,0,0.03) 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"}})},5e3)}catch(z){console.error(z),alert("There was an error logging your workout.")}};return l?e.jsx(Se,{style:{overflowX:"hidden",margin:"auto",padding:0},children:e.jsx(Ae,{size:"large","aria-label":"loading",role:"status"})}):e.jsxs(Se,{style:{overflowX:"hidden",margin:"auto",padding:0},children:[e.jsx(ls,{open:j,onClose:()=>C(!1)}),e.jsx(x,{styleAs:"h1",style:{fontSize:"20px",color:"#ffa640",paddingBottom:16,fontFamily:"'Press Start 2P', Pixelify Sans"},children:"LOG YOUR WORKOUT"}),e.jsx(x,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"WORKOUT TYPE"}),e.jsx(be,{value:i??"",onChange:v=>h(v.currentTarget.value),style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",gap:8,marginBottom:16},children:k.map(v=>e.jsx(Ce,{value:v,style:{fontSize:"17px",fontFamily:'"Open Sans", sans-serif',flexShrink:1,whiteSpace:"nowrap"},children:v},v))}),i==="CARDIO"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"CARDIO MODE"}),e.jsx(be,{value:u??"",onChange:v=>{m(v.currentTarget.value),L(""),I(""),P("")},style:{marginBottom:16},children:A.map(v=>e.jsx(Ce,{value:v,appearance:v==="WEIGHTS"?"solid":void 0,style:{fontSize:"14px",fontFamily:'"Open Sans", sans-serif'},children:v},v))})]}),u==="DISTANCE"&&i==="CARDIO"?e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(x,{style:{color:"#fcefcf",marginBottom:4},children:"Distance (miles)"}),e.jsx(ne,{style:{padding:"0 4px 8px 4px",fontSize:"17px"},value:b,onChange:v=>L(v.target.value),placeholder:"e.g. 3.2"})]}):e.jsxs("div",{style:{padding:"0 0 16px 0"},children:[e.jsx(x,{style:{color:"#fcefcf",marginBottom:4},children:"Duration"}),e.jsxs(D,{direction:"row",gap:2,children:[e.jsx(re,{value:g+" hr(s)",onSelectionChange:(v,W)=>I(W[0]??""),placeholder:"Hours",children:S.map(v=>e.jsxs(le,{value:String(v),children:[v," hr"]},v))}),e.jsx(re,{value:B+" min(s)",onSelectionChange:(v,W)=>P(W[0]??""),placeholder:"Minutes",children:N.map(v=>e.jsxs(le,{value:String(v),children:[v<10?`0${v}`:v," min"]},v))})]})]}),e.jsx(x,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"HOW HARD WAS IT?"}),e.jsx("div",{style:{padding:"0 0 16px 0"},children:e.jsx(rs,{selectedRpe:f,onChange:v=>c(v),petType:(a==null?void 0:a.pet.currentPet)??"puppy"})}),e.jsx(x,{style:{color:"#FFFDD0",paddingBottom:4,fontSize:"17px",fontFamily:"Open Sans"},children:"OPTIONAL NOTES"}),e.jsx("div",{style:{padding:"8px 0 8px 0"},children:e.jsx("textarea",{value:p,onChange:v=>w(v.target.value),rows:3,placeholder:"Add notes here...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid rgb(116, 116, 116)",fontSize:"17px",fontFamily:"inherit",backgroundColor:"var(--salt-container-primary-background)",color:"var(--salt-content-primary-foreground)",resize:"vertical"}})}),e.jsx(Z,{onClick:Xe,disabled:!U,style:{opacity:U?1:.4,cursor:U?"pointer":"not-allowed",color:U?"inherit":"#888",fontFamily:"'Press Start 2P', Pixelify Sans",backgroundColor:U?"#ff9900":void 0},children:"LOG WORKOUT"})]})},bs="_backdrop_1mk9a_9",Cs="_drawer_1mk9a_17",ws="_drawer__header_1mk9a_34",ks="_drawer__headerContent_1mk9a_41",Ns="_drawer__headerIcon_1mk9a_46",Is="_drawer__title_1mk9a_49",Ts="_drawer__closeButton_1mk9a_55",Ls="_drawer__content_1mk9a_67",Bs="_mealCard_1mk9a_73",As="_mealCard__header_1mk9a_85",Ms="_mealCard__info_1mk9a_91",Fs="_mealCard__title_1mk9a_94",Os="_mealCard__timestamp_1mk9a_100",Ps="_mealCard__calories_1mk9a_105",Es="_mealCard__caloriesValue_1mk9a_108",Rs="_mealCard__caloriesLabel_1mk9a_115",qs="_mealCard__macros_1mk9a_119",Ds="_mealCard__additionalStats_1mk9a_125",zs="_mealCard__statBoosts_1mk9a_131",$s="_mealCard__statBoostsTitle_1mk9a_135",Ws="_mealCard__statBoostsGrid_1mk9a_141",Us="_mealCard__currency_1mk9a_146",Gs="_mealCard__currencyText_1mk9a_150",Hs="_macroItem_1mk9a_156",Vs="_macroItem__value_1mk9a_162",Xs="_macroItem__label_1mk9a_168",Ys="_additionalStat_1mk9a_182",Ks="_additionalStat__icon_1mk9a_190",Qs="_additionalStat__content_1mk9a_193",Js="_additionalStat__value_1mk9a_196",Zs="_additionalStat__label_1mk9a_203",ea="_statBoost_1mk9a_212",ta="_statBoost__icon_1mk9a_221",sa="_statBoost__label_1mk9a_236",aa="_statBoost__value_1mk9a_239",oa="_loadingState_1mk9a_244",na="_loadingState__content_1mk9a_248",ra="_pulse_1mk9a_1",la="_loadingState__text_1mk9a_251",ia="_loadingState__subtext_1mk9a_255",ca="_loadingMore_1mk9a_260",da="_loadingMore__content_1mk9a_264",_a="_loadingMore__text_1mk9a_267",ua="_loadingMore__subtext_1mk9a_271",xa="_emptyState_1mk9a_276",ha="_emptyState__icon_1mk9a_280",pa="_emptyState__text_1mk9a_284",ma="_emptyState__subtext_1mk9a_288",ga="_endOfList_1mk9a_293",fa="_endOfList__text_1mk9a_298",ja="_endOfList__subtext_1mk9a_303",ya="_mealsList_1mk9a_308",va="_demoApp_1mk9a_314",Sa="_demoApp__container_1mk9a_319",ba="_demoApp__title_1mk9a_323",Ca="_demoApp__button_1mk9a_330",_={backdrop:bs,drawer:Cs,"drawer--open":"_drawer--open_1mk9a_31",drawer__header:ws,drawer__headerContent:ks,drawer__headerIcon:Ns,drawer__title:Is,drawer__closeButton:Ts,drawer__content:Ls,mealCard:Bs,mealCard__header:As,mealCard__info:Ms,mealCard__title:Fs,mealCard__timestamp:Os,mealCard__calories:Ps,mealCard__caloriesValue:Es,mealCard__caloriesLabel:Rs,mealCard__macros:qs,mealCard__additionalStats:Ds,mealCard__statBoosts:zs,mealCard__statBoostsTitle:$s,mealCard__statBoostsGrid:Ws,mealCard__currency:Us,mealCard__currencyText:Gs,macroItem:Hs,macroItem__value:Vs,macroItem__label:Xs,"macroItem--protein":"_macroItem--protein_1mk9a_172","macroItem--carbs":"_macroItem--carbs_1mk9a_175","macroItem--fat":"_macroItem--fat_1mk9a_178",additionalStat:Ys,additionalStat__icon:Ks,additionalStat__content:Qs,additionalStat__value:Js,additionalStat__label:Zs,statBoost:ea,"statBoost--red":"_statBoost--red_1mk9a_221",statBoost__icon:ta,"statBoost--blue":"_statBoost--blue_1mk9a_224","statBoost--yellow":"_statBoost--yellow_1mk9a_227","statBoost--green":"_statBoost--green_1mk9a_230","statBoost--purple":"_statBoost--purple_1mk9a_233",statBoost__label:sa,statBoost__value:aa,loadingState:oa,loadingState__content:na,pulse:ra,loadingState__text:la,loadingState__subtext:ia,loadingMore:ca,loadingMore__content:da,loadingMore__text:_a,loadingMore__subtext:ua,emptyState:xa,emptyState__icon:ha,emptyState__text:pa,emptyState__subtext:ma,endOfList:ga,endOfList__text:fa,endOfList__subtext:ja,mealsList:ya,demoApp:va,demoApp__container:Sa,demoApp__title:ba,demoApp__button:Ca},wa=()=>{const{userData:t}=$(),[a,r]=n.useState([]),[o,s]=n.useState(!1),[l,y]=n.useState(!1),[i,h]=n.useState(!0),[u,m]=n.useState(0),b=n.useRef(null),L=10,g=async(f=u,c=!1)=>{c?s(!0):y(!0);try{const w=(await E.get(`/meal/${t==null?void 0:t.uid}/meals?limit=${L}&offset=${f}`)).data,k=w.meals||[];r(c?k:C=>[...C,...k]);const A=w.total||0,j=f+k.length;h(j<A),m(f+k.length)}catch(p){console.error("Error fetching meals:",p)}s(!1),y(!1)};n.useEffect(()=>{g(0,!0)},[]),n.useEffect(()=>{const f=()=>{const p=document.querySelector(".saltDrawer");if(!p)return;const{scrollTop:w,scrollHeight:k,clientHeight:A}=p;k-w<=A+100&&i&&!l&&g(u,!1)},c=document.querySelector(".saltDrawer");return c&&c.addEventListener("scroll",f),()=>{c&&c.removeEventListener("scroll",f)}},[u,i,l]);const I=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=({icon:f,label:c,value:p,color:w})=>e.jsxs("div",{className:`${_.statBoost} ${_[`statBoost--${w}`]}`,children:[e.jsx(f,{size:12,className:_.statBoost__icon}),e.jsx("span",{className:_.statBoost__label,children:c}),e.jsxs("span",{className:_.statBoost__value,children:["+",p]})]}),P=({meal:f})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.mealCard,children:[e.jsxs("div",{className:_.mealCard__header,children:[e.jsxs("div",{className:_.mealCard__info,children:[e.jsx("h3",{className:_.mealCard__title,children:f.description}),e.jsx("p",{className:_.mealCard__timestamp,children:I(f.timestamp)})]}),e.jsxs("div",{className:_.mealCard__calories,children:[e.jsx("div",{className:_.mealCard__caloriesValue,children:f.calories}),e.jsx("div",{className:_.mealCard__caloriesLabel,children:"CAL"})]})]}),e.jsxs("div",{className:_.mealCard__macros,children:[e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--protein"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[f.protein,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"PROTEIN"})]}),e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--carbs"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[f.carbs,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"CARBS"})]}),e.jsxs("div",{className:`${_.macroItem} ${_["macroItem--fat"]}`,children:[e.jsxs("div",{className:_.macroItem__value,children:[f.fat,"g"]}),e.jsx("div",{className:_.macroItem__label,children:"FAT"})]})]}),e.jsxs("div",{className:_.mealCard__additionalStats,children:[e.jsxs("div",{className:_.additionalStat,children:[e.jsx(nt,{size:16,className:_.additionalStat__icon}),e.jsxs("div",{className:_.additionalStat__content,children:[e.jsxs("div",{className:_.additionalStat__value,children:[f.fluid_intake_ml,"ml"]}),e.jsx("div",{className:_.additionalStat__label,children:"FLUID"})]})]}),e.jsxs("div",{className:_.additionalStat,children:[e.jsx(rt,{size:16,className:_.additionalStat__icon}),e.jsxs("div",{className:_.additionalStat__content,children:[e.jsx("div",{className:_.additionalStat__value,children:f.servings_of_fruits_vegetables}),e.jsx("div",{className:_.additionalStat__label,children:"FRUIT/VEG"})]})]})]}),e.jsxs("div",{className:_.mealCard__statBoosts,children:[e.jsx("div",{className:_.mealCard__statBoostsTitle,children:"STAT BOOSTS"}),e.jsxs("div",{className:_.mealCard__statBoostsGrid,children:[f.mealAffects.armorIncrease>0&&e.jsx(B,{icon:lt,label:"ARM",value:f.mealAffects.armorIncrease,color:"blue"}),f.mealAffects.speedIncrease>0&&e.jsx(B,{icon:Me,label:"SPD",value:f.mealAffects.speedIncrease,color:"yellow"}),f.mealAffects.intelligenceIncrease>0&&e.jsx(B,{icon:Fe,label:"INT",value:f.mealAffects.intelligenceIncrease,color:"pink"}),f.mealAffects.defenseIncrease>0&&e.jsx(B,{icon:it,label:"DEF",value:f.mealAffects.defenseIncrease,color:"red"})]})]}),e.jsx("div",{className:_.mealCard__currency,children:e.jsxs("span",{className:_.mealCard__currencyText,children:[(t==null?void 0:t.pet.currentPet)==="puppy"?e.jsx(e.Fragment,{children:e.jsx(ct,{size:15,style:{verticalAlign:"middle"}})}):e.jsx(e.Fragment,{children:e.jsx(dt,{size:15,style:{verticalAlign:"middle"}})})," "+f.currency]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.drawer__header,children:e.jsxs("div",{className:_.drawer__headerContent,children:[e.jsx(we,{className:_.drawer__headerIcon,size:32}),e.jsx("h2",{className:_.drawer__title,children:"Meal Log"})]})}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 80px)"},ref:b,children:o?e.jsx("div",{className:_.loadingState,children:e.jsxs("div",{className:_.loadingState__content,children:[e.jsx("div",{className:_.loadingState__text,children:"Loading meals..."}),e.jsx("div",{className:_.loadingState__subtext,children:"📖 Fetching your meal history"})]})}):a.length===0?e.jsxs("div",{className:_.emptyState,children:[e.jsx(we,{className:_.emptyState__icon,size:48}),e.jsx("div",{className:_.emptyState__text,children:"No meals logged yet"}),e.jsx("div",{className:_.emptyState__subtext,children:"Start tracking your meals to see them here!"})]}):e.jsxs("div",{className:_.mealsList,children:[a.map((f,c)=>e.jsx(P,{meal:f},`${f.id}-${c}`)),l&&e.jsx("div",{className:_.loadingMore,children:e.jsxs("div",{className:_.loadingMore__content,children:[e.jsx("div",{className:_.loadingMore__text,children:"Loading more meals..."}),e.jsx("div",{className:_.loadingMore__subtext,children:"⚡ Fetching next batch"})]})}),!i&&a.length>0&&e.jsxs("div",{className:_.endOfList,children:[e.jsx("div",{className:_.endOfList__text,children:"🎯 You've reached the end of your meal log!"}),e.jsxs("div",{className:_.endOfList__subtext,children:["Total meals loaded: ",a.length]})]})]})})]})},ka="_container_1chaz_4",Na="_heading_1chaz_10",Ia="_rangeButtons_1chaz_16",Ta="_button_1chaz_23",La="_activeButton_1chaz_37",Ba="_checkmarkPath_1chaz_53",J={container:ka,heading:Na,rangeButtons:Ia,button:Ta,activeButton:La,checkmarkPath:Ba,"draw-check":"_draw-check_1chaz_1","fade-check":"_fade-check_1chaz_1"},Aa=({onWeightChange:t})=>{var i,h;const{userData:a}=$(),r=()=>{var m,b;const u=(m=a==null?void 0:a.bodyStats)==null?void 0:m.weightLogs;if(Array.isArray(u)&&u.length>0){const L=[...u].sort((g,I)=>new Date(g.date).getTime()-new Date(I.date).getTime());return L[L.length-1].weight}return((b=a==null?void 0:a.bodyStats)==null?void 0:b.weight)??150},[o,s]=n.useState(r());n.useEffect(()=>{s(r())},[(i=a==null?void 0:a.bodyStats)==null?void 0:i.weightLogs,(h=a==null?void 0:a.bodyStats)==null?void 0:h.weight]);const l=u=>{const m=parseFloat((o+u).toFixed(1));m>=0&&s(m)},y=()=>{t(o)};return e.jsxs("div",{style:{marginTop:20,display:"flex",alignItems:"center",gap:12,fontFamily:"Arial, sans-serif"},children:[e.jsx("label",{htmlFor:"current-weight",style:{fontWeight:"bold"},children:"Current Weight:"}),e.jsx(_t,{id:"current-weight",type:"number",step:.1,value:o,onChange:u=>{const m=parseFloat(u.target.value);!isNaN(m)&&m>=0?s(m):u.target.value===""&&s(0)},style:{width:80,fontSize:16,padding:"4px 8px"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(G,{onClick:()=>l(.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Increase weight",children:"▲"}),e.jsx(G,{onClick:()=>l(-.5),style:{padding:"2px 6px",cursor:"pointer",userSelect:"none"},"aria-label":"Decrease weight",children:"▼"})]}),e.jsx(G,{onClick:y,style:{fontFamily:"'Press Start 2P', cursive",background:"#00ff00",color:"#000",border:"2px solid #00ff00",padding:"10px 20px",cursor:"pointer",transition:"0.2s",borderRadius:"2px"},children:"Submit"})]})},Ma={week:7,month:30,threeMonths:90,all:1/0},Fa=t=>t<=7?0:t<=30?4:t<=90?15:30,Oa=()=>{const[t,a]=n.useState(!1),{userData:r}=$(),[o,s]=n.useState("week"),[l,y]=n.useState([]),[i,h]=n.useState(!0);n.useEffect(()=>{(t||i)&&E.get(`/weightLogs/${r==null?void 0:r.uid}`).then(g=>{y(g.data.weightLogs)}).catch(g=>{console.log(g)}),h(!1)},[t]);const u=[...l].sort((g,I)=>new Date(g.date).getTime()-new Date(I.date).getTime()).map(g=>({date:typeof g.date=="string"?g.date.slice(0,10):g.date instanceof Date?g.date.toISOString().slice(0,10):"",weight:g.weight})),m=o==="all"?u:u.slice(-Ma[o]),b=Fa(m.length),L=async g=>{if(!r)return;const I={date:new Date().toISOString(),weight:g,userId:r.uid};try{const{data:B}=await E.post("weightLogs/addWeightLog",I);a(!0),setTimeout(()=>a(!1),1500)}catch(B){console.error(B)}};return e.jsxs("div",{className:J.container,children:[t&&e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999999999},children:e.jsx("svg",{viewBox:"0 0 100 100",width:"50%",height:"50%",style:{stroke:"#00ff00",strokeWidth:8,fill:"none"},children:e.jsx("path",{className:J.checkmarkPath,d:"M20 55 L40 75 L80 30"})})}),e.jsx("h2",{className:J.heading,children:"Log Your Weight"}),e.jsx("div",{className:J.rangeButtons,children:["week","month","threeMonths","all"].map(g=>e.jsx(G,{className:o===g?J.activeButton:J.button,onClick:()=>s(g),children:g==="week"?"1W":g==="month"?"1M":g==="threeMonths"?"3M":"ALL"},g))}),e.jsx(ut,{width:"100%",height:300,children:e.jsxs(xt,{data:m,margin:{top:5,right:20,left:0,bottom:5},children:[e.jsx(ht,{strokeDasharray:"3 3",stroke:"#ff9900"}),e.jsx(pt,{dataKey:"date",tickFormatter:g=>{const I=new Date(g);return isNaN(I.getTime())?"":ke(I,"MM/dd")},stroke:"#ff9900",interval:b,style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(mt,{stroke:"#ff9900",domain:["auto","auto"],style:{fontFamily:"Arial, sans-serif",fontSize:15}}),e.jsx(gt,{labelFormatter:g=>ke(new Date(g),"PPP"),contentStyle:{backgroundColor:"#000",borderColor:"#00FF00",color:"#00FF00"},itemStyle:{color:"#FF69B4"}}),e.jsx(ft,{type:"monotone",dataKey:"weight",stroke:"#00ff00",dot:{r:2}})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(Aa,{onWeightChange:L})})]})},Pa="_drawer__header_1hvqx_2",Ea="_drawer__headerContent_1hvqx_24",Ra="_drawer__headerIcon_1hvqx_32",qa="_drawer__title_1hvqx_46",Da="_drawer__content_1hvqx_56",za="_loadingState_1hvqx_77",$a="_emptyState_1hvqx_78",Wa="_loadingState__content_1hvqx_90",Ua="_emptyState__content_1hvqx_91",Ga="_loadingState__spinner_1hvqx_98",Ha="_loadingState__text_1hvqx_115",Va="_emptyState__text_1hvqx_116",Xa="_loadingState__subtext_1hvqx_125",Ya="_emptyState__subtext_1hvqx_126",Ka="_emptyState__icon_1hvqx_135",Qa="_workoutsList_1hvqx_143",Ja="_workoutCard_1hvqx_150",Za="_workoutCard__border_1hvqx_186",eo="_workoutCard__header_1hvqx_197",to="_workoutCard__info_1hvqx_206",so="_workoutCard__title_1hvqx_210",ao="_workoutCard__timestamp_1hvqx_217",oo="_workoutCard__timestampIcon_1hvqx_229",no="_workoutCard__xp_1hvqx_233",ro="_workoutCard__xpValue_1hvqx_244",lo="_workoutCard__xpLabel_1hvqx_251",io="_workoutCard__stats_1hvqx_256",co="_statItem_1hvqx_263",_o="_statItem__value_1hvqx_304",uo="_statItem__label_1hvqx_311",xo="_workoutCard__sectionTitle_1hvqx_317",ho="_workoutCard__manualStats_1hvqx_333",po="_workoutCard__manualGrid_1hvqx_337",mo="_manualStat_1hvqx_343",go="_manualStat__icon_1hvqx_354",fo="_manualStat__content_1hvqx_359",jo="_manualStat__value_1hvqx_365",yo="_manualStat__label_1hvqx_373",vo="_workoutCard__exercises_1hvqx_379",So="_workoutCard__exercisesList_1hvqx_383",bo="_exerciseItem_1hvqx_389",Co="_exerciseItem__name_1hvqx_407",wo="_exerciseItem__sets_1hvqx_414",ko="_exerciseItem__set_1hvqx_414",No="_exerciseItem__notes_1hvqx_430",Io="_workoutCard__statBoosts_1hvqx_439",To="_workoutCard__statBoostsGrid_1hvqx_449",Lo="_statBoost_1hvqx_455",Bo="_statBoost__icon_1hvqx_496",Ao="_statBoost__label_1hvqx_500",Mo="_statBoost__value_1hvqx_504",Fo="_workoutCard__notes_1hvqx_509",Oo="_workoutCard__notesText_1hvqx_514",Po="_loadingMore_1hvqx_524",Eo="_endOfList_1hvqx_525",Ro="_loadingMore__content_1hvqx_539",qo="_loadingMore__spinner_1hvqx_545",Do="_loadingMore__text_1hvqx_553",zo="_loadingMore__subtext_1hvqx_561",$o="_endOfList__content_1hvqx_575",Wo="_endOfList__text_1hvqx_581",Uo="_endOfList__subtext_1hvqx_589",d={drawer__header:Pa,drawer__headerContent:Ea,drawer__headerIcon:Ra,"pulse-glow":"_pulse-glow_1hvqx_1",drawer__title:qa,drawer__content:Da,loadingState:za,emptyState:$a,loadingState__content:Wa,emptyState__content:Ua,loadingState__spinner:Ga,"pixel-spin":"_pixel-spin_1hvqx_1",loadingState__text:Ha,emptyState__text:Va,loadingState__subtext:Xa,emptyState__subtext:Ya,emptyState__icon:Ka,workoutsList:Qa,workoutCard:Ja,"scan-line":"_scan-line_1hvqx_1",workoutCard__border:Za,workoutCard__header:eo,workoutCard__info:to,workoutCard__title:so,workoutCard__timestamp:ao,workoutCard__timestampIcon:oo,workoutCard__xp:no,workoutCard__xpValue:ro,workoutCard__xpLabel:lo,workoutCard__stats:io,statItem:co,"statItem--type":"_statItem--type_1hvqx_286","statItem--logtype":"_statItem--logtype_1hvqx_292","statItem--rpe":"_statItem--rpe_1hvqx_298",statItem__value:_o,statItem__label:uo,workoutCard__sectionTitle:xo,workoutCard__manualStats:ho,workoutCard__manualGrid:po,manualStat:mo,manualStat__icon:go,manualStat__content:fo,manualStat__value:jo,manualStat__label:yo,workoutCard__exercises:vo,workoutCard__exercisesList:So,exerciseItem:bo,exerciseItem__name:Co,exerciseItem__sets:wo,exerciseItem__set:ko,exerciseItem__notes:No,workoutCard__statBoosts:Io,workoutCard__statBoostsGrid:To,statBoost:Lo,"statBoost--red":"_statBoost--red_1hvqx_478","statBoost--yellow":"_statBoost--yellow_1hvqx_484","statBoost--pink":"_statBoost--pink_1hvqx_490",statBoost__icon:Bo,statBoost__label:Ao,statBoost__value:Mo,workoutCard__notes:Fo,workoutCard__notesText:Oo,loadingMore:Po,endOfList:Eo,loadingMore__content:Ro,loadingMore__spinner:qo,loadingMore__text:Do,loadingMore__subtext:zo,endOfList__content:$o,endOfList__text:Wo,endOfList__subtext:Uo},Go=()=>{const{userData:t}=$(),[a,r]=n.useState([]),[o,s]=n.useState(!1),[l,y]=n.useState(!1),[i,h]=n.useState(!0),[u,m]=n.useState(0),b=n.useRef(null),L=10,g=async(c=u,p=!1)=>{p?s(!0):y(!0);try{const k=(await E.get(`/workout/${t==null?void 0:t.uid}/workouts?limit=${L}&offset=${c}`)).data,A=k.workouts||[];r(p?A:S=>[...S,...A]);const j=k.total||0,C=c+A.length;h(C<j),m(c+A.length)}catch(w){console.error("Error fetching workouts:",w)}s(!1),y(!1)};n.useEffect(()=>{g(0,!0)},[]),n.useEffect(()=>{const c=()=>{const w=document.querySelector(".saltDrawer");if(!w)return;const{scrollTop:k,scrollHeight:A,clientHeight:j}=w;A-k<=j+100&&i&&!l&&g(u,!1)},p=document.querySelector(".saltDrawer");return p&&p.addEventListener("scroll",c),()=>{p&&p.removeEventListener("scroll",c)}},[u,i,l]);const I=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=c=>{const p=Math.floor(c/60),w=c%60;return p>0?`${p}h ${w}m`:`${w}m`},P=({icon:c,label:p,value:w,color:k})=>e.jsxs("div",{className:`${d.statBoost} ${d[`statBoost--${k}`]}`,children:[e.jsx(c,{size:17,className:d.statBoost__icon}),e.jsx("span",{className:d.statBoost__label,children:p}),e.jsxs("span",{className:d.statBoost__value,children:["+",w]})]}),f=({workout:c})=>{var A;const p=c.logType==="manual",w=c.logType==="routine",k=c.workoutXp.pet;return e.jsxs("div",{className:d.workoutCard,children:[e.jsx("div",{className:d.workoutCard__border}),e.jsxs("div",{className:d.workoutCard__header,children:[e.jsxs("div",{className:d.workoutCard__info,children:[e.jsx("h3",{className:d.workoutCard__title,children:w?`${c.routineDay} ROUTINE`:`${(A=c==null?void 0:c.workoutType)==null?void 0:A.toUpperCase()} SESSION`}),e.jsxs("p",{className:d.workoutCard__timestamp,children:[e.jsx(jt,{size:12,className:d.workoutCard__timestampIcon}),I(c.timestamp)]})]}),e.jsxs("div",{className:d.workoutCard__xp,children:[e.jsx("div",{className:d.workoutCard__xpValue,children:k}),e.jsx("div",{className:d.workoutCard__xpLabel,children:"XP"})]})]}),e.jsx("div",{className:d.workoutCard__stats,children:c.rpe&&e.jsxs("div",{className:`${d.statItem} ${d["statItem--rpe"]}`,children:[e.jsxs("div",{className:d.statItem__value,children:[c.rpe,"/4"]}),e.jsx("div",{className:d.statItem__label,children:"RPE"})]})}),p&&e.jsx("div",{className:d.workoutCard__manualStats,children:e.jsxs("div",{className:d.workoutCard__manualGrid,children:[c.duration&&e.jsxs("div",{className:d.manualStat,children:[e.jsx(yt,{size:25,className:d.manualStat__icon}),e.jsxs("div",{className:d.manualStat__content,children:[e.jsx("div",{className:d.manualStat__value,children:B(c.duration)}),e.jsx("div",{className:d.manualStat__label,children:"DURATION"})]})]}),c.distance!=0&&e.jsxs("div",{className:d.manualStat,children:[e.jsx(vt,{size:16,className:d.manualStat__icon}),e.jsxs("div",{className:d.manualStat__content,children:[e.jsxs("div",{className:d.manualStat__value,children:[c.distance," KM"]}),e.jsx("div",{className:d.manualStat__label,children:"DISTANCE"})]})]})]})}),w&&c.performedExercises&&c.performedExercises.length>0&&e.jsxs("div",{className:d.workoutCard__exercises,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(de,{size:14}),"PERFORMED EXERCISES"]}),e.jsx("div",{className:d.workoutCard__exercisesList,children:c.performedExercises.map((j,C)=>e.jsxs("div",{className:d.exerciseItem,children:[e.jsx("div",{className:d.exerciseItem__name,children:j.name.toUpperCase()}),e.jsx("div",{className:d.exerciseItem__sets,children:j.sets.map((S,N)=>e.jsxs("span",{className:d.exerciseItem__set,children:[S.weight,"KG × ",S.reps]},N))}),j.notes&&e.jsxs("div",{className:d.exerciseItem__notes,children:['"',j.notes,'"']})]},C))})]}),e.jsxs("div",{className:d.workoutCard__statBoosts,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(St,{size:17}),"Skills GAINED"]}),e.jsxs("div",{className:d.workoutCard__statBoostsGrid,children:[c.workoutXp.strength>0&&e.jsx(P,{icon:bt,label:"STR",value:c.workoutXp.strength,color:"red"}),c.workoutXp.agility>0&&e.jsx(P,{icon:Me,label:"AGI",value:c.workoutXp.agility,color:"yellow"})]})]}),c.notes&&e.jsxs("div",{className:d.workoutCard__notes,children:[e.jsxs("div",{className:d.workoutCard__sectionTitle,children:[e.jsx(Fe,{size:14}),"WORKOUT NOTES"]}),e.jsxs("div",{className:d.workoutCard__notesText,children:['"',c.notes,'"']})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:d.drawer__header,children:e.jsxs("div",{className:d.drawer__headerContent,children:[e.jsx(de,{className:d.drawer__headerIcon,size:32}),e.jsx("h2",{className:d.drawer__title,children:"WORKOUT LOG"})]})}),e.jsx("div",{className:d.drawer__content,ref:b,children:o?e.jsx("div",{className:d.loadingState,children:e.jsxs("div",{className:d.loadingState__content,children:[e.jsx("div",{className:d.loadingState__spinner}),e.jsx("div",{className:d.loadingState__text,children:"LOADING WORKOUTS..."}),e.jsx("div",{className:d.loadingState__subtext,children:"💪 FETCHING WORKOUT DATA"})]})}):a.length===0?e.jsx("div",{className:d.emptyState,children:e.jsxs("div",{className:d.emptyState__content,children:[e.jsx(de,{className:d.emptyState__icon,size:48}),e.jsx("div",{className:d.emptyState__text,children:"NO WORKOUTS LOGGED"}),e.jsx("div",{className:d.emptyState__subtext,children:"START YOUR FITNESS JOURNEY!"})]})}):e.jsxs("div",{className:d.workoutsList,children:[a.map((c,p)=>e.jsx(f,{workout:c},`${c._id}-${p}`)),l&&e.jsx("div",{className:d.loadingMore,children:e.jsxs("div",{className:d.loadingMore__content,children:[e.jsx("div",{className:d.loadingMore__spinner}),e.jsx("div",{className:d.loadingMore__text,children:"LOADING MORE..."}),e.jsx("div",{className:d.loadingMore__subtext,children:"⚡ FETCHING NEXT BATCH"})]})}),!i&&a.length>0&&e.jsx("div",{className:d.endOfList,children:e.jsxs("div",{className:d.endOfList__content,children:[e.jsx("div",{className:d.endOfList__text,children:"🎯 END OF WORKOUT LOG"}),e.jsxs("div",{className:d.endOfList__subtext,children:["TOTAL WORKOUTS: ",a.length]})]})})]})})]})};n.forwardRef(function({onClick:a,to:r,...o},s){const l=Ct(r),y=wt(r);return e.jsx(kt,{...o,href:l,onClick:i=>{a==null||a(i),i.defaultPrevented||y(i)},ref:s})});const Ho=["Pet","Skills","Quests","Routines"],Vo=({selectedIndex:t,setSelectedIndex:a})=>{const[r,o]=n.useState("none"),{pathname:s}=Nt();return e.jsxs("div",{className:"app-header",children:[e.jsx("div",{children:e.jsxs(Ne,{children:[e.jsx(Ie,{children:e.jsx(G,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(It,{"aria-hidden":!0})})}),e.jsxs(Te,{children:[e.jsx(K,{onClick:()=>o("logWeight"),children:"Log Weight"}),e.jsx(K,{onClick:()=>o("logFood"),children:"Log Food"}),e.jsx(K,{onClick:()=>o("logWorkout"),children:"Log Workout"})]})]})}),e.jsx(Oe,{selectedIndex:t,onChange:a,children:e.jsx(Pe,{className:"tab-nav",children:Ho.map((l,y)=>e.jsx(Ee,{className:({selected:i})=>`tab-button ${i?"tab-selected":""}`,children:l},l))})}),e.jsx("div",{children:e.jsx(Tt,{placement:"top",content:"User Settings",children:e.jsxs(Ne,{children:[e.jsx(Ie,{children:e.jsx(G,{className:"saltButton","aria-label":"Open Menu",children:e.jsx(Lt,{"aria-hidden":!0})})}),e.jsxs(Te,{children:[e.jsx(K,{onClick:()=>o("mealHist"),children:"View Meals"}),e.jsx(K,{onClick:()=>o("workoutHist"),children:"View Workouts"}),e.jsx(K,{onClick:ss,children:"Logout"})]})]})})}),e.jsxs(Bt,{open:r!=="none",onOpenChange:()=>o("none"),position:"bottom",children:[e.jsx(At,{onClick:()=>o("none")}),r==="logFood"&&e.jsx(os,{}),r==="logWorkout"&&e.jsx(Ss,{setDrawerView:o}),r==="mealHist"&&e.jsx(wa,{}),r==="workoutHist"&&e.jsx(Go,{}),r==="logWeight"&&e.jsx(Oa,{})]})]})},Xo="_myBackground_1pm88_1",Yo="_loginScreen_1pm88_13",Ko="_overlay_1pm88_29",Qo="_loginContainer_1pm88_39",Jo="_googleButton_1pm88_49",me={myBackground:Xo,loginScreen:Yo,overlay:Ko,loginContainer:Qo,googleButton:Jo};function Zo(){const{setUserData:t}=$(),[a,r]=n.useState(!1),o=async()=>{r(!0),console.log("Attempting to log in with Google...");try{const l=await(await Mt(ie,ts)).user.getIdToken(),{data:y}=await E.post("/auth/google",{token:l}),h=(await E.get(`/users/${y.uid}`)).data;t(h),console.log("User saved or retrieved from DB:",y)}catch(s){console.error(s)}r(!0)};return e.jsx("div",{className:me.loginScreen,children:e.jsx("div",{className:me.loginContainer,children:a?e.jsx(Ae,{size:"large","aria-label":"loading",role:"status"}):e.jsx(Z,{className:me.googleButton,onClick:o,children:"Embark with Google"})})})}const en=()=>{const{userData:t,setUserData:a}=$();if(!t)return e.jsx(x,{children:"Loading..."});const[r,o]=n.useState(0),[s,l]=n.useState(t),[y,i]=n.useState(1),[h,u]=n.useState(1.2),[m,b]=n.useState(0),[L,g]=n.useState(Math.floor(s.bodyStats.height/12)),[I,B]=n.useState(s.bodyStats.height%12);if(!t||!s)return e.jsx(x,{children:"Loading..."});n.useEffect(()=>{const j=L*12+I;console.log("total inches : ",j),l(C=>({...C,bodyStats:{...C.bodyStats,height:j}}))},[L,I]);const P=j=>{const{weight:C,height:S,age:N,sex:F}=j;return F==="male"?10*(C/2.205)+6.25*(S*2.54)-5*N+5:10*(C/2.205)+6.25*(S*2.54)-5*N-161},f=j=>{const C=h+m;return j*C},c=async j=>{j.preventDefault();const C=s.bodyStats.weight,S={userId:t.uid,date:new Date,weight:C},N=P(s.bodyStats),F=f(N),H=s.goal.goalType==="weight_loss"?F-y*3500/7:s.goal.goalType==="muscle_gain"?F+300:F,V=Math.round(H/100),U={...s,bodyStats:{...s.bodyStats,bmr:N,tdee:F,weight:C},goal:{...s.goal,dailyCalorieGoal:H,dailyCurrencyTotal:V,dailyCurrencyUsed:{}}};console.log("Submitted User Data:",U);try{const{data:X}=await E.post("/users/update",{...U});a(X)}catch(X){console.error("Error updating user data:",X)}try{await E.post("/weightLogs/addWeightLog",S)}catch(X){console.error(X)}},p=(j,C,S)=>{const{name:N,value:F}=j.target;l({...s,[C]:{...s[C],[S||N]:F}})},w=(j,C,S)=>{l({...s,[j]:{...s[j],[C]:S}})},k=()=>{if(r===0){const{weight:j,height:C,age:S,sex:N}=s.bodyStats;return j>0&&C>0&&S>0&&["male","female"].includes(N)}if(r===1)return["weight_loss","muscle_gain","maintenance"].includes(s.goal.goalType);if(r===2){const{name:j,currentPet:C}=s.pet;return j.trim()!==""&&["puppy","kitten","bird"].includes(C)}return!0},A=["Body Stats","Fitness Goals","Virtual Pet"];return e.jsx(T,{direction:"column",align:"stretch",style:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",padding:"14px"},children:e.jsx(O,{grow:1,children:e.jsxs(D,{align:"stretch",gap:3,style:{display:"flex",minHeight:"100%",width:"100%"},children:[e.jsx(O,{children:e.jsx(x,{styleAs:"h1",children:"Welcome to Your Journey"})}),e.jsx(O,{children:e.jsx(Ft,{children:A.map((j,C)=>e.jsx(Ot,{label:j,stage:r===C?"active":C<r?"completed":"pending"},C))})}),e.jsxs("form",{onSubmit:c,children:[r===0&&e.jsxs(D,{align:"stretch",gap:2,children:[e.jsx(x,{styleAs:"h2",children:"Body Stats"}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Weight (lbs)"}),e.jsx(ne,{value:s.bodyStats.weight,onChange:j=>p(j,"bodyStats","weight")})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Height"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx(re,{value:L.toString()+" ft",onSelectionChange:(j,C)=>g(Number(C)),children:[2,3,4,5,6,7,8,9].map(j=>e.jsxs(le,{value:j.toString(),children:[j," ft"]},j))}),e.jsx(re,{value:I.toString()+" in",onSelectionChange:(j,C)=>B(Number(C)),children:Array.from({length:12},(j,C)=>e.jsxs(le,{value:C.toString(),children:[C," in"]},C))})]})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Sex"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("bodyStats","sex","male"),"aria-label":"Male",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.bodyStats.sex==="male"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(T,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"🙎🏻‍♂️",size:32}),e.jsx(x,{children:"Male"})]})})}),e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("bodyStats","sex","female"),"aria-label":"Female",style:{borderRadius:"12px",backgroundColor:"var(--salt-palette-neutral-selection)",border:s.bodyStats.sex==="female"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsxs(T,{direction:"column",align:"center",gap:1,children:[e.jsx(M,{symbol:"🙎🏻‍♀️",size:32}),e.jsx(x,{children:"Female"})]})})})]})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Age (years)"}),e.jsx(ne,{value:s.bodyStats.age,onChange:j=>p(j,"bodyStats","age")})]})]}),r===1&&e.jsxs(D,{gap:2,children:[e.jsx(x,{styleAs:"h3",children:"Fitness Goals"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("goal","goalType","weight_loss"),"aria-label":"Weight Loss",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="weight_loss"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"🔥",size:24}),e.jsx(x,{children:"Weight Loss"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("goal","goalType","muscle_gain"),"aria-label":"Muscle Gain",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="muscle_gain"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:s.bodyStats.sex==="male"?"🏋️‍♂️":"🏋🏽‍♀️",size:24}),e.jsx(x,{children:"Muscle Gain"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("goal","goalType","maintenance"),"aria-label":"Maintenance",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.goal.goalType==="maintenance"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"🛠️",size:24}),e.jsx(x,{children:"Maintenance"})]})})})})]}),s.goal.goalType==="weight_loss"&&e.jsxs(Y,{children:[e.jsx(x,{styleAs:"h3",children:"Weekly Weight Loss (lbs)"}),e.jsx(Pt,{max:2,min:.5,step:.25,value:y,onChange:(j,C)=>i(C),minLabel:"0.5",maxLabel:"2","aria-label":"Weekly weight loss slider"})]}),e.jsxs(D,{gap:1,children:[e.jsx(x,{styleAs:"h3",children:"Job Activity Level"}),e.jsx(x,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Select the option that best describes your daily work activity"}),e.jsxs(T,{direction:"column",gap:1,children:[e.jsx(q,{onClick:()=>u(1.2),"aria-label":"Sedentary - Desk Job",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"💻",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Sedentary - Desk Job"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Mostly sitting, minimal physical activity"})]})]})}),e.jsx(q,{onClick:()=>u(1.375),"aria-label":"Lightly Active - Teacher",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.375?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"👩‍🏫",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Lightly Active - Teacher"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Some standing and walking throughout the day"})]})]})}),e.jsx(q,{onClick:()=>u(1.55),"aria-label":"Moderately Active - Nurse/Waitress",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.55?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"👩‍⚕️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Moderately Active - Nurse/Waitress"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Frequent walking, standing, and physical tasks"})]})]})}),e.jsx(q,{onClick:()=>u(1.75),"aria-label":"Very Active - Construction Worker",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:h===1.75?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"👷‍♂️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Very Active - Construction Worker"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Heavy physical labor and constant movement"})]})]})})]})]}),e.jsxs(D,{gap:1,children:[e.jsx(x,{styleAs:"h3",children:"Workout Activity Level"}),e.jsx(x,{styleAs:"h4",style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"How often do you exercise per week?"}),e.jsxs(T,{direction:"column",gap:1,children:[e.jsx(q,{onClick:()=>b(0),"aria-label":"Sedentary - No Exercise",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===0?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"🛋️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Sedentary"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Little to no exercise"})]})]})}),e.jsx(q,{onClick:()=>b(.05),"aria-label":"Lightly Active - 1-3 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.05?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"🚶‍♀️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Lightly Active"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Light exercise 1-3 days per week"})]})]})}),e.jsx(q,{onClick:()=>b(.1),"aria-label":"Moderately Active - 3-5 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.1?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"🏃‍♂️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Moderately Active"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Moderate exercise 3-5 days per week"})]})]})}),e.jsx(q,{onClick:()=>b(.15),"aria-label":"Very Active - 6-7 days per week",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.15?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"🏋️‍♀️",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Very Active"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Hard exercise 6-7 days per week"})]})]})}),e.jsx(q,{onClick:()=>b(.2),"aria-label":"Extremely Active - 2x per day or intense training",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"8px",border:m===.2?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)",padding:"12px"},children:e.jsxs(T,{direction:"row",align:"center",gap:2,children:[e.jsx(M,{symbol:"💪",size:30}),e.jsxs(D,{gap:0,children:[e.jsx(x,{styleAs:"h2",children:"Extremely Active"}),e.jsx(x,{style:{color:"var(--salt-palette-neutral-secondary-foreground)"},children:"Very hard exercise 2x/day or intense training"})]})]})})]})]})]}),r===2&&e.jsxs(D,{gap:2,children:[e.jsx(x,{styleAs:"h2",children:"Your Virtual Pet"}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Pet Name"}),e.jsx(ne,{value:s.pet.name,onChange:j=>p(j,"pet","name")})]}),e.jsxs(Y,{children:[e.jsx(Q,{children:"Pet Type"}),e.jsxs(T,{direction:"row",gap:2,children:[e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("pet","currentPet","puppy"),"aria-label":"Dog",style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="puppy"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"🐶",size:24}),e.jsx(x,{children:"Dog"})]})})})}),e.jsx(O,{grow:1,children:e.jsx(q,{onClick:()=>w("pet","currentPet","kitten"),style:{backgroundColor:"var(--salt-palette-neutral-selection)",borderRadius:"12px",border:s.pet.currentPet==="kitten"?"2px solid var(--salt-palette-measured-foreground-active)":"2px solid var(--salt-palette-neutral-primary-border)"},"aria-label":"Cat",children:e.jsx(T,{direction:"column",align:"center",gap:1,children:e.jsxs(O,{style:{minHeight:"72px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",gap:"4px"},children:[e.jsx(M,{symbol:"🐱",size:24}),e.jsx(x,{children:"Cat"})]})})})})]})]})]}),e.jsx(O,{style:{paddingTop:"20px"},children:e.jsxs(T,{direction:"row",gap:2,justify:"center",className:"mt-6",children:[r>0&&e.jsx(Z,{sentiment:"neutral",appearance:"solid",onClick:()=>o(r-1),children:"Previous"}),r<A.length-1&&e.jsx(Z,{sentiment:"accented",appearance:"solid",disabled:!k(),onClick:()=>o(r+1),children:"Next"}),r===A.length-1&&e.jsx(Z,{type:"submit",sentiment:"accented",appearance:"solid",disabled:!k(),onClick:c,children:"Start Your Adventure!"})]})})]})]})})})},tn="_homePage_santw_1",sn="_homePageTitle_santw_6",an="_statusSection_santw_24",on="_levelText_santw_29",nn="_xpBarWrapper_santw_35",rn="_xpBarFill_santw_44",ln="_pixelBorder_santw_50",Le={homePage:tn,homePageTitle:sn,"card-links":"_card-links_santw_10","card-image":"_card-image_santw_19",statusSection:an,levelText:on,xpBarWrapper:nn,xpBarFill:rn,pixelBorder:ln},cn="_xpBarWrapper_sqxxw_1",dn="_xpBarFill_sqxxw_12",_n="_pixelGlow_sqxxw_1",un="_xpText_sqxxw_33",xn="_levelText_sqxxw_59",oe={xpBarWrapper:cn,xpBarFill:dn,pixelGlow:_n,xpText:un,levelText:xn};function hn(t){return Math.floor(1e3*Math.pow(1.5,t-1))}function ge(t,a){const r=hn(a);return{progress:Math.min(Math.max(t/r*100,0),100),xpNeeded:r}}const pn=({currentXp:t,level:a})=>{const[r,o]=n.useState(()=>ge(t,a).progress),s=n.useRef(t),{xpNeeded:l}=ge(t,a);return n.useEffect(()=>{const y=ge(t,a).progress,i=s.current;t>i,o(y),s.current=t},[t,a]),e.jsxs(e.Fragment,{children:[e.jsxs(x,{className:oe.levelText,styleAs:"display4",children:["Level ",a]}),e.jsxs("div",{className:oe.xpBarWrapper,children:[e.jsx("div",{className:oe.xpBarFill,style:{width:`${r}%`}}),e.jsxs(x,{className:oe.xpText,styleAs:"label",children:[" ",t," / ",l]})]})]})},mn=({consumed:t=!1,size:a=48,className:r})=>{const[o,s]=n.useState(!1);return n.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/bone.png",alt:"Bone",style:{width:"100%",height:"auto",maxWidth:"80px",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(360deg)":"scale(1) rotate(0deg)",display:"block",opacity:o?0:1}})},gn=({consumed:t=!1,size:a=48,className:r})=>{const[o,s]=n.useState(!1);return n.useEffect(()=>{if(t){const l=setTimeout(()=>s(!0),20);return()=>clearTimeout(l)}else s(!1)},[t]),e.jsx("img",{src:"/fish.png",alt:"Fish",style:{width:"100%",height:"auto",maxWidth:"100x",transformOrigin:"center",transition:"transform 1s ease, opacity 1.5s ease",transform:o?"scale(0) rotate(450deg)":"scale(1) rotate(90deg)",display:"block",opacity:o?0:1}})},fn=({count:t,consumedCurrency:a,userArchetype:r})=>{const o=t-a.filter(Boolean).length;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",marginTop:6,fontSize:14,color:"#ccc"},children:[o," / ",t," ",r==="puppy"?"bones left":"fish left"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8,width:"100%",overflow:"hidden",minHeight:0},children:[...Array(t)].map((s,l)=>e.jsx("div",{style:{width:32,height:32,display:"flex",justifyContent:"center"},children:r==="puppy"?e.jsx(mn,{consumed:a[l]??!1}):e.jsx(gn,{consumed:a[l]??!1})},l))})]})},Be=()=>{var m;const{userData:t}=$(),[a,r]=n.useState(""),[o,s]=n.useState(0),[l,y]=n.useState([]);let i=!1;const h={puppy:"/puppy/scene.gltf",kitten:"/kitten/scene.gltf"};n.useEffect(()=>{var b;r(h[((b=t==null?void 0:t.pet)==null?void 0:b.currentPet)??"puppy"]),i=a==null?void 0:a.includes("kitten")},[t]),n.useEffect(()=>{var P,f,c;const b=new Date().toISOString().slice(0,10),L=((P=t==null?void 0:t.goal)==null?void 0:P.dailyCurrencyTotal)??0,g=((c=(f=t==null?void 0:t.goal)==null?void 0:f.dailyCurrencyUsed)==null?void 0:c[b])??0,I=L-g;s(I);const B=Array(L).fill(!1).map((p,w)=>w>=I);y(B)},[t]),console.log("Model Path:",a);function u({url:b,scale:L=2,position:g=[0,-2,0],rotation:I=[0,0,0]}){const B=Dt(b);if(!B||!B.scene)return null;const P=n.useMemo(()=>B.scene.clone(),[B.scene]);return e.jsx("primitive",{object:P,scale:L,position:g,rotation:I})}return console.log("userData",t),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsxs(T,{gap:.5,style:{flex:1,display:"flex",height:"100%",minHeight:"100%"},justify:"center",direction:"column",children:[e.jsx(O,{align:"center",style:{flexShrink:0},children:e.jsx(x,{styleAs:"h1",className:Le.homePageTitle,children:t==null?void 0:t.pet.name})}),e.jsx(O,{style:{maxWidth:"100%",padding:16},shrink:1,children:e.jsx(fn,{userArchetype:(t==null?void 0:t.pet.currentPet)??"puppy",count:((m=t==null?void 0:t.goal)==null?void 0:m.dailyCurrencyTotal)??0,consumedCurrency:l})}),e.jsx(O,{grow:1,style:{flex:1,minHeight:0,height:"100%",overflow:"hidden",padding:"16px 16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",border:"4px solid #00ffff",imageRendering:"pixelated",boxShadow:"0 0 2px 2px #00ffff, 0 0 4px 2px #00ffff88, 0 0 8px 2px #00ffff88, 0 0 16px 2px #00ffff88"},children:e.jsxs(Et,{resize:{polyfill:ResizeObserver},camera:{position:[5,4,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[0,5,5]}),e.jsx(n.Suspense,{children:e.jsx(Rt,{fit:!0,clip:!0,observe:!0,margin:1.2,children:e.jsx(u,{url:a,scale:.8,position:i?[0,-3,0]:[0,-2,0],rotation:i?[0,Math.PI,0]:[0,0,0]})})}),e.jsx(qt,{})]})})}),e.jsx(O,{className:Le.statusSection,style:{flexShrink:0},children:e.jsx(pn,{currentXp:(t==null?void 0:t.pet.xp)??0,level:(t==null?void 0:t.pet.level)??0})})]})})},jn=({content:t})=>{const[a,r]=n.useState(null),o=y=>{r(y.currentTarget)},s=()=>{r(null)},l=!!a;return e.jsxs(e.Fragment,{children:[e.jsx("span",{onClick:o,style:{cursor:"pointer",marginLeft:4},children:e.jsx(M,{symbol:"ℹ️",label:"info",size:14})}),e.jsx(zt,{open:l,anchorEl:a,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{bgcolor:"#1a1a1a",color:"#e0e0e0",fontFamily:"'Press Start 2P', cursive",fontSize:"0.65rem",px:2,py:1,maxWidth:200,borderRadius:1,border:"1px solid #333",boxShadow:"0 0 4px rgba(0, 255, 195, 0.3)"}}},children:t})]})},yn=[{label:"Strength",key:"strength",emoji:"💪",description:"Weight workouts"},{label:"Defense",key:"defense",emoji:"🛡️",description:"Fiber intake"},{label:"Agility",key:"agility",emoji:"🤸",description:"Cardio workouts"},{label:"Intelligence",key:"intelligence",emoji:"🧠",description:"Fruits and vegetables"},{label:"Armor",key:"armor",emoji:"🪖",description:"Protein intake"},{label:"Speed",key:"speed",emoji:"💨",description:"Hydration"},{label:"Happiness",key:"happiness",emoji:"🤗",description:"Calorie goal adherence"}],vn=()=>{const{userData:t}=$();if(!t)return null;const{pet:a}=t;return e.jsxs(T,{direction:"column",gap:3,style:{padding:"1rem"},children:[e.jsxs(T,{direction:"row",gap:1,align:"center",style:{alignItems:"center"},children:[e.jsx(M,{style:{alignItems:"center"},symbol:"🎮",size:30}),e.jsx(x,{styleAs:"h2",style:{fontFamily:"'Press Start 2P', Open Sans",margin:0,padding:0},children:"Pet Skills"})]}),yn.map(r=>e.jsx(ve,{style:{width:"100%",padding:"1rem",background:"#111",border:"1px solid #444",borderRadius:"12px",boxShadow:"0 0 8px #00ffc3"},children:e.jsxs(T,{justify:"space-between",align:"center",children:[e.jsxs(T,{align:"center",gap:1,children:[e.jsx(M,{symbol:r.emoji,size:20}),e.jsx(x,{style:{fontFamily:"'Press Start 2P', Open Sans",fontSize:"1.2rem",color:"#fff"},children:r.label}),e.jsx(jn,{content:r.description})]}),e.jsxs(x,{style:{color:"#fff",fontSize:"1.2rem"},children:["Level ",a[r.key]]})]})},r.key))]})},fe=[{name:"First Workout",description:"Complete your first workout",status:"completed",progress:100},{name:"Protein Power",description:"Log a high-protein meal",status:"inProgress",progress:60},{name:"Hydration Hero",description:"Drink 8 glasses of water",status:"notStarted",progress:0},{name:"Consistency Counts",description:"Log workouts 3 days in a row",status:"inProgress",progress:30},{name:"Fiber Fiend",description:"Log a high-fiber day",status:"notStarted",progress:0},{name:"Beast Mode",description:"Reach 100 strength XP",status:"completed",progress:100}],je=({name:t,description:a,progress:r})=>e.jsxs(ve,{style:{width:"100%"},children:[e.jsx(x,{styleAs:"h4",children:t}),e.jsx(x,{style:{fontSize:"0.9rem",color:"#ccc",marginBottom:"0.5rem"},children:a}),e.jsx(Wt,{value:r}),e.jsxs(x,{style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:[r,"% complete"]})]}),Sn=()=>{const t=fe.filter(o=>o.status==="inProgress"),a=fe.filter(o=>o.status==="notStarted"),r=fe.filter(o=>o.status==="completed");return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(x,{styleAs:"h2",style:{marginBottom:"1rem"},children:"Your Quests"}),e.jsxs($t,{children:[e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"In Progress"}),e.jsx(xe,{children:e.jsx(T,{direction:"column",gap:2,children:t.map(o=>e.jsx(je,{...o},o.name))})})]}),e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"Not Started"}),e.jsx(xe,{children:e.jsx(T,{direction:"column",gap:2,children:a.map(o=>e.jsx(je,{...o},o.name))})})]}),e.jsxs(_e,{value:"",children:[e.jsx(ue,{children:"Completed"}),e.jsx(xe,{children:e.jsx(T,{direction:"column",gap:2,children:r.map(o=>e.jsx(je,{...o},o.name))})})]})]})]})},bn="_container_4o28a_1",Cn="_tabList_4o28a_11",wn="_tabButton_4o28a_18",kn="_active_4o28a_34",Nn="_borderGlow_4o28a_1",In="_form_4o28a_50",Tn="_heroSection_4o28a_100",Ln="_heroList_4o28a_107",Bn="_hero_4o28a_100",An="_selected_4o28a_138",Mn="_disclosureButton_4o28a_151",Fn="_chevron_4o28a_169",On="_rotate_4o28a_174",Pn="_equipmentSection_4o28a_178",En="_equipmentList_4o28a_186",Rn="_equipment_4o28a_178",R={container:bn,tabList:Cn,tabButton:wn,active:kn,borderGlow:Nn,form:In,heroSection:Tn,heroList:Ln,hero:Bn,selected:An,disclosureButton:Mn,chevron:Fn,rotate:On,equipmentSection:Pn,equipmentList:En,equipment:Rn},qn="_puppySpinner_qnb89_1",Dn="_loadingText_qnb89_9",zn="_puppy_qnb89_1",$n="_run_qnb89_1",Wn="_treadmillBelt_qnb89_19",ye={puppySpinner:qn,loadingText:Dn,puppy:zn,run:$n,treadmillBelt:Wn,"belt-move":"_belt-move_qnb89_1"};function ce({scale:t=1}){const a=150*t;return e.jsxs("div",{className:ye.puppySpinner,style:{width:`${a}px`,height:`${a}px`},children:[e.jsx("div",{className:ye.loadingText,children:"LOADING..."}),e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsxs("g",{children:[e.jsx("rect",{x:"10",y:"60",width:"80",height:"10",fill:"#4b5563",rx:"2"}),e.jsx("rect",{className:"treadmill-belt",x:"15",y:"65",width:"70",height:"5",fill:"#1f2937"}),e.jsx("rect",{x:"10",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"85",y:"55",width:"5",height:"15",fill:"#6b7280"}),e.jsx("rect",{x:"80",y:"40",width:"15",height:"15",fill:"#374151",rx:"2"}),e.jsx("rect",{x:"82",y:"42",width:"5",height:"5",fill:"#dc2626",rx:"1"}),e.jsx("rect",{x:"88",y:"42",width:"5",height:"5",fill:"#22c55e",rx:"1"})]}),e.jsxs("g",{className:ye.puppy,fill:"#8B4513",children:[e.jsx("ellipse",{cx:"45",cy:"58",rx:"12",ry:"8"}),e.jsx("ellipse",{cx:"55",cy:"48",rx:"10",ry:"8"}),e.jsx("circle",{cx:"53",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"57",cy:"46",r:"1",fill:"#000"}),e.jsx("circle",{cx:"55",cy:"50",r:"1.5",fill:"#000"}),e.jsx("path",{d:"M50 42 Q48 38 46 42 Q48 40 50 42 Z"}),e.jsx("path",{d:"M60 42 Q62 38 64 42 Q62 40 60 42 Z"}),e.jsx("rect",{x:"40",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"47",y:"62",width:"3",height:"6",rx:"1"}),e.jsx("rect",{x:"38",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(15 40 65)"}),e.jsx("rect",{x:"45",y:"62",width:"3",height:"6",rx:"1",transform:"rotate(-15 47 65)"}),e.jsx("path",{className:"tail",d:"M33 58 Q30 55 33 52"})]})]})]})}const Un=[{name:"Fenrir",color:"#3B6FFF"},{name:"Durgas Tiger",color:"#FF8C00"},{name:"Phoenix",color:"#D62828"},{name:"Leviathan",color:"#00B7EB"},{name:"Elder Dragon",color:"#00FF7F"},{name:"Primordial Tyrant",color:"#C71585"}],Gn=["None","Full Gym","Dumbbells","Barbell","Smith Machine","Resistance Bands"];function Hn(){const{userData:t}=$(),[a,r]=n.useState("Max Muscle"),[o,s]=n.useState(""),[l,y]=n.useState("beginner"),[i,h]=n.useState(3),[u,m]=n.useState([]),[b,L]=n.useState(""),[g,I]=n.useState(""),[B,P]=n.useState(""),[f,c]=n.useState(""),[p,w]=n.useState(15),[k,A]=n.useState(!1),{addToast:j}=Ge(),C=S=>{S.preventDefault(),A(!0);const N={goal:a,sport:a==="Sport Specific"?o:null,experience:l,days:i,equipment:u.join(", "),include:b,exclude:g,considerations:B,sessionDurationMinutes:p,petCoach:f,userId:t==null?void 0:t.uid};E.post("/workout/routine/createRoutine",N,{timeout:3e4}).then(F=>{console.log("Routine Created:",F.data),j({content:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,backgroundColor:"#1c1c1c",border:"3px solid #ffa640",color:"#FFFDD0",fontFamily:"'Press Start 2P', monospace, sans-serif",fontSize:17,textTransform:"uppercase",boxShadow:"0 0 8px #ffa640",borderRadius:8},children:[e.jsx(M,{size:32,symbol:"❚█══█❚"}),e.jsx("div",{className:R.routineCreatedText,children:"Routine Created!"})]})})}).catch(F=>{console.error(F)}).finally(()=>A(!1))};return k?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsxs("form",{className:R.form,onSubmit:C,children:[e.jsxs("label",{children:["Goal",e.jsxs("select",{value:a,onChange:S=>r(S.target.value),children:[e.jsx("option",{value:"Max Muscle",children:"Max Muscle"}),e.jsx("option",{value:"Max Strength",children:"Max Strength"}),e.jsx("option",{value:"Max Cardio",children:"Max Cardio"}),e.jsx("option",{value:"Sport Specific",children:"Sport Specific"})]})]}),a==="Sport Specific"&&e.jsxs("label",{children:["What sport?",e.jsx("input",{type:"text",value:o,onChange:S=>s(S.target.value),placeholder:"e.g. Basketball"})]}),e.jsxs("label",{children:["Experience Level",e.jsxs("select",{value:l,onChange:S=>y(S.target.value),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("label",{children:["Days per Week",e.jsx("select",{value:i,onChange:S=>h(Number(S.target.value)),children:[...Array(7)].map((S,N)=>e.jsxs("option",{value:N+1,children:[N+1," ",N===0?"day":"days"]},N+1))})]}),e.jsxs("label",{children:["Max Session Duration",e.jsx("select",{value:p,onChange:S=>w(Number(S.target.value)),children:[...Array(12)].map((S,N)=>{const F=(N+1)*15,H=Math.floor(F/60),V=F%60,U=H>0?`${H}h${V>0?` ${V}m`:""}`:`${V} minutes`;return e.jsx("option",{value:F,children:U},F)})})]}),e.jsxs("div",{className:R.equipmentSection,children:[e.jsx("label",{children:"Equipment Available"}),e.jsx("div",{className:R.equipmentList,children:Gn.map(S=>e.jsx(G,{type:"button",onClick:()=>m(N=>N.includes(S)?N.filter(F=>F!==S):[...N,S]),className:`${R.equipment} ${u.includes(S)?R.selected:""}`,children:S},S))})]}),e.jsxs("label",{children:["Exercises to Include",e.jsx("input",{type:"text",value:b,onChange:S=>L(S.target.value),placeholder:"e.g. Squats, Pushups"})]}),e.jsxs("label",{children:["Exercises to Exclude",e.jsx("input",{type:"text",value:g,onChange:S=>I(S.target.value),placeholder:"e.g. Deadlifts"})]}),e.jsxs("label",{children:["Physical Considerations",e.jsx("input",{type:"text",value:B,onChange:S=>P(S.target.value),placeholder:"e.g. Bad knees"})]}),e.jsx(Re,{children:({open:S})=>e.jsxs("div",{className:R.heroSection,children:[e.jsxs(qe,{className:R.disclosureButton,children:["Let one of our XPets train you!",e.jsx(De,{className:`${R.chevron} ${S?R.rotate:""}`,"aria-hidden":"true"})]}),e.jsx(ze,{className:R.heroList,children:Un.map(N=>e.jsx(G,{type:"button",onClick:()=>c(N.name),className:`${R.hero} ${f===N.name?R.selected:""}`,style:{borderColor:typeof N.color=="string"&&N.color.includes("linear")?void 0:N.color,borderImage:N.color.includes("linear")?N.color:void 0,borderWidth:"3px",borderStyle:"solid"},children:N.name},N.name))})]})}),e.jsx(G,{type:"submit",children:"Generate Routine"})]})}function Ve({routine:t,setRoutines:a,menuOptions:r}){const{userData:o}=$();if(!t||t.length===0)return null;const s=i=>{console.log("Delete",i),E.delete(`/routines/delete/${i}`).then(()=>{a(h=>h==null?void 0:h.filter(u=>u._id!==i))}).catch(h=>{console.error("Failed to delete routine: ",h)})},l=i=>{console.log("Share ",i._id);const h={...i,communityRoutine:!0};E.patch(`/routines/update/${i._id}`,h).then(()=>{}).catch(u=>{console.error("Failed to share routine: ",u)})},y=i=>{E.post(`/routines/copy/${i._id}`,{userId:o==null?void 0:o.uid}).then(h=>{console.log("Copied routine:",h.data.routine),a==null||a(u=>[...u||[],h.data.routine])}).catch(h=>{console.error("Failed to copy routine:",h)})};return e.jsx("div",{className:"routine-accordion-list",children:t.map((i,h)=>e.jsx("div",{className:"routine-accordion",children:e.jsx(Re,{children:({open:u})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"accordion-header",children:[e.jsxs(qe,{className:"accordion-trigger",children:[e.jsx(De,{size:32,className:`chevron ${u?"open":""}`}),e.jsx("span",{className:"routine-title",children:i.routineName})]}),e.jsxs(Ut,{as:"div",className:"menu-wrapper",children:[e.jsx(Gt,{className:"menu-button",onClick:m=>m.stopPropagation(),children:e.jsx(Ht,{size:20})}),e.jsxs(Vt,{className:"menu-dropdown",children:[r.includes("Share")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>l(i),className:"menu-item",children:"Share"})}),r.includes("Delete")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>s(i._id),className:"menu-item",children:"Delete"})}),r.includes("Copy")&&e.jsx(he,{children:e.jsx("button",{onClick:()=>y(i),className:"menu-item",children:"Copy"})})]})]})]}),e.jsx(ze,{className:"accordion-panel",children:e.jsx("div",{className:"carousel-container",children:i.weeklySchedule.map((m,b)=>e.jsxs("div",{className:"carousel-card",children:[e.jsx("div",{className:"day-title",children:m.dayName}),e.jsx("div",{className:"day-exercises",children:m.exercises.map(L=>L.exercise).join(", ")}),e.jsx("button",{className:"start-button",children:"START WORKOUT"})]},m.dayName+b))})})]})})},i.routineName+h))})}function Vn(){const[t,a]=n.useState(),[r,o]=n.useState(!0),{userData:s}=$();return n.useEffect(()=>{E.get(`/routines?uid=${s==null?void 0:s.uid}`).then(l=>{a(l.data.routines)}).catch(l=>{console.error(l)}).finally(()=>o(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Ve,{routine:t,setRoutines:a,menuOptions:["Share","Delete"]})})}function Xn(){return e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})})}function Yn(){const[t,a]=n.useState(),[r,o]=n.useState(!0);return $(),n.useEffect(()=>{E.get("/routines?communityRoutine=true").then(s=>{a(s.data.routines)}).catch(s=>{console.error(s)}).finally(()=>o(!1))},[]),!t||t.length===0?e.jsx("p",{style:{padding:"1rem"},children:"You havn't created a routine yet!."}):r?e.jsx("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignContent:"center"},children:e.jsx(ce,{scale:2})}):e.jsx("div",{style:{display:"flex",width:"100%"},children:e.jsx(Ve,{routine:t,setRoutines:a,menuOptions:["Copy"]})})}function Kn(){return e.jsx("div",{className:R.container,children:e.jsxs(Oe,{children:[e.jsx(Pe,{className:R.tabList,children:["My Routines","Create","Update","Community Routines"].map(t=>e.jsx(Ee,{className:({selected:a})=>`${R.tabButton} ${a?R.active:""}`,children:t},t))}),e.jsxs(Xt,{children:[e.jsx(ae,{children:e.jsx(Vn,{})}),e.jsx(ae,{children:e.jsx(Hn,{})}),e.jsx(ae,{children:e.jsx(Xn,{})}),e.jsx(ae,{children:e.jsx(Yn,{})})]})]})})}const Qn=["Pet","Skills","Quests","Routines"];function Jn(){const[t,a]=n.useState(null),[r,o]=n.useState(!0),{userData:s,setUserData:l}=$(),[y,i]=n.useState(0),h=u=>{switch(Qn[u]){case"Pet":return e.jsx(Be,{});case"Skills":return e.jsx(vn,{});case"Quests":return e.jsx(Sn,{});case"Routines":return e.jsx(Kn,{});default:return e.jsx(Be,{})}};return n.useEffect(()=>{const u=Yt.throttle(()=>{console.log("Fetching user object..."),E.get(`/users/${s==null?void 0:s.uid}`).then(b=>{l(b.data),console.log("User data synced:",b.data)}).catch(b=>{console.error("Failed to fetch user:",b)})},1e4),m=()=>{console.log("User came back!"),u()};return s&&window.addEventListener("focus",m),()=>{s&&(window.removeEventListener("focus",m),u.cancel())}},[]),n.useEffect(()=>{const u=Kt(ie,m=>{console.log("Auth state changed:",m),console.log("User Data in App useEffect:",s),a(m),o(!1);const b=localStorage.getItem("userData");b&&l(JSON.parse(b))});return()=>u()},[]),console.log("App render - Loading:",r,"User:",t,"UserData:",s),r?e.jsx("div",{children:"Loading in app.tsx..."}):!t||!s?e.jsx(pe,{mode:"dark",children:e.jsx(Zo,{})}):s.bodyStats.weight===0?e.jsx(pe,{mode:"dark",children:e.jsx(en,{})}):e.jsx(pe,{mode:"dark",children:e.jsxs("div",{style:{background:"var(--salt-palette-background-primary)",backgroundSize:"8px 8px",maxHeight:"100dvh",minHeight:"100dvh",height:"100dvh",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,maxHeight:"calc(100dvh - 76px)",minHeight:"calc(100dvh - 76px)",height:"calc(100dvh - 76px)",display:"flex",flexDirection:"column",paddingBottom:"14px"},children:h(y)}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"76px"},children:e.jsx(Vo,{selectedIndex:y,setSelectedIndex:i})})]})})}Qt.createRoot(document.getElementById("root")).render(e.jsx(Jt.StrictMode,{children:e.jsx(Zt,{children:e.jsx(as,{children:e.jsx(cs,{children:e.jsx(js,{children:e.jsx(Jn,{})})})})})}));
